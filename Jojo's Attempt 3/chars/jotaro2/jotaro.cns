;プレイヤーvar--------------------------------------------------------------
;Var(0)  = 時止め用判定
;Var(1)  = ヒット間隔
;Var(2)  = 時止め時間
;Var(3)  = ジャンプ管理1（距離）
;Var(4)  = ジャンプ管理2（高さ）
;Var(5)  = 強弱管理
;Var(6)  = 入力関連1
;Var(7)  = 入力関連2
;Var(8)  = 1:スタンド出現中、2:タンデム中
;Var(9)  = スタンド出現中（即キャンセル用）
;Var(10) = 
;Var(11) = gethitvar(slidetime)
;Var(12) = モード判別
;Var(13) = 時止め時ctrl判定
;Var(14) = 時止め時ダメージ用
;Var(15) = 時止め時ダメージ合計
;Var(16) = スタンドのtarget有無
;Var(17) = 
;Var(18) = 
;Var(19) = タンデムキャンセル不可フラグ1
;Var(20) = タンデムキャンセル不可フラグ2
;Var(21) = タンデムキャンセル不可フラグ3
;Var(22) = タンデムキャンセル不可フラグ4
;Var(23) = タンデムキャンセル不可フラグ5
;Var(24) = pausetime用
;Var(25) = 先行入力（ボタン）
;Var(26) = 先行入力（コマンド）
;Var(27) = 燃焼エフェクト
;Var(28) = ヒットポーズ補正
;Var(29) = 空中復帰誘導
;Var(30) = gametime
;Var(31) = ライフ
;Var(32) = スタンドゲージ回復不可時間
;Var(33) = gethitvar(hitshaketime)
;Var(34) = gethitvar(hittime)
;Var(35) = ポーズ認識（本体helper）
;Var(36) = ポーズ認識（スタンドhelper）
;Var(37) = タンデム入力
;Var(38) = タンデム入力回数
;Var(39) = タンデム再入力不能時間
;Var(40) = 回り込み再入力不能時間
;Var(41) = ヒット判定
;Var(42) = コンボ数
;Var(43) = 
;Var(44) = KO時時間経過
;Var(45) = ライフによる攻撃力補正
;Var(46) = 相手ライフによる攻撃力補正
;Var(47) = Timeの代わり
;Var(48) = ダメージ補正On
;Var(49) = スタンドモード
;Var(50) = 吹き飛ばし判定
;Var(51) = スタンド消去不可時間判定
;Var(52) = キャラ判別
;Var(53) = 2段ジャンプ判定
;Var(54) = スタンドゲージ量
;Var(55) = 「WINNER」表示ON/OFF
;Var(56) = 「to be continued」表示ON/OFF
;Var(57) = ジョジョキャラの名前判別
;Var(58) = ファーストストライク判定
;Var(59) = AI判定

;fvar(0)  = 攻撃力補正
;fvar(1)  = 攻撃力補正
;fvar(2)  = cornerpush
;fvar(3)  = cornerpush引き継ぎ
;fvar(4)  = 
;fvar(5)  = 
;fvar(6)  = 
;fvar(7)  = 
;fvar(8)  = 
;fvar(9)  = 空中オラオラX初期値
;fvar(10) = 空中オラオラY初期値
;fvar(11) = 表示倍率
;fvar(12) = ポーズ誤認識回避
;fvar(13) = オラオラ音声用
;fvar(14) = 対DIO勝利
;fvar(15) = 
;fvar(16) = 
;fvar(17) = 
;fvar(18) = 
;fvar(19) = 
;fvar(20) = 相手瞬獄殺系判別
;fvar(21) = 
;fvar(22) = 
;fvar(23) = 
;fvar(24) = 
;fvar(25) = 
;fvar(26) = 
;fvar(27) = 
;fvar(28) = 
;fvar(29) = 
;fvar(30) = 
;fvar(31) = 
;fvar(32) = 
;fvar(33) = 
;fvar(34) = 
;fvar(35) = 
;fvar(36) = 
;fvar(37) = AI用タンデム内容判別フラグ
;fvar(38) = フィニッシュブロー判別
;fvar(39) = ゲームシステム判別

;スタンドvar----------------------------------------------------------------
;Var(0)  = 時止め用判定
;Var(1)  = ヒット間隔
;Var(2)  = タンデム現実行コマンド
;Var(3)  = タンデム待機コマンド
;Var(4)  = タンデムコマンド実行回数
;Var(5)  = 強弱管理
;Var(6)  = タンデム無敵時間
;Var(7)  = 本体とのX距離
;Var(8)  = 
;Var(9)  = 攻撃変化フラグ
;Var(10) = stateno1
;Var(11) = prevstateno1
;Var(12) = prevstateno2
;Var(13) = タンデム攻撃回数
;Var(14) = タンデム時近距離判定
;Var(15) = タンデム時仕込み
;Var(24) = pausetime用
;Var(41) = ヒット判定
;Var(47) = Timeの代わり

;fvar(1)  = 攻撃力補正
;fvar(2)  = cornerpush
;fvar(3)  = cornerpush引き継ぎ

;本体var--------------------------------------------------------------------
;Var(0)  = 時止め用判定


[Data]
life = 1000
power = 10000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 255
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = .833			;水平方向の縮尺（通常１）
yscale = 1.07			;垂直方向の縮尺（通常１）
ground.back = 15		;キャラの幅(後方,地上)
ground.front = 18		;キャラの幅(前方,地上)
air.back = 15			;キャラの幅(後方,空中)
air.front = 15		;キャラの幅(前方,空中)
height = 65			;キャラの高さ
attack.dist = 160		;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90	;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0		;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = -6, -105		;頭の大体の座標
mid.pos = 8, -72		;体の中心の大体の座標
shadowoffset = 0		;影の垂直方向のオフセット
draw.offset = 0,0		;使用しない

[Velocity]
walk.fwd  = 3.01		;前進の速度
walk.back = -2.08		;後退の速度
run.fwd  = 9, 0		;前ダッシュの速度（ホップする時はyを-にする）
run.back = -10,0		;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-11.8		;垂直ジャンプの速度
jump.back = -3.18		;後ジャンプの速度
jump.fwd = 3.42		;前ジャンプの速度
runjump.back = -4.5,-11	;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4.5,-11	;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-5.4		;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.8		;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.8		;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 0		;空中でジャンプする回数
airjump.height = 28		;空中でジャンプする最低限の高さ
yaccel = .6			;重力
stand.friction = .85		;立ち状態の摩擦係数
crouch.friction = .82	;屈み状態の摩擦係数

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = !var(49)
velset = 0,0

[State 0, 1]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Anim != 0+var(49) && Anim != 5+var(49)
trigger2 = Anim = 5+var(49) && AnimTime = 0 ;Turn anim over
value = 0+var(49)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State 0, 4]
type = ChangeState
trigger1 = IsHelper(10000)
value = 10000

[State 0, 4]
type = ChangeState
trigger1 = IsHelper(20000)
value = 20000

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type = C
physics = C
anim = 10+var(49)

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type = C
physics = C
anim = 11+var(49)
sprpriority = !var(49)

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6+var(49) && AnimTime = 0
value = 11+var(49)

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12+var(49)

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;歩き
[Statedef 20]
type = S
physics = S
sprpriority = !var(49)
ctrl = 1

[State 20, 1]
type = VelSet
trigger1 = !var(59)
trigger1 = command = "holdfwd"
trigger2 = var(59)
trigger2 = !vel X
trigger2 = random = [0,800]
trigger3 = var(59)
trigger3 = vel X > 0
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
trigger2 = !vel X
trigger3 = var(59)
trigger3 = vel X < 0
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = vel x > 0
trigger1 = Anim != 20+var(49) && Anim != 5+var(49)
trigger2 = Anim = 5+var(49) && AnimTime = 0
value = 20+var(49)

[State 20, 4]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = vel x < 0
trigger1 = Anim != 21+var(49) && Anim != 5+var(49)
trigger2 = Anim = 5+var(49) && AnimTime = 0
value = 21+var(49)

[State 20, 4]
type = changestate
triggerall = var(59)
trigger1 = time > 20
trigger1 = P2bodydist x <= 50 && anim = 20
trigger2 = inguarddist
trigger3 = roundstate != 2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ開始
[Statedef 40]
type    = S
physics = N
anim = 40+var(49)
ctrl = 0
velset = 0,0

[State 40, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 1]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
sysvar(1) = 1

[State 40, 2]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
trigger1 = Random = [500,550]
sysvar(1) = 0

[State 40, 3]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
trigger1 = Random = [600,650]
sysvar(1) = -1

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 4]
type = VarSet
triggerall = !var(59)
triggerall = Time = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 105
trigger1 = Command = "longjump"
var(3) = 1

[State 40, 4]
type = VarSet
triggerall = !var(59)
triggerall = Time = 0
trigger1 = PrevStateNo = 100 || PrevStateNo = 105
var(3) = 2

[State 40, 4]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 105
trigger1 = Random = [500,800]
var(3) = 1

[State 40, 4]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = PrevStateNo = 100 || PrevStateNo = 105
var(3) = 2

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 5]
type = VarSet
triggerall = !var(59)
trigger1 = command != "holdup"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = Random = [100,400]
var(4) = 1

[State 40, 6]
type = VelSet
trigger1 = time = 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))*ifelse((!var(49)&&var(3))||(var(49)&&var(3)=2),1.33,1)

[State 40, 8]
type = VelSet
trigger1 = time = 0
y = const(velocity.jump.y)*ifelse(!var(49)&&var(3)=1,1.1,1)

[State 40, 8]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = var(4)
y = .64
persistent = 0

[State 40, 10]
type = PosFreeze
trigger1 = 1

[State 50, 2]
type = ChangeAnim
trigger1 = Anim = 40+var(49)
trigger1 = AnimTime = 0
value = ifelse(!sysvar(1), 41, ifelse(sysvar(1)=1, 42, 43))+var(49)

[State 40, 10]
type = ChangeState
trigger1 = Anim = [41+var(49),43+var(49)]
trigger1 = AnimElemTime(1) = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ
[Statedef 50]
type    = A
physics = N

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = time = 0
trigger1 = Anim != [41+var(49),43+var(49)]
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(49)
y = ifelse(var(4),.5,.6)

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = var(49)
y = ifelse(var(3)||var(4),.5,.6)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;2段ジャンプ開始
[Statedef 48]
type    = A
physics = N
anim = 48+var(49)
ctrl = 0
velset = 0,0

[State 40, 1]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
sysvar(1) = (command = "holdfwd"-command = "holdback")*((P2Dist X >= 0)-(P2Dist X < 0))

[State 40, 1]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
sysvar(1) = 1

[State 40, 2]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
trigger1 = Random = [500,550]
sysvar(1) = 0

[State 40, 3]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
trigger1 = Random = [600,650]
sysvar(1) = -1

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 5]
type = VarSet
triggerall = !var(59)
trigger1 = command != "holdup"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = Random = [0,300]
var(4) = 1

[State 52, 1]
type = Turn
trigger1 = Time = 0
trigger1 = P2Dist X < 0

[State 40, 6]
type = VelSet
trigger1 = time = 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))*ifelse((!var(49)&&var(3))||(var(49)&&var(3)=2),1.33,1)

[State 40, 8]
type = VelSet
trigger1 = time = 0
y = const(velocity.jump.y)*ifelse(!var(49)&&var(3)=1,1.1,1)

[State 40, 8]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = var(4)
y = .64
persistent = 0

[State 40, 10]
type = PosFreeze
trigger1 = 1

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 0, 0
channel = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
var(53) = 1

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 60
ctrl = 1

;---------------------------------------------------------------------------
;2段ジャンプ
[Statedef 60]
type    = A
physics = N

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, Gravity]
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = ifelse(var(3)||var(4),.5,.6)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ着地
[Statedef 52]
type = S
physics = S
ctrl = 0
anim = 47+var(49)
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = Turn
trigger1 = Time = 1
trigger1 = P2Dist X < 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;ステップ
[Statedef 100]
type = S
physics = N
anim = 100+var(49)
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = !var(49) && AnimElem = 7
trigger2 = var(49) && AnimElemTime(6) = 1
value = 1

[State 100, 1]
type = VelSet
trigger1 = !var(49) && AnimElem = 2
trigger2 = var(49) && AnimElemTime(1) = 1
x = 9.17

[State 105, 1]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(49) && AnimElemTime(2) > 0
trigger2 = var(49) && AnimElemTime(1) > 1
x = .95

[State 100, 1]
type = VelSet
trigger1 = !var(49) && AnimElem = 6
trigger2 = var(49) && AnimElem = 9
x = 0

[State 100, 4]
type = ChangeAnim
triggerall = !var(49)
triggerall = AnimElemTime(4) = 1
trigger1 = !var(59)
trigger1 = command != "holdfwd"
value = anim
elem = 5

[State 100, 4]
type = ChangeAnim
triggerall = !var(49)
triggerall = AnimElemTime(2) >= 2
triggerall = AnimElemTime(5) < 0
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
value = anim
elem = 5

[State 100, 2]
type = AssertSpecial
trigger1 = !Ctrl
flag = NoWalk
flag2 = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = !var(59)
trigger1 = command = "holdup"
value = 40

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;バックステップ
[Statedef 105]
type = S
physics = N
ctrl = 0
anim = 105+var(49)
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = !var(49) && AnimElem = 8
trigger2 = var(49) && AnimElemTime(11) = 1
value = 1

[State 100, 1]
type = VelSet
trigger1 = !var(49) && AnimElem = 2
trigger2 = var(49) && AnimElemTime(1) = 1
x = -7.5

[State 105, 1]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(49) && AnimElemTime(2) > 0
trigger2 = var(49) && AnimElemTime(1) > 1
x = .95

[State 100, 1]
type = VelSet
trigger1 = !var(49) && AnimElem = 8
trigger2 = var(49) && AnimElem = 13
x = 0

[State 100, 4]
type = ChangeAnim
triggerall = !var(49)
triggerall = AnimElemTime(2) >= 2
triggerall = AnimElemTime(5) < 0
trigger1 = !var(59)
trigger1 = command = "holdfwd"
trigger2 = var(59)
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
value = anim
elem = 5

[State 100, 4]
type = ChangeState
trigger1 = !var(59)
trigger1 = command = "holdup"
value = 40

[State 101, 3]
type = CtrlSet
trigger1 = !var(49) && AnimElem = 9
value = 1

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = !var(59)

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = statetype != A
value = 120 + (statetype = C) +var(49)

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130+var(49)
value = 130+var(49)

[State 130, Hi to Lo]
type = ChangeState
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131+var(49)
value = 131+var(49)

[State 131, Lo to Hi]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = P2statetype = A
trigger3 = P2bodydist x <= 100
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = null;ChangeAnim
trigger1 = Anim != 132+var(49)
value = 132+var(49)

[State 132, 2]
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = statetype != A
value = 140 + (statetype = C) +var(49)

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype = H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150+var(49)

[State 150, 2]
type = ChangeState
trigger1 = !var(59)
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, 2]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 151 + 2*(P2statetype = C || P2bodydist x > 100)

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype = H
physics = S
anim = 150+var(49)

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
trigger3 = prevstateno = 810
trigger3 = numhelper(815) = 1
trigger4 = prevstateno = 811
trigger4 = numhelper(815) = 1
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
trigger1 = prevstateno != [810,811]
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
trigger1 = prevstateno != [810,811]
trigger2 = prevstateno = [810,811]
trigger2 = !numhelper(815)
value = 130
ctrl = 1

[State 151, 5]
type = ChangeState
triggerall = numhelper(815) = 1
trigger1 = command != "holdback"
trigger1 = prevstateno = 811
trigger2 = prevstateno = 810
trigger2 = helper(8500),var(4) + helper(8500),var(5) > helper(8500),var(3)
trigger3 = prevstateno = 810
trigger3 = helper(8500),var(4) + helper(8500),var(5) > helper(8500),var(6)
value = 811

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type = C
movetype = H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151+var(49)

[State 152, 3]
type = ChangeState
trigger1 = !var(59)
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, 3]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 151 + 2*(P2statetype = C || P2bodydist x > 100)

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type = C
movetype = H
physics = C
anim = 151+var(49)

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
trigger3 = prevstateno = 810
trigger3 = numhelper(815) = 1
trigger4 = prevstateno = 811
trigger4 = numhelper(815) = 1
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
trigger1 = prevstateno != [810,811]
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
trigger1 = prevstateno != [810,811]
trigger2 = prevstateno = [810,811]
trigger2 = !numhelper(815)
value = 131
ctrl = 1

[State 153, 5]
type = ChangeState
triggerall = numhelper(815) = 1
trigger1 = command != "holdback"
trigger1 = prevstateno = 811
trigger2 = prevstateno = 810
trigger2 = helper(8500),var(4) + helper(8500),var(5) > helper(8500),var(3)
trigger3 = prevstateno = 810
trigger3 = helper(8500),var(4) + helper(8500),var(5) > helper(8500),var(6)
value = 811

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype = H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = !var(49)
trigger2 = var(49) && time = 0
value = 152+var(49)

[State 154, 1]
type = ChangeAnim
trigger1 = var(49)
trigger1 = !HitShakeOver
trigger1 = animelem = 7
value = anim
elem = 6

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype = H
physics = N
anim = 152+var(49)

[State 154, 1]
type = ChangeAnim
trigger1 = var(49)
trigger1 = time = 0
value = anim
elem = 7

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype = H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+var(49)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(49)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)+var(49)))
value = 5047 + GetHitVar(animtype)+var(49) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
trigger3 = GetHitVar(animtype) = [3,5]
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+var(49)
trigger2 = anim = 5010+var(49)
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+var(49)
trigger2 = anim = 5011+var(49)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+var(49)
trigger2 = anim = 5002+var(49)
trigger3 = anim = 5030+var(49)
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype = H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = 1
persistent = 0

[State 5001, 2]
type = ChangeAnim
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = 5005 + GetHitVar(animtype) + ((GetHitVar(groundtype)=2)*10)+var(49)
persistent = 0

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
trigger1 = !var(11)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver && !var(34)
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver && !var(34)
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver && !var(34)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type = C
movetype = H
physics = N
velset = 0,0

[State 5010, 0]
type = StateTypeSet
triggerall = Time = 0
triggerall = var(49)
trigger1 = prevstateno = [5010,5011]
trigger2 = prevstateno = [15010,15011]
statetype = s

[State 5010, 0]
type = ChangeState
triggerall = Time = 0
triggerall = var(49)
trigger1 = prevstateno = [5010,5011]
trigger2 = prevstateno = [15010,15011]
value = 5000

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)+var(49)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(49)

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)+var(49)))
value = 5047 + GetHitVar(animtype)+var(49);5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
trigger3 = GetHitVar(animtype) = [3,5]
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020+var(49)
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021+var(49)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022+var(49)
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type = C
movetype = H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = 1
persistent = 0

[State 5011, 2]
type = ChangeAnim
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = 5025 + GetHitVar(animtype)+var(49)
persistent = 0

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
trigger1 = !var(11)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver && !var(34)
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver && !var(34)
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver && !var(34)
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype = H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)+var(49)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(49)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)+var(49)))
value = 5047 + GetHitVar(animtype)+var(49);5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+var(49)
trigger2 = anim = 5010+var(49)
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+var(49)
trigger2 = anim = 5011+var(49)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+var(49)
trigger2 = anim = 5002+var(49)
trigger3 = anim = 5030+var(49)
trigger4 = anim = [5051+var(49),5059+var(49)]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype = H
physics = N
ctrl = 0

[State 5030, 1]
type = ChangeAnim
triggerall = anim = [15000,15999]
triggerall = !alive
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = anim-10000
persistent = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = 1
y = 1
persistent = 0

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver && !var(34)
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver && !var(34)
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = ifelse(var(49)&&alive,5040,5050) ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(var(49)&&alive,5040,5035) ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype = H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = var(0) != -1
trigger1 = var(0) != 2
trigger1 = SelfAnimExist(5035+var(49))
trigger1 = Anim != [5051+var(49),5059+var(49)];Not if in hit up anim
trigger1 = Anim != 5090+var(49) ;Not if hit off ground anim
value = 5035+var(49)
persistent = 0

[State 5035, 2]
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver && !var(34)  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = var(0) != -1    ;No transition anim
trigger4 = var(0) != 2     ;No transition anim
trigger4 = Anim != 5035+var(49) ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver && !var(34)  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = var(0) != -1    ;No transition anim
trigger4 = var(0) != 2     ;No transition anim
trigger4 = Anim != 5035+var(49) ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype = H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040+var(49)
trigger2 = Time = 0
trigger2 = Anim != 5035+var(49)
value = 5040+var(49)

[State 5040, 3]
type = null;CtrlSet
trigger1 = HitOver && !var(34)
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver && !var(34)
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 4] ;Recover near ground
type = ChangeState
triggerall = !var(49)
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = HitOver && !var(34);CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 5]; Recover in mid air
type = ChangeState
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = Vel Y > -1
triggerall = alive
triggerall = HitOver && !var(34);CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype = H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = var(0) != -1     ;If no transition anim
trigger2 = var(0) != 2
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = var(0) != 2
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = !var(49)
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype = H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim 
trigger1 = time = 0
value = 5070+var(49)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype = H
physics = N

[State 5071, 1]
type = ChangeAnim
trigger1 = var(0) != -1
trigger1 = var(0) != 2
trigger1 = anim != [5000,5999]
trigger1 = !alive
value = anim-10000
persistent = 0

[State 5071, 1]
type = HitVelSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = 1
y = 1
persistent = 0

[State 5070, 2]
type = ChangeState
trigger1 = var(0) != -1
trigger1 = var(0) != 2
trigger1 = var(49)&&alive
value = 5040

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = GetHitVar(yaccel)

[State 5071, 3] ;Recover near ground
type = ChangeState
triggerall = !var(49)
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5071, 4] ;Hit ground
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype = H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse(GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype = H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = 1
persistent = 0

[State 5081, 2]
type = VelSet
trigger1 = HitOver && !var(34)
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
sysvar(0) = 1
persistent = 0

[State 5081, 4]
type = ChangeState
trigger1 = HitOver && !var(34)
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype = H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
trigger1 = !SysVar(0)
Anim = 8150
id = 8150
pos = 0, 0
ownpal = 1
sprpriority = -2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*(var(0)>0)

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 5100,0

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 1
time = 15
ampl = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = Time = 1
value = 5110

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype = H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = 5070
value = 5171

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = !alive
triggerall = anim != [5110,5119] ;Not already changed anim
triggerall = anim != [5170,5179]
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5145

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = alive
triggerall = anim != [5110,5119] ;Not already changed anim
triggerall = anim != [5170,5179]
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = alive
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
triggerall = prevstateno != 5100 && prevstateno != 15100
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 5100,0

[State 1000, Spark]
type = Explod
triggerall = prevstateno != 5100 && prevstateno != 15100
trigger1 = Time = 0
trigger1 = !SysVar(0)
Anim = 8150
id = 8150
pos = 0, 0
ownpal = 1
sprpriority = -2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = var(0) != -1
trigger1 = var(0) != 2
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype = H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035+var(49)
trigger1 = AnimTime = 0
value = 5050+var(49)

[State 5200, 2]
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype = I
physics = N
anim = 5200+var(49)
velset = 0,0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = animelem = 2 && !var(49)
trigger2 = time = 8 && var(49)
x = -6.7

[State 5201, 2]
type = VelMul
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = .95

[State 5201, 2]
type = VelSet
trigger1 = animelem = 8 && !var(49)
trigger2 = time = 24 && var(49)
x = 0

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = SCA

[State 9606, EnvColor]
type = palfx
trigger1 = time <= 8
trigger1 = time%2=1
add = 128,128,192
time = 1
persistent = 1
ignorehitpause = 1

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8160
id = 8160
pos = 0, 0
ownpal = 1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 9606, EnvColor]
type = palfx
trigger1 = time <= 8
trigger1 = time%2=1
add = 128,128,192
time = 1
persistent = 1
ignorehitpause = 1

[State 5210, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5210+var(49)

[State 5210, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Command = "holddown"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
value = 5211+var(49)

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 2] ;Go fwd
type = VelSet
trigger1 = Time = 1
trigger1 = Command = "holdfwd"
x = 5
y = -8.5

[State 5210, 2] ;Go back
type = VelSet
trigger1 = Time = 1
trigger1 = Command = "holdback"
x = -5
y = -8.5

[State 5210, 2] ;Go down
type = VelSet
trigger1 = Time = 1
trigger1 = Command = "holddown"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
x = 0
y = 0

[State 5210, 2] ;Go up
type = VelSet
trigger1 = Time = 1
trigger1 = Command != "holddown"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
x = 0
y = -9.5

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = Gravity
trigger1 = var(0) != -1
trigger1 = var(0) != 2

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; タイムオーバー負け
[Statedef 170]
type = S
ctrl = 0
velset = 0,0

[State -2, 3]
type = ChangeAnim
triggerall = !var(49)
trigger1 = time = 0
value = 170

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 150]
flag = RoundNotOver

;---------------------------------------------------------------------------
; タイムオーバー引き分け
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State -2, 3]
type = ChangeAnim
triggerall = !var(49)
trigger1 = time = 0
value = 170

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 150]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S
ctrl = 0
velset = 0,0

[State 180, 1]
type = ChangeState
trigger1 = fvar(14) = 2
trigger1 = time = 1
value = 182

[State 180, 1]
type = ChangeState
trigger1 = fvar(14) = 5
trigger1 = time = 1
value = 184

[State 180, 1]
type = ChangeState
trigger1 = var(57) = 4
trigger1 = time = 1
value = 181+(random%2)

[State 180, 1]
type = ChangeState
trigger1 = time = 1
value = 181+(random%3)

;---------------------------------------------------------------------------
;勝ちポーズ1
[Statedef 181]
type = S
physics = S
ctrl = 0
velset = 0,0
sprpriority = !var(49)

[State 220, Position]
type = PosAdd
triggerall = !IsHelper
trigger1 = var(49)
trigger1 = time = 0
x = -20

[State -2, 3]
type = ChangeAnim
triggerall = !IsHelper
trigger1 = time = 0
value = 180+var(49)

[State -2, 3]
type = ChangeAnim
triggerall = IsHelper
trigger1 = time = 0
value = 180+(IsHelper(10000)*10000)

[State -2, 3]
type = SprPriority
trigger1 = time = 0
value = anim=180

[State 181, 2]
type = PlaySnd
trigger1 = anim = 180
trigger1 = AnimElem = 1
value = 181,0

[State 1000, Spark]
type = Explod
trigger1 = anim = 180
trigger1 = AnimElemTime(3) = 3
Anim = 7000
pos = 0, 0
postype = P1
ownpal = 1
bindtime = -1
removetime = -1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 10000, Assert]
type = AssertSpecial
trigger1 = anim = 10180
flag = noshadow

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 200]
flag = RoundNotOver

[State 810, 1]
type = helper
triggerall = !IsHelper
triggerall = !var(55) || (!var(56) && matchover)
trigger1 = time = 1
stateno = 6600
ID = 6600
pos = 0,100
name = "win"
pausemovetime = 999999999
supermovetime = 999999999

;---------------------------------------------------------------------------
;勝ちポーズ2
[Statedef 182]
type = S
physics = S
ctrl = 0
velset = 0,0

[State -2, 3]
type = ChangeAnim
triggerall = !IsHelper
triggerall = !var(49)
trigger1 = time = 0
value = 181

[State -2, 3]
type = ChangeAnim
triggerall = IsHelper(10000)
trigger1 = time = 0
value = 6900

[State -2, 3]
type = ChangeAnim
triggerall = IsHelper(20000)
trigger1 = time = 0
value = 181

[State -2, 3]
type = SprPriority
trigger1 = time = 0
value = anim=181

[State 181, 2]
type = PlaySnd
trigger1 = anim = 181
trigger1 = AnimElem = 1
value = 180,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = anim != 181
flag = noshadow

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

[State 810, 1]
type = helper
triggerall = !IsHelper
triggerall = !var(55) || (!var(56) && matchover)
trigger1 = time = 1
stateno = 6600
ID = 6600
pos = 0,100
name = "win"
pausemovetime = 99999999
supermovetime = 99999999

;---------------------------------------------------------------------------
;勝ちポーズ3
[Statedef 183]
type = S
physics = S
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosAdd
triggerall = !IsHelper
trigger1 = var(49)
trigger1 = time = 0
x = -20

[State -2, 3]
type = ChangeAnim
triggerall = !IsHelper
trigger1 = time = 0
value = 182+var(49)

[State -2, 3]
type = ChangeAnim
triggerall = IsHelper
trigger1 = time = 0
value = 182+(IsHelper(10000)*10000)

[State -2, 3]
type = SprPriority
trigger1 = time = 0
value = anim=182

[State 181, 2]
type = PlaySnd
trigger1 = anim = 182
trigger1 = AnimElem = 6
value = 182,0
persistent = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 182
trigger1 = time = 90
value = 182,1
persistent = 0

[State 10000, Assert]
type = AssertSpecial
trigger1 = anim = 10182
flag = noshadow

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

[State 810, 1]
type = helper
triggerall = !IsHelper
triggerall = !var(55) || (!var(56) && matchover)
trigger1 = time = 1
stateno = 6600
ID = 6600
pos = 0,100
name = "win"
pausemovetime = 99999999
supermovetime = 99999999

;---------------------------------------------------------------------------
;勝ちポーズ4（対DIO（最終ラウンド））
[Statedef 184]
type = S
physics = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 183,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 300]
flag = RoundNotOver

[State 810, 1]
type = helper
triggerall = !IsHelper
triggerall = !var(55) || (!var(56) && matchover)
trigger1 = time = 1
stateno = 6600
ID = 6600
pos = 0,100
name = "win"
pausemovetime = 99999999
supermovetime = 99999999

;---------------------------------------------------------------------------
;特殊KO（対DIO）（待機）
[Statedef 4800]
type = S
physics = S
sprpriority = 1
velset = 0,0
ctrl = 0

[State 0, 1]
type = ChangeAnim
trigger1 = P2dist X < -5
trigger1 = anim != 5
value = 5

[State 0, 1]
type = Turn
trigger1 = anim = 5
trigger1 = animtime = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
value = 0

[State 0, 4]
type = ChangeState
triggerall = prevstateno != [4800,4802]
trigger1 = P2Stateno = 4851
trigger1 = P2Dist X > 120
value = 4801

[State 0, 4]
type = ChangeState
triggerall = prevstateno != [4800,4802]
trigger1 = P2Stateno = 4851
trigger1 = P2dist X < 45
trigger1 = backedgedist > 0
value = 4802

[State 191, Cloth]
type = Helper
triggerall = !NumHelper(4999)
trigger1 = P2Stateno = 4852
ID = 4999
stateno = 4999
postype = P1
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State 0, 4]
type = ChangeState
trigger1 = P2Stateno = 4852
value = 4810

;---------------------------------------------------------------------------
;特殊KO（対DIO）（前進）
[Statedef 4801]
type = S
physics = N
anim = 20
velset = const(velocity.walk.fwd.x),0

[State 20, 4]
type = changestate
trigger1 = time > 1
trigger1 = P2dist X < 90
value = 4800

;---------------------------------------------------------------------------
;特殊KO（対DIO）（後退）
[Statedef 4802]
type = S
physics = N
anim = 21
velset = const(velocity.walk.back.x),0

[State 20, 4]
type = changestate
triggerall = time > 1
trigger1 = P2dist X > 90
trigger2 = backedgedist <= 0
value = 4800

;---------------------------------------------------------------------------
;特殊KO（対DIO）
[Statedef 4810]
type = S
physics = S
sprpriority = 1
velset = 0,0

[State 0, 1]
type = VarSet
trigger1 = time = 0
fvar(14) = 2

[State 191, Cloth]
type = Helper
trigger1 = time = 111
ID = 4800
stateno = 14800
postype = P1
pos = ceil(P2dist x-50),0
name = "dummy_stand_win1"

[State 0, 1]
type = ChangeAnim
trigger1 = time = 111
value = 4810

[State 20, 4]
type = changestate
trigger1 = time > 120
trigger1 = !NumHelper(4800)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊KO（対DIO）（スタンド）
[Statedef 14800]
type = S
ctrl = 0
anim = 14800
velset = 0,0
sprpriority = 2

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(13) = 0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 23
trigger2 = AnimElem = 26
trigger3 = AnimElem = 29
trigger4 = AnimElem = 32
trigger5 = AnimElem = 35
trigger6 = AnimElem = 38
trigger7 = AnimElem = 41
trigger8 = AnimElem = 44
trigger9 = AnimElem = 47
trigger10 = AnimElem = 50
trigger11 = AnimElem = 53
trigger12 = AnimElem = 56
trigger13 = AnimElem = 59
trigger14 = AnimElem = 62
trigger15 = AnimElem = 65
trigger16 = AnimElem = 68
trigger17 = AnimElem = 71
trigger18 = AnimElem = 74
trigger19 = AnimElem = 77
trigger20 = AnimElem = 80
trigger21 = AnimElem = 83
trigger22 = AnimElem = 86
trigger23 = AnimElem = 89
trigger24 = AnimElem = 92
trigger25 = AnimElem = 95
trigger26 = AnimElem = 98
trigger27 = AnimElem = 101
trigger28 = AnimElem = 104
trigger29 = AnimElem = 107
trigger30 = AnimElem = 110
trigger31 = AnimElem = 113
trigger32 = AnimElem = 116
value = 1, 5

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 121
value = 2, 5

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 9
value = 3000, 0
channel = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = AnimElem = 23
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 3
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-73*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 23
trigger2 = AnimElem = 35
trigger3 = AnimElem = 47
trigger4 = AnimElem = 59
trigger5 = AnimElem = 71
trigger6 = AnimElem = 83
trigger7 = AnimElem = 95
trigger8 = AnimElem = 107
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-76*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 26
trigger2 = AnimElem = 38
trigger3 = AnimElem = 50
trigger4 = AnimElem = 62
trigger5 = AnimElem = 74
trigger6 = AnimElem = 86
trigger7 = AnimElem = 98
trigger8 = AnimElem = 110
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-60*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 29
trigger2 = AnimElem = 41
trigger3 = AnimElem = 53
trigger4 = AnimElem = 65
trigger5 = AnimElem = 77
trigger6 = AnimElem = 89
trigger7 = AnimElem = 101
trigger8 = AnimElem = 113
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-92*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 32
trigger2 = AnimElem = 44
trigger3 = AnimElem = 56
trigger4 = AnimElem = 68
trigger5 = AnimElem = 80
trigger6 = AnimElem = 92
trigger7 = AnimElem = 104
trigger8 = AnimElem = 116
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-48*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 121
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 2601, EnvShake]
type = EnvShake
trigger1 = AnimElem = 23
trigger2 = AnimElem = 26
trigger3 = AnimElem = 29
trigger4 = AnimElem = 32
trigger5 = AnimElem = 35
trigger6 = AnimElem = 38
trigger7 = AnimElem = 41
trigger8 = AnimElem = 44
trigger9 = AnimElem = 47
trigger10 = AnimElem = 50
trigger11 = AnimElem = 53
trigger12 = AnimElem = 56
trigger13 = AnimElem = 59
trigger14 = AnimElem = 62
trigger15 = AnimElem = 65
trigger16 = AnimElem = 68
trigger17 = AnimElem = 71
trigger18 = AnimElem = 74
trigger19 = AnimElem = 77
trigger20 = AnimElem = 80
trigger21 = AnimElem = 83
trigger22 = AnimElem = 86
trigger23 = AnimElem = 89
trigger24 = AnimElem = 92
trigger25 = AnimElem = 95
trigger26 = AnimElem = 98
trigger27 = AnimElem = 101
trigger28 = AnimElem = 104
trigger29 = AnimElem = 107
trigger30 = AnimElem = 110
trigger31 = AnimElem = 113
trigger32 = AnimElem = 116
time = 12
ampl = 3

[State 2601, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
trigger2 = AnimElem = 121
time = 30
ampl = 8

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 198

;---------------------------------------------------------------------------
;特殊KO（対DIO）（相手）1
[Statedef 4850]
type    = A
movetype = H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= 0
trigger1 = !(name = "DIO" && authorname = "warusaki3")
value = 5100 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4851 ;HIT_BOUNCE

;---------------------------------------------------------------------------
;特殊KO（対DIO）（相手）2
[Statedef 4851]
type    = L
movetype = H
physics = N
velset = 0,0

[State 190, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 4851
persistent = 0

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = P2dist X < 0

[State 0, 1]
type = VarSet
trigger1 = time = 0
fvar(14) = 1

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 3001, Width]
type = Width
trigger1 = Time = 0
edge = 0,15

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = prevstateno != 3308
trigger1 = Time = 0
value = 5100,0

[State 1000, Spark]
type = Explod
trigger1 = prevstateno != 3308
trigger1 = Time = 0
Anim = 8150
id = 8150
pos = 0, 0
ownpal = 1
sprpriority = -2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999

[State 5110, 11] ;If just died
type = ChangeState
trigger1 = time > 60
value = 4852

;---------------------------------------------------------------------------
;特殊KO（対DIO）（相手）3
[Statedef 4852]
type = S
ctrl = 0
anim = 4852

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = P2dist X < 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3200, 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 18
value = 3200, 1
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 25
value = 5000, 1
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimTime = -10
value = 11, 0

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4853

;---------------------------------------------------------------------------
;特殊KO（対DIO）（相手）4
[Statedef 4853]
type    = A
movetype = H
physics = N
anim = 5030
velset = -10,-6

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = ScreenBound
trigger1 = 1
value = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = .2

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（待機）
[Statedef 4900]
type = S
physics = S
sprpriority = 1
velset = 0,0
ctrl = 0

[State 0, 1]
type = ChangeAnim
trigger1 = P2dist X < 0
trigger1 = anim != 5
value = 5

[State 0, 1]
type = Turn
trigger1 = anim = 5
trigger1 = animtime = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
value = 0

[State 0, 4]
type = ChangeState
triggerall = prevstateno != [4800,4801]
trigger1 = P2Stateno = 4951
trigger1 = P2Dist X > 200
value = 4901

[State 0, 4]
type = ChangeState
triggerall = prevstateno != [4800,4801]
trigger1 = P2Stateno = 4951
trigger1 = P2dist X < 120
trigger1 = backedgedist > 0
value = 4902

[State 191, Cloth]
type = Helper
triggerall = !NumHelper(4999)
trigger1 = P2Stateno = 4952
ID = 4999
stateno = 4999
postype = P1
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State 0, 4]
type = ChangeState
trigger1 = P2Stateno = 4952
value = 4910

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（前進）
[Statedef 4901]
type = S
physics = N
anim = 20
velset = const(velocity.walk.fwd.x),0

[State 20, 4]
type = changestate
trigger1 = time > 1
trigger1 = P2dist X < 160
value = 4900

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（後退）
[Statedef 4902]
type = S
physics = N
anim = 21
velset = const(velocity.walk.back.x),0

[State 20, 4]
type = changestate
triggerall = time > 1
trigger1 = P2dist X > 120
trigger2 = backedgedist <= 0
value = 4900

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））
[Statedef 4910]
type = S
physics = S
sprpriority = 1
velset = 0,0

[State 0, 1]
type = VarSet
trigger1 = time = 0
fvar(14) = 5

[State 191, Cloth]
type = Helper
trigger1 = time = 86
ID = 4900
stateno = 14900
postype = P1
pos = ceil((P2dist X-100)*const(size.xscale)*.5),0
name = "dummy_stand_win2"

[State 1000, Spark]
type = Helper
trigger1 = time = 126
stateno = 7100
id = 7100
pos = 10, -30
postype = P2
ownpal = 1
pausemovetime = 99999999

[State 0, 1]
type = ChangeAnim
trigger1 = time = 86
value = 4810

[State 20, 4]
type = changestate
trigger1 = time = 360
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（スタンド）
[Statedef 14900]
type = S
ctrl = 0
anim = 14900
velset = 0,0
sprpriority = -1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2, 5

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
channel = 0

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 3
Anim = 8215
id = 8215
pos = ceil(64*const(size.xscale)),ceil(-104*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 2601, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 30
ampl = 8

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 14901

;------------------------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（スタンド消滅）
[Statedef 14901]
physics = N
ctrl = 0
anim = 14901
sprpriority = -1
velset = -.8,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 420, 3]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（相手）1
[Statedef 4950]
type    = A
movetype = H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= 0
trigger1 = !(name = "final DIO" && authorname = "warusaki3")
value = 5100 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4951 ;HIT_BOUNCE

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（相手）2
[Statedef 4951]
type    = L
movetype = H
physics = N
velset = 0,0

[State 190, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 4951
persistent = 0

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = P2dist X < 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 3001, Width]
type = Width
trigger1 = Time = 0
edge = 0,30

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = prevstateno != 3308
trigger1 = Time = 0
value = 5100,0

[State 1000, Spark]
type = Explod
trigger1 = prevstateno != 3308
trigger1 = Time = 0
Anim = 8150
id = 8150
pos = 0, 0
ownpal = 1
sprpriority = -2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999

[State 5110, 11] ;If just died
type = ChangeState
trigger1 = time > 60
value = 4952

;---------------------------------------------------------------------------
;特殊KO（対DIO（最終ラウンド））（相手）3
[Statedef 4952]
type = S
ctrl = 0
anim = 4952
sprpriority = -1

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = P2dist X < 0

[State 0, 1]
type = VarSet
trigger1 = time = 0
fvar(14) = 1

[State 191, Cloth]
type = Helper
trigger1 = time = 80
ID = 4950
stateno = 14950
postype = P1
pos = ceil((P2dist X-150)*const(size.xscale)*.5),0
name = "dummy_stand_lose"

[State 191, Cloth]
type = Helper
trigger1 = AnimElemTime(85) = 1
ID = 7110
stateno = 7110
postype = P1
pos = ceil(-56*const(size.xscale)),ceil(-100*const(size.yscale))

[State 1000, Spark]
type = Explod
trigger1 = AnimElemTime(85) = 1
Anim = 7101
id = 7101
pos = 0,0
postype = P1
ownpal = 1
sprpriority = 0
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3000, 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 45
value = 5000, 1

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 85
value = 11, 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 85
value = 2, 12

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 90
Anim = 8150
id = 8150
pos = 0, 0
ownpal = 1
sprpriority = -2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 5110, 6]
type = PlaySnd
trigger1 = AnimElem = 90
value = 5100,0

[State 2601, EnvShake]
type = EnvShake
trigger1 = AnimElem = 90
time = 10

[State 5050, 6]
type = SelfState
trigger1 = AnimTime = 0
value = 5150

;---------------------------------------------------------------------------
;特殊KO（バー非表示）
[Statedef 4999]
type = S
ctrl = 0
anim = 6900

[State 1000, 0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

;---------------------------------------------------------------------------
;イントロ
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 860, 4]
type = PowerSet
trigger1 = RoundsExisted = 0
trigger1 = time = 0
trigger1 = power < 1000
value = 1000

[State -2, 3]
type = ChangeState
trigger1 = (P2Name = "DIO" || P4Name = "DIO") && EnemyNear,AuthorName = "warusaki3"
value = 193

[State -2, 3]
type = ChangeState
trigger1 = (P2Name = "final dio" || P4Name = "final dio") && EnemyNear,AuthorName = "warusaki3"
value = 194

[State -2, 3]
type = ChangeState
triggerall = teamside = 1
trigger1 = (P2Name = "Jotaro Kujo" || P4Name = "Jotaro Kujo") && EnemyNear,AuthorName = "warusaki3"
value = 191+(random%2)

[State -2, 3]
type = ChangeState
triggerall = teamside = 2
trigger1 = (P2Name = "Jotaro Kujo" || P4Name = "Jotaro Kujo") && EnemyNear,AuthorName = "warusaki3"
value = 191+(P2stateno=191)

[State -2, 3]
type = ChangeState
trigger1 = Time = 0
value = 191+(random%2)

;---------------------------------------------------------------------------
;イントロ1
[Statedef 191]
type = S
ctrl = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State -2, 3]
type = ChangeAnim
triggerall = time = 0
trigger1 = !var(57)
value = 190+(random%3)

[State -2, 3]
type = ChangeAnim
triggerall = time = 0
trigger1 = var(57) = 1
trigger2 = var(57) = 5
value = 190

[State -2, 3]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(57) = 2
value = 191

[State -2, 3]
type = ChangeAnim
triggerall = time = 0
trigger1 = var(57) = 3
trigger2 = var(57) = 4
value = 192

[State 181, 2]
type = PlaySnd
trigger1 = anim = 190
trigger1 = AnimElem = 1
value = 190, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 191
trigger1 = AnimElem = 1
value = 180, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 192
trigger1 = AnimElem = 1
trigger1 = var(57) = 4
value = 190, 3
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 192
trigger1 = AnimElem = 1
trigger1 = var(57) != 4
value = 195, 0
channel = 0

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ2
[Statedef 192]
type = S
ctrl = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State -2, 3]
type = ChangeAnim
trigger1 = anim = 0
trigger1 = AnimTime = 0
value = 0
elem = 1

[State -2, 3]
type = ChangeAnim
triggerall = time > 1
triggerall = anim = 0
triggerall = !var(57)
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 400
value = 190+(random%3)
persistent = 0

[State -2, 3]
type = ChangeAnim
triggerall = time > 1
triggerall = anim = 0
triggerall = var(57) = 1
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 400
value = 190
persistent = 0

[State -2, 3]
type = ChangeAnim
triggerall = time > 1
triggerall = anim = 0
triggerall = var(57) = 2
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 400
value = 191
persistent = 0

[State -2, 3]
type = ChangeAnim
triggerall = time > 1
triggerall = anim = 0
triggerall = var(57) = [3,5]
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 400
value = 192
persistent = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 190
trigger1 = AnimElem = 1
value = 190, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 191
trigger1 = AnimElem = 1
value = 180, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 192
trigger1 = AnimElem = 1
trigger1 = var(57) = 4
value = 190, 3
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = anim = 192
trigger1 = AnimElem = 1
trigger1 = var(57) != 4
value = 195, 0
channel = 0

[State 190, 4]
type = ChangeState
triggerall = anim = [190,192]
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ3（DIO）
[Statedef 193]
type = S
ctrl = 0
anim = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State -2, 3]
type = ChangeAnim
trigger1 = time = 30
value = 21050

[State -2, 3]
type = ChangeAnim
triggerall = anim = 21050
trigger1 = NumHelper(193)
trigger1 = Helper(193),stateno = 198
value = 193

[State 191, Cloth]
type = Helper
trigger1 = time = 25
ID = 193
stateno = 197
postype = Back
pos = 100,0
name = "dummy_stand"

[State 181, 2]
type = PlaySnd
trigger1 = time = 20
value = 3000, 0

[State 220, Voice]
type = PlaySnd
trigger1 = NumHelper(193)
trigger1 = Helper(193),stateno = 197
trigger1 = Helper(193),animelem = 12
value = 1000, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = NumHelper(193)
trigger1 = Helper(193),stateno = 197
trigger1 = Helper(193),animelem = 24
value = 1000, 1
channel = 0
loop = 1

[State 220, Voice]
type = PlaySnd
trigger1 = NumHelper(193)
trigger1 = Helper(193),stateno = 197
trigger1 = Helper(193),animelem = 61
value = 1000, 2
channel = 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 193
trigger1 = AnimElem = 4
value = 195, 0
channel = 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 193
trigger1 = AnimElem = 24
value = 190, 3
channel = 0

[State 810, 6]
type = NotHitBy
trigger1 = 1
value = SCA

[State 190, 4]
type = ChangeState
triggerall = anim = 193
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ3（DIO）（ダミー）
[Statedef 197]
type = S
ctrl = 0
anim = 10193
velset = 0,0
sprpriority = 2

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
trigger4 = AnimElem = 21
trigger5 = AnimElem = 24
trigger6 = AnimElem = 27
trigger7 = AnimElem = 30
trigger8 = AnimElem = 33
trigger9 = AnimElem = 36
trigger10 = AnimElem = 39
trigger11 = AnimElem = 42
trigger12 = AnimElem = 45
trigger13 = AnimElem = 48
trigger14 = AnimElem = 51
trigger15 = AnimElem = 54
trigger16 = AnimElem = 57
value = 1, 5

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 62
value = 2, 5

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 24
trigger3 = AnimElem = 36
trigger4 = AnimElem = 48
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-76*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 15
trigger2 = AnimElem = 27
trigger3 = AnimElem = 39
trigger4 = AnimElem = 51
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-60*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 18
trigger2 = AnimElem = 30
trigger3 = AnimElem = 42
trigger4 = AnimElem = 54
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-92*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 21
trigger2 = AnimElem = 33
trigger3 = AnimElem = 45
trigger4 = AnimElem = 57
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-48*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 62
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 2601, EnvShake]
type = EnvShake
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
trigger4 = AnimElem = 21
trigger5 = AnimElem = 24
trigger6 = AnimElem = 27
trigger7 = AnimElem = 30
trigger8 = AnimElem = 33
trigger9 = AnimElem = 36
trigger10 = AnimElem = 39
trigger11 = AnimElem = 42
trigger12 = AnimElem = 45
trigger13 = AnimElem = 48
trigger14 = AnimElem = 51
trigger15 = AnimElem = 54
trigger16 = AnimElem = 57
time = 12
ampl = 3

[State 2601, EnvShake]
type = EnvShake
trigger1 = AnimElem = 62
time = 30
ampl = 8

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 198

;------------------------------------------------------------------------------------------
;スタンド消滅
[Statedef 198]
type = U
physics = N
velset = 0,0
ctrl = 0
anim = 11105
sprpriority = 2

[State 220, Effect]
type = PlaySnd
trigger1 = time = 1
value = 820, 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 4900, 16]
type = AngleDraw
trigger1 = time < 12
scale = 1-(.075*Time),1+(.05*Time)
ignorehitpause = 1

[State 4900, 16]
type = AngleDraw
trigger1 = time >= 12
scale = 0,0
ignorehitpause = 1

[State 420, 3]
type = DestroySelf
trigger1 = time = 12

;---------------------------------------------------------------------------
;イントロ4（DIO（最終ラウンド））
[Statedef 194]
type = S
ctrl = 0
anim = 6900

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State -2, 3]
type = ChangeAnim
trigger1 = time = 85
value = 194

[State 191, Cloth]
type = Helper
trigger1 = time = 60
ID = 199
stateno = 199
postype = p1
pos = -120,-160
name = "dummy"

[State 1000, Spark]
type = Helper
triggerall = anim = 194
trigger1 = AnimElem = 9
stateno = 7100
id = 7100
pos = 160, 0
postype = Back
ownpal = 1
pausemovetime = 99999999

[State 181, 2]
type = PlaySnd
triggerall = anim = 194
trigger1 = AnimElem = 1
value = 52, 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 194
trigger1 = AnimElem = 33
value = 195, 0
channel = 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 194
trigger1 = AnimElem = 107
value = 190, 3
channel = 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 194
trigger1 = AnimElem = 117
value = 190, 1
channel = 0

[State 190, 4]
type = ChangeState
triggerall = anim = 194
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ4（DIO（最終ラウンド））（ダミー）
[Statedef 199]
type = S
ctrl = 0
anim = 44
velset = 4,0

[State 1100, Velocity]
type = VelAdd
trigger1 = 1
y = .5

[State 190, 4]
type = DestroySelf
trigger1 = Pos Y >= 0 && Vel Y > 0

;---------------------------------------------------------------------------
;挑発1
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195+var(49)
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 181, 2]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 1
value = 180, 0
channel = 0
persistent = 0

[State 195, 2]
type = ChangeState
trigger1 = !var(49)
trigger1 = AnimTime = 0
trigger2 = var(49)
trigger2 = Helper(20000),anim = 195
trigger2 = Helper(20000),animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;挑発2
[Statedef 196]
type = S
movetype = I
physics = S
ctrl = 0
anim = 196+var(49)
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 181, 2]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 1
value = 195, random%2
channel = 0
persistent = 0

[State 195, 2]
type = ChangeState
trigger1 = !var(49)
trigger1 = AnimTime = 0
trigger2 = var(49)
trigger2 = Helper(20000),anim = 196
trigger2 = Helper(20000),animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱攻撃（本体）
[Statedef 200]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),201,200)
poweradd = 30*(var(0)!=1)*(var(8)!=3)*(prevstateno!=[100,105])

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = prevstateno != [100,105]
trigger1 = Time = 0
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .95

[State 200, 1]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 3
value = anim
elem = 2
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = prevstateno != [100,105]
trigger1 = AnimElem = 5
trigger2 = prevstateno = [100,105]
trigger2 = AnimElem = 6
movetype = I

[State 200, 1]
type = Hitdef
triggerall = var(0) != 1
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*fvar(1))<7,7,(35*fvar(1))))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-70
hitsound = S1,0
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-.85*.9**((var(42)-1)+!var(42))>-.17,-.17,-.85*.9**((var(42)-1)+!var(42))), ifelse((-5.5+(1.1*((var(42)-1)+!var(42))))>0,0,(-5.5+(1.1*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0)*(var(8)!=3),0
givepower = 20*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) != 1
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*fvar(1))<7,7,(28*fvar(1))))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-70
hitsound = S1,0
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-.85*.9**((var(42)-1)+!var(42))>-.17,-.17,-.85*.9**((var(42)-1)+!var(42))), ifelse((-5.5+(1.1*((var(42)-1)+!var(42))))>0,0,(-5.5+(1.1*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0)*(var(8)!=3),0
givepower = 20*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-70
hitsound = S1,0
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-.85*.9**((var(42)-1)+!var(42))>-.17,-.17,-.85*.9**((var(42)-1)+!var(42))), ifelse((-5.5+(1.1*((var(42)-1)+!var(42))))>0,0,(-5.5+(1.1*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
triggerall = prevstateno != [100,105]
trigger1 = animelem = 2
var(14) = ceil(ifelse((35*fvar(1)*.5)<7,7,(35*fvar(1)*.5)))

[State 8500, 1]
type = varset
triggerall = prevstateno = [100,105]
trigger1 = animelem = 2
var(14) = ceil(ifelse((28*fvar(1)*.5)<7,7,(28*fvar(1)*.5)))

[State 400, 3]
type = ChangeState
triggerall = !var(59)
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(6) > 0 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(6) > 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(6) > 0 && command = "holddown" && prevstateno != [100,105]
value = 10
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち中攻撃（本体）
[Statedef 210]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),211,210)
poweradd = 40*(var(0)!=1)*(var(8)!=3)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3001, Width]
type = Width
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(3) < 0
player = 8,0

[State 3001, Width]
type = Width
triggerall = animelemtime(3) >= 0
trigger1 = prevstateno != [100,105]
trigger1 = animelemtime(6) < 0
trigger2 = prevstateno = [100,105]
trigger2 = animelemtime(7) < 0
player = 15,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(command = "z"&&var(8),1,0)

[State 1100, Velocity]
type = VelSet
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
trigger2 = AnimElem = 8
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .95

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 0
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = prevstateno != [100,105]
trigger1 = AnimElem = 6
trigger2 = prevstateno = [100,105]
trigger2 = AnimElem = 7
movetype = I

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = prevstateno != 105
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 13

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = prevstateno != 105
triggerall = !var(24)
trigger1 = AnimElem = 6
x = 7

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1))))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-70
hitsound = S1,1
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-3.2+(.65*((var(42)-1)+!var(42))))>0,0,(-3.2+(.65*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0)*(var(8)!=3),0
givepower = 25*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-70
hitsound = S1,1
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-3.2+(.65*((var(42)-1)+!var(42))))>0,0,(-3.2+(.65*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 4
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 12
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = var(5)
trigger2 = !var(8)
trigger2 = prevstateno = [100,105]
trigger2 = animelemtime(8) > 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強攻撃（本体）
[Statedef 220]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 220
poweradd = 50*(var(0)!=1)*(var(8)!=3)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 2
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
Anim = 17110
pos = 0, 0
postype = P1
ownpal = 1
bindtime = -1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 8
value = anim
elem = 7
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((49*fvar(1))<7,7,(49*fvar(1)))),ceil(ifelse((49*fvar(1)*.25)<7,7,(49*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -90
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((28*fvar(1))<7,7,(28*fvar(1)))),ceil(ifelse((28*fvar(1)*.25)<7,7,(28*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -90
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -90
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -90
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 4
var(14) = ceil(ifelse((49*fvar(1)*.5)<7,7,(49*fvar(1)*.5)))

[State 8500, 1]
type = varset
trigger1 = animelem = 6
var(14) = ceil(ifelse((28*fvar(1)*.5)<7,7,(28*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelemtime(12) = 1
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ダッシュ立ち強攻撃（本体）
[Statedef 221]
type = S
movetype = I
physics = N
juggle = 0
ctrl = 0
anim = 221
poweradd = 50*(var(0)!=1)*(var(8)!=3)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 1100, Velocity]
type = VelMul
trigger1 = var(0) != -1
trigger1 = var(0) != 2
x = .95

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 3
channel = 0

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;レバー前立ち中攻撃（本体）
[Statedef 230]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 230
poweradd = 40*(var(0)!=1)*(var(8)!=3)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 3
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 8
value = anim
elem = 7
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 2
x = 5
persistent = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 3
x = 7
persistent = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 4
x = 22
persistent = 0

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = L
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((63*fvar(1))<7,7,(63*fvar(1))))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-23
hitsound = S1,1
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0)*(var(8)!=3),0
givepower = 25*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-23
hitsound = S1,1
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 4
var(14) = ceil(ifelse((63*fvar(1)*.5)<7,7,(63*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 13
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;レバー前立ち強攻撃（本体）
[Statedef 240]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 240
poweradd = 50*(var(0)!=1)*(var(8)!=3)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
value = 3, 1
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 1
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 8
value = anim
elem = 7
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = L
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -20
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -20
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 5
var(14) = ceil(ifelse((70*fvar(1)*.5)<7,7,(70*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 16
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱攻撃（本体）
[Statedef 400]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),401,400)
poweradd = 30*(var(0)!=1)*(var(8)!=3)*(prevstateno!=[100,105])

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(command = "z"&&var(8),2,ifelse(command = "y"&&var(8),1,0))

[State 1100, Velocity]
type = VelSet
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
trigger2 = AnimElem = 6
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .95

[State 400, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1))))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-46
hitsound = S1,0
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0)*(var(8)!=3),0
givepower = 20*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-46
hitsound = S1,0
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 3
var(14) = ceil(ifelse((21*fvar(1)*.5)<7,7,(21*fvar(1)*.5)))

[State 400, 3]
type = ChangeState
triggerall = !var(59)
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !var(5)
trigger1 = animelemtime(7) > 0 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !var(5)
trigger1 = animelemtime(7) > 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !var(5)
trigger1 = animelemtime(7) > 0 && command != "holddown" && command != "holdfwd" && command != "holdback" && prevstateno != [100,105]
value = 12
ctrl = 1

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 8 && prevstateno != [100,105]
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = var(5)
trigger2 = !var(8)
trigger2 = prevstateno = [100,105]
trigger2 = animelemtime(6) >= 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中攻撃（本体）
[Statedef 410]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 410
poweradd = 40*(var(0)!=1)*(var(8)!=3)
sprpriority = 2
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 420, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 420, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 1
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-47
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0)*(var(8)!=3),0
givepower = 25*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-47
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 3
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 14
value = 1

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ダッシュしゃがみ中攻撃（本体）
[Statedef 411]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 411
poweradd = 40*(var(0)!=1)*(var(8)!=3)
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .95

[State 420, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 420, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 1
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強攻撃（本体）
[Statedef 420]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 420
poweradd = 50*(var(0)!=1)*(var(8)!=3)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 3
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = L
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,0
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -25
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.5,-3.2
guard.velocity = -8
air.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,0
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -25
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.5,-3.2
guard.velocity = -8
air.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 4
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 13
value = 1

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強攻撃（本体）
[Statedef 421]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 421
poweradd = 50*(var(0)!=1)*(var(8)!=3)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .95

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 3
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 9
value = anim
elem = 8
persistent = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;レバー前しゃがみ強攻撃（本体）
[Statedef 430]
type = C
movetype = A
physics = C
juggle = 0
ctrl = 0
anim = 430
poweradd = 50*(var(0)!=1)*(var(8)!=3)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 0, 2
channel = 0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 9
value = anim
elem = 8
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 6
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -98
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 6
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -98
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 6
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 16
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱攻撃（本体）
[Statedef 600]
type    = A
movetype = A
physics = N
juggle = 0                  
ctrl = 0
anim = 600
poweradd = 30*(var(0)!=1)*(var(8)!=3)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 600, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 9
movetype = I

[State 200, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*fvar(1))<7,7,(35*fvar(1))))
pausetime = 11,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 11,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-54
hitsound = S1,0
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
airguard.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0)*(var(8)!=3),0
givepower = 20*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 11,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 11,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-54
hitsound = S1,0
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 2
var(14) = ceil(ifelse((35*fvar(1)*.5)<7,7,(35*fvar(1)*.5)))

[State 650, HitPause]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(4),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(24)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中攻撃（本体）
[Statedef 610]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 610
poweradd = 40*(var(0)!=1)*(var(8)!=3)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 610, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 10
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((49*fvar(1))<7,7,(49*fvar(1))))
pausetime = 11,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 11,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-54
hitsound = S1,1
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
airguard.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0)*(var(8)!=3),0
givepower = 25*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 11,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 11,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-54
hitsound = S1,1
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 2
var(14) = ceil(ifelse((49*fvar(1)*.5)<7,7,(49*fvar(1)*.5)))

[State 650, HitPause]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(4),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(24)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強攻撃（本体）
[Statedef 620]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 620
poweradd = 50*(var(0)!=1)*(var(8)!=3)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 610, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((63*fvar(1))<7,7,(63*fvar(1))))
pausetime = 11,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 11,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-43
hitsound = S1,2
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
airguard.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 11,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 11,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-43
hitsound = S1,2
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .35;44
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 3
var(14) = ceil(ifelse((63*fvar(1)*.5)<7,7,(63*fvar(1)*.5)))

[State 650, HitPause]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(4),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(24)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;回り込み
[Statedef 800]
type = S
physics = N
movetype = I
anim = 800
ctrl = 0
velset = 0,0
sprpriority = -1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, 1]
type = helper
trigger1 = animelem = 6
ID = 805
stateno = 805
pos = 0,0
pausemovetime = 99999999
persistent = 0

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 6
x = 9.17

[State 810, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElemTime(6) > 0
x = .95

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 11
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = SCA, NT,ST,HT

[State 810, Push]
type = PlayerPush
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = 0

[State 3000, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 3
value = 800, 0
channel = 0

[State 901,1]
type = SprPriority
trigger1 = AnimTime = 0
value = 0

[State 8500, 1]
type = varset
trigger1 = AnimTime = 0
var(40) = 8

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;回り込み（残像）
[Statedef 805]
type = S
physics = N
movetype = I
anim = 800
ctrl = 0
velset = 0,0
sprpriority = -2

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 800
elem = 5

[State 810, Velocity]
type = VelSet
trigger1 = animelemtime(6) = 2
x = 9.17

[State 810, Velocity]
type = VelMul
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
x = .95

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 11
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 100, 2]
type = AssertSpecial
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = time%2=0
flag = invisible

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(30) != gametime+1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(30) != gametime+1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 800

;---------------------------------------------------------------------------
; アドバンシングガード（bad darknessさん製作）
[Statedef 810]
type    = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 810, 音]
type = PlaySnd
trigger1 = time = 1
value = 810, 0
channel = 1

[State 810, 音]
type = PlaySnd
trigger1 = time = 1
value = 4, 1

[State 810, 1]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time = 0
anim = 8105
pos = ceil(30*const(size.xscale)),ifelse(statetype=C&&!var(49),ceil(-55*const(size.xscale)),ceil(-100*const(size.xscale)))
ownpal = 1
bindtime = 1
sprpriority = 5
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*(var(0)>0)

[State 810, 1]
type = helper
trigger1 = time = 0
ID = 815
stateno = 815
pos = -10,0
facing = 1
size.ground.back = 20
size.ground.front = 20
size.height = 240
pausemovetime = 99999999

[State 810, 1]
type = helper
trigger1 = time = 0
stateno = 8160
postype = p2
ownpal = 1
pausemovetime = 99999999*(var(0)>0)

[State 810, 1]
type = velset
trigger1 = 1
x = 0

[State 810, 2]
type = ChangeAnim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(49)

[State 810, 3]
type = ChangeAnim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(49)

[State 810, 4]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 810, 5]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 810, 6]
type = NotHitBy
trigger1 = time <= 1
value = SCA
time = 1

[State 810, 7]
type = ChangeState
trigger1 = time = 1
value = 151+(command = "holddown")*2

[Statedef 811]
type    = U
movetype = I
physics = N

[State 811, 1]
type = velset
trigger1 = 1
x = 0

[State 811, 2]
type = ChangeAnim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(49)

[State 811, 3]
type = ChangeAnim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(49)

[State 811, 4]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 811, 5]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 811, 6]
type = ChangeState
trigger1 = numhelper(815) = 1
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 811, 7]
type = ChangeState
trigger1 = !numhelper(815)
value = 130+(command = "holddown")
ctrl = 1

; アドバンシングガード・ヘルパー
[Statedef 815]
type = S
movetype = I
physics = N
velset = 0,0
anim = 815

[State 815, 1]
type = PlayerPush
trigger1 = 1
value = 1

[State 815, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 815, 3]
type = velset
trigger1 = Time = 0
x = 20

[State 815, 4]
type = veladd
trigger1 = Time > 0
x = -1

[State 815, 6]
type = DestroySelf
trigger1 = Time = 15

; アドバンシングガード・煙
[Statedef 8160]
type = S
movetype = I
physics = N
velset = 0,0
anim = 8160
sprpriority = 5

[State 2310, 1]
type = posset
trigger1 = 1
x = enemynear,pos x
y = 0

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2310, 2]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;スタンド解除（地上）
[Statedef 830]
type = S
physics = S
ctrl = 1
anim = ifelse(statetype = S,830,831)
velset = 0,0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 220, Position]
type = PosAdd
trigger1 = Time = 0
x = -20

[State 101, 3]
type = ChangeState
trigger1 = fvar(14)=1||fvar(14)=3
trigger1 = AnimTime = 0
value = 4800

[State 101, 3]
type = ChangeState
trigger1 = fvar(14)=4||fvar(14)=6
trigger1 = AnimTime = 0
value = 4900

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタンド解除（空中）
[Statedef 835]
type = A
physics = N
ctrl = 0

[State 8500, anim]
type = ChangeAnim
trigger1 = time = 0
value = Helper(20000),anim
elem = Helper(20000),animelemno(0)

[State 8500, anim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = anim != [41,46]
value = ifelse(!sysvar(1), 41, ifelse(sysvar(1)=1, 42, 43))

[State 50, 3]
type = ChangeAnim
triggerall = anim = [41,43]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 220, Position]
type = PosAdd
trigger1 = Time = 0
x = -20

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(3)||var(4),.5,.6)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;タンデムコンボ
[Statedef 850]
type = S
movetype = I
physics = N
juggle = 0
ctrl = 0
anim = 850
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = PosAdd
trigger1 = var(49)
x = -20

[State 1100, VarSet]
type = VarSet
trigger1 = time = 3
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 3
fvar(3) = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(37) = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(38) = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(54) = 72

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 3
time = 120
movetime = 120
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0

[State 8001, Tandem]
type = Helper
trigger1 = time = 3
id = 8001
name = "Tandem"
pos = 0,ceil(-80*const(size.yscale))
postype = P1
stateno = 8001
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 999999

[State 10000, VarSet]
type = VarAdd
triggerall = time = 3
trigger1 = var(2)
var(2) = -52

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = time < 123
value = SCA

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = time = 123
value = SCA
time = 20

[State 810, 1]
type = helper
trigger1 = time = 3
ID = 8400
stateno = 8400
pos = 0,0
pausemovetime = 200
supermovetime = 200

[State 10000, VarSet]
type = VarAdd
trigger1 = time >= 123
var(54) = -1

[State 220, Voice]
type = PlaySnd
trigger1 = time = 3
value = 850, 3
channel = 0

;===========================================================================
;---------------------------------------------------------------------------
;立ち強攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "z"
var(37) = 3200

;---------------------------------------------------------------------------
;立ち強攻撃（レバー前）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "z"
trigger1 = command = "holdfwd"
var(37) = 3201

;---------------------------------------------------------------------------
;立ち中攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "y"
var(37) = 3100

;---------------------------------------------------------------------------
;立ち中攻撃（レバー前）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "y"
trigger1 = command = "holdfwd"
var(37) = 3300

;---------------------------------------------------------------------------
;立ち弱攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "x"
var(37) = 3000

;---------------------------------------------------------------------------
;立ち弱攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "x"
trigger1 = command = "holdback"
var(37) = 3001

;---------------------------------------------------------------------------
;しゃがみ強攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "z"
trigger1 = command = "holddown"
var(37) = 5200

;---------------------------------------------------------------------------
;しゃがみ中攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "y"
trigger1 = command = "holddown"
var(37) = 5100

;---------------------------------------------------------------------------
;しゃがみ弱攻撃
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "x"
trigger1 = command = "holddown"
var(37) = 5000

;---------------------------------------------------------------------------
;立ち攻撃ボタン同時押し
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "b"
var(37) = 3900

;---------------------------------------------------------------------------
;しゃがみ攻撃ボタン同時押し
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
triggerall = NumHelper(10000)
triggerall = !Helper(10000),var(15)
trigger1 = command = "b"
trigger1 = command = "holddown"
var(37) = 5900

;===========================================================================
;---------------------------------------------------------------------------
;オラオラ（強）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "オラオラ3"
var(37) = 10502

;---------------------------------------------------------------------------
;オラオラ（中）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "オラオラ2"
var(37) = 10501

;---------------------------------------------------------------------------
;オラオラ（弱）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "オラオラ1"
var(37) = 10500

;---------------------------------------------------------------------------
;マッハオラ（強）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "マッハオラ3"
var(37) = 11502

;---------------------------------------------------------------------------
;マッハオラ（中）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "マッハオラ2"
var(37) = 11501

;---------------------------------------------------------------------------
;マッハオラ（弱）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "マッハオラ1"
var(37) = 11500

;---------------------------------------------------------------------------
;マッハオラ（強）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "スターフィンガー"
var(37) = 12502

;---------------------------------------------------------------------------
;マッハオラ（中）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "スターフィンガー"
var(37) = 12501

;---------------------------------------------------------------------------
;マッハオラ（弱）
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "スターフィンガー"
var(37) = 12500

;===========================================================================
;---------------------------------------------------------------------------
;プッツンオラ
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "プッツンオラ"
var(37) = 30500

;---------------------------------------------------------------------------
;プッツンオラ
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "スターブレイカー1"
var(37) = 31500

;---------------------------------------------------------------------------
;プッツンオラ
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "スターブレイカー2"
var(37) = 31501

;---------------------------------------------------------------------------
;プッツンオラ
[State -2]
type = VarSet
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "スターブレイカー3"
var(37) = 31502

;===========================================================================

;タンデム入力回数
[State -2]
type = VarAdd
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "x" || command = "y" || command = "z" || command = "b"
var(38) = 1

[State 220, Voice]
type = PlaySnd
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "x"
trigger2 = command = "b"
value = 850, 0
channel = 2+(time%8)

[State 220, Voice]
type = PlaySnd
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "y"
value = 850, 1
channel = 2+(time%8)

[State 220, Voice]
type = PlaySnd
triggerall = !var(59)
triggerall = time >= 4
trigger1 = command = "z"
value = 850, 2
channel = 2+(time%8)

[State 10000, ChangeState]
type = ChangeState
triggerall = !var(59)
triggerall = Time > 123
trigger1 = command != "holda"
trigger2 = !var(54)
trigger3 = var(0) = 1
trigger3 = !var(2)
value = 851

;---------------------------------------------------------------------------
;タンデムコンボ（発動）
[Statedef 851]
type = S
movetype = I
physics = N
ctrl = 0

[State 10000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 1
value = 0

[State 10000, ChangeState]
type = ChangeState
trigger1 = Time = 3
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;タンデムコンボ（スタンド）（待機）
[Statedef 10850]
type = U
movetype = I
physics = N
ctrl = 0
anim = 6900

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10850,0]
type = BindToParent
trigger1 = time = 0
pos = -10,0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = root,stateno = 850
var(8) = 3

[State 10000, VarSet]
type = VarSet
trigger1 = time = 0
var(14) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 810, 1]
type = helper
trigger1 = !numhelper(40000)
trigger1 = root,stateno = 850
stateno = 40000
id = 40000
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State 810, 1]
type = helper
trigger1 = !numhelper(40001)
trigger1 = root,stateno = 850
stateno = 40001
id = 40001
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 10000

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,stateno = 851
trigger1 = root,time = 2
value = 10851

;---------------------------------------------------------------------------
;タンデムコンボ（スタンド）（ダッシュ）
[Statedef 10851]
type = U
movetype = I
physics = N
ctrl = 0
anim = 10850
velset = 10.5,0

[State 1100, VarSet]
type = VarAdd
trigger1 = !root,var(36)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(47) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
trigger1 = var(6)
var(6) = -1

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 15

[State 10000, HitBy]
type = HitBy
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
triggerall = !NumHelper(8000)
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, VarSet]
type = VarSet
trigger1 = P2bodydist x <= 25
trigger1 = roundstate = 2
var(14) = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = P2bodydist x <= 30
trigger1 = roundstate = 2
trigger1 = var(3)
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))

[State 10000, ChangeState]
type = ChangeState
triggerall = var(47) > 3
trigger1 = P2bodydist x <= 30
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger3 = var(47) = 43
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;タンデムコンボ（コマンド記憶）1
[Statedef 40000]
type = U
movetype = I
physics = N
ctrl = 0
anim = 6900

[State 1100, VarSet]
type = VarSet
trigger1 = root,var(38) = [1,60]
trigger1 = !var(root,var(38)-1)
var(root,var(38)-1) = root,var(37)

[State 1100, VarSet]
type = VarSet
trigger1 = root,var(38) = [61,100]
trigger1 = !var(root,var(38)-61)
fvar(root,var(38)-61) = root,var(37)

[State 1100, VarSet]
type = ParentVarSet
trigger1 = parent,var(4) = [0,59]
var(3) = var(parent,var(4))

[State 1100, VarSet]
type = ParentVarSet
trigger1 = parent,var(4) = [60,99]
var(3) = fvar(parent,var(4)-60)

[State 10000, ChangeState]
type = DestroySelf
triggerall = time > 1
trigger1 = parent,stateno = 10000
trigger2 = root,movetype = H
trigger3 = parent,movetype = H

;---------------------------------------------------------------------------
;タンデムコンボ（コマンド記憶）2
[Statedef 40001]
type = U
movetype = I
physics = N
ctrl = 0
anim = 6900

[State 1100, VarSet]
type = VarSet
trigger1 = root,var(38) = [101,160]
trigger1 = !var(root,var(38)-101)
var(root,var(38)-101) = root,var(37)

[State 1100, VarSet]
type = ParentVarSet
trigger1 = parent,var(4) = [100,159]
var(3) = var(parent,var(4)-100)

[State 10000, ChangeState]
type = DestroySelf
triggerall = time > 1
trigger1 = parent,stateno = 10000
trigger2 = root,movetype = H
trigger3 = parent,movetype = H

;---------------------------------------------------------------------------
;タンデム（煙）
[Statedef 8400]
type = S
physics = N
movetype = I
anim = 8400
ctrl = 0
velset = 0,0
sprpriority = 5

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,stateno = 851
value = 8401

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 850

;---------------------------------------------------------------------------
;タンデム（煙）（消滅）
[Statedef 8401]
type = S
physics = N
movetype = I
anim = 8401
ctrl = 0
velset = 0,0
sprpriority = 5

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 810, StateChange]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;投げ（掴みモーション）
[Statedef 900]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 900+var(49)+(command="holdfwd"*10)

[State 900, 1]
type = HitDef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),22]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p2stateno = 909
guard.dist = 0
getpower = 0,0
givepower = 0,0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0

[State 901, Throw]
type = ChangeState
trigger1 = numtarget
trigger1 = target,stateno = 909
value = 901
persistent = 0

[State 900, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = ifelse(var(49),320,ifelse(anim=910,240,220))

;---------------------------------------------------------------------------
;投げ（本体）
[Statedef 901]
type = S
movetype = A
physics = N
anim = 901+var(49)
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = numtarget
value = SCA

[State 810, State End]
type = changestate
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 950

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 905

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 820, sprpriority]
type = sprpriority
trigger1 = time = 0
value = !var(49)

[State 820, sprpriority]
type = sprpriority
trigger1 = var(49)
trigger1 = animelem = 7
value = 2

[State 901, Effect]
type = PlaySnd
trigger1 = !var(49) && animelem = 3
trigger2 = var(49) && AnimElemTime(1) = 6
value = 900, 1
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = !var(49) && animelem = 6
trigger2 = var(49) && animelem = 8
value = 3, 2

[State 901, Effect]
type = PlaySnd
trigger1 = !var(49) && AnimElemTime(6) = 2
trigger2 = var(49) && AnimElemTime(9) = 1
value = 1, 4

[State 901, Effect]
type = PlaySnd
trigger1 = time = 0
value = 900, 0
channel = 1

[State 1000, Spark]
type = Explod
trigger1 = !var(49) && AnimElemTime(6) = 3
trigger2 = var(49) && AnimElemTime(9) = 1
Anim = 8202
id = 8202
pos = ceil((75-(var(49)*.002))*const(size.xscale)),ceil(-82*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1

[State 901,1]
type = targetBind
trigger1 = time = 0
pos = ceil((100-(var(49)*.002))*const(size.xscale)),0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = !var(49) && animelem = 3
trigger2 = var(49) && AnimElemTime(1) = 6
pos = ceil((76-(var(49)*.002))*const(size.xscale)),0
postype = P1
time = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(49) && AnimElemTime(6) = 3
trigger2 = var(49) && AnimElemTime(9) = 1
value = ceil(ifelse(-119*fvar(1)>-7,-7,-119*fvar(1)))

[State 901, Ctrl]
type = CtrlSet
triggerall = !var(49)
trigger1 = AnimElem = 15
value = 1

[State 220, 3]
type = ChangeState
triggerall = time > 1
trigger1 = NumHelper(10000)
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ（スタンド）
[Statedef 10901]
type = S
movetype = A
physics = N
anim = 10901
velset = 0,0
sprpriority = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 820, sprpriority]
type = sprpriority
trigger1 = animelem = 7
value = 2

[State 0, 4]
type = ChangeState
trigger1 = root,stateno = 950 && root,time = 1
trigger2 = AnimTime = 0
value = 10000

;---------------------------------------------------------------------------
;投げ（相手）
[Statedef 905]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 905

[State 903, 2]
type = ChangeState
trigger1 = animtime = 0
value = 906

;---------------------------------------------------------------------------
;投げ（相手）2
[Statedef 906]
type = A
movetype = H
physics = N
velset = -12.5,-4.3

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 2601, Vel]
type = VelAdd
trigger1 = 1
y = .4

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;投げ（相手）3
[Statedef 909]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5000

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げぬけ（自分）（y.yさん製作）
[Statedef 950]
type    = A
movetype = I
physics = A
anim = 5210+var(49)
velset = -3,-6

[State 200, 7]
type = TargetBind
trigger1 = time = 0
pos = 50,0

[State 810, Bind 1]
type = Targetstate
trigger1 = time = 0
value = 955

[State 810, Bind 1]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げぬけ（スタンド時本体）（y.yさん製作）
[Statedef 20950]
type = U
physics = N
anim = 5210
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 2600, ChangeState]
type = changeanim
trigger1 = !NumHelper(8000)
trigger1 = parent,var(35) = 1
value = anim
elem = AnimElemNo(0)
persistent = 1

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;投げぬけ（相手）
[Statedef 955]
type    = A
movetype = I
physics = N
velset = -3,-6

[State 810, Bind 1]
type = posset
trigger1 = time = 0
y = 0

[State 810, Bind 1]
type = changeanim
trigger1 = time = 0
value = 5210

[State 810, Bind 1]
type = nothitby
trigger1 = 1
value = SCA

[State 810, Bind 1]
type = veladd
trigger1 = 1
y = .45

[State 810, Bind 1]
type = selfstate
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
;スタンド発現（地上）
[Statedef 10820]
type = S
physics = S
ctrl = 1
anim = 10820
velset = 0,0
sprpriority = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = time = 0
trigger1 = !NumHelper(3211)
trigger2 = NumHelper(3211)
trigger2 = Helper(3211),time > 1
value = 820,0

[State 100, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = time = 0
trigger1 = !NumHelper(3211)
trigger2 = NumHelper(3211)
trigger2 = Helper(3211),time > 1
value = 820,2
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time = 0
Anim = 8170
id = 8170
pos = 0, 0
postype = P1
ownpal = 1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 220, Position]
type = PosAdd
trigger1 = Time = 0
x = 20
persistent = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 8500, 1]
type = varset
trigger1 = time = 0
var(51) = 40

;立ち弱攻撃（スタンド）
[State -1, Taunt]
type = ChangeState
value = 300
triggerall = command = "x" || command = "b"
triggerall = command != "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

;レバー前立ち中攻撃（スタンド）
[State -1, Taunt]
type = ChangeState
value = 330
triggerall = command = "y"
triggerall = command = "holdfwd" && command != "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

;立ち中攻撃（スタンド）
[State -1, Taunt]
type = ChangeState
value = 310
triggerall = command = "y"
triggerall = command != "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

;立ち強攻撃（スタンド）
[State -1, Taunt]
type = ChangeState
value = 320+((P2BodyDist X = [-25,25])*20)
triggerall = command = "z"
triggerall = command != "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

;しゃがみ弱攻撃（スタンド）
[State -1]
type = ChangeState
value = 500
triggerall = command = "x" || command = "b"
triggerall = command = "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

;しゃがみ中攻撃（スタンド）
[State -1]
type = ChangeState
value = 510
triggerall = command = "y"
triggerall = command = "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

;しゃがみ強攻撃（スタンド）
[State -1]
type = ChangeState
value = 520
triggerall = command = "z"
triggerall = command = "holddown"
triggerall = statetype != A
trigger1 = time = 0
ignorehitpause = 0

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタンド発現（空中）
[Statedef 10825]
type = A
physics = N
ctrl = 0
anim = 10825
sprpriority = 0

[State 100, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = time = 0
trigger1 = !NumHelper(3211)
trigger2 = NumHelper(3211)
trigger2 = Helper(3211),time > 1
value = 820,0

[State 100, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = time = 0
trigger1 = !NumHelper(3211)
trigger2 = NumHelper(3211)
trigger2 = Helper(3211),time > 1
value = 820,2
channel = 0

[State 220, Position]
type = PosAdd
trigger1 = Time = 0
x = 20
persistent = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 8500, 1]
type = varset
trigger1 = time = 0
var(51) = 40

[State 4030, Gravity]
type = VelAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
y = ifelse(var(4),.5,.6)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;スタンド出現攻撃（本体）
[Statedef 840]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 6900
velset = 0,0
sprpriority = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100, 2]
type = AssertSpecial
trigger1 = NumHelper(10000)
trigger1 = helper(10000),stateno = 10840
trigger1 = helper(10000),animtime <= -1
flag = invisible
flag2 = noshadow

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 100, 2]
type = CtrlSet
trigger1 = NumHelper(10000)
trigger1 = helper(10000),stateno = 10840
trigger1 = helper(10000),animelem = 10
value = 1

[State 220, Position]
type = PosAdd
trigger1 = Time = 0
x = 20
persistent = 0

[State 220, Position]
type = PosSet
trigger1 = Time > 0
x = ceil(Helper(10000),Pos X)

;マッハオラ（スタンドモード）
[State -1, Taunt]
type = ChangeState
value = 1150
triggerall = !var(59)
triggerall = var(49)
triggerall = !var(24)
triggerall = var(0) != 1 || (var(0) = 1 && var(2))
triggerall = roundstate = 2
triggerall = NumHelper(10000)
triggerall = helper(10000),stateno = 10840
triggerall = helper(10000),animelemtime(3) > 0 || helper(10000),var(41) = [1,2]
trigger1 = command = "マッハオラ1" || command = "マッハオラ2" || command = "マッハオラ3" || (var(26)&2**3) || (var(26)&2**4) || (var(26)&2**5)
trigger2 = command = "スターブレイカー1" || command = "スターブレイカー2" || command = "スターブレイカー3" || (var(26)&2**15) || (var(26)&2**16) || (var(26)&2**17)
ignorehitpause = 0

[State 220, 3]
type = ChangeState
triggerall = time > 1
trigger1 = NumHelper(10000)
trigger1 = helper(10000),stateno = 10840
trigger1 = helper(10000),animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタンド出現攻撃（スタンド）
[Statedef 10840]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 10840
velset = 0,0
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3001, Width]
type = Width
trigger1 = Time = 0
player = 15,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = BindToParent
trigger1 = time = 0
pos = 0,0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(3) = root,fvar(2)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = var(0) != 1
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = root,fvar(4)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
fvar(3) = fvar(3)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(3)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 8500, 1]
type = parentvarset
trigger1 = time = 0
var(49) = 10000

[State 8500, 1]
type = parentvarset
trigger1 = time = 0
var(51) = 40

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 1100, 1
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 1
value = 0, 2
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(2) = 1
Anim = 17200
pos = 0, 0
postype = P1
ownpal = 1
bindtime = 1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*root,var(0)

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
trigger1 = AnimElem = 3
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -7.5
air.velocity = ifelse(-4.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-4.2*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
trigger1 = AnimElem = 3
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -7.5
air.velocity = ifelse(-4.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-4.2*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = ParentVarSet
triggerall = IsHelper
triggerall = var(41)
triggerall = time > 1
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(2)
ignorehitpause = 1
persistent = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != 1
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist > 5 && target,FrontEdgeBodyDist > 5
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
trigger1 = IsHelper
trigger1 = !NumHelper(8000)
trigger1 = parent,var(36) = 1
value = anim
elem = AnimElemNo(0)
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = IsHelper
trigger1 = parent,var(36) = 1

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = !root,var(39)
triggerall = root,var(7)
triggerall = roundstate = 2
triggerall = root,command = "タンデム"
triggerall = (power >= 1000 && root,var(0) != 1) || (root,var(0) = 1 && root,var(2) >= 52)
trigger1 = animelemtime(2) > 0
value = 10850

[State 0, 4]
type = ChangeState
trigger1 = root,movetype != H
trigger1 = root,stateno = 1150 && root,time = 1
trigger2 = root,movetype = H
trigger3 = root,stateno != 840 && !root,var(24)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 10001

;---------------------------------------------------------------------------
;立ち弱攻撃（スタンド）
[Statedef 300]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),301,ifelse(IsHelper,305,300))
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !IsHelper
trigger1 = Time = 0
var(5) = ifelse(command = "holdback",1,0)

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = IsHelper
trigger1 = Time = 0
var(5) = ifelse(var(3)%10=1,1,0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Position]
type = PosAdd
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = Time = 0
x = 3

[State 1100, Position]
type = PosAdd
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 2
x = 2

[State 1100, Velocity]
type = VelSet
triggerall = !IsHelper
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
trigger2 = AnimElem = 6
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper
trigger1 = !var(24)
x = .95

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 200, 1]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*fvar(1))<7,7,(35*fvar(1)))),ceil(ifelse((35*fvar(1)*.25)<7,7,(35*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-87
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*.25*fvar(1))<7,7,(35*.25*fvar(1)))),ceil(ifelse((35*.25*fvar(1)*.25)<7,7,(35*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-87
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-87
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 2
var(14) = ceil(ifelse((35*fvar(1)*.5)<7,7,(35*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((35*fvar(1)*.5*.25)<7,7,(35*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(3) = 3200
trigger2 = var(3) = 3201
trigger3 = var(3) = 3900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(3) = 5200
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3100
trigger2 = var(3) = 3300
trigger3 = var(3) = 5100
trigger3 = var(5)
trigger4 = var(3) = 5900
trigger4 = var(5)
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(3) = 5100
trigger2 = var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = !var(9)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3000 || var(3) = 3001
trigger2 = var(3) = 5000
value = 301
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger2 = var(15)
trigger2 = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger3 = var(9) = 2 || var(15)
trigger3 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;立ち中攻撃（スタンド）
[Statedef 310]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),311,ifelse(IsHelper,315,310))
poweradd = 40*(var(0)!=1)*!IsHelper
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = prevstateno != [100,105]
trigger1 = Time = 0
x = 8

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 3
x = 7

[State 1100, Velocity]
type = VelSet
triggerall = !IsHelper
trigger1 = prevstateno != [100,105]
trigger1 = time = 0
trigger2 = AnimElem = 5
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper
trigger1 = !var(24)
x = .95

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((63*fvar(1))<7,7,(63*fvar(1)))),ceil(ifelse((63*fvar(1)*.25)<7,7,(63*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-65
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((63*.25*fvar(1))<7,7,(63*.25*fvar(1)))),ceil(ifelse((63*.25*fvar(1)*.25)<7,7,(63*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-65
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-65
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-65
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = ifelse(IsHelper,11,14)
ground.hittime = ifelse(IsHelper,11,14)
air.hittime = ifelse(IsHelper,11,14)
guard.ctrltime = ifelse(IsHelper,11,14)
ground.velocity = ifelse(IsHelper,-8.5,-6)
guard.velocity = ifelse(IsHelper,-8,-5.5)
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelem = 3
var(14) = ceil(ifelse((63*fvar(1)*.5)<7,7,(63*fvar(1)*.5)))

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno = [100,105]
trigger1 = animelem = 3
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((63*fvar(1)*.5*.25)<7,7,(63*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelemtime(9) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3200
trigger2 = var(3) = 3201
trigger3 = var(3) = 5200
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(15)
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3100
trigger2 = var(3) = 3300
trigger3 = var(3) = 5100
trigger4 = var(3) = 3900
trigger5 = var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(8) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(8) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(8) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger2 = var(15)
trigger2 = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger3 = var(9) = 2 || var(15)
trigger3 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;遠距離立ち強攻撃（スタンド）
[Statedef 320]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),322,ifelse(IsHelper,325,320))
poweradd = 50*(var(0)!=1)*!IsHelper
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = !var(15)
trigger1 = var(14)
trigger1 = Time = 0
trigger1 = var(3) = 3200
value = 340

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
x = 10

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = prevstateno != [100,105]
trigger1 = AnimElem = 2
x = 6

[State 1100, Velocity]
type = VelSet
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !IsHelper
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
trigger2 = AnimElem = 4
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper
trigger1 = !var(24)
x = .95

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = prevstateno != [100,105]
trigger1 = AnimElem = 6
trigger2 = !IsHelper
trigger2 = prevstateno = [100,105]
trigger2 = AnimElem = 5
trigger3 = IsHelper
trigger3 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -78
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*.25*fvar(1))<7,7,(84*.25*fvar(1)))),ceil(ifelse((84*.25*fvar(1)*.25)<7,7,(84*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -78
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -78
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -78
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(IsHelper,-6,-10)
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelem = 4
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno = [100,105]
trigger1 = animelem = 4
var(14) = ceil(ifelse((70*fvar(1)*.5)<7,7,(70*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((70*fvar(1)*.5*.25)<7,7,(70*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelemtime(12) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = AnimTime = -1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = AnimTime = -1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(41) = 1 || var(41) = 2
trigger2 = var(15)
trigger2 = var(41) = 1 || var(41) = 2
trigger3 = var(9) = 2 || var(15)
trigger3 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;レバー前中攻撃（スタンド）
[Statedef 330]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,335,330)
poweradd = 40*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
x = 7

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
x = 10

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 6
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = H
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-59
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = H
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((42*.25*fvar(1))<7,7,(42*.25*fvar(1)))),ceil(ifelse((42*.25*fvar(1)*.25)<7,7,(42*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-59
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-59
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = ifelse(IsHelper,11,14)
ground.hittime = ifelse(IsHelper,11,14)
air.hittime = ifelse(IsHelper,11,14)
guard.ctrltime = ifelse(IsHelper,11,14)
ground.velocity = ifelse(IsHelper,-6,-8.5)
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 6
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((42*fvar(1)*.5*.25)<7,7,(42*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;近距離立ち強攻撃（スタンド）
[Statedef 340]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,345,340)
poweradd = 50*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = 320

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((98*fvar(1))<7,7,(98*fvar(1)))),ceil(ifelse((98*fvar(1)*.25)<7,7,(98*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10, -75
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((98*.25*fvar(1))<7,7,(98*.25*fvar(1)))),ceil(ifelse((98*.25*fvar(1)*.25)<7,7,(98*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10, -75
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 17
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10, -75
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(IsHelper,-6,-10)
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((98*fvar(1)*.5)<7,7,(98*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((98*fvar(1)*.5*.25)<7,7,(98*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelemtime(10) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;しゃがみ弱攻撃（スタンド）
[Statedef 500]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),501,ifelse(IsHelper,505,500))
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = !IsHelper
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
trigger2 = animelem = 5
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper
trigger1 = !var(24)
x = .95

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 400, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = prevstateno != [100,105]
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*fvar(1))<7,7,(28*fvar(1)))),ceil(ifelse((28*fvar(1)*.25)<7,7,(28*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*.25*fvar(1))<7,7,(28*.25*fvar(1)))),ceil(ifelse((28*.25*fvar(1)*.25)<7,7,(28*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = prevstateno = [100,105]
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = middle
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*17
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = prevstateno != [100,105]
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = prevstateno = [100,105]
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*17
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = ifelse(IsHelper,11,14)
ground.hittime = ifelse(IsHelper,11,14)
air.hittime = ifelse(IsHelper,11,14)
guard.ctrltime = ifelse(IsHelper,11,14)
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelem = 2
var(14) = ceil(ifelse((28*fvar(1)*.5)<7,7,(28*fvar(1)*.5)))

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno = [100,105]
trigger1 = animelem = 2
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((28*fvar(1)*.5*.25)<7,7,(28*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
trigger1 = animelem = 7
value = 1

[State 200, 7]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 3
value = anim
elem = 2
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3200
trigger2 = var(3) = 3201
trigger3 = var(3) = 3900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 5200
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3100
trigger2 = var(3) = 3300
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 5100
trigger2 = var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;しゃがみ中攻撃（スタンド）
[Statedef 510]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse((prevstateno = [100,105]),511,ifelse(IsHelper,515,510))
poweradd = 40*(var(0)!=1)*!IsHelper
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = prevstateno != [100,105]
trigger1 = Time = 0
trigger2 = !IsHelper
trigger2 = prevstateno = [100,105]
trigger2 = animelem = 6
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper
trigger1 = !var(24)
x = .95

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 420, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3 && prevstateno != [100,105]
trigger2 = AnimElem = 2 && prevstateno = [100,105]
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 105, 1]
type = statetypeset
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 6
movetype = I

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = prevstateno = [100,105]
trigger1 = AnimElem = 5
trigger2 = !IsHelper
trigger2 = prevstateno != [100,105]
trigger2 = AnimElem = 6
trigger3 = IsHelper
trigger3 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(56*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = ifelse(IsHelper,11,14)
ground.hittime = ifelse(IsHelper,11,14)
air.hittime = ifelse(IsHelper,11,14)
guard.ctrltime = ifelse(IsHelper,11,14)
ground.velocity = ifelse(IsHelper,-6,-8.5)
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno != [100,105]
trigger1 = animelem = 4
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = prevstateno = [100,105]
trigger1 = animelem = 3
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(7) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(2) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(2) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;しゃがみ強攻撃（スタンド）
[Statedef 520]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,525,520)
poweradd = 50*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 52, Effect]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = IsHelper
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper
trigger1 = !var(24)
x = .9

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = time = 0
x = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 3
value = 3, 2

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 8
value = anim
elem = 7
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 7
trigger2 = IsHelper
trigger2 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -66
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = !var(41)
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -121
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = L
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((70*.25*fvar(1))<7,7,(70*.25*fvar(1)))),ceil(ifelse((70*.25*fvar(1)*.25)<7,7,(70*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -121
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = !IsHelper
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -66
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = ifelse(IsHelper,11,17)
ground.hittime = ifelse(IsHelper,11,17)
air.hittime = ifelse(IsHelper,11,17)
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = !var(41)
trigger1 = !IsHelper
trigger1 = AnimElem = 5
trigger2 = IsHelper
trigger2 = AnimElem = 4
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -121
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = ifelse(IsHelper,11,17)
ground.hittime = ifelse(IsHelper,11,17)
air.hittime = ifelse(IsHelper,11,17)
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 4
var(14) = ceil(ifelse((70*fvar(1)*.5)<7,7,(91*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((70*fvar(1)*.5*.25)<7,7,(70*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = AnimTime = -1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = AnimTime = -1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animtime = 0 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;ダッシュしゃがみ強攻撃（スタンド）
[Statedef 530]
type = C
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 530
poweradd = 50*(var(0)!=1)
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = animelem = 7
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .95

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 4
value = 3, 2

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = L
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((49*fvar(1))<7,7,(49*fvar(1)))),ceil(ifelse((49*fvar(1)*.25)<7,7,(91*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 5
var(14) = ceil(ifelse((49*fvar(1)*.5)<7,7,(49*fvar(1)*.5)))

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱攻撃（スタンド）
[Statedef 700]
type    = A
movetype = A
physics = N
juggle = 0                  
ctrl = 0
anim = 700
poweradd = 30*(var(0)!=1)
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 600, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*14
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*14
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-37
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
airguard.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*14
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*14
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-37
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 2
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State 650, HitPause]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(3)||var(4),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(24)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中攻撃（スタンド）
[Statedef 710]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 710
poweradd = 40*(var(0)!=1)
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 610, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((63*fvar(1))<7,7,(63*fvar(1)))),ceil(ifelse((63*fvar(1)*.25)<7,7,(63*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-37
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
airguard.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0),0
givepower = 25*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-37
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 2
var(14) = ceil(ifelse((63*fvar(1)*.5)<7,7,(63*fvar(1)*.5)))

[State 650, HitPause]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(3)||var(4),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(24)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強攻撃（スタンド）
[Statedef 720]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 720
poweradd = 50*(var(0)!=1)
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 610, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-84
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
airguard.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0),0
givepower = 30*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-84
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = animelem = 4
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 650, HitPause]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
y = ifelse(var(3)||var(4),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(24)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;スタンドコンボルート6-2
[Statedef 301]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,305,300)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !IsHelper
trigger1 = Time = 0
x = 3

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !IsHelper
trigger1 = AnimElem = 2
x = 2

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 200, 1]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 5
trigger2 = IsHelper
trigger2 = AnimElem = 3
movetype = I

[State 200, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-87
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-87
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-87
hitsound = S1,3
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 2
var(14) = ceil(ifelse((21*fvar(1)*.5)<7,7,(21*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((21*fvar(1)*.5*.25)<7,7,(21*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(3) = 3000
trigger2 = var(3) = 5000
trigger3 = var(3) = 3900
trigger4 = var(3) = 5900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3100
trigger2 = var(3) = 3300
trigger3 = var(3) = 5100
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(3) >= 1 || var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート1-2
[Statedef 311]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,315,310)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Time = 0
x = 13

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
x = 7

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
x = 6

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
x = 1+IsHelper

[State 1100, Velocity]
type = VelSet
trigger1 = !IsHelper
trigger1 = AnimElemTime(1) = 6
trigger2 = IsHelper
trigger2 = AnimElemTime(1) = 3
x = IsHelper

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-65
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(56*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-65
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-65
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = ifelse(IsHelper,11,14)
ground.hittime = ifelse(IsHelper,11,14)
air.hittime = ifelse(IsHelper,11,14)
guard.ctrltime = ifelse(IsHelper,11,14)
ground.velocity = ifelse(IsHelper,-6,-8.5)
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
trigger1 = animelemtime(9) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3200
trigger2 = var(3) = 3201
trigger3 = var(3) = 3900
trigger4 = var(3) = 5200
trigger4 = var(5)
trigger5 = var(3) = 5900
trigger5 = var(5)
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(11) = 500
trigger1 = var(3) = 5200
trigger2 = var(11) = 500
trigger2 = var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(3) = 5200
trigger2 = var(3) = 5900
value = 531
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
triggerall = !var(5)
trigger1 = var(11) = 301
trigger1 = var(3) = 3100
trigger2 = var(11) = 301
trigger2 = var(3) = 3300
trigger3 = var(11) = 301
trigger3 = var(3) = 5100
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger2 = animtime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = animtime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート1-3
[Statedef 321]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,326,322)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Time = 0
x = 10

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
x = 6

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 6
trigger2 = IsHelper
trigger2 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -87
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-13.5*.9**((var(42)-1)+!var(42))>-2.7,-2.7,-13.5*.9**((var(42)-1)+!var(42))), 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*.25*fvar(1))<7,7,(84*.25*fvar(1)))),ceil(ifelse((84*.25*fvar(1)*.25)<7,7,(84*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -87
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-13.5*.9**((var(42)-1)+!var(42))>-2.7,-2.7,-13.5*.9**((var(42)-1)+!var(42))), 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -87
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(IsHelper,-6,-10)
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-13.5*.9**((var(42)-1)+!var(42))>-2.7,-2.7,-13.5*.9**((var(42)-1)+!var(42))), 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 4
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5*.25)<7,7,(84*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
trigger1 = animelemtime(12) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート6-4
[Statedef 331]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,336,331)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time = 0
x = 11

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
trigger2 = AnimElemTime(2) = 1
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
x = 7
persistent = 1

[State 1100, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
x = 3

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 6
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = H
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-59
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 15
ground.hittime = 15
air.hittime = 15
guard.ctrltime = 15
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = H
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(70*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-59
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 15
ground.hittime = 15
air.hittime = 15
guard.ctrltime = 15
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20,-59
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 15
ground.hittime = 15
air.hittime = 15
guard.ctrltime = 15
ground.velocity = -10
guard.velocity = -8
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 6
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート1-2
[Statedef 341]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,346,341)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(10) = 310
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(10) = 311
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-75
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(56*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-75
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-75
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
trigger1 = animelemtime(10) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(5) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3100
trigger2 = var(3) = 3300
trigger3 = var(3) = 3900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(5) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 5100
trigger2 = var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(6) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(5) >= 1 || var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート1-2
[Statedef 342]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,346,341)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(10) = 310
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = var(10) = 311
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-75
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(56*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-75
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,13)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10,-75
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = CtrlSet
triggerall = !IsHelper
trigger1 = animelemtime(10) = 1
value = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート5-3
[Statedef 501]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,506,502)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
;trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 400, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 3
value = anim
elem = 2
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 200, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8200
guard.sparkno = S8100
sparkxy = -10,-38
hitsound = S1,3
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 2
var(14) = ceil(ifelse((21*fvar(1)*.5)<7,7,(21*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((21*fvar(1)*.5*.25)<7,7,(21*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 6
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 3
value = anim
elem = 2
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3100
trigger2 = var(3) = 3330
trigger3 = var(3) = 5100
trigger4 = var(3) = 3900
trigger5 = var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート2-2
[Statedef 511]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,516,512)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 420, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 5
trigger2 = IsHelper
trigger2 = AnimElem = 3
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*17
sparkno = S8200
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,3
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(56*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*17
sparkno = S8200
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,3
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,17)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,17)
sparkno = S8200
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,3
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 3
value = anim
elem = 2
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(11) = 500
trigger1 = var(3) = 3000 || var(3) = 3001
trigger2 = var(11) = 500
trigger2 = var(3) = 5000
trigger3 = var(11) = 500
trigger3 = var(3) = 5900
value = 501
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(11) = 501
trigger1 = var(3) = 3200
trigger2 = var(11) = 501
trigger2 = var(3) = 3201
trigger3 = var(11) = 501
trigger3 = var(3) = 5200
trigger4 = var(11) = 501
trigger4 = var(3) = 3900
trigger5 = var(11) = 501
trigger5 = var(3) = 5900
value = 532
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(11) = 501
trigger1 = var(3) = 3100
trigger2 = var(11) = 501
trigger2 = var(3) = 3300
trigger3 = var(11) = 501
trigger3 = var(3) = 5100
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 3200
trigger2 = var(3) = 3201
trigger3 = var(3) = 3900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger1 = var(3) = 5200
trigger2 = var(3) = 5900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(8) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(8) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = !var(9) || (var(9)=2&&!(root,var(19+(var(13)/32))&2**(var(13)%32)))
triggerall = roundstate = 2
triggerall = animelemtime(8) >= 2 || var(41) = 1 || var(41) = 2
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 2
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = animelemtime(4) >= 1 || var(41) = 1 || var(41) = 2
trigger2 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
trigger1 = AnimTime = -1
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = -1
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート2-2
[Statedef 512]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,516,512)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = (root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = -(2**(var(13)%32))

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 420, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
value = 3, 0
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 5
trigger2 = IsHelper
trigger2 = AnimElem = 3
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*17
sparkno = S8200
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,3
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*.25*fvar(1))<7,7,(56*.25*fvar(1)))),ceil(ifelse((56*.25*fvar(1)*.25)<7,7,(56*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*17
sparkno = S8200
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,3
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,17)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,17)
sparkno = S8200
guard.sparkno = S8100
sparkxy = -15,-43
hitsound = S1,3
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = ifelse(-2.5*.9**((var(42)-1)+!var(42))>-.5,-.5,-2.5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(1.3*((var(42)-1)+!var(42))))>0,0,(-6.5+(1.3*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5*.25)<7,7,(56*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 3
value = anim
elem = 2
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート2-3
[Statedef 521]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,526,521)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
x = 2+IsHelper

[State 1100, Velocity]
type = VelSet
trigger1 = animelem = 4
x = IsHelper

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 3
value = 3, 2
channel = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 8
value = anim
elem = 7
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 7
trigger2 = IsHelper
trigger2 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -66
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = !var(41)
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -121
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((84*.25*fvar(1))<7,7,(84*.25*fvar(1)))),ceil(ifelse((84*.25*fvar(1)*.25)<7,7,(84*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -121
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = -5.5
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = !IsHelper
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -66
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = !var(41)
trigger1 = !IsHelper
trigger1 = AnimElem = 5
trigger2 = IsHelper
trigger2 = AnimElem = 4
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -121
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = ifelse(-1.6*.9**((var(42)-1)+!var(42))>-.32,-.32,-1.6*.9**((var(42)-1)+!var(42))), ifelse((-8.6+(.125*((var(42)-1)+!var(42))))>0,0,(-8.6+(.125*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 4
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5*.25)<7,7,(84*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = ifelse(statetype = S, 0, 11)
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート2-3
[Statedef 531]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,536,531)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Time = 0
x = 20

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 2
x = 12

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
x = 10

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 4
value = 3, 2

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(91*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*.25*fvar(1))<7,7,(84*.25*fvar(1)))),ceil(ifelse((84*.25*fvar(1)*.25)<7,7,(84*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = -3.3,-3.2
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 5
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5*.25)<7,7,(84*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = ifelse(statetype = S, 0, 11)
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;転倒誘導
[State -2, PowerReset]
type = VarAdd
triggerall = IsHelper
triggerall = var(29)&2**1
trigger1 = time = 0
var(29) = -(2**1)
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = IsHelper
triggerall = var(0) != 1
triggerall = !(var(29)&2**1)
triggerall = movehit
triggerall = numtarget
trigger1 = target,gethitvar(groundtype)=3
var(29) = 2**1
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = Numtarget
triggerall = var(29)&2**1
trigger1 = target,stateno = 5071
value = 895
ignorehitpause = 1

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンドコンボルート2-3
[Statedef 532]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,536,532)
poweradd = 30*(var(0)!=1)*!IsHelper
sprpriority = 1
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 2
trigger1 = time = 0
var(9) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = var(9) = 1
trigger1 = time = 0
var(9) = 2

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 3001, VarSet]
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = !var(9)
trigger1 = !(root,var(19+(var(13)/32))&2**(var(13)%32))
trigger1 = time = 0
var(19+(var(13)/32)) = 2**(var(13)%32)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(12) = var(11)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(11) = var(10)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(10) = stateno

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
fvar(2) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Time = 0
x = 20

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 2
x = 12

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
x = 10

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = Time = 0
x = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 4
value = 3, 2

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30*!var(0),0
givepower = 15*!var(0),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*.25*fvar(1))<7,7,(84*.25*fvar(1)))),ceil(ifelse((84*.25*fvar(1)*.25)<7,7,(84*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*11
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*11
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*ifelse(IsHelper,11,15)
sparkno = S8202
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = -3.3,-3.2
guard.velocity = ifelse(IsHelper,-5.5,-8)
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = animelem = 3
var(14) = ceil(ifelse((91*fvar(1)*.5)<7,7,(91*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5*.25)<7,7,(84*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = ifelse(statetype = S, 0, 11)
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;転倒誘導
[State -2, PowerReset]
type = VarAdd
triggerall = IsHelper
triggerall = var(29)&2**1
trigger1 = time = 0
var(29) = -(2**1)
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = IsHelper
triggerall = var(0) != 1
triggerall = !(var(29)&2**1)
triggerall = movehit
triggerall = numtarget
trigger1 = target,gethitvar(groundtype)=3
var(29) = 2**1
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = Numtarget
triggerall = var(29)&2**1
trigger1 = target,stateno = 5071
value = 895
ignorehitpause = 1

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = AnimTime = -1
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = AnimTime = -1
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタンド待機1
[Statedef 10000]
type = S
physics = S
sprpriority = 0
anim = 6900

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 420, VarSet]
type = ParentVarSet
trigger1 = time = 0
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(3) = fvar(2)

[State 420, VarSet]
type = ParentVarSet
trigger1 = parent,var(8) = 3
var(39) = 120

[State 420, VarSet]
type = ParentVarSet
trigger1 = time = 0
var(8) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(2) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(4) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(8) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(9) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 420, VarSet]
type = VarSet
trigger1 = root,stateno = 835
var(15) = 1

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = !root,var(36)
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = root,stateno = 840 && root,time = 1
value = 10840

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = root,stateno = 850 && root,time = 3
value = 10850

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = root,stateno = [181,183]
value = root,stateno

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = root,stateno = 220 && root,time = 1
trigger2 = root,stateno = 221 && root,time = 1
trigger3 = root,stateno = 240 && root,time = 1
trigger4 = root,stateno = 410 && root,time = 1
trigger5 = root,stateno = 411 && root,time = 1
trigger6 = root,stateno = 420 && root,time = 1
trigger7 = root,stateno = 421 && root,time = 1
trigger8 = root,stateno = 430 && root,time = 1
trigger9 = root,stateno = 901 && root,time = 1
trigger10 = root,stateno = 1000 && root,time = 1
trigger11 = root,stateno = 1100 && root,time = 1
trigger12 = root,stateno = 1200 && root,time = 1
trigger13 = root,stateno = 1900 && root,time = 1
trigger14 = root,stateno = 3000 && root,AnimElem = 13
trigger15 = root,stateno = 3100 && root,time = 1
trigger16 = root,stateno = 3200 && root,time = 38
trigger17 = root,stateno = 3301 && root,time = 8
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
value = 13100
triggerall = !root,var(49)
triggerall = (root,var(0) != 1 && power >= 1000) || (root,var(0) = 1 && root,var(2) >= 52) || (root,var(0) = 3 && root,var(2) >= 52)
triggerall = roundstate = 2
triggerall = root,command = "スターブレイカー1" || root,command = "スターブレイカー2" || root,command = "スターブレイカー3"
triggerall = !(root,var(26)&2**18&&(power>=2000&&!root,var(2)))
trigger1 = root,StateNo = 195
trigger2 = root,StateNo = 196
trigger3 = root,StateNo = 200
trigger4 = root,StateNo = 210
trigger5 = root,StateNo = 220
trigger6 = root,StateNo = 221
trigger7 = root,StateNo = 230
trigger8 = root,StateNo = 240
trigger9 = root,StateNo = 400
trigger10 = root,StateNo = 410
trigger11 = root,StateNo = 411
trigger12 = root,StateNo = 420
trigger13 = root,StateNo = 421
trigger14 = root,StateNo = 430
ignorehitpause = 1

[State 0, 4]
type = ChangeState
value = 10840
triggerall = !root,var(49)
triggerall = !root,var(0) || (root,var(0) = 1 && root,var(2)) || (root,var(0) = 3 && root,var(2))
triggerall = roundstate = 2
triggerall = root,command = "スタンド出現攻撃"
triggerall = !(root,var(26)&2**18&&(power>=2000&&!root,var(2)))
trigger1 = root,StateNo = 195
trigger2 = root,StateNo = 196
trigger3 = root,StateNo = 200
trigger4 = root,StateNo = 210
trigger5 = root,StateNo = 220
trigger6 = root,StateNo = 221
trigger7 = root,StateNo = 230
trigger8 = root,StateNo = 240
trigger9 = root,StateNo = 400
trigger10 = root,StateNo = 410
trigger11 = root,StateNo = 411
trigger12 = root,StateNo = 420
trigger13 = root,StateNo = 421
trigger14 = root,StateNo = 430
ignorehitpause = 1

[State 0, 4]
type = ChangeState
value = 11200
triggerall = !root,var(49)
triggerall = !root,var(0) || (root,var(0) = 1 && root,var(2)) || (root,var(0) = 3 && root,var(2))
triggerall = roundstate = 2
triggerall = root,command = "スターフィンガー" || root,command = "スターフィンガー" || root,command = "スターフィンガー"
triggerall = !(root,var(26)&2**18&&(power>=2000&&!root,var(2)))
triggerall = !((root,var(26)&2**10||root,var(26)&2**11||root,var(26)&2**12)&&(power>=1000||root,var(2)>=52))
trigger1 = root,StateNo = 195
trigger2 = root,StateNo = 196
trigger3 = root,StateNo = 200
trigger4 = root,StateNo = 210
trigger5 = root,StateNo = 220
trigger6 = root,StateNo = 221
trigger7 = root,StateNo = 230
trigger8 = root,StateNo = 240
trigger9 = root,StateNo = 400
trigger10 = root,StateNo = 410
trigger11 = root,StateNo = 411
trigger12 = root,StateNo = 420
trigger13 = root,StateNo = 421
trigger14 = root,StateNo = 430
ignorehitpause = 1

[State 0, 4]
type = ChangeState
value = 11000
triggerall = !root,var(49)
triggerall = !root,var(0) || (root,var(0) = 1 && root,var(2)) || (root,var(0) = 3 && root,var(2))
triggerall = roundstate = 2
triggerall = root,command = "オラオラ1" || root,command = "オラオラ2" || root,command = "オラオラ3"
triggerall = !(root,var(26)&2**18&&(power>=2000&&!root,var(2)))
triggerall = !((root,var(26)&2**10||root,var(26)&2**11||root,var(26)&2**12)&&(power>=1000||root,var(2)>=52))
triggerall = !(root,var(26)&2**7)
trigger1 = root,StateNo = 195
trigger2 = root,StateNo = 196
trigger3 = root,StateNo = 200
trigger4 = root,StateNo = 210
trigger5 = root,StateNo = 220
trigger6 = root,StateNo = 221
trigger7 = root,StateNo = 230
trigger8 = root,StateNo = 240
trigger9 = root,StateNo = 400
trigger10 = root,StateNo = 410
trigger11 = root,StateNo = 411
trigger12 = root,StateNo = 420
trigger13 = root,StateNo = 421
trigger14 = root,StateNo = 430
ignorehitpause = 1

[State 0, 4]
type = ChangeState
value = 11100
triggerall = !root,var(49)
triggerall = !root,var(0) || (root,var(0) = 1 && root,var(2)) || (root,var(0) = 3 && root,var(2))
triggerall = roundstate = 2
triggerall = root,command = "マッハオラ1" || root,command = "マッハオラ2" || root,command = "マッハオラ3"
triggerall = !(root,var(26)&2**18&&(power>=2000&&!root,var(2)))
triggerall = !((root,var(26)&2**10||root,var(26)&2**11||root,var(26)&2**12)&&(power>=1000||root,var(2)>=52))
triggerall = !(root,var(26)&2**7)
trigger1 = root,StateNo = 195
trigger2 = root,StateNo = 196
trigger3 = root,StateNo = 200
trigger4 = root,StateNo = 210
trigger5 = root,StateNo = 220
trigger6 = root,StateNo = 221
trigger7 = root,StateNo = 230
trigger8 = root,StateNo = 240
trigger9 = root,StateNo = 400
trigger10 = root,StateNo = 410
trigger11 = root,StateNo = 411
trigger12 = root,StateNo = 420
trigger13 = root,StateNo = 421
trigger14 = root,StateNo = 430
ignorehitpause = 1

[State 0, 4]
type = ChangeState
triggerall = !root,var(49)
triggerall = root,time = 1
trigger1 = root,stateno = 120 && root,statetype != A
trigger2 = root,stateno = [130,132]
trigger3 = root,stateno = 150
trigger4 = root,stateno = 152
trigger5 = root,stateno = 154
value = 125

[State 0, 4]
type = ChangeAnim
triggerall = roundstate <= 2
triggerall = anim != 17000
trigger1 = root,stateno = 0 && root,animtime = -1
trigger1 = random%8=1
value = 17000

[State 0, 4]
type = ChangeAnim
trigger1 = anim = 17000 && animtime = 0
trigger2 = root,anim != 0
value = 6900

[State 0, 4]
type = SprPriority
trigger1 = anim = 17000
value = 2

[State 0, 4]
type = SprPriority
trigger1 = anim = 6900
value = 0

[State 420, VarSet]
type = VarSet
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "MAX = %d Hit= %d Counter =%d Hit1 = %d Bit2 = %d \n "
params = var(2), var(3), var(4), numhelper(40000), root,animelemno(0)
ignorehitpause = 1

;---------------------------------------------------------------------------
;スタンド待機1
[Statedef 10001]
type = S
physics = S
sprpriority = 0
anim = 6900

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 420, VarSet]
type = VarSet
trigger1 = time = 1
var(15) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3252 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100 && root,statetype = A
value = 14000

[State 0, 4]
type = ChangeState
trigger1 = root,stateno = 4100 && root,statetype != A
value = 14100

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,stateno = 5030 && roundstate = 3
value = 12300

[State 0, 4]
type = ChangeState
trigger1 = !root,var(49) && roundstate = 2
value = 10000

[State 420, VarSet]
type = VarSet
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "MAX = %d Hit= %d Counter =%d Hit1 = %d Bit2 = %d \n "
params = var(2), var(3), var(4), numhelper(40000), numtarget
ignorehitpause = 1

;---------------------------------------------------------------------------
;本体時ガード（スタンド）
[Statedef 125]
type = U
physics = U
sprpriority = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 120, 1]
type = ChangeAnim
triggerall = anim != 125
trigger1 = root,anim = 120
trigger2 = root,anim = 130
trigger3 = root,anim = 132
value = 125

[State 120, 1]
type = ChangeAnim
triggerall = anim != 126
trigger1 = root,anim = 121
trigger2 = root,anim = 131
value = 126

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 150 || root,anim = 152
value = 155
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 151
value = 156
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 150
value = 157
persistent = 0

[State 2600, ChangeState]
type = changeanim
trigger1 = root,stateno = [150,155]
trigger1 = root,command = "holdback"
trigger1 = animelem = 4
value = anim
elem = 2
persistent = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 120, 5]
type = ChangeState
triggerall = time > 1
triggerall = root,time = 1
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
value = 125

[State 120, 5]
type = ChangeState
trigger1 = root,stateno != 120
trigger1 = root,stateno != [130,132]
trigger1 = root,stateno != 140
trigger1 = root,stateno != [150,155]
trigger2 = anim = 145 || anim = 146 || anim = 155 || anim = 156
trigger2 = animtime = 0
value = 10000

;---------------------------------------------------------------------------
;立ち強攻撃（本体時）（スタンド）
[Statedef 10220]
type = S
movetype = I
physics = N
ctrl = 0
anim = 10220
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 0]
type = changeanim
triggerall = root,var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 0]
type = changeanim
triggerall = root,var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State -2, CornerPush]
type = VarSet
trigger1 = 1
var(24) = root,var(24)
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(2) = root,fvar(2)
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,time = 1
trigger2 = root,stateno = 3200 && root,time = 1
trigger3 = root,stateno = 3300 && root,time = 1
value = 10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;ダッシュ立ち強攻撃（本体時）（スタンド）
[Statedef 10221]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10221
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 52, Effect]
type = ParentVarSet
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,AnimElem = 13
trigger2 = root,stateno = 3200 && root,time = 38
trigger3 = root,stateno = 3301 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -90
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
sprpriority = 2
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8201
guard.sparkno = S8100
sparkxy = -20, -90
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
sprpriority = 2
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((70*fvar(1)*.5)<7,7,(70*fvar(1)*.5)))
ignorehitpause = 1
persistent = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(19+!var(5)) < 0
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 16
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = ParentVarSet
triggerall = IsHelper
triggerall = var(41)
triggerall = fvar(4)
triggerall = time > 1
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(2)
ignorehitpause = 1
persistent = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 10000
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;レバー前立ち強攻撃（本体時）（スタンド）
[Statedef 10240]
type = S
movetype = I
physics = N
ctrl = 0
anim = 10240
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 0]
type = changeanim
triggerall = root,var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State -2, CornerPush]
type = VarSet
trigger1 = 1
var(24) = root,var(24)
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(2) = root,fvar(2)
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,time = 1
trigger2 = root,stateno = 3200 && root,time = 1
trigger3 = root,stateno = 3300 && root,time = 1
value = 10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;しゃがみ中攻撃（本体時）（スタンド）
[Statedef 10410]
type = C
movetype = I
physics = N
ctrl = 0
anim = 10410
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 0]
type = changeanim
triggerall = root,var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State -2, CornerPush]
type = VarSet
trigger1 = 1
var(24) = root,var(24)
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(2) = root,fvar(2)
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,time = 1
trigger2 = root,stateno = 3200 && root,time = 1
trigger3 = root,stateno = 3300 && root,time = 1
value = 10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;ダッシュしゃがみ中攻撃（本体時）（スタンド）
[Statedef 10411]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10411
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 52, Effect]
type = ParentVarSet
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,AnimElem = 13
trigger2 = root,stateno = 3200 && root,time = 38
trigger3 = root,stateno = 3301 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-47
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 50*!var(0)*(var(8)!=3),0
givepower = 25*!var(0)*(var(8)!=3),0
persistent = 0
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = middle
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*13
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*13
sparkno = S8201
guard.sparkno = S8100
sparkxy = -10,-47
hitsound = S1,4
guardsound = S4,0
ground.type = low
air.type = low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-5.5*.9**((var(42)-1)+!var(42))>-1.1,-1.1,-5.5*.9**((var(42)-1)+!var(42))), ifelse((-4.2+(.8*((var(42)-1)+!var(42))))>0,0,(-4.2+(.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))
ignorehitpause = 1
persistent = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(19+!var(5)) < 0
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 13
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 13
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 16
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = ParentVarSet
triggerall = IsHelper
triggerall = var(41)
triggerall = fvar(4)
triggerall = time > 1
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(2)
ignorehitpause = 1
persistent = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 10000
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;しゃがみ強攻撃（本体時）（スタンド）
[Statedef 10420]
type = C
movetype = I
physics = N
ctrl = 0
anim = 10420
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 0]
type = changeanim
triggerall = root,var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State -2, CornerPush]
type = VarSet
trigger1 = 1
var(24) = root,var(24)
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(2) = root,fvar(2)
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,time = 1
trigger2 = root,stateno = 3200 && root,time = 1
trigger3 = root,stateno = 3300 && root,time = 1
value = 10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;ダッシュしゃがみ強攻撃（本体時）（スタンド）
[Statedef 10421]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10421
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 52, Effect]
type = ParentVarSet
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,AnimElem = 13
trigger2 = root,stateno = 3200 && root,time = 38
trigger3 = root,stateno = 3301 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = L
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 0,0
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -25
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.5,-3.2
guard.velocity = -8
air.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 60*!var(0)*(var(8)!=3),0
givepower = 30*!var(0)*(var(8)!=3),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
sprpriority = 2
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,0
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8202
guard.sparkno = S8100
sparkxy = -20, -25
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3.5,-3.2
guard.velocity = -8
air.velocity = -3.5,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
sprpriority = 2
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))
ignorehitpause = 1
persistent = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(19+!var(5)) < 0
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 16
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = ParentVarSet
triggerall = IsHelper
triggerall = var(41)
triggerall = fvar(4)
triggerall = time > 1
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(2)
ignorehitpause = 1
persistent = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;転倒誘導
[State -2, PowerReset]
type = VarAdd
triggerall = IsHelper
triggerall = var(29)&2**1
trigger1 = time = 0
var(29) = -(2**1)
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = IsHelper
triggerall = var(0) != 1
triggerall = !(var(29)&2**1)
triggerall = movehit
triggerall = numtarget
trigger1 = target,gethitvar(groundtype)=3
var(29) = 2**1
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = Numtarget
triggerall = var(29)&2**1
trigger1 = target,stateno = 5071
value = 895
ignorehitpause = 1

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 10000
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;---------------------------------------------------------------------------
;レバー前しゃがみ強攻撃（本体時）（スタンド）
[Statedef 10430]
type = C
movetype = I
physics = N
ctrl = 0
anim = 10430
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 0]
type = changeanim
triggerall = root,var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State -2, CornerPush]
type = VarSet
trigger1 = 1
var(24) = root,var(24)
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(2) = root,fvar(2)
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 840 && root,time = 1
trigger2 = root,stateno = 850 && root,time = 3
trigger3 = root,stateno = 901 && root,time = 1
trigger4 = root,stateno = 1900 && root,time = 1
trigger5 = root,stateno = 220 && root,time = 1
trigger6 = root,stateno = 221 && root,time = 1
trigger7 = root,stateno = 240 && root,time = 1
trigger8 = root,stateno = 410 && root,time = 1
trigger9 = root,stateno = 411 && root,time = 1
trigger10 = root,stateno = 420 && root,time = 1
trigger11 = root,stateno = 421 && root,time = 1
trigger12 = root,stateno = 430 && root,time = 1
trigger13 = root,stateno = 1000 && root,time = 1
trigger14 = root,stateno = 1100 && root,time = 1
trigger15 = root,stateno = 1200 && root,time = 1
trigger16 = root,stateno = 3100 && root,time = 1
value = root,stateno+10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3000 && root,time = 1
trigger2 = root,stateno = 3200 && root,time = 1
trigger3 = root,stateno = 3300 && root,time = 1
value = 10000

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3203 && root,var(0)
value = 13204

[State 0, 4]
type = ChangeState
trigger1 = root,var(49)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10000

;------------------------------------------------------------------------------------------
;スタンド消滅
[Statedef 12100]
type = U
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State 420, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 220, Effect]
type = PlaySnd
trigger1 = time = 1
value = 820, 1
persistent = 0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
triggerall = time%2=0
trigger1 = prevstateno = 11000
trigger2 = prevstateno = 11100
trigger3 = prevstateno = 11200
trigger4 = prevstateno = 11900
trigger5 = prevstateno = 13000
trigger6 = prevstateno = 13100
trigger7 = prevstateno = 13200
trigger8 = prevstateno = 13301
trigger9 = prevstateno = 13300
flag = invisible

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 10000, 4]
type = PlayerPush
trigger1 = 1
value = 0

[State 1000, Anim]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 11000
trigger2 = prevstateno = 13000
value = 11005
ignorehitpause = 1

[State 1000, Anim]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 11100
trigger2 = prevstateno = 11900
value = 11105
ignorehitpause = 1

[State 1000, Anim]
type = changeanim
trigger1 = prevstateno = 11200
trigger1 = time = 0
value = 11205
ignorehitpause = 1

[State 1000, Anim]
type = changeanim
trigger1 = prevstateno = [170,182]
trigger1 = time = 0
value = 10000
ignorehitpause = 1

[State 1000, Anim]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 13100
trigger2 = prevstateno = 13300
trigger3 = prevstateno = 13301
value = 13105
ignorehitpause = 1

[State 1000, Anim]
type = changeanim
trigger1 = prevstateno = 13200
trigger1 = time = 0
value = 13205
ignorehitpause = 1

[State 1000, Anim]
type = changeanim
trigger1 = prevstateno = 13302
trigger1 = time = 0
value = 11180
ignorehitpause = 1

[State 4900, 16]
type = SprPriority
trigger1 = prevstateno = 13100
value = 3
ignorehitpause = 1

[State 4900, 16]
type = SprPriority
trigger1 = prevstateno = 1100
trigger2 = prevstateno = 11100
trigger3 = prevstateno = 11200
value = 0
ignorehitpause = 1

[State 4900, 16]
type = SprPriority
trigger1 = prevstateno = 11000
trigger2 = prevstateno = [170,182]
trigger3 = prevstateno = 13302
value = -1
ignorehitpause = 1

[State 4900, 16]
type = AngleDraw
trigger1 = time < 12
scale = 1-(.075*Time),1+(.05*Time)
ignorehitpause = 1

[State 4900, 16]
type = AngleDraw
trigger1 = time >= 12
scale = 0,0
ignorehitpause = 1

[State 1100, VarSet]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = time = 12
var(8) = 0

[State 420, 3]
type = ChangeState
trigger1 = IsHelper
trigger1 = time = 12
value = 10000

;---------------------------------------------------------------------------
; スタンド消滅（スタンドダメージ）1
[Statedef 12200]
type = U
movetype = H
physics = N
velset = 0,0
anim = 12200

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(31) = GetHitVar(damage)

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(34) = GetHitVar(hittime)+1

[State 12200, VarSet]
type = ParentVarSet
trigger1 = time = 0
var(11) = gethitvar(slidetime)

[State 12200, VarSet]
type = ParentVarSet
trigger1 = time = 0
var(33) = gethitvar(hitshaketime)

[State 12200, VarSet]
type = ParentVarSet
trigger1 = time = 0
var(34) = gethitvar(hittime)+1

[State -1, Run Fwd]
type = ParentVarAdd
triggerall = root,var(54) = (0,72]
trigger1 = time = 0
var(54) = -2-ceil(var(31)*.25)
ignorehitpause = 1

[State 12200, ChangeAnim]
type = ChangeAnim
trigger1 = root,var(49)
value = 6900

[State 12200, AfterImage]
type = AfterImageTime
trigger1 = Time = 0
value = 0

[State 12200, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 12200, Position]
type = PosAdd
trigger1 = time = 0
y = -75

[State 12200, StopSound]
type = StopSnd
trigger1 = time = 1
channel = 0

[State 12200, ChangeAnim]
type = ChangeAnim
triggerall = anim != 6900
trigger1 = animelem = 4
value = anim
elem = 2

[State 12200, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 12201+(root,var(49)=10000)

;---------------------------------------------------------------------------
; スタンド消滅（スタンドダメージ）2
[Statedef 12201]
type = U
movetype = H
physics = N
ctrl = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !root,var(36)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(47) = 1

[State 12200, VarAdd]
type = VarAdd
trigger1 = !root,var(36)
trigger1 = var(34) > 0
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(34) = -1

[State 5070, 2] ;Freeze anim
type = ChangeAnim
trigger1 = !root,var(36)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
value = 12201
persistent = 0

[State 12201, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 12201, HitVel1]
type = VelAdd
trigger1 = var(47) <= 12
y = GetHitVar(yaccel)

[State 12201, HitVel2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 12201, Position]
type = PosFreeze
trigger1 = time >= 4
trigger2 = root,var(0) = -1
trigger3 = root,var(0) = 2

[State 12201, Sound]
type = PlaySnd
trigger1 = var(47) = 1
value = 820, 1
persistent = 0

[State 12201, Angle]
type = AngleDraw
trigger1 = var(47) <= 12
scale = 1+(.05*var(47)),1-(.075*var(47))
ignorehitpause = 1

[State 12201, ChangeAnim]
type = ChangeAnim
trigger1 = var(47) = 12
value = 6900

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 12202, ChangeState]
type = DestroySelf
trigger1 = HitOver && !var(34)

;---------------------------------------------------------------------------
; スタンド消滅（スタンドダメージ）3
[Statedef 12202]
type = U
movetype = H
physics = N
ctrl = 0
anim = 6900

[State 12200, VarAdd]
type = VarAdd
trigger1 = !root,var(36)
trigger1 = var(34) > 0
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(34) = -1

[State 12202, Position]
type = PosFreeze
trigger1 = 1

[State 12202, ChangeState]
type = DestroySelf
trigger1 = HitOver && !var(34)

;---------------------------------------------------------------------------
; スタンド消滅（本体ダメージ）1
[Statedef 12300]
type = U
movetype = I
physics = N
velset = 0,0
anim = 12200

[State 12300, AfterImage]
type = AfterImageTime
trigger1 = Time = 0
value = 0

[State 12300, Position]
type = BindToParent
triggerall = prevstateno = 10001
trigger1 = time = 0
pos = 12,-75

[State 12300, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 12300, Position]
type = PosAdd
trigger1 = time = 0
y = -75

[State 12300, StopSound]
type = StopSnd
trigger1 = time = 1
channel = 0

[State 12300, ChangeAnim]
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 123000, VarSet]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 123000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = root,HitShakeOver
value = 12301

;---------------------------------------------------------------------------
; スタンド消滅（本体ダメージ）2
[Statedef 12301]
type = U
movetype = I
physics = N
ctrl = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !root,var(36)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(47) = 1

[State 5070, 2] ;Freeze anim
type = ChangeAnim
trigger1 = !root,var(36)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
value = 12201
persistent = 0

[State 12301, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 12301, HitVel1]
type = VelAdd
trigger1 = var(47) <= 12
y = root,GetHitVar(yaccel)

[State 12301, HitVel2]
type = VelSet
trigger1 = Time = 0
x = -4
y = -2

[State 12301, HitVel3]
type = VelSet
trigger1 = 1
y = .2

[State 12301, Position]
type = PosFreeze
trigger1 = time = [4,12]

[State 12301, Sound]
type = PlaySnd
trigger1 = var(47) = 1
value = 820, 1
persistent = 0

[State 12301, Angle]
type = AngleDraw
trigger1 = var(47) <= 12
scale = 1+(.05*var(47)),1-(.075*var(47))
ignorehitpause = 1

[State 12301, ChangeAnim]
type = ChangeAnim
trigger1 = var(47) = 12
value = 6900

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 12301, ChangeState]
type = ChangeState
trigger1 = root,HitOver && !root,var(34)
value = 10000

;---------------------------------------------------------------------------
; スタンド消滅（スタンドクラッシュ）（ダメージ）
[Statedef 14000]
type = U
movetype = I
anim = 15000
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1000, 0]
type = BindToParent
trigger1 = time = 0
pos = 20,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 4000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = root,var(33)<20
trigger2 = root,stateno = 5000
trigger3 = root,stateno = 5001
trigger4 = root,stateno = 5010
trigger5 = root,stateno = 5011
trigger6 = root,stateno = 5020
trigger7 = root,stateno = 5030
trigger8 = root,stateno = 5035
trigger9 = root,stateno = 5040
trigger10 = root,stateno = 5050
trigger11 = root,stateno = 5070
trigger12 = root,stateno = 5071
value = 14300

;---------------------------------------------------------------------------
; スタンド消滅（スタンドクラッシュ）（ガード）
[Statedef 14100]
type = U
movetype = I
anim = 14100
velset = 0,0
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 20,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 4000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = !root,var(33)
value = 14101

[State 4000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5001
trigger3 = root,stateno = 5010
trigger4 = root,stateno = 5011
trigger5 = root,stateno = 5020
trigger6 = root,stateno = 5030
trigger7 = root,stateno = 5035
trigger8 = root,stateno = 5040
trigger9 = root,stateno = 5050
trigger10 = root,stateno = 5070
trigger11 = root,stateno = 5071
value = 10000

;---------------------------------------------------------------------------
; スタンド消滅（スタンドクラッシュ）（ガード）
[Statedef 14101]
type = U
movetype = I
velset = 0,0

[State 1000, 0]
type = BindToParent
trigger1 = anim = 14100
pos = 20,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4000, 7]
type = sprpriority
trigger1 = animelem = 2
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = anim = 14100
trigger1 = root,stateno != [4000,4199]
value = 14101

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 4000, 7]
type = ChangeState
trigger1 = anim = 14101
trigger1 = animtime = 0
value = 10000

[State 4000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5001
trigger3 = root,stateno = 5010
trigger4 = root,stateno = 5011
trigger5 = root,stateno = 5020
trigger6 = root,stateno = 5030
trigger7 = root,stateno = 5035
trigger8 = root,stateno = 5040
trigger9 = root,stateno = 5050
trigger10 = root,stateno = 5070
trigger11 = root,stateno = 5071
value = 10000

;---------------------------------------------------------------------------
; スタンド消滅（スタンドクラッシュ）2
[Statedef 14300]
type = U
movetype = I
physics = N
velset = 0,0
anim = 14300

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 5
y = -75
persistent = 0

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 5000, 7]
type = ChangeState
trigger1 = animtime = 0
value = 14301

;---------------------------------------------------------------------------
; スタンド消滅（スタンドクラッシュ）3
[Statedef 14301]
type = U
movetype = I
physics = N
ctrl = 0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = time = 12
var(8) = 0
ignorehitpause = 1

[State 220, Position]
type = PosFreeze
trigger1 = 1

[State 220, Effect]
type = PlaySnd
trigger1 = time = 1
value = 820, 1
persistent = 0

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = 1+(.05*Time),1-(.075*Time)
ignorehitpause = 1

[State 420, 3]
type = ChangeState
trigger1 = time = 12
value = 10000

;---------------------------------------------------------------------------
;オラオラ（本体モード）
[Statedef 1000]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 2

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 52, 3]
type = CtrlSet
trigger1 = AnimElem = 4
value = 1

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;オラオラ（本体モード時スタンド）
[Statedef 11000]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = 0,0
poweradd = 20*(root,var(0)!=1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(3) = root,fvar(2)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = var(0) != 1
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = root,fvar(4)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
fvar(3) = fvar(3)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(3)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = Time = 0
var(8) = 2

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(root,command = "オラオラ3", 2, ifelse(root,command = "オラオラ2", 1, 0))

[State 1000, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = root,var(26)
trigger1 = Time = 0
var(5) = ifelse((root,var(26)&2**0),0,ifelse((root,var(26)&2**1),1,2))

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 52, Effect]
type = ParentVarSet
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(!var(5),11000,11010)

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 1
x = ifelse(!var(5),3.3,ifelse(var(5)=1,6.7,8.3))

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 5
x = ifelse(!var(5),1.6,ifelse(var(5)=1,3.3,6.7))

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElemTime(3) < 0
x = .92

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = .4*var(5)

[State 1100, Velocity]
type = VelSet
trigger1 = !var(5) && AnimElem = 2
trigger2 = !var(5) && AnimElem = 20
trigger3 = var(5) && AnimElem = 19
x = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = time = 1
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State 100, 2]
type = AssertSpecial
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(19+!var(5)) >= 1
trigger1 = time%2=0
flag = invisible

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = animelemtime(7+!var(5)) >= 0
trigger1 = animelemtime(10+!var(5)) < 0
trigger2 = animelemtime(13+!var(5)) >= 0
trigger2 = animelemtime(16+!var(5)) < 0
var(3) = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = animelemtime(4+!var(5)) >= 0
trigger1 = animelemtime(7+!var(5)) < 0
trigger2 = animelemtime(10+!var(5)) >= 0
trigger2 = animelemtime(13+!var(5)) < 0
trigger3 = animelemtime(16+!var(5)) >= 0
trigger3 = animelemtime(19+!var(5)) < 0
var(3) = 0
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
triggerall = movehit || moveguarded
triggerall = var(1) = 4
trigger1 = animelemtime(4+!var(5)) >= 1
var(2) = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = var(1) = 4
trigger2 = var(2) = 8
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
trigger1 = var(1) = (0,4)
var(1) = 1
ignorehitpause = 1
persistent = 1

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = var(2) = 8
var(2) = 0
ignorehitpause = 0
persistent = 1

[State 1100, VarSet]
type = VarAdd
trigger1 = var(2) = (0,8)
var(2) = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
triggerall = movehit || moveguarded
triggerall = !var(2)
trigger1 = animelemtime(4+!var(5)) >= 1
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = !root,var(36)
fvar(13) = 0
ignorehitpause = 1

[State 105, 1]
type = statetypeset
trigger1 = !var(5) && AnimElem = 20
trigger2 = var(5) && AnimElem = 19
trigger3 = numtarget
trigger3 = target,Pos Y > 0
trigger3 = root,var(0) != 1
movetype = I

[State 105, 1]
type = statetypeset
triggerall = !numtarget
trigger1 = !var(5) && AnimElemTime(20) < 0
trigger2 = var(5) && AnimElemTime(19) < 0
movetype = A

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = root,var(0) != 1
trigger1 = animelem = 3
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(1))<7,7,(56*fvar(1)))),ceil(ifelse((56*fvar(1)*.25)<7,7,(56*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -45
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = root,var(0) != 1
triggerall = !var(1) || (var(1)=4 && !var(2))
triggerall = var(3)%2=0
trigger1 = animelemtime(4+!var(5)) >= 1
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((14*fvar(1))<7,7,(14*fvar(1)))),ceil(ifelse((14*fvar(1)*.25)<7,7,(14*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -45
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = root,var(0) != 1
triggerall = !var(1) || (var(1)=4 && !var(2))
triggerall = var(3)%2=1
trigger1 = animelemtime(4+!var(5)) >= 1
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((14*fvar(1))<7,7,(14*fvar(1)))),ceil(ifelse((14*fvar(1)*.25)<7,7,(14*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
trigger1 = !var(5) && AnimElemTime(19) = 1
trigger2 = var(5) && AnimElemTime(18) = 2
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((14*fvar(1))<7,7,(14*fvar(1)))),ceil(ifelse((14*fvar(1)*.25)<7,7,(14*fvar(1)*.25)))
pausetime = 0,0
guard.pausetime = 0,0
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
trigger1 = animelem = 3
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = Light
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -45
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
triggerall = !var(1) || (var(1)=4 && !var(2))
triggerall = var(3)%2=0
trigger1 = animelemtime(4+!var(5)) >= 1
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -45
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
triggerall = !var(1) || (var(1)=4 && !var(2))
triggerall = var(3)%2=1
trigger1 = animelemtime(4+!var(5)) >= 1
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
trigger1 = !var(5) && AnimElemTime(19) = 1
trigger2 = var(5) && AnimElemTime(18) = 2
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,0
guard.pausetime = 0,0
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
triggerall = animelemtime(4+!var(5)) < 1
trigger1 = movehit
var(15) = ceil(ifelse((56*fvar(1)*.5)<7,7,(56*fvar(1)*.5)))
ignorehitpause = 1
persistent = 1

[State 8500, 1]
type = parentvaradd
triggerall = animelemtime(4+!var(5)) >= 1
trigger1 = movehit
var(15) = ceil(ifelse((14*fvar(1)*.5)<7,7,(14*fvar(1)*.5)))
ignorehitpause = 1
persistent = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(19+!var(5)) < 0
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 4
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 12.5
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 12100

;---------------------------------------------------------------------------
;オラオラ（スタンドモード時）
[Statedef 1050]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = 80*(var(0)!=1)*!IsHelper

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(13) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(command = "オラオラ3", 2, ifelse(command = "オラオラ2", 1, 0))

[State 1000, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = !var(59)
triggerall = var(26)
trigger1 = Time = 0
var(5) = ifelse((var(26)&2**0),0,ifelse((var(26)&2**1),1,2))

[State 1000, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = var(59)
trigger1 = Time = 0
var(5) = random%3

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = Time = 0
var(5) = var(2)%10

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(!var(5),11050,ifelse(var(5)=1,11051,11052))+(IsHelper*5)

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
trigger1 = time = 0
trigger2 = !NumTarget
var(6) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
trigger1 = var(42)
trigger1 = !var(6)
var(6) = var(42)

[State 1100, VarSet]
type = VarAdd
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(34) < 0
trigger1 = var(7) > 0
var(7) = -1
persistent = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
trigger1 = animelemtime(33) = 1
var(7) = 0
persistent = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = var(0) != 1 || (var(0) = 1 && var(2))
triggerall = var(7) > 0
triggerall = animelemtime(3) >= 0
triggerall = animelemtime(33) < 1
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(7) = 14
persistent = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 3
var(7) = 11

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = !var(7)
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(34) < 0
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
ignorehitpause = 0

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = var(7) = -1
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(34) < 0
value = anim
elem = 34
ignorehitpause = 0
persistent = 0

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
x = 14*var(5)

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 4
x = .4*var(5)

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 34
x = 0

[State 1100, SprPriority]
type = SprPriority
triggerall = !IsHelper
trigger1 = AnimElem = 41
value = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = time = 1
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = AnimElemTime(3) = 1
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = AnimElemTime(3) = 1
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = var(1) = 3
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(1)
var(1) = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = animelemtime(3) > 1
trigger1 = movehit || moveguarded
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = IsHelper
trigger1 = !root,var(36)
fvar(13) = 0
ignorehitpause = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 34
trigger2 = numtarget
trigger2 = target,Pos Y > 0
trigger2 = var(0) != 1
movetype = I

[State 105, 1]
type = statetypeset
trigger1 = !numtarget
trigger1 = AnimElemTime(34) < 0
movetype = A

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(1))<7,7,(84*fvar(1)))),ceil(ifelse((84*fvar(1)*.25)<7,7,(84*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 17
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
ignorehitpause = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 17
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 17
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(7)
trigger1 = animelemtime(5) >= 1
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*.25*fvar(1))<7,7,(84*.25*fvar(1)))),ceil(ifelse((84*.25*fvar(1)*.25)<7,7,(84*.25*fvar(1)*.25)))
pausetime = 6,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 6,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
ignorehitpause = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 6,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 6,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((35*.25*fvar(1))<7,7,(35*.25*fvar(1)))),ceil(ifelse((35*.25*fvar(1)*.25)<7,7,(35*.25*fvar(1)*.25)))
pausetime = 6,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 6,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(7)
trigger1 = animelemtime(5) >= 1
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 6,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 6,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
ignorehitpause = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
guard.pausetime = 7-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
guard.pausetime = 7-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(7)
trigger1 = animelemtime(5) >= 1
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
guard.pausetime = 7-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((var(42)-var(6))%4=0,-91,ifelse((var(42)-var(6))%4=1,-67,ifelse((var(42)-var(6))%4=2,-30,-45)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-3.2*.9**((var(42)-1)+!var(42))>-.8,-.8,-3.2*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 1100, VarSet]
type = VarSet
trigger1 = !var(7)
var(7) = -1
ignorehitpause = 0

[State 8500, 1]
type = varset
trigger1 = !IsHelper
trigger1 = animelemtime(4) < 0
var(14) = ceil(ifelse((84*fvar(1)*.5)<7,7,(84*fvar(1)*.5)))

[State 8500, 1]
type = varset
trigger1 = !IsHelper
trigger1 = animelemtime(4) >= 0
var(14) = ceil(ifelse((21*fvar(1)*.5)<7,7,(21*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = animelemtime(4) < 0
trigger1 = movehit
var(15) = ceil(ifelse((84*fvar(1)*.5*.25)<7,7,(84*fvar(1)*.5*.25)))
ignorehitpause = 1

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = animelemtime(4) >= 0
trigger1 = movehit
var(15) = ceil(ifelse((21*fvar(1)*.5*.25)<7,7,(21*fvar(1)*.5*.25)))
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 7
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 311 || var(10) = 500
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger2 = var(10) = 301
trigger2 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
trigger3 = var(10) = 310
trigger3 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200
trigger4 = var(10) = 511
trigger4 = var(11) != 501
trigger4 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger5 = var(10) = 311 && var(5)
trigger5 = var(3) = 5200 || var(3) = 5900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 500
trigger1 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
value = 501
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
trigger2 = var(10) = 501
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5200 || var(3) = 5900
trigger2 = var(10) = 511
trigger2 = var(11) != 501
trigger2 = var(3) = 5200 || var(3) = 5900
trigger3 = var(10) = 341
trigger3 = var(11) = 310
trigger3 = var(3) = 3100 || var(3) = 3300 || var(3) = 3900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 341
trigger1 = var(11) = 310
trigger1 = var(3) = 5100 || var(3) = 5900
value = 512
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(3) = 5200 || var(3) = 5900
value = 531
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 501
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200 || var(3) = 3900 || var(3) = 5900
value = 532
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger1 = var(3) = 3000 || var(3) = 5000
value = 301
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300 || var(10) = 500
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 301
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100
trigger3 = var(10) = 300 && var(5)
trigger3 = var(3) = 5100 || var(3) = 5900
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(11) = 301
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 511
trigger2 = var(11) = 501
trigger2 = var(3) = 3100 || var(3) = 3300
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 310
trigger1 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311
trigger1 = var(11) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
value = 342
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger2 = var(10) = 310
trigger3 = var(10) = 320
trigger4 = var(10) = 330
trigger5 = var(10) = 340
trigger6 = var(10) = 500
trigger7 = var(10) = 510
trigger8 = var(10) = 520
trigger9 = var(10) = 301
trigger10 = var(10) = 311
trigger11 = var(10) = 341
trigger12 = var(10) = 501
trigger13 = var(10) = 511
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = 0
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = animtime = 0
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;オラオラ（スタンドモード時）（空中）
[Statedef 1060]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 11060
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 52, 1]
type = Turn
trigger1 = Time = 0
trigger1 = P2Dist X < 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(command = "オラオラ3", 2, ifelse(command = "オラオラ2", 1, 0))

[State 1000, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = var(26)
trigger1 = Time = 0
var(5) = ifelse((var(26)&2**0),0,ifelse((var(26)&2**1),1,2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = random%3

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(!var(5),11060,ifelse(var(5)=1,11061,11062))

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = !NumTarget
var(6) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = var(42)
trigger1 = !var(6)
var(6) = var(42)

[State 1100, VarSet]
type = VarAdd
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(34) < 0
trigger1 = var(7) > 0
var(7) = -1
persistent = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = var(0) != 1 || (var(0) = 1 && var(2))
triggerall = var(7) > 0
triggerall = animelemtime(3) >= 0
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(7) = 14
persistent = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(7) = 11

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = !var(7)
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(34) < 0
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
ignorehitpause = 0

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(7) = -1
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(34) < 0
value = anim
elem = 34
ignorehitpause = 0

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 2
trigger1 = var(5)
x = 4

[State 220, Position]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
x = 14*var(5)

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
x = .067
y = .067

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 4
fvar(9) = Vel X

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 4
fvar(10) = Vel Y

[State 1100, VarSet]
type = VarAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(4) > 0
fvar(10) = .033

[State 1100, Velocity]
type = VelSet
trigger1 = animelemtime(4) > 0
trigger1 = animelemtime(34) < 0
x = fvar(9)+(1.67*command = "holdfwd")-(.83*command = "holdback")
y = fvar(10)-(3.21*command = "holdup")

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 34
x = fvar(9)

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(34) > 0
y = ifelse(var(3)||var(4),.5,.6)

[State 1100, Velocity]
type = PosFreeze
trigger1 = animelemtime(4) < 0

[State 1100, SprPriority]
type = SprPriority
trigger1 = AnimElem = 34
value = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = time = 1
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = AnimElemTime(3) = 1
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = AnimElemTime(3) = 1
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = var(1) = 5
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(1)
var(1) = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = animelemtime(3) > 1
trigger1 = movehit || moveguarded
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = IsHelper
trigger1 = !var(36)
fvar(13) = 0
ignorehitpause = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 34
trigger2 = numtarget
trigger2 = target,Pos Y > 0
trigger2 = var(0) != 1
movetype = I

[State 105, 1]
type = statetypeset
trigger1 = !numtarget
trigger1 = AnimElemTime(34) < 0
movetype = A

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((28*fvar(1))<7,7,(28*fvar(1)))),ceil(ifelse((28*fvar(1)*.25)<7,7,(28*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
airguard.velocity = -5,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((28*fvar(1))<7,7,(28*fvar(1)))),ceil(ifelse((28*fvar(1)*.25)<7,7,(28*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
airguard.velocity = -5,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((28*fvar(1))<7,7,(28*fvar(1)))),ceil(ifelse((28*fvar(1)*.25)<7,7,(28*fvar(1)*.25)))
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
airguard.velocity = -5,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 40*!var(0),0
givepower = 20*!var(0),0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 3
attr = A, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = A, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = A, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 7,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 7,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,4
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 1100, VarSet]
type = VarSet
trigger1 = !var(7)
var(7) = -1
ignorehitpause = 0

[State 8500, 1]
type = varset
trigger1 = 1
var(14) = ceil(ifelse((28*fvar(1)*.5)<7,7,(28*fvar(1)*.5)))

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(3) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;オラオラ（声）
[Statedef 11010]
type = U
movetype = I
ctrl = 0
anim = 6900

[State 220, 3]
type = DestroySelf
trigger1 = root,movetype = H
trigger2 = parent,movetype = H

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = parent,stateno

[State 8500, 1]
type = varset
trigger1 = var(0) = 2
var(0) = 0
persistent = 1

[State 8500, 1]
type = varset
trigger1 = var(0) = 1
trigger1 = !parent,fvar(13)
var(0) = 2
persistent = 1

[State 8500, 1]
type = varset
trigger1 = parent,fvar(13) = 1
trigger2 = root,var(0) = -1
trigger3 = root,var(0) = 2
var(0) = 1
persistent = 1

[State 8500, 1]
type = ParentVarSet
trigger1 = 1
fvar(13) = 1
persistent = 1

[State 220, Voice]
type = PlaySnd
trigger1 = time = 1
value = 1000, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 25
trigger2 = time > 25
trigger2 = var(0) = 2
value = 1000, 1
channel = 0
loop = 1

[State 220, Voice]
type = PlaySnd
trigger1 = parent,stateno = 11000 && !parent,var(5) && parent,animelem = 20
trigger2 = parent,stateno = 11000 && parent,var(5) && parent,animelem = 19
trigger3 = parent,stateno = 1050 && parent,animelem = 34
trigger4 = parent,stateno = 1060 && parent,animelem = 34
trigger5 = parent,stateno = 52 && parent,prevstateno = 1060 && parent,time = 1
trigger6 = parent,stateno = 13000 && parent,anim = 13000 && parent,animelem = 50
trigger7 = parent,stateno = 11900 && parent,animelem = 12
trigger8 = parent,stateno = 3050 && !parent,IsHelper && parent,animelem = 34
trigger9 = parent,stateno = 3050 && parent,IsHelper && parent,animelem = 62
trigger10 = parent,stateno = 3060 && parent,animelem = 34
trigger11 = parent,stateno = 52 && parent,prevstateno = 3060 && parent,time = 1
value = 1000, 2
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = parent,stateno = 3351 && parent,animelem = 166
trigger2 = parent,stateno = 14800 && parent,animelem = 120
value = 3100, 0
channel = 0

[State 220, Voice]
type = StopSnd
trigger1 = parent,stateno = 12200 || parent,stateno = 12300
trigger2 = root,movetype = H
trigger3 = parent,stateno = 1150
trigger4 = parent,stateno = 1160
trigger5 = parent,stateno = 1170
trigger6 = parent,stateno = 1180
trigger7 = var(0) = 1
channel = 0

[State 220, 3]
type = DestroySelf
trigger1 = var(1) != parent,stateno
trigger2 = parent,stateno = 1150 || parent,stateno = 1160 || parent,stateno = 1170 || parent,stateno = 1180 || parent,stateno = 12200 || parent,stateno = 12300
trigger3 = parent,stateno = 11000 && !parent,var(5) && parent,animelem = 20
trigger4 = parent,stateno = 11000 && parent,var(5) && parent,animelem = 19
trigger5 = parent,stateno = 1050 && parent,animelem = 34
trigger6 = parent,stateno = 1060 && parent,animelem = 34
trigger7 = parent,stateno = 52 && parent,prevstateno = 1060 && parent,time = 1
trigger8 = parent,stateno = 13000 && parent,anim = 13000 && parent,animelem = 50
trigger9 = parent,stateno = 3102 && parent,animelem = 63
trigger10 = parent,stateno = 3050 && !parent,IsHelper && parent,animelem = 34
trigger11 = parent,stateno = 3050 && parent,IsHelper && parent,animelem = 62
trigger12 = parent,stateno = 3060 && parent,animelem = 34
trigger13 = parent,stateno = 52 && parent,prevstateno = 3060 && parent,time = 1
trigger14 = parent,stateno = 3351 && parent,animelem = 166
trigger15 = parent,stateno = 14800 && parent,animelem = 120

;---------------------------------------------------------------------------
;オラオラ（エフェクト）（背面）
[Statedef 17100]
type = U
movetype = I
ctrl = 0
anim = 17100
sprpriority = -1

[State 220, 3]
type = DestroySelf
trigger1 = root,movetype = H
trigger2 = parent,movetype = H

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = parent,stateno

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, Assert]
type = AssertSpecial
trigger1 = var(0)%7=[3,5]
flag = invisible

[State 0]
type = changeanim
triggerall = time > 0
trigger1 = parent,var(24)
trigger2 = var(0)%7=[3,6]
trigger3 = root,var(0) = -1
trigger4 = root,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 10000, VarAdd]
type = VarAdd
triggerall = !parent,var(24)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(0) = 1

[State 220, 3]
type = DestroySelf
trigger1 = var(1) != parent,stateno
trigger2 = parent,stateno = 12200 || parent,stateno = 12300
trigger3 = parent,stateno = 1050 && parent,animelem = 34
trigger4 = parent,stateno = 1150 && parent,time = 1
trigger5 = parent,stateno = 1160 && parent,time = 1
trigger6 = parent,stateno = 1170 && parent,time = 1
trigger7 = parent,stateno = 1180 && parent,time = 1
trigger8 = parent,stateno = 52 && parent,prevstateno = 1060 && parent,time = 1
trigger9 = parent,stateno = 13000 && parent,anim = 13000 && parent,animelem = 50
trigger10 = parent,stateno = 3050 && !parent,IsHelper && parent,animelem = 34
trigger11 = parent,stateno = 3050 && parent,IsHelper && parent,animelem = 62
trigger12 = parent,stateno = 52 && parent,prevstateno = 3060 && parent,time = 1
trigger13 = parent,stateno = 13301 && parent,animelem = 84
trigger14 = parent,stateno = 3351 && parent,animelem = 165

;---------------------------------------------------------------------------
;オラオラ（エフェクト）（前面）
[Statedef 17101]
type = U
movetype = I
ctrl = 0
anim = 17101
sprpriority = 2

[State 220, 3]
type = DestroySelf
trigger1 = root,movetype = H
trigger2 = parent,movetype = H

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = parent,stateno

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, VarAdd]
type = VarAdd
triggerall = !parent,var(24)
trigger1 = root,var(0) != -1
trigger1 = root,var(0) != 2
var(0) = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = var(0)%7=[0,2]
flag = invisible

[State 0]
type = changeanim
triggerall = time > 0
trigger1 = parent,var(24)
trigger2 = var(0)%7=[0,3]
trigger3 = root,var(0) = -1
trigger4 = root,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 220, 3]
type = DestroySelf
trigger1 = var(1) != parent,stateno
trigger2 = parent,stateno = 12200 || parent,stateno = 12300
trigger3 = parent,stateno = 1050 && parent,animelem = 34
trigger4 = parent,stateno = 1150 && parent,time = 1
trigger5 = parent,stateno = 1160 && parent,time = 1
trigger6 = parent,stateno = 1170 && parent,time = 1
trigger7 = parent,stateno = 1180 && parent,time = 1
trigger8 = parent,stateno = 52 && parent,prevstateno = 1060 && parent,time = 1
trigger9 = parent,stateno = 13000 && parent,anim = 13000 && parent,animelem = 50
trigger10 = parent,stateno = 3050 && !parent,IsHelper && parent,animelem = 34
trigger11 = parent,stateno = 3050 && parent,IsHelper && parent,animelem = 62
trigger12 = parent,stateno = 52 && parent,prevstateno = 3060 && parent,time = 1
trigger13 = parent,stateno = 13301 && parent,animelem = 84
trigger14 = parent,stateno = 3351 && parent,animelem = 165

;---------------------------------------------------------------------------
;マッハオラ（本体モード）
[Statedef 1100]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1100
velset = 0,0
sprpriority = 2

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 52, 3]
type = CtrlSet
trigger1 = AnimElem = 10
value = 1

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;マッハオラ（本体モード時スタンド）
[Statedef 11100]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(3) = root,fvar(2)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = var(0) != 1
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = root,fvar(4)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
fvar(3) = fvar(3)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(3)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = Time = 0
var(8) = 2

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(root,command = "マッハオラ3", 2, ifelse(root,command = "マッハオラ2", 1, 0))

[State 1000, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = root,var(26)
trigger1 = Time = 0
var(5) = ifelse((root,var(26)&2**3),0,ifelse((root,var(26)&2**4),1,2))

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 1000, Power]
type = PowerAdd
trigger1 = Time = 0
value = (50+(var(5)*10))*(root,var(0)!=1)

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(!var(5), 11100, ifelse(var(5) = 1, 11110, 11120))

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 13.3+(3.3*var(5))

[State 1100, Velocity]
type = VelSet
triggerall = !var(24)
trigger1 = !var(5) && AnimElem = 12
trigger2 = var(5)=1 && AnimElem = 14
trigger3 = var(5)=2 && AnimElem = 16
x = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(5) && AnimElem = 10
trigger2 = var(5)=1 && AnimElem = 12
trigger3 = var(5)=2 && AnimElem = 14
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
value = 1100, 0
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(6) >= 0
triggerall = P2bodydist x < 30
trigger1 = animelemtime(10+(var(5)*2)) < 0
value = anim
elem = 10+(var(5)*2)

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = !var(5) && AnimElem = 12
trigger2 = var(5)=1 && AnimElem = 14
trigger3 = var(5)=2 && AnimElem = 16
value = anim
elem = 11+(var(5)*2)
persistent = 1

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(5) && AnimElem = 10
trigger3 = var(5)=1 && AnimElem = 12
trigger4 = var(5)=2 && AnimElem = 14
x = .5

[State 105, 1]
type = statetypeset
trigger1 = !var(5) && AnimElem = 11
trigger2 = var(5)=1 && AnimElem = 13
trigger3 = var(5)=2 && AnimElem = 15
movetype = I

[State 100, 2]
type = AssertSpecial
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(13+(var(5)*2)) >= 0
trigger1 = time%2=0
flag = invisible

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
trigger1 = !var(5) && AnimElem = 10
trigger2 = var(5)=1 && AnimElem = 12
trigger3 = var(5)=2 && AnimElem = 14
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,0
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 19
ground.velocity = -9
guard.velocity = -8
air.velocity = ifelse(-10*.9**((var(42)-1)+!var(42))>-2,-2,-10*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
trigger1 = !var(5) && AnimElem = 10
trigger2 = var(5)=1 && AnimElem = 12
trigger3 = var(5)=2 && AnimElem = 14
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*17
guard.pausetime = 0,0
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 19
ground.velocity = -9
guard.velocity = -8
air.velocity = ifelse(-10*.9**((var(42)-1)+!var(42))>-2,-2,-10*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((70*fvar(1)*.5)<7,7,(70*fvar(1)*.5)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 19
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 16
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 12100

;---------------------------------------------------------------------------
;マッハオラ（スタンドモード）
[Statedef 1150]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(command = "マッハオラ3", 2, ifelse(command = "マッハオラ2", 1, 0))

[State 1000, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = !var(59)
triggerall = var(26)
trigger1 = Time = 0
var(5) = ifelse((var(26)&2**3),0,ifelse((var(26)&2**4),1,2))

[State 1000, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = var(59)
trigger1 = Time = 0
var(5) = random%3

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = Time = 0
var(5) = var(2)%10

;マッハオラ（追撃）（スタンドモード）
[State -1, Taunt]
type = ChangeState
value = 1160
triggerall = !IsHelper
triggerall = !var(59)
triggerall = var(0) != 1 || (var(0) = 1 && var(2))
triggerall = roundstate = 2
triggerall = var(26)&2**17
trigger1 = time = 0
ignorehitpause = 1

;マッハオラ（追撃）（スタンドモード）
[State -1, Taunt]
type = ChangeState
value = 1170
triggerall = !IsHelper
triggerall = !var(59)
triggerall = var(0) != 1 || (var(0) = 1 && var(2))
triggerall = roundstate = 2
triggerall = var(26)&2**18
trigger1 = time = 0
ignorehitpause = 1

;マッハオラ（追撃）（スタンドモード）
[State -1, Taunt]
type = ChangeState
value = 1180
triggerall = !IsHelper
triggerall = !var(59)
triggerall = var(0) != 1 || (var(0) = 1 && var(2))
triggerall = roundstate = 2
triggerall = var(26)&2**19
trigger1 = time = 0
ignorehitpause = 1

[State 1000, Power]
type = PowerAdd
trigger1 = Time = 0
value = (50+(var(5)*10))*(var(0)!=1)*!IsHelper

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(!var(5),11150,ifelse(var(5)=1,11151,11152))+(IsHelper*5)

[State 1100, Velocity]
type = VelSet
trigger1 = !IsHelper && AnimElem = 6
trigger2 = IsHelper && !var(5) && AnimElem = 5
trigger3 = IsHelper && var(5) && AnimElem = 6
x = 13.3+(3.3*var(5))

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper && !var(5) && AnimElem = 9
trigger2 = IsHelper && !var(5) && AnimElem = 8
trigger3 = var(5)=1 && AnimElem = 11
trigger4 = var(5)=2 && AnimElem = 13
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper && AnimElem = 5
trigger2 = IsHelper && !var(5) && AnimElem = 4
trigger3 = IsHelper && var(5) && AnimElem = 5
value = 1100, 0
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper && AnimElem = 5
trigger2 = IsHelper && !var(5) && AnimElem = 4
trigger3 = IsHelper && var(5) && AnimElem = 5
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(6) >= 0
triggerall = P2bodydist x < 30
trigger1 = animelemtime(8+(var(5)*2)) < 0
value = anim
elem = 8+(var(5)*2)-(IsHelper&&!var(5))

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = !IsHelper && !var(5) && AnimElem = 10
trigger2 = IsHelper && !var(5) && AnimElem = 9
trigger3 = var(5)=1 && AnimElem = 12
trigger4 = var(5)=2 && AnimElem = 14
value = anim
elem = 9+(var(5)*2)
persistent = 1

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !IsHelper && !var(5) && AnimElem = 8
trigger2 = IsHelper && !var(5) && AnimElem = 7
trigger3 = var(5)=1 && AnimElem = 10
trigger4 = var(5)=2 && AnimElem = 12
x = .5

[State 1100, Velocity]
type = VelSet
triggerall = !var(24)
trigger1 = !IsHelper && !var(5) && AnimElem = 11
trigger2 = IsHelper && !var(5) && AnimElem = 10
trigger3 = var(5)=1 && AnimElem = 13
trigger4 = var(5)=2 && AnimElem = 15
x = 0

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper && !var(5) && AnimElem = 10
trigger2 = IsHelper && !var(5) && AnimElem = 9
trigger3 = var(5)=1 && AnimElem = 12
trigger4 = var(5)=2 && AnimElem = 14
movetype = I

[State 52, 3]
type = CtrlSet
triggerall = !IsHelper
trigger1 = !var(5) && AnimElem = 20
trigger2 = var(5)=1 && AnimElem = 22
trigger3 = var(5)=2 && AnimElem = 24
value = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
trigger1 = !IsHelper && !var(5) && AnimElem = 9
trigger2 = IsHelper && !var(5) && AnimElem = 8
trigger3 = var(5)=1 && AnimElem = 11
trigger4 = var(5)=2 && AnimElem = 13
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((119*fvar(1))<7,7,(119*fvar(1)))),ceil(ifelse((119*fvar(1)*.25)<7,7,(119*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*9
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -9
guard.velocity = -8
air.velocity = ifelse(-10*.9**((var(42)-1)+!var(42))>-2,-2,-10*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
trigger1 = !IsHelper && !var(5) && AnimElem = 9
trigger2 = IsHelper && !var(5) && AnimElem = 8
trigger3 = var(5)=1 && AnimElem = 11
trigger4 = var(5)=2 && AnimElem = 13
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((119*.25*fvar(1))<7,7,(119*.25*fvar(1)))),ceil(ifelse((119*.25*fvar(1)*.25)<7,7,(119*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*9
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -9
guard.velocity = -8
air.velocity = ifelse(-10*.9**((var(42)-1)+!var(42))>-2,-2,-10*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = !IsHelper && !var(5) && AnimElem = 9
trigger2 = IsHelper && !var(5) && AnimElem = 8
trigger3 = var(5)=1 && AnimElem = 11
trigger4 = var(5)=2 && AnimElem = 13
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*9
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = ifelse(IsHelper,11,17)
ground.hittime = ifelse(IsHelper,11,17)
air.hittime = ifelse(IsHelper,11,17)
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = -9
guard.velocity = -8
air.velocity = ifelse(-10*.9**((var(42)-1)+!var(42))>-2,-2,-10*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
trigger1 = !var(5) && AnimElem = 9
trigger2 = var(5)=1 && AnimElem = 11
trigger3 = var(5)=2 && AnimElem = 13
var(14) = ceil(ifelse((119*fvar(1)*.5)<7,7,(119*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((119*fvar(1)*.5*.25)<7,7,(119*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = !var(5) && AnimElem = 9
trigger2 = var(5)=1 && AnimElem = 12
trigger3 = var(5)=2 && AnimElem = 14
value = anim
elem = 9+(var(5)*2)-(IsHelper&&!var(5))
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 311 || var(10) = 500
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger2 = var(10) = 301
trigger2 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
trigger3 = var(10) = 310
trigger3 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200
trigger4 = var(10) = 511
trigger4 = var(11) != 501
trigger4 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger5 = var(10) = 311 && var(5)
trigger5 = var(3) = 5200 || var(3) = 5900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 500
trigger1 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
value = 501
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
trigger2 = var(10) = 501
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5200 || var(3) = 5900
trigger2 = var(10) = 511
trigger2 = var(11) != 501
trigger2 = var(3) = 5200 || var(3) = 5900
trigger3 = var(10) = 341
trigger3 = var(11) = 310
trigger3 = var(3) = 3100 || var(3) = 3300 || var(3) = 3900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 341
trigger1 = var(11) = 310
trigger1 = var(3) = 5100 || var(3) = 5900
value = 512
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(3) = 5200 || var(3) = 5900
value = 531
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 501
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200 || var(3) = 3900 || var(3) = 5900
value = 532
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger1 = var(3) = 3000 || var(3) = 5000
value = 301
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300 || var(10) = 500
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 301
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100
trigger3 = var(10) = 300 && var(5)
trigger3 = var(3) = 5100 || var(3) = 5900
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(11) = 301
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 511
trigger2 = var(11) = 501
trigger2 = var(3) = 3100 || var(3) = 3300
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 310
trigger1 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311
trigger1 = var(11) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
value = 342
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger2 = var(10) = 310
trigger3 = var(10) = 320
trigger4 = var(10) = 330
trigger5 = var(10) = 340
trigger6 = var(10) = 500
trigger7 = var(10) = 510
trigger8 = var(10) = 520
trigger9 = var(10) = 301
trigger10 = var(10) = 311
trigger11 = var(10) = 341
trigger12 = var(10) = 501
trigger13 = var(10) = 511
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = 0
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = animtime = 0
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;マッハオラ（スタンドモード）（追撃）（弱）
[Statedef 1160]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 11160
poweradd = 30*(var(0)!=1)
velset = 0,0
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(1) = 1
x = 13.3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .92

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElemTime(1) = 1
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(1) >= 1
triggerall = P2bodydist x < 30
trigger1 = animelemtime(2) < 0
value = anim
elem = 2

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 7
value = anim
elem = 6
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAF
guardflag = L
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -42
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -42
hitsound = S1,5
guardsound = S4,0
ground.type = Trip
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -3.3,-3.2
guard.velocity = -8
air.velocity = -3.3,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = AnimElem = 5
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;マッハオラ（スタンドモード）（追撃）（中）
[Statedef 1170]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 11170
poweradd = 30*(var(0)!=1)
velset = 0,0
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(1) = 1
x = 16.7

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 1
x = 7.5

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(24)
x = .92

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElemTime(1) = 1
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(1) >= 2
triggerall = P2bodydist x < 30
trigger1 = animelemtime(2) < 0
value = anim
elem = 2

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 9
value = anim
elem = 8
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 52, 3]
type = CtrlSet
trigger1 = AnimElemTime(15) = 1
value = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = Up
fall.animtype = Up
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -73
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -1.6, -8.6
guard.velocity = -8
air.velocity = -1.6, -8.6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
triggerall = !var(41)
trigger1 = AnimElem = 6
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = Up
fall.animtype = Up
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -120
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -1.6, -8.6
guard.velocity = -8
air.velocity = -1.6, -8.6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = Up
fall.animtype = Up
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -73
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -1.6, -8.6
guard.velocity = -8
air.velocity = -1.6, -8.6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(41)
trigger1 = AnimElem = 6
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = Up
fall.animtype = Up
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -120
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -1.6, -8.6
guard.velocity = -8
air.velocity = -1.6, -8.6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = AnimElem = 5
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;マッハオラ（スタンドモード）（追撃）（強）
[Statedef 1180]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 11180
poweradd = 30*(var(0)!=1)
velset = 0,0
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(1) = 1
x = 20

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
value = 1100, 1
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElemTime(1) = 1
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
Anim = 17200
pos = 0, 0
postype = P1
ownpal = 1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(1) >= 1
triggerall = P2bodydist x < 30
trigger1 = animelemtime(2) < 0
value = anim
elem = 2

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 6
value = anim
elem = 5
persistent = 1

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 8.3

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 4
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((42*fvar(1))<7,7,(42*fvar(1)))),ceil(ifelse((42*fvar(1)*.25)<7,7,(42*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = ifelse(-8.5*.9**((var(42)-1)+!var(42))>-6.8,-6.8,-8.5*.9**((var(42)-1)+!var(42))),10
guard.velocity = -12
air.velocity = ifelse(-8.5*.9**((var(42)-1)+!var(42))>-6.8,-6.8,-8.5*.9**((var(42)-1)+!var(42))),10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 4
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = ifelse(-8.5*.9**((var(42)-1)+!var(42))>-6.8,-6.8,-8.5*.9**((var(42)-1)+!var(42))),10
guard.velocity = -12
air.velocity = ifelse(-8.5*.9**((var(42)-1)+!var(42))>-6.8,-6.8,-8.5*.9**((var(42)-1)+!var(42))),10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = AnimElem = 5
var(14) = ceil(ifelse((42*fvar(1)*.5)<7,7,(42*fvar(1)*.5)))

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = screenbound
trigger1 = var(50)
value = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = AnimTime = 0 || ctrl
trigger1 = numtarget
trigger1 = target,stateno = [2600,2601]
trigger2 = backedgebodydist < 0 || frontedgebodydist < 0
value = 2501

[State 200, 7]
type = TargetState
trigger1 = !var(24)
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = !var(0)
trigger1 = var(50)
value = 2700
ignorehitpause = 0
persistent = 0

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スターフィンガー（本体モード）
[Statedef 1200]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1200
velset = 0,0
sprpriority = 2

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 52, 3]
type = CtrlSet
trigger1 = AnimElemTime(8) = 1
value = 1

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スターフィンガー（本体モード時スタンド）
[Statedef 11200]
type = U
movetype = I
physics = N
juggle = 0
ctrl = 0
anim = 11200
velset = 0,0
sprpriority = 0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(3) = root,fvar(2)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = var(0) != 1
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = root,fvar(4)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
fvar(3) = fvar(3)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(3)
trigger1 = Time = 0
fvar(2) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = Time = 0
var(8) = 2

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4) < .1
fvar(4) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
fvar(4) = root,fvar(2)

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = var(47) = 506
var(5) = 1

[State 12200, VarAdd]
type = VarAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(47) = 1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 220, Position]
type = PosSet
trigger1 = anim = 11200
trigger1 = !fvar(3)
trigger1 = !fvar(4)
x = ceil(root,Pos X)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = anim = 11200
trigger1 = var(47) > 22
trigger1 = root,command != "holdx" && root,command != "holdy" && root,command != "holdz" && root,command != "holdb"
trigger2 = var(47) > 532
value = 11201

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11201
trigger1 = AnimElem = 2
value = 1200, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11200
trigger1 = AnimElem = 1
value = 1200, 0
channel = 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11201
trigger1 = AnimElem = 1
value = 1200, 1
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11201
trigger1 = AnimElem = 1
Anim = 17300
pos = 0, 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,PalFX]
type = PalFX
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = var(47) >= 506
triggerall = time%4=1
trigger1 = anim = 11200
trigger2 = anim = 11201
trigger2 = animelemtime(8) < 0
add = 128,128,192
time = 2
persistent = 1

[State 105, 1]
type = statetypeset
triggerall = anim = 11201
trigger1 = AnimElem = 1
movetype = A

[State 105, 1]
type = statetypeset
triggerall = anim = 11201
trigger1 = AnimElem = 3
movetype = I

[State 100, 2]
type = AssertSpecial
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11201
triggerall = animelemtime(10) >= 0
trigger1 = time%2=0
flag = invisible

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
triggerall = anim = 11201
triggerall = !var(5)
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(1))<7,7,(77*fvar(1)))),ceil(ifelse((77*fvar(1)*.25)<7,7,(77*fvar(1)*.25)))
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
triggerall = anim = 11201
triggerall = var(5)
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAF
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(1))<7,7,(77*fvar(1)))),ceil(ifelse((77*fvar(1)*.25)<7,7,(77*fvar(1)*.25)))
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
triggerall = anim = 11201
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 0
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((77*fvar(1)*.5)<7,7,(77*fvar(1)*.5)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 27
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = anim = 11201
trigger1 = AnimTime = 0
value = 12100

;---------------------------------------------------------------------------
;スターフィンガー（スタンドモード）
[Statedef 1250]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(47) = 1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = var(47) = 506
var(5) = 1

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 11250+(IsHelper*5)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = !IsHelper
triggerall = anim = 11250
trigger1 = var(47) > 14
trigger1 = command != "holdx" && command != "holdy" && command != "holdz" && command != "holdb"
trigger2 = var(47) > 532
value = 11251

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = IsHelper
triggerall = anim = 11255
trigger1 = var(47) > 8
value = 11256

[State 1000, Power]
type = PowerAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 1
value = 80*(var(0)!=1)*!IsHelper

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 2
value = 1200, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11250 || anim = 11255
trigger1 = AnimElem = 1
value = 1200, 0
channel = 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 1
value = 1200, 1
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 1
Anim = 17300
pos = 0, 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,PalFX]
type = PalFX
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = time >= 506
triggerall = time%4=1
trigger1 = anim = 11250 || anim = 11255
trigger2 = anim = 11251 || anim = 11256
trigger2 = animelemtime(8) < 0
add = 128,128,192
time = 2
persistent = 1

[State 105, 1]
type = statetypeset
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 1
movetype = A

[State 105, 1]
type = statetypeset
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 3
movetype = I

[State 52, 3]
type = SprPriority
triggerall = !IsHelper
trigger1 = anim = 11251
trigger1 = AnimElem = 13
value = 0

[State 52, 3]
type = CtrlSet
triggerall = !IsHelper
trigger1 = anim = 11251
trigger1 = AnimElemTime(12) = 0
value = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = anim = 11251 || anim = 11256
triggerall = !var(5)
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(1))<7,7,(77*fvar(1)))),ceil(ifelse((77*fvar(1)*.25)<7,7,(77*fvar(1)*.25)))
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != 1
triggerall = anim = 11251 || anim = 11256
triggerall = var(5)
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAF
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(1))<7,7,(77*fvar(1)))),ceil(ifelse((77*fvar(1)*.25)<7,7,(77*fvar(1)*.25)))
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40+(var(5)*10),0
givepower = 20+(var(5)*5),0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*.25*fvar(1))<7,7,(77*.25*fvar(1)))),ceil(ifelse((77*.25*fvar(1)*.25)<7,7,(77*.25*fvar(1)*.25)))
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = anim = 11251 || anim = 11256
trigger1 = AnimElem = 2
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 0
pausetime = 1,!(var(28)>=10&&random%8=0)*25
guard.pausetime = 1,!(var(28)>=10&&random%8=0)*25
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -69
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = ifelse(IsHelper,11,17)
ground.hittime = ifelse(IsHelper,11,17)
air.hittime = ifelse(IsHelper,11,17)
guard.ctrltime = ifelse(IsHelper,11,17)
ground.velocity = 8.3
guard.velocity = 8.3
air.velocity = ifelse(-.8*.9**((var(42)-1)+!var(42))>-.16,-.16,-.8*.9**((var(42)-1)+!var(42))), ifelse((-7.5+(1.5*((var(42)-1)+!var(42))))>0,0,(-7.5+(1.5*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = anim = 11251
trigger1 = AnimElem = 2
var(14) = ceil(ifelse((77*fvar(1)*.5)<7,7,(77*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((77*fvar(1)*.5*.25)<7,7,(77*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = screenbound
triggerall = !IsHelper
trigger1 = var(50)
value = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = !IsHelper
triggerall = anim = 11251
triggerall = AnimTime = 0 || ctrl
trigger1 = numtarget
trigger1 = target,stateno = [2600,2601]
trigger2 = backedgebodydist < 0 || frontedgebodydist < 0
value = 2501

[State 200, 7]
type = TargetState
triggerall = !IsHelper
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = !var(0)
trigger1 = var(50)
trigger1 = prevstateno = 1180
trigger1 = time = 0
value = 2700
ignorehitpause = 0
persistent = 0

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
triggerall = anim = 11251
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 311 || var(10) = 500
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger2 = var(10) = 301
trigger2 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
trigger3 = var(10) = 310
trigger3 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200
trigger4 = var(10) = 511
trigger4 = var(11) != 501
trigger4 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger5 = var(10) = 311 && var(5)
trigger5 = var(3) = 5200 || var(3) = 5900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 500
trigger1 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
value = 501
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
trigger2 = var(10) = 501
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5200 || var(3) = 5900
trigger2 = var(10) = 511
trigger2 = var(11) != 501
trigger2 = var(3) = 5200 || var(3) = 5900
trigger3 = var(10) = 341
trigger3 = var(11) = 310
trigger3 = var(3) = 3100 || var(3) = 3300 || var(3) = 3900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 341
trigger1 = var(11) = 310
trigger1 = var(3) = 5100 || var(3) = 5900
value = 512
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(3) = 5200 || var(3) = 5900
value = 531
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 501
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200 || var(3) = 3900 || var(3) = 5900
value = 532
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger1 = var(3) = 3000 || var(3) = 5000
value = 301
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300 || var(10) = 500
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 301
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100
trigger3 = var(10) = 300 && var(5)
trigger3 = var(3) = 5100 || var(3) = 5900
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(11) = 301
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 511
trigger2 = var(11) = 501
trigger2 = var(3) = 3100 || var(3) = 3300
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 310
trigger1 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311
trigger1 = var(11) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
value = 342
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger2 = var(10) = 310
trigger3 = var(10) = 320
trigger4 = var(10) = 330
trigger5 = var(10) = 340
trigger6 = var(10) = 500
trigger7 = var(10) = 510
trigger8 = var(10) = 520
trigger9 = var(10) = 301
trigger10 = var(10) = 311
trigger11 = var(10) = 341
trigger12 = var(10) = 501
trigger13 = var(10) = 511
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = 0
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = animtime = 0
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;ゾッとするぜ（待機）（本体モード）
[Statedef 1300]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Anim]
type = ChangeAnim
trigger1 = prevstateno != 1304
trigger1 = Time = 0
value = 1300
persistent = 0

[State 1035, 2]
type = ReversalDef
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 4
attr = S, SA
reversal.attr = SCA, AA
pausetime = 0,40
sparkno = -1
hitsound = -1,0
sprpriority = -1
persistent = 1
p1stateno = 1301
guard.dist = 0
numhits = 0

[State -2, 4000] 
type = HitOverride
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(13) < 0
slot = 0
stateno = 1302
attr = SCA, AP
time = 1

[State 220, 3]
type = ChangeState
trigger1 = var(0) = -1 || var(0) = 2
value = 1304

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゾッとするぜ（相手時止め時）（本体モード）
[Statedef 1304]
type = S
movetype = I
physics = S

[State 220, 3]
type = ChangeState
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = 1300

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（本体モード）
[Statedef 1301]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1301
velset = 0,0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, Position]
type = PosSet
trigger1 = Time = 1
x = ceil(ifelse(frontedgedist-P2dist X<30,30*facing,Pos X+((P2dist X+30)*facing)))

[State 901, Turn]
type = Turn
trigger1 = time = 1
trigger1 = P2bodydist X < 0

[State 1000, Spark]
type = Helper
trigger1 = AnimElem = 1
stateno = 7100
id = 7100
pos = 0, 0
postype = P1
ownpal = 1
pausemovetime = 99999999

[State 420, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（本体モード）
[Statedef 1302]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1301
velset = 0,0

[State 4000, Pause]
type = Pause
trigger1 = time = 0
time = 40
movetime = 40

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, Position]
type = PosSet
trigger1 = Time = 1
x = ceil(ifelse(frontedgedist-P2dist X<30,30*facing,Pos X+((P2dist X+30)*facing)))

[State 901, Turn]
type = Turn
trigger1 = time = 1
trigger1 = P2bodydist X < 0

[State 1000, Spark]
type = Helper
trigger1 = AnimElem = 1
stateno = 7100
id = 7100
pos = 0, 0
postype = P1
ownpal = 1
pausemovetime = 99999999

[State 420, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;ゾッとするぜ（！）
[Statedef 7100]
type = U
physics = N
anim = 6900
velset = 0,0
ctrl = 0
sprpriority = 2

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 901, Effect]
type = PlaySnd
trigger1 = time = 8
value = 1300, 0

[State 1000, Spark]
type = Explod
trigger1 = time = 0
Anim = 7100
pos = ceil(-3*const(size.xscale)),ceil(-72*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = 5
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999
facing = facing

[State 420, 3]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;ゾッとするぜ（待機）（スタンドモード）
[Statedef 1350]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 220, Anim]
type = ChangeAnim
trigger1 = prevstateno != 1354
trigger1 = Time = 0
value = 11350
persistent = 0

[State 1035, 2]
type = ReversalDef
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelem = 3
attr = S, SA
reversal.attr = SCA, AA
pausetime = 0,0
sparkno = -1
hitsound = -1,0
sprpriority = -1
persistent = 1
p1stateno = 1351
p2stateno = 1355
guard.dist = 0
numhits = 0

[State -2, 4000] 
type = HitOverride
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(10) < 0
slot = 0
stateno = 1352
attr = SCA, AP
time = 1

[State 220, 3]
type = ChangeState
trigger1 = var(0) = -1 || var(0) = 2
value = 1304

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゾッとするぜ（相手時止め時）（スタンドモード）
[Statedef 1354]
type = S
movetype = I
physics = S

[State 220, 3]
type = ChangeState
trigger1 = var(0) != -1
trigger1 = var(0) != 2
value = 1350

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（飛び道具）（スタンドモード）
[Statedef 1352]
type = S
movetype = A
physics = S
ctrl = 0
anim = 11353
velset = 0,0

[State 4000, Pause]
type = Pause
trigger1 = time = 0
time = 40
movetime = 40

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, Position]
type = PosSet
trigger1 = Time = 1
x = ceil(ifelse(frontedgedist-P2dist X<30,30*facing,Pos X+((P2dist X+30)*facing)))

[State 901, Turn]
type = Turn
trigger1 = time = 1
trigger1 = P2bodydist X < 0

[State 1000, Spark]
type = Helper
trigger1 = AnimElem = 1
stateno = 7100
id = 7100
pos = 0, 0
postype = P1
ownpal = 1
pausemovetime = 99999999

[State 420, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（スタンドモード）
[Statedef 1351]
type = S
movetype = A
physics = S
ctrl = 0
anim = 11351+target,statetype=A
velset = 0,0

[State 1100, VarSet]
type = VarAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(47) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 4000, Pause]
type = Pause
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElemTime(11) < 0
time = 2
movetime = 2

[State 901,1]
type = changeanim
trigger1 = anim = 11351 || anim = 11352
trigger1 = animtime = 0
value = 10000

[State 901,1]
type = targetstate
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 11
value = 1356

[State 901,1]
type = targetstate
trigger1 = var(47) = 218
value = 1357+(facing*target,facing=1)

[State 4000, Pause]
type = Pause
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElemTime(11) >= 1
trigger2 = anim = 10000
trigger2 = AnimElemTime(14) <= 2
time = 2
movetime = 2

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, Position]
type = PosSet
trigger1 = anim = 11351 || anim = 11352
trigger1 = Time = 1
x = ceil(ifelse(frontedgedist-P2dist X<45,45*facing,Pos X+((P2dist X+45)*facing)))

[State 901, Turn]
type = Turn
trigger1 = time = 1
trigger1 = P2bodydist X < 0

[State 901, Turn]
type = SprPriority
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 7
value = 3

[State 901, Turn]
type = SprPriority
trigger1 = anim = 10000
trigger1 = AnimElem = 1
value = 1

[State 1000, Spark]
type = Helper
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 1
stateno = 7100
id = 7100
pos = 0, 0
postype = P1
ownpal = 1
pausemovetime = 99999999

[State 901, Effect]
type = PlaySnd
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 9
value = 0, 2
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 10
value = 3, 2
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = Time = 135
value = 3200, 2
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 11
value = 2, 4

[State -2]
type = helper
trigger1 = time < 10
trigger1 = !NumHelper(1410)
ID = 1360
stateno = 1360
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State 1000, Spark]
type = Explod
trigger1 = anim = 11351
trigger1 = AnimElem = 11
Anim = 8204
id = 8204
pos = ceil(48*const(size.xscale)),ceil(-41*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999

[State 1000, Spark]
type = Explod
trigger1 = anim = 11352
trigger1 = AnimElem = 11
Anim = 8204
id = 8204
pos = ceil(64*const(size.xscale)),ceil(-93*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999

[State 2601, EnvShake]
type = EnvShake
trigger1 = anim = 11351 || anim = 11352
trigger1 = AnimElem = 11
time = 30
ampl = 6

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(47) = 218
value = ceil(ifelse((-119*fvar(1))>-7,-7,(-119*fvar(1))))

[State 420, 3]
type = ChangeState
trigger1 = var(47) = 251
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;ゾッとするぜ（背景変化）（スタンドモード）
[Statedef 1360]
type = U
physics = N
anim = 6900
velset = 0,0
ctrl = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = root,stateno = 1351 && root,time < 219
time = 1
invertall = 1
color = 0
ignorehitpause = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = root,stateno = 1351 && root,time < 220
flag = nomusic
flag2 = timerfreeze
ignorehitpause = 1

[State 420, 3]
type = DestroySelf
trigger1 = root,stateno = 1351 && root,time = 221

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（スタンドモード）（相手）1
[Statedef 1355]
type    = U
movetype = H
ctrl = 0
velset = 0,0

[State 105, 1]
type = Statetypeset
trigger1 = 1
movetype = H
ignorehitpause = 1
persistent = 1

[State 650, HitPause]
type = PosFreeze
trigger1 = 1
ignorehitpause = 1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1033, End]
type = SelfState
trigger1 = time = 100
value = 5000

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（スタンドモード）（相手）2
[Statedef 1356]
type    = U
movetype = H
physics = N
anim = ifelse(statetype = A,5010,5070)
velset = 0,0
ctrl = 0
sprpriority = -1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 4]
type = ChangeAnim
trigger1 = 1
value = anim

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（スタンドモード）（相手）3
[Statedef 1357]
type    = A
movetype = H
physics = N
anim = ifelse(statetype = A,5050,5070)
velset = -10,-2

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5071, 2] ;Acceleration
type = VelMul
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
x = .67

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 5071, 4] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
type = SelfState
value = 5100

;---------------------------------------------------------------------------
;ゾッとするぜ（成功）（スタンドモード）（相手）4
[Statedef 1358]
type    = A
movetype = H
physics = N
anim = ifelse(statetype = A,5050,5070)
velset = 10,-2

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5071, 2] ;Acceleration
type = VelMul
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
x = .67

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 5071, 4] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
type = SelfState
value = 5100

;---------------------------------------------------------------------------
;ガードキャンセル攻撃（本体モード）
[Statedef 1900]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1100
velset = 0,0
sprpriority = 2

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = Time <= 10
value = SCA

[State 9606, EnvColor]
type = palfx
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time < 10
trigger1 = time%4=1
add = 168,168,168
time = 2
color = 0
persistent = 1
ignorehitpause = 1

[State 52, 3]
type = CtrlSet
trigger1 = AnimElem = 10
value = 1

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル攻撃（本体モード時スタンド）
[Statedef 11900]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 11900
velset = 0,0
sprpriority = 1

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(3) = root,fvar(2)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = var(0) != 1
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = root,fvar(4)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
fvar(3) = fvar(3)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(3)
trigger1 = Time = 0
fvar(2) = 0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = Time = 0
var(8) = 2

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 13.3

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(5) && AnimElem = 10
trigger2 = var(5)=1 && AnimElem = 12
trigger3 = var(5)=2 && AnimElem = 14
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
value = 1100, 0
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = animelemtime(6) >= 0
triggerall = P2bodydist x < 30
trigger1 = animelemtime(10) < 0
value = anim
elem = 10

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 12
value = anim
elem = 11
persistent = 1

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 10
x = .5

[State 1100, Velocity]
type = VelSet
triggerall = !var(24)
trigger1 = AnimElem = 12
x = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 11
movetype = I

[State 100, 2]
type = AssertSpecial
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(12) >= 0
trigger1 = time%2=0
flag = invisible

[State 9606, EnvColor]
type = palfx
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time < 10
trigger1 = time%4=1
add = 128,128,192
time = 2
color = 0
persistent = 1
ignorehitpause = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
trigger1 = AnimElem = 10
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 70,0
givepower = 35,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
trigger1 = AnimElem = 10
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((70*fvar(1)*.5)<7,7,(70*fvar(1)*.5)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = root,var(0) != 1
trigger1 = Time > 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = Time <= 10
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 8
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 10
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 12100

;---------------------------------------------------------------------------
;ガードキャンセル攻撃（スタンドモード）
[Statedef 1950]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 11950
velset = 0,0
sprpriority = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 13.3

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 9
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
value = 1100, 0
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 5
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = animelemtime(6) >= 0
triggerall = P2bodydist x < 30
trigger1 = animelemtime(8) < 0
value = anim
elem = 8

[State 0]
type = changeanim
triggerall = !IsHelper
triggerall = var(24)
trigger1 = AnimElem = 10
value = anim
elem = 9
persistent = 1

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 8
x = .5

[State 1100, Velocity]
type = VelSet
triggerall = !var(24)
trigger1 = AnimElem = 11
x = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 10
movetype = I

[State 52, 3]
type = CtrlSet
trigger1 = AnimElem = 20
value = 1

[State 5201, 4]
type = NotHitBy
trigger1 = time <= 10
value = SCA

[State 9606, EnvColor]
type = palfx
trigger1 = time < 10
trigger1 = time%4=1
add = 128,128,192
time = 2
color = 0
persistent = 1
ignorehitpause = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
trigger1 = AnimElem = 9
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(1))<7,7,(70*fvar(1)))),ceil(ifelse((70*fvar(1)*.25)<7,7,(70*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 70,0
givepower = 35,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = AnimElem = 9
attr = S, SA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = AnimElem = 9
var(14) = ceil(ifelse((70*fvar(1)*.5)<7,7,(70*fvar(1)*.5)))

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;プッツンオラ（本体モード）
[Statedef 3000]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3000
velset = 0,0
sprpriority = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 12

[State 220, Voice]
type = PlaySnd
trigger1 = time = 0
value = 3000, 0
channel = 0

[State 1100, VarAdd]
type = VarAdd
trigger1 = AnimElem = 13
trigger1 = var(2) >= 52
var(2) = -52
persistent = 0

[State 3000, Superpause]
type = SuperPause
trigger1 = AnimElem = 13
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = AnimElem = 13
id = 8000
name = "Super"
pos = ceil(4*const(size.xscale)),ceil(-80*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persisternt = 0

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = var(24)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
ignorehitpause = 0

[State 220, 3]
type = ChangeState
trigger1 = animtime = -1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;プッツンオラ（本体モード時スタンド）
[Statedef 13000]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 13000
velset = 0,0

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = Time = 0
var(8) = 2

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 52, Effect]
type = ParentVarSet
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 1100, VarSet]
type = ParentVarSet
trigger1 = 1
var(28) = 0

[State 1505,0]
type = BindToParent
trigger1 = time = 0
pos = 20,0

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3.3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 5
x = 1.6

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElemTime(3) < 0
x = .92

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 4
x = 3.33

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
trigger2 = AnimElem = 50
x = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = time = 2
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State -2]
type = helper
triggerall = anim = 13000
trigger1 = AnimElem = 3
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State -2]
type = helper
triggerall = anim = 13000
trigger1 = AnimElem = 3
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State 100, 2]
type = AssertSpecial
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time < 2
trigger2 = animelemtime(50) >= 1
trigger2 = time%2=0
flag = invisible

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = animelemtime(8) >= 0
trigger1 = animelemtime(11) < 0
trigger2 = animelemtime(14) >= 0
trigger2 = animelemtime(17) < 0
trigger3 = animelemtime(20) >= 0
trigger3 = animelemtime(23) < 0
trigger4 = animelemtime(26) >= 0
trigger4 = animelemtime(29) < 0
trigger5 = animelemtime(32) >= 0
trigger5 = animelemtime(35) < 0
trigger6 = animelemtime(38) >= 0
trigger6 = animelemtime(41) < 0
trigger7 = animelemtime(44) >= 0
trigger7 = animelemtime(47) < 0
var(3) = 0
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(8) < 0
trigger2 = animelemtime(11) >= 0
trigger2 = animelemtime(14) < 0
trigger3 = animelemtime(17) >= 0
trigger3 = animelemtime(20) < 0
trigger4 = animelemtime(23) >= 0
trigger4 = animelemtime(26) < 0
trigger5 = animelemtime(29) >= 0
trigger5 = animelemtime(32) < 0
trigger6 = animelemtime(35) >= 0
trigger6 = animelemtime(38) < 0
trigger7 = animelemtime(41) >= 0
trigger7 = animelemtime(44) < 0
trigger8 = animelemtime(47) >= 0
trigger8 = animelemtime(50) < 0
var(3) = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
triggerall = movehit || moveguarded
triggerall = var(1) = 4
trigger1 = animelemtime(3) >= 0
var(2) = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = var(1) = 5
var(1) = -1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
trigger1 = var(1) = (0,5)
var(1) = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = var(2) = 1
var(2) = 0
ignorehitpause = 0
persistent = 1

[State 1100, VarSet]
type = VarSet
triggerall = movehit || moveguarded
triggerall = var(1) != -1
trigger1 = animelemtime(3) >= 0
var(1) = 1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
triggerall = movehit || moveguarded
triggerall = var(1) = -1
trigger1 = animelemtime(3) >= 0
var(1) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = !root,var(36)
fvar(13) = 0
ignorehitpause = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 50
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = root,var(0) != 1
triggerall = !var(1) || var(1) = -1
triggerall = var(3)%2=0
trigger1 = animelemtime(3) >= 0
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((7*fvar(1))<7,7,(7*fvar(1)))),ceil(ifelse((7*fvar(1)*.25)<7,7,(7*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -45
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = root,var(0) != 1
triggerall = !var(1) || var(1) = -1
triggerall = var(3)%2=1
trigger1 = animelemtime(3) >= 0
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((7*fvar(1))<7,7,(7*fvar(1)))),ceil(ifelse((7*fvar(1)*.25)<7,7,(7*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -77
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = root,var(0) != 1
trigger1 = AnimElemTime(49) = 1
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((7*fvar(1))<7,7,(7*fvar(1)))),ceil(ifelse((7*fvar(1)*.25)<7,7,(7*fvar(1)*.25)))
pausetime = 0,0
guard.pausetime = 0,0
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -67
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
triggerall = !var(1) || var(1) = -1
triggerall = var(3)%2=0
trigger1 = animelemtime(3) >= 0
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -45
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
triggerall = !var(1) || var(1) = -1
triggerall = var(3)%2=1
trigger1 = animelemtime(3) >= 0
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*4
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*4
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -77
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
trigger1 = AnimElemTime(49) = 1
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,0
guard.pausetime = 0,0
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -67
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
guard.velocity = -12
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((7*fvar(1)*.5)<7,7,(7*fvar(1)*.5)))
ignorehitpause = 1
persistent = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = root,var(0) != 1
trigger1 = time > 11
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = time <= 11
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(50) < 0
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 4
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 10
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
triggerall = !NumHelper(8000)
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = anim = 13000
trigger1 = AnimTime = 0
value = 12100

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "MAX = %d Hit= %d Counter =%d Hit1 = %d Bit2 = %d \n "
params = var(1), var(2), var(3), var(8), var(39)
ignorehitpause = 1

;---------------------------------------------------------------------------
;プッツンオラ（スタンドモード時）
[Statedef 3050]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,13055,13050)
velset = 0,0
sprpriority = 2

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(13) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(13) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, VarSet]
type = VarAdd
triggerall = !IsHelper
trigger1 = AnimElemTime(2) = 6
trigger1 = var(2) >= 52
var(2) = -52
persistent = 0

[State 10000, VarSet]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = time = 1
trigger1 = parent,var(2) >= 52
var(2) = -52
persistent = 0

[State 3000, Superpause]
type = SuperPause
trigger1 = !IsHelper
trigger1 = AnimElemTime(2) = 6
trigger2 = IsHelper
trigger2 = time = 1
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = !IsHelper
trigger1 = AnimElemTime(2) = 6
trigger2 = IsHelper
trigger2 = time = 1
id = 8000
name = "Super"
pos = ceil(4*const(size.xscale)),ceil(-80*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 5201, 4]
type = NotHitBy
triggerall = !IsHelper
trigger1 = time <= 54
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = time = 0
value = 3000, 0
channel = 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = !NumTarget
var(6) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = var(42)
trigger1 = !var(6)
var(6) = var(42)

[State 1100, Velocity]
type = VelSet
trigger1 = !IsHelper
trigger1 = AnimElem = 4
trigger2 = IsHelper
trigger2 = AnimElem = 2
x = 3.33

[State 1100, Velocity]
type = VelSet
trigger1 = !IsHelper
trigger1 = AnimElem = 34
trigger2 = IsHelper
trigger2 = AnimElem = 62
x = 0

[State 1100, SprPriority]
type = SprPriority
trigger1 = !IsHelper
trigger1 = AnimElem = 41
value = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = !IsHelper
trigger1 = AnimElem = 3
trigger2 = IsHelper
trigger2 = AnimElem = 2
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = !IsHelper
trigger1 = AnimElem = 3
trigger2 = IsHelper
trigger2 = AnimElem = 2
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = !IsHelper
trigger1 = AnimElem = 3
trigger2 = IsHelper
trigger2 = AnimElem = 2
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = var(1) = 3
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(1)
var(1) = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = animelemtime(3) > 1
trigger1 = movehit || moveguarded
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = IsHelper
trigger1 = !root,var(36)
fvar(13) = 0
ignorehitpause = 1

[State 105, 1]
type = statetypeset
trigger1 = !IsHelper
trigger1 = AnimElem = 34
trigger2 = IsHelper
trigger2 = AnimElem = 62
movetype = I

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = animelem = 3
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -85
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(33) < 1
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = animelemtime(33) = 1
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((119*fvar(1))<7,7,(119*fvar(1)))),ceil(ifelse((119*fvar(1)*.25)<7,7,(119*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -24
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10,-4.2
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = animelem = 2
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -85
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(3) >= 1
trigger1 = animelemtime(9) < 0
trigger2 = animelemtime(15) >= 0
trigger2 = animelemtime(21) < 0
trigger3 = animelemtime(27) >= 0
trigger3 = animelemtime(33) < 0
trigger4 = animelemtime(39) >= 0
trigger4 = animelemtime(45) < 0
trigger5 = animelemtime(51) >= 0
trigger5 = animelemtime(57) < 0
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[2,4]),-67,ifelse((animelemno(0)%12=[4,7]),-24,ifelse((animelemno(0)%12=[7,10]),-103,-85)))
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(9) >= 0
trigger1 = animelemtime(15) < 0
trigger2 = animelemtime(21) >= 0
trigger2 = animelemtime(27) < 0
trigger3 = animelemtime(33) >= 0
trigger3 = animelemtime(39) < 0
trigger4 = animelemtime(45) >= 0
trigger4 = animelemtime(51) < 0
trigger5 = animelemtime(57) >= 0
trigger5 = animelemtime(61) < 1
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*.25*fvar(1))<7,7,(21*.25*fvar(1)))),ceil(ifelse((21*.25*fvar(1)*.25)<7,7,(21*.25*fvar(1)*.25)))
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[2,4]),-67,ifelse((animelemno(0)%12=[4,7]),-24,ifelse((animelemno(0)%12=[7,10]),-103,-85)))
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
trigger1 = animelemtime(61) = 1
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((119*.25*fvar(1))<7,7,(119*.25*fvar(1)))),ceil(ifelse((119*.25*fvar(1)*.25)<7,7,(119*.25*fvar(1)*.25)))
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -85
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10,-4.2
guard.velocity = -12
air.velocity = -10,-4.2
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = !IsHelper
trigger1 = animelem = 3
trigger2 = !IsHelper
trigger2 = animelem = 2
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
guard.pausetime = 4-IsHelper,!(var(28)>=10&&random%8=0)*(8-IsHelper)
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -85
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(33) < 1
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = !IsHelper
triggerall = var(0) = 1
trigger1 = animelemtime(33) = 1
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -24
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10,-4.2
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(3) >= 1
trigger1 = animelemtime(9) < 0
trigger2 = animelemtime(15) >= 0
trigger2 = animelemtime(21) < 0
trigger3 = animelemtime(27) >= 0
trigger3 = animelemtime(33) < 0
trigger4 = animelemtime(39) >= 0
trigger4 = animelemtime(45) < 0
trigger5 = animelemtime(51) >= 0
trigger5 = animelemtime(57) < 0
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[2,4]),-67,ifelse((animelemno(0)%12=[4,7]),-24,ifelse((animelemno(0)%12=[7,10]),-103,-85)))
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(9) >= 0
trigger1 = animelemtime(15) < 0
trigger2 = animelemtime(21) >= 0
trigger2 = animelemtime(27) < 0
trigger3 = animelemtime(33) >= 0
trigger3 = animelemtime(39) < 0
trigger4 = animelemtime(45) >= 0
trigger4 = animelemtime(51) < 0
trigger5 = animelemtime(57) >= 0
trigger5 = animelemtime(61) < 1
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[2,4]),-67,ifelse((animelemno(0)%12=[4,7]),-24,ifelse((animelemno(0)%12=[7,10]),-103,-85)))
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.3
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = IsHelper
trigger1 = animelemtime(61) = 1
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 3,!(var(28)>=10&&random%8=0)*7
guard.pausetime = 3,!(var(28)>=10&&random%8=0)*7
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -85
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -10,-4.2
guard.velocity = -12
air.velocity = -10,-4.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = !IsHelper
trigger1 = AnimElemTime(33) < 1
var(14) = ceil(ifelse((21*fvar(1)*.5)<7,7,(21*fvar(1)*.5)))

[State 8500, 1]
type = varset
trigger1 = !IsHelper
trigger1 = AnimElemTime(33) = 1
var(14) = ceil(ifelse((119*fvar(1)*.5)<7,7,(119*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = AnimElemTime(61) < 1
trigger1 = movehit
var(15) = ceil(ifelse((21*fvar(1)*.5*.25)<7,7,(21*fvar(1)*.5*.25)))
ignorehitpause = 1

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = AnimElemTime(61) = 1
trigger1 = movehit
var(15) = ceil(ifelse((119*fvar(1)*.5*.25)<7,7,(119*fvar(1)*.5*.25)))
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = !IsHelper
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
trigger1 = root,var(0) != 1
trigger1 = time > 54
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = var(6)
trigger3 = time <= 54
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 3
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
triggerall = !NumHelper(8000)
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 311 || var(10) = 500
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger2 = var(10) = 301
trigger2 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
trigger3 = var(10) = 310
trigger3 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200
trigger4 = var(10) = 511
trigger4 = var(11) != 501
trigger4 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger5 = var(10) = 311 && var(5)
trigger5 = var(3) = 5200 || var(3) = 5900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 500
trigger1 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
value = 501
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
trigger2 = var(10) = 501
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5200 || var(3) = 5900
trigger2 = var(10) = 511
trigger2 = var(11) != 501
trigger2 = var(3) = 5200 || var(3) = 5900
trigger3 = var(10) = 341
trigger3 = var(11) = 310
trigger3 = var(3) = 3100 || var(3) = 3300 || var(3) = 3900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 341
trigger1 = var(11) = 310
trigger1 = var(3) = 5100 || var(3) = 5900
value = 512
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(3) = 5200 || var(3) = 5900
value = 531
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 501
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200 || var(3) = 3900 || var(3) = 5900
value = 532
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger1 = var(3) = 3000 || var(3) = 5000
value = 301
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300 || var(10) = 500
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 301
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100
trigger3 = var(10) = 300 && var(5)
trigger3 = var(3) = 5100 || var(3) = 5900
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(11) = 301
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 511
trigger2 = var(11) = 501
trigger2 = var(3) = 3100 || var(3) = 3300
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 310
trigger1 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311
trigger1 = var(11) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
value = 342
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger2 = var(10) = 310
trigger3 = var(10) = 320
trigger4 = var(10) = 330
trigger5 = var(10) = 340
trigger6 = var(10) = 500
trigger7 = var(10) = 510
trigger8 = var(10) = 520
trigger9 = var(10) = 301
trigger10 = var(10) = 311
trigger11 = var(10) = 341
trigger12 = var(10) = 501
trigger13 = var(10) = 511
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = 0
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = animtime = 0
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;プッツンオラ（スタンドモード時）（空中）
[Statedef 3060]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 13060
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1100, VarSet]
type = VarSet
trigger1 = !IsHelper
trigger1 = AnimElemTime(2) = 6
var(2) = ifelse(var(2)-52<0,0,var(2)-52)
persistent = 0

[State 3000, Superpause]
type = SuperPause
trigger1 = AnimElemTime(2) = 6
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = AnimElemTime(2) = 6
id = 8000
name = "Super"
pos = ceil(4*const(size.xscale)),ceil(-80*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 5201, 4]
type = NotHitBy
triggerall = !IsHelper
trigger1 = time <= 54
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = time = 0
value = 850, 3
channel = 0

[State 52, 1]
type = Turn
trigger1 = Time = 0
trigger1 = P2Dist X < 0

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = !NumTarget
var(6) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = var(42)
trigger1 = !var(6)
var(6) = var(42)

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = AnimElem = 4
x = .011
y = .011

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 4
fvar(9) = Vel X+3.33

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 4
fvar(10) = Vel Y

[State 1100, VarSet]
type = VarAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(4) > 0
fvar(10) = .033

[State 1100, Velocity]
type = VelSet
trigger1 = animelemtime(4) > 0
trigger1 = animelemtime(34) < 0
x = fvar(9)+(1.67*command = "holdfwd")-(.83*command = "holdback")
y = fvar(10)-(3.21*command = "holdup")

[State 1100, Position]
type = PosSet
triggerall = animelemtime(4) >= 0
triggerall = animelemtime(34) < 0
trigger1 = Pos Y > -16
y = -16

[State 1100, Position]
type = PosSet
triggerall = animelemtime(4) >= 0
triggerall = animelemtime(34) < 0
trigger1 = Pos Y <= -144
y = -144

[State 1100, Velocity]
type = VelSet
triggerall = animelemtime(4) >= 0
triggerall = animelemtime(34) < 0
trigger1 = Pos Y > -16
trigger2 = Pos Y <= -144
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 34
x = fvar(9)

[State 4030, Gravity]
type = VelAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = animelemtime(34) > 0
y = ifelse(var(3)||var(4),.5,.6)

[State 1100, Velocity]
type = PosFreeze
trigger1 = animelemtime(4) < 0

[State 1100, SprPriority]
type = SprPriority
trigger1 = AnimElem = 34
value = 0

[State -2]
type = helper
triggerall = !NumHelper(11010)
trigger1 = AnimElem = 3
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = AnimElem = 3
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State -2]
type = helper
trigger1 = AnimElem = 3
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = var(1) = 5
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(1)
var(1) = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = animelemtime(3) > 1
trigger1 = movehit || moveguarded
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = IsHelper
trigger1 = !var(36)
fvar(13) = 0
ignorehitpause = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 34
movetype = I

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelem = 3
attr = A, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -10, -85
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = A, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = A, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((21*fvar(1))<7,7,(21*fvar(1)))),ceil(ifelse((21*fvar(1)*.25)<7,7,(21*fvar(1)*.25)))
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelem = 3
attr = A, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -85
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) < 0
trigger2 = animelemtime(12) >= 0
trigger2 = animelemtime(18) < 0
trigger3 = animelemtime(24) >= 0
trigger3 = animelemtime(30) < 0
attr = A, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
triggerall = !var(1)
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(12) < 0
trigger2 = animelemtime(18) >= 0
trigger2 = animelemtime(24) < 0
trigger3 = animelemtime(30) >= 0
trigger3 = animelemtime(34) < 0
attr = A, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 4,!(var(28)>=10&&random%8=0)*8
guard.pausetime = 4,!(var(28)>=10&&random%8=0)*8
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, ifelse((animelemno(0)%12=[3,5]),-85,ifelse((animelemno(0)%12=[6,8]),-67,ifelse((animelemno(0)%12=[9,11]),-24,-103)))
hitsound = S1,5
guardsound = S4,0
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = ifelse(-12.5*.9**((var(42)-1)+!var(42))>-2.5,-2.5,-12.5*.9**((var(42)-1)+!var(42))), ifelse((-4.5+(1.8*((var(42)-1)+!var(42))))>0,0,(-4.5+(1.8*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 1
envshake.time = 12
envshake.ampl = 3
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
trigger1 = 1
var(14) = ceil(ifelse((21*fvar(1)*.5)<7,7,(21*fvar(1)*.5)))

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(3) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;スターブレイカー（本体モード）
[Statedef 3100]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 5201, 4]
type = NotHitBy
trigger1 = NumHelper(10000)
trigger1 = Helper(10000),stateno = 13100 && Helper(10000),AnimElemTime(3) >= 0
trigger1 = Helper(10000),stateno = 13100 && Helper(10000),AnimElemTime(4) < 0
value = SCA
time = 12

[State 52, 3]
type = CtrlSet
trigger1 = AnimElem = 4
value = 1

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スターブレイカー（本体モード時スタンド）
[Statedef 13100]
type = U
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 13100
velset = 0,0
sprpriority = 3

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(3) = root,fvar(2)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = var(0) != 1
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = root,fvar(4)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(24) || var(43)) && fvar(3)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
fvar(3) = fvar(3)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(24)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(3)
trigger1 = Time = 0
fvar(2) = 0

[State 1100, VarSet]
type = ParentVarSet
trigger1 = Time = 0
var(8) = 2

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = root,fvar(1)

[State 52, Effect]
type = ParentVarSet
trigger1 = parent,var(48) != 2
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = ParentVarSet
triggerall = parent,var(48) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(48) = 2
ignorehitpause = 1

[State 12200, VarAdd]
type = VarAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(47) = 1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 1100, VarAdd]
type = ParentVarAdd
triggerall = anim = 13100
trigger1 = AnimElemTime(3) = 1
trigger1 = Parent,var(2) >= 52
var(2) = -52
persistent = 0

[State 3000, Superpause]
type = SuperPause
triggerall = anim = 13100
trigger1 = AnimElemTime(3) = 1
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
triggerall = anim = 13100
trigger1 = AnimElemTime(3) = 1
id = 8000
name = "Super"
pos = ceil(-60*const(size.xscale)),ceil(-72*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = anim = 13100
trigger1 = var(47) > 37
trigger1 = root,command != "holdx" && root,command != "holdy" && root,command != "holdz" && root,command != "holdb"
trigger2 = var(47) > 546
value = 13101

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = var(47) = 520
var(5) = 1

[State 1100, Velocity]
type = VelSet
triggerall = anim = 13101
trigger1 = AnimElem = 1
x = 13.3

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = anim = 13101
trigger1 = AnimElem = 3
x = .33
persistent = 0

[State 1100, Velocity]
type = VelMul
trigger1 = anim = 13101
trigger1 = animelemtime(3) > 0
x = .92

[State 1100, Velocity]
type = VelSet
triggerall = anim = 13101
trigger1 = AnimElem = 10
x = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13100
trigger1 = AnimElem = 3
value = 3100, 1
persistent = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13101
trigger1 = AnimElem = 2
value = 3100, 2

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13101
trigger1 = AnimElem = 3
value = 3100, 0
channel = 0

[State 8000, Super]
type = Helper
triggerall = anim = 13100
trigger1 = AnimElem = 3
pos = 0,0
postype = P1
stateno = 17400
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999*var(0)
supermovetime = 99999999
persistent = 0

[State 1000, Spark]
type = Explod
triggerall = anim = 13101
trigger1 = AnimElem = 1
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 4
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)
persistent = 0

[State 1000, Spark]
type = Explod
triggerall = anim = 13101
trigger1 = AnimElem = 3
Anim = 17400
pos = 0, 0
postype = P1
ownpal = 1
sprpriority = 5
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)
persistent = 0

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13101
triggerall = P2bodydist x < 5
trigger1 = animelemtime(1) > 0
trigger1 = animelemtime(2) < 0
value = anim
elem = 2

[State 0]
type = changeanim
triggerall = var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
triggerall = anim = 13101
trigger1 = AnimElem = 4
movetype = I

[State 1040,PalFX]
type = PalFX
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = time >= 520
triggerall = time%4=1
trigger1 = anim = 13100
trigger2 = anim = 13101
trigger2 = animelemtime(12) < 0
add = 128,128,192
time = 2
persistent = 1

[State 100, 2]
type = AssertSpecial
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13101
triggerall = animelemtime(9) >= 0
trigger1 = time%2=0
flag = invisible

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
triggerall = anim = 13101
triggerall = !var(5)
trigger1 = AnimElem = 3
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((217*fvar(1))<7,7,(217*fvar(1)))),ceil(ifelse((217*fvar(1)*.25)<7,7,(217*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*19
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*19
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) != 1
triggerall = anim = 13101
triggerall = var(5)
trigger1 = AnimElem = 3
attr = S, HA
hitflag = MAF
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((147*fvar(1))<7,7,(147*fvar(1)))),ceil(ifelse((147*fvar(1)*.25)<7,7,(147*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*19
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*19
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = root,var(0) = 1
triggerall = anim = 13101
trigger1 = AnimElem = 3
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*19
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*19
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = parentvaradd
trigger1 = movehit
var(15) = ceil(ifelse((217*fvar(1)*.5)<7,7,(217*fvar(1)*.5)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
trigger2 = NumHelper(8000)
ignorehitpause = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = root,var(0) != 1
trigger1 = time >= 50
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = root,var(0) = 1
trigger2 = time < 50
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 16
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
triggerall = !NumHelper(8000)
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = anim = 13100
trigger1 = root,command = "a"
trigger1 = time > 37
value = 13101

[State 10000, ChangeState]
type = ChangeState
triggerall = anim = 13101
trigger1 = AnimTime = 0
value = 12100

;---------------------------------------------------------------------------
;マッハオラ（中断）
[Statedef 13101]
type = S
movetype = I
physics = N
ctrl = 0
anim = 6900

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 10000, ChangeState]
type = ChangeState
trigger1 = Time = 1
value = 10000

;---------------------------------------------------------------------------
;マッハオラ（エフェクト）
[Statedef 17400]
type = S
movetype = I
physics = N
ctrl = 0
anim = 17410
sprpriority = 4

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = !parent,NumHelper(8000)
trigger1 = time%2=0
flag = invisible

[State 0, 4]
type = changeanim
triggerall = anim = 17410
triggerall = parent,animelemtime(3) >= 0 && parent,animelemtime(4) < 0
trigger1 = parent,stateno = 13100 && parent,anim = 13100
trigger2 = parent,stateno = 3150 && parent,anim = 13150
trigger3 = parent,stateno = 3150 && parent,anim = 13155
value = anim
elem = 1

[State 0, 4]
type = changeanim
triggerall = anim = 17410
triggerall = parent,animelemtime(4) >= 0 && parent,animelemtime(5) < 0
trigger1 = parent,stateno = 13100 && parent,anim = 13100
trigger2 = parent,stateno = 3150 && parent,anim = 13150
trigger3 = parent,stateno = 3150 && parent,anim = 13155
value = anim
elem = 2

[State 0, 4]
type = changeanim
triggerall = anim = 17410
triggerall = parent,animelemtime(5) >= 0 && parent,animelemtime(5) < 2
trigger1 = parent,stateno = 13100 && parent,anim = 13100
trigger2 = parent,stateno = 3150 && parent,anim = 13150
trigger3 = parent,stateno = 3150 && parent,anim = 13155
value = anim
elem = 1

[State 0, 4]
type = changeanim
triggerall = anim != 17411
trigger1 = parent,stateno = 13100 && parent,anim = 13101
trigger2 = parent,stateno = 3150 && parent,anim = 13151
trigger3 = parent,stateno = 3150 && parent,anim = 13156
value = 17411

[State 0, 4]
type = changeanim
triggerall = anim = 17411
triggerall = parent,animelem = 2
trigger1 = parent,stateno = 13100 && parent,anim = 13101
trigger2 = parent,stateno = 3150 && parent,anim = 13151
trigger3 = parent,stateno = 3150 && parent,anim = 13156
value = anim
elem = 2

[State 0, 4]
type = changeanim
triggerall = anim = 17411
triggerall = parent,var(24)
trigger1 = AnimElem = 5
value = anim
elem = 4

[State 0, 4]
type = changeanim
triggerall = anim = 17411
triggerall = parent,animelem = 6
trigger1 = parent,stateno = 13100 && parent,anim = 13101
trigger2 = parent,stateno = 3150 && parent,anim = 13151
trigger3 = parent,stateno = 3150 && parent,anim = 13156
value = anim
elem = 6

[State 0, 4]
type = DestroySelf
trigger1 = anim = 17411
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = parent,stateno != 13100 && parent,stateno != 3150

;---------------------------------------------------------------------------
;マッハオラ（スタンドモード）
[Statedef 3150]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(IsHelper,13155,13150)
velset = 0,0
sprpriority = 3

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = root,stateno != 3200 && root,stateno != 3201 && root,stateno != 3250
var(0) = root,var(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(28) = root,var(28)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
var(42) = root,var(42)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(0) = root,fvar(0)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
fvar(1) = root,fvar(1)

[State 1100, VarSet]
type = VarSet
trigger1 = IsHelper
trigger1 = time = 0
var(2) = var(3)

[State 1100, VarSet]
type = VarAdd
trigger1 = IsHelper
trigger1 = time = 0
var(4) = 1

[State 12200, VarAdd]
type = VarAdd
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(47) = 1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(47) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(command = "スターブレイカー3", 2, ifelse(command = "スターブレイカー2", 1, 0))

[State 1000, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = !var(59)
triggerall = var(26)
trigger1 = Time = 0
var(5) = ifelse((var(26)&2**0),0,ifelse((var(26)&2**1),1,2))

[State 1000, VarSet]
type = VarSet
triggerall = !IsHelper
triggerall = var(59)
trigger1 = Time = 0
var(5) = random%3

[State 1100, VarSet]
type = VarSet
triggerall = IsHelper
trigger1 = Time = 0
var(5) = var(2)%10

[State 10000, VarSet]
type = VarAdd
triggerall = anim = 13150
trigger1 = AnimElem = 3
trigger1 = var(2) >= 52
var(2) = -52
persistent = 0

[State 10000, VarSet]
type = ParentVarAdd
triggerall = anim = 13155
trigger1 = AnimElem = 4
trigger1 = parent,var(2) >= 52
var(2) = -52
persistent = 0

[State 3000, Superpause]
type = SuperPause
trigger1 = anim = 13150
trigger1 = AnimElem = 3
trigger2 = anim = 13155
trigger2 = AnimElem = 4
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = anim = 13150
trigger1 = AnimElem = 3
trigger2 = anim = 13155
trigger2 = AnimElem = 4
id = 8000
name = "Super"
pos = ceil(-60*const(size.xscale)),ceil(-72*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 5201, 4]
type = NotHitBy
triggerall = !IsHelper
trigger1 = time <= 52
value = SCA

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = anim = 13150
trigger1 = var(47) > 40
trigger1 = command != "holdx" && command != "holdy" && command != "holdz" && command != "holdb"
trigger2 = var(47) > 191
value = 13151

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = anim = 13155
trigger1 = var(47) > 37
value = 13156

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
trigger1 = time = 0
var(6) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !IsHelper
trigger1 = var(47) = 166
var(6) = 1

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13151 || anim = 13156
triggerall = P2bodydist x < 5
trigger1 = animelemtime(1) > 0
trigger1 = animelemtime(2) < 0
value = anim
elem = 2

[State 1100, Velocity]
type = VelSet
triggerall = anim = 13151 || anim = 13156
trigger1 = AnimElem = 1
x = 10+(3.3*var(5))

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = anim = 13151
trigger1 = AnimElem = 3
trigger2 = anim = 13156
trigger2 = AnimElem = 2
x = .33
persistent = 0

[State 1100, Velocity]
type = VelMul
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = anim = 13151
trigger1 = animelemtime(3) > 0
trigger2 = anim = 13156
trigger2 = animelemtime(2) > 0
x = .92

[State 1100, Velocity]
type = VelSet
trigger1 = anim = 13151
trigger1 = AnimElem = 10
trigger2 = anim = 13156
trigger2 = AnimElem = 9
x = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = anim = 13150
trigger1 = AnimElem = 3
trigger2 = anim = 13155
trigger2 = AnimElem = 4
value = 3100, 1
persistent = 0

[State 220, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13151 || anim = 13156
trigger1 = AnimElem = 2
value = 3100, 2

[State 220, Voice]
type = PlaySnd
triggerall = anim = 13150
trigger1 = AnimElem = 1
value = 3000, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = anim = 13151
trigger1 = AnimElem = 3
trigger2 = anim = 13156
trigger2 = AnimElem = 2
value = 3100, 0
channel = 0

[State 8000, Super]
type = Helper
triggerall = anim = 13150 || anim = 13155
trigger1 = AnimElem = 3
pos = 0,0
postype = P1
stateno = 17400
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999*var(0)
supermovetime = 99999999

[State 1000, Spark]
type = Explod
triggerall = anim = 13151 || anim = 13156
trigger1 = AnimElem = 1
Anim = 17500
pos = ceil(16*const(size.xscale)), 0
postype = P1
ownpal = 1
sprpriority = 4
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = anim = 13151
trigger1 = AnimElem = 3
trigger2 = anim = 13156
trigger2 = AnimElem = 2
Anim = 17400
pos = 0, 0
postype = P1
ownpal = 1
sprpriority = 5
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

[State 0]
type = changeanim
triggerall = var(24)
triggerall = anim = 13151
trigger1 = AnimElem = 5
value = anim
elem = 4
persistent = 1

[State 105, 1]
type = statetypeset
trigger1 = anim = 13151
trigger1 = AnimElem = 4
trigger2 = anim = 13156
trigger2 = AnimElem = 3
movetype = I

[State 1040,PalFX]
type = PalFX
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = var(47) >= 166
triggerall = time%4=1
trigger1 = anim = 13150
trigger2 = anim = 13151
trigger2 = animelemtime(12) < 0
add = 128,128,192
time = 2
persistent = 1

[State 52, 3]
type = CtrlSet
triggerall = !IsHelper
triggerall = anim = 13151
trigger1 = AnimElemTime(10) = 2
value = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
triggerall = anim = 13151
triggerall = !var(6)
trigger1 = AnimElem = 3
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((280*fvar(1))<7,7,(280*fvar(1)))),ceil(ifelse((280*fvar(1)*.25)<7,7,(280*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*19
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*19
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) != 1
triggerall = anim = 13151
triggerall = var(6)
trigger1 = AnimElem = 3
attr = S, HA
hitflag = MAF
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((322*fvar(1))<7,7,(322*fvar(1)))),ceil(ifelse((322*fvar(1)*.25)<7,7,(322*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*19
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*19
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
airguard.velocity = -4.2,-2.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = IsHelper
triggerall = var(0) != 1
triggerall = anim = 13156
trigger1 = AnimElem = 2
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((119*.25*fvar(1))<7,7,(119*.25*fvar(1)))),ceil(ifelse((119*.25*fvar(1)*.25)<7,7,(119*.25*fvar(1)*.25)))
pausetime = 0,!(var(28)>=10&&random%8=0)*15
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*15
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 10*!var(0),0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 220, 1]
type = Hitdef
triggerall = var(0) = 1
trigger1 = anim = 13151
trigger1 = AnimElem = 3
trigger2 = anim = 13156
trigger2 = AnimElem = 2
attr = S, HA
hitflag = MAFD
guardflag = 
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 0
pausetime = 0,!(var(28)>=10&&random%8=0)*19
guard.pausetime = 0,!(var(28)>=10&&random%8=0)*19
sparkno = S8204
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S1,5
guardsound = S4,0
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-7.5*.9**((var(42)-1)+!var(42))>-1.5,-1.5,-7.5*.9**((var(42)-1)+!var(42))), ifelse((-2.2+(.4*((var(42)-1)+!var(42))))>0,0,(-2.2+(.4*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 0,0
persistent = 0
envshake.time = 12
envshake.ampl = 3
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
p2facing = 1

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = !var(6)
trigger1 = AnimElem = 3
var(14) = ceil(ifelse((280*fvar(1)*.5)<7,7,(280*fvar(1)*.5)))

[State 8500, 1]
type = varset
triggerall = !IsHelper
triggerall = var(6)
trigger1 = AnimElem = 3
var(14) = ceil(ifelse((322*fvar(1)*.5)<7,7,(322*fvar(1)*.5)))

[State 8500, 1]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(15) = ceil(ifelse((280*fvar(1)*.5*.25)<7,7,(280*fvar(1)*.5*.25)))
ignorehitpause = 1

[State -2, CornerPush]
type = PosFreeze
trigger1 = var(24)
ignorehitpause = 1

[State 200, 7]
type = screenbound
triggerall = !IsHelper
trigger1 = var(50)
value = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = !IsHelper
triggerall = anim = 13151
triggerall = AnimTime = 0 || ctrl
trigger1 = numtarget
trigger1 = target,stateno = [2600,2601]
trigger2 = backedgebodydist < 0 || frontedgebodydist < 0
value = 2501

[State 1000, 0]
type = TargetFacing
trigger1 = !var(24)
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = !var(0)
trigger1 = var(50)
value = -1
ignorehitpause = 0
persistent = 0

[State 200, 7]
type = TargetState
triggerall = !IsHelper
triggerall = anim = 13151
trigger1 = !var(24)
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = !var(0)
trigger1 = var(50)
value = 2700
ignorehitpause = 0
persistent = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = anim = 13150
trigger1 = command = "a"
trigger1 = time > 40
value = 830

[State 220, 3]
type = ChangeState
triggerall = !IsHelper
triggerall = anim = 13151
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = IsHelper
flag = noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = IsHelper
trigger1 = var(6)
var(6) = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(6)
trigger1 = root,var(0) != 1
trigger1 = time > 52
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
triggerall = IsHelper
trigger1 = root,var(0) = 1
trigger2 = var(6)
trigger3 = time <= 52
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = IsHelper
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
var(24) = 15
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 8.3
ignorehitpause = 1

[State 0]
type = changeanim
triggerall = IsHelper
triggerall = var(24)
trigger1 = AnimElem = 4
value = anim
elem = 3
persistent = 1

;ヒットストップ補正
[State -2, Combo]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(2) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(2)
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

;ファーストストライク判定
[State 10000, ParentVarSet]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
var(58) = 1
ignorehitpause = 1

[State 10000, ParentVarAdd]
type = ParentVarAdd
triggerall = IsHelper
trigger1 = movehit
var(42) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = movehit
var(41) = 1
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = moveguarded
var(41) = 2
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
triggerall = IsHelper
trigger1 = time = 1
var(41) = 0
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
triggerall = IsHelper
trigger1 = movehit
var(29) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
triggerall = IsHelper
trigger1 = MoveContact
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
triggerall = !NumHelper(8000)
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(36) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = parent,fvar(12) > 0 || parent,movetype != I
var(36) = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
triggerall = IsHelper
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 311 || var(10) = 500
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger2 = var(10) = 301
trigger2 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
trigger3 = var(10) = 310
trigger3 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200
trigger4 = var(10) = 511
trigger4 = var(11) != 501
trigger4 = var(3) = 3200 || var(3) = 3201 || var(3) = 3900
trigger5 = var(10) = 311 && var(5)
trigger5 = var(3) = 5200 || var(3) = 5900
value = 321
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 500
trigger1 = var(3) = 3000 || var(3) = 3001 || var(3) = 5000 || var(3) = 3900 || var(3) = 5900
value = 501
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
trigger2 = var(10) = 501
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 511
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = (var(10) = 300 && !var(5)) || var(10) = 500
trigger1 = var(3) = 5200 || var(3) = 5900
trigger2 = var(10) = 511
trigger2 = var(11) != 501
trigger2 = var(3) = 5200 || var(3) = 5900
trigger3 = var(10) = 341
trigger3 = var(11) = 310
trigger3 = var(3) = 3100 || var(3) = 3300 || var(3) = 3900
value = 521
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 341
trigger1 = var(11) = 310
trigger1 = var(3) = 5100 || var(3) = 5900
value = 512
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(3) = 5200 || var(3) = 5900
value = 531
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 511
trigger1 = var(11) = 501
trigger1 = var(3) = 3200 || var(3) = 3201 || var(3) = 5200 || var(3) = 3900 || var(3) = 5900
value = 532
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger1 = var(3) = 3000 || var(3) = 5000
value = 301
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 300 || var(10) = 500
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 301
trigger2 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100
trigger3 = var(10) = 300 && var(5)
trigger3 = var(3) = 5100 || var(3) = 5900
value = 311
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311 && !var(5)
trigger1 = var(11) = 301
trigger1 = var(3) = 3100 || var(3) = 3300
trigger2 = var(10) = 511
trigger2 = var(11) = 501
trigger2 = var(3) = 3100 || var(3) = 3300
value = 331
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 310
trigger1 = var(3) = 3100 || var(3) = 3300 || var(3) = 5100 || var(3) = 3900 || var(3) = 5900
value = 341
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = var(10) = 311
trigger1 = var(11) = 500
trigger1 = var(3) = 5100 || var(3) = 5900
value = 342
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 1050
trigger2 = floor(var(3)*.1) = 1150
trigger3 = floor(var(3)*.1) = 1250
value = floor(var(3)*.1)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3050
value = ifelse((power>=1000||root,var(2)>=52),3050,1050)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = roundstate = 2
triggerall = animtime = 0
trigger1 = floor(var(3)*.1) = 3150
value = ifelse((power>=1000||root,var(2)>=52),3150,1150)
ignorehitpause = 0

[State 10000, VarSet]
type = VarSet
triggerall = IsHelper
triggerall = !var(9)
triggerall = animtime = 0
trigger1 = var(10) = 300
trigger2 = var(10) = 310
trigger3 = var(10) = 320
trigger4 = var(10) = 330
trigger5 = var(10) = 340
trigger6 = var(10) = 500
trigger7 = var(10) = 510
trigger8 = var(10) = 520
trigger9 = var(10) = 301
trigger10 = var(10) = 311
trigger11 = var(10) = 341
trigger12 = var(10) = 501
trigger13 = var(10) = 511
var(9) = 1
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
triggerall = var(9) = 1
trigger1 = AnimTime = 0
value = var(10)
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
triggerall = var(3)
triggerall = roundstate = 2
trigger1 = animtime = 0
value = ifelse(var(3)=3900||var(3)=3901||var(3)=5900,floor((var(3)-900)*.1),floor(var(3)*.1))
ignorehitpause = 0

[State 10000, ChangeState]
type = ChangeState
triggerall = IsHelper
triggerall = time > 1
triggerall = !var(24)
trigger1 = AnimTime = 0
trigger2 = !root,var(59) && root,command = "a"
trigger2 = !NumHelper(8000) && !NumHelper(8001) && !root,NumHelper(8000) && !root,NumHelper(8001)
value = ifelse(root,command="スタンド出現攻撃",10840,10000)

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード）
[Statedef 3200]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3200
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = NumHelper(8000)
value = SCA

[State 3000, Superpause]
type = SuperPause
trigger1 = time = 6
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -1000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = time = 6
id = 8000
name = "Super"
pos = ceil(8*const(size.xscale)),ceil(-80*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 0
var(13) = 0
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 0
var(15) = 0
ignorehitpause = 1

[State 10000, NotHitBy]
type = NotHitBy
trigger1 = time = 102
value = SCA
time = 2

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 103
var(0) = 1
ignorehitpause = 1

[State 220, Voice]
type = PlaySnd
trigger1 = time = 37
value = 1100, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 90
value = 3200, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 84
value = 3200, 3

[State 1000, Spark]
type = Explod
trigger1 = Time = 81
Anim = 7050
id = 7050
pos = ceil(16*const(size.xscale)),ceil(-90*const(size.yscale))
postype = P1
ownpal = 1
bindtime = -1
sprpriority = -106
removeongethit = 1
removetime = 25
pausemovetime = 25

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(7050)
Id = 7050
scale = (time-80)*.04,(time-80)*.04

[State 220, 3]
type = ChangeState
trigger1 = var(0)
value = 3201

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード）（成功）
[Statedef 3201]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 10000, VarSet]
type = VarSet
trigger1 = time = 0
var(2) = ifelse(power>=10000,572,ceil(power*.052))+1
ignorehitpause = 1

[State 220, Voice]
type = PlaySnd
trigger1 = animtime = 0
value = 3200, 1
channel = 0

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード）（終了待機）
[Statedef 3203]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, ChangeAnim]
type = changeanim
trigger1 = Time = 0
trigger1 = statetype = C
value = 12

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 12 && animtime = 0
statetype = S
ignorehitpause = 1

[State 10000, ChangeAnim]
type = changeanim
triggerall = anim != 0
trigger1 = anim = 5 && animtime = 0
trigger2 = anim = 6 && animtime = 0
trigger3 = anim = 12 && animtime = 0
trigger4 = anim != 5 || anim != 6 || anim != 12 || anim != 0
value = 0
persistent = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, 3]
type = ChangeState
trigger1 = !NumHelper(10000)
trigger2 = !Helper(10000),var(0)
trigger3 = Helper(10000),stateno = 10000 && Helper(10000),time >= 1
value = 3202

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード）（終了）
[Statedef 3202]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 150
var(0) = 0
ignorehitpause = 1

[State 220, Voice]
type = PlaySnd
trigger1 = time = 40
value = 3200, 2
channel = 0

[State 200, 7]
type = TargetState
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = time = 150
value = 2701

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, 3]
type = ChangeState
trigger1 = numtarget || var(42)
trigger1 = time = 150
value = 3204

[State 220, 3]
type = ChangeState
trigger1 = time = 150
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード）（終了）
[Statedef 3204]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 200, 7]
type = screenbound
trigger1 = 1
value = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 200, 7]
type = ChangeState
triggerall = backedgebodydist < 0 || frontedgebodydist < 0
trigger1 = !numtarget && !var(42)
trigger2 = numtarget
trigger2 = target,statetype = L
trigger3 = var(42)
trigger3 = numenemy
trigger3 = enemynear,statetype = L
value = 2500

[State 200, 7]
type = ChangeState
triggerall = time > 3
trigger1 = !numtarget && !var(42)
trigger2 = numtarget
trigger2 = target,statetype = L
trigger3 = var(42)
trigger3 = numenemy
trigger3 = enemynear,statetype = L
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード時スタンド）
[Statedef 13200]
type = U
movetype = I
physics = N
juggle = 0
ctrl = 0
anim = 13200
velset = 0,0
sprpriority = 2

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = root,var(0) != 1
trigger1 = time < 36
value = SCA

[State 1505,0]
type = BindToParent
trigger1 = time = 0
pos = 20,0

[State 420, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

;スタンド用処理
[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 10000, HitBy]
type = HitBy
trigger1 = root,var(0) != 1
trigger1 = time >= 36
value = SCA, NA, SA, HA, NP, SP, HP

[State 5201, 4]
type = NotHitBy
trigger1 = root,var(0) = 1
value = SCA

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 12200
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 10000, StateTypeSet]
type = StateTypeSet
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
value = 12300

[State 10000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 12100

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（スタンド）（終了）
[Statedef 13204]
type = S
physics = S
sprpriority = 0
anim = 6900

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 420, VarSet]
type = VarSet
trigger1 = time = 1
var(0) = 0

[State 200, 7]
type = TargetState
trigger1 = numtarget && !root,numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = !root,var(0)
value = 2701
persistent = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;対DIO特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4851

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 3

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = IsHelper
triggerall = root,fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = !root,Numtarget
triggerall = target,stateno = 5110 && target,prevstateno = 510
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4951

[State 5900, 3]
type = ParentVarSet
triggerall = IsHelper
triggerall = !root,fvar(14)
triggerall = Numtarget
triggerall = !root,Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 6

[State 420, ChangeState]
type = ChangeState
trigger1 = !root,var(0)
value = ifelse(root,var(49),10001,10000)

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（スタンドモード）
[Statedef 3250]
type = S
movetype = I
physics = N
ctrl = 0
anim = 13250
velset = 0,0
sprpriority = 2

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = NumHelper(8000)
value = SCA

[State 3000, Superpause]
type = SuperPause
trigger1 = time = 11
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = time = 11
id = 8000
name = "Super"
pos = ceil(8*const(size.xscale)),ceil(-80*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 0
var(13) = 0
ignorehitpause = 1

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 0
var(15) = 0
ignorehitpause = 1

[State 10000, NotHitBy]
type = NotHitBy
trigger1 = time = 106
value = SCA
time = 2

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 107
var(0) = 1
ignorehitpause = 1

[State 220, Voice]
type = PlaySnd
trigger1 = time = 1
value = 3000, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 41
value = 1100, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 90
value = 3200, 0
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = animtime = 0
value = 3200, 1
channel = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 86
value = 3200, 3

[State 1000, Spark]
type = Explod
trigger1 = Time = 86
Anim = 7050
id = 7050
pos = 0,ceil(-90*const(size.yscale))
postype = P1
ownpal = 1
bindtime = -1
sprpriority = -106
removeongethit = 1
removetime = 25
pausemovetime = 25

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(7050)
Id = 7050
scale = (time-85)*.04,(time-85)*.04

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 107
var(2) = ifelse(power>=10000,572,ceil(power*.052))+1
ignorehitpause = 1

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（スタンドモード）（終了）
[Statedef 3252]
type = S
movetype = I
physics = N
ctrl = 0
anim = 10000
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 150
var(0) = 0

[State 200, 7]
type = TargetState
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = time = 150
value = 2701

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, 3]
type = ChangeState
trigger1 = numtarget || var(42)
trigger1 = time = 150
value = 3253

[State 220, 3]
type = ChangeState
trigger1 = time = 150
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（スタンドモード）（終了）
[Statedef 3253]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 200, 7]
type = screenbound
trigger1 = 1
value = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 200, 7]
type = ChangeState
triggerall = backedgebodydist < 0 || frontedgebodydist < 0
trigger1 = !numtarget && !var(42)
trigger2 = numtarget
trigger2 = target,statetype = L
trigger3 = var(42)
trigger3 = numenemy
trigger3 = enemynear,statetype = L
value = 2500

[State 200, 7]
type = ChangeState
triggerall = time > 3
trigger1 = !numtarget && !var(42)
trigger2 = numtarget
trigger2 = target,statetype = L
trigger3 = var(42)
trigger3 = numenemy
trigger3 = enemynear,statetype = L
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（スタンドモード）（入門時終了）
[Statedef 3255]
type = S
movetype = I
physics = N
ctrl = 0
anim = 10000
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, VarAdd]
type = VarSet
trigger1 = time = 0
var(0) = 0

[State 200, 7]
type = ChangeState
trigger1 = time = 2
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（背景変化）
[Statedef 3210]
type = U
physics = N
anim = 6900
velset = 0,0
ctrl = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = 1
time = 2
invertall = 1
color = 0
ignorehitpause = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = timerfreeze
ignorehitpause = 1

[State 420, 3]
type = DestroySelf
trigger1 = !root,var(0)

;------------------------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（入門）
[Statedef 3211]
type = U
physics = N
anim = 6900
velset = 0,0
ctrl = 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 1
trigger1 = root,stateno != 3200
trigger1 = root,stateno != 3201
trigger1 = root,stateno != 3250
value = 3200, 0

[State 220, Voice]
type = PlaySnd
trigger1 = time = 1
trigger1 = root,stateno != 3200
trigger1 = root,stateno != 3201
trigger1 = root,stateno != 3250
value = 3200, 3

[State 420, 3]
type = DestroySelf
trigger1 = !root,var(0)

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）
[Statedef 3300]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3300
velset = 0,0
sprpriority = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, Superpause]
type = SuperPause
trigger1 = AnimElemTime(4) = 1
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -2000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8000
name = "Super"
pos = ceil(80*const(size.xscale)),ceil(-84*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time <= 40
value = SCA

[State 3001, Width]
type = Width
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(8) < 0
player = 30,0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 900, 1]
type = HitDef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),42]
trigger1 = AnimElem = 5
attr = S, HT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p2facing = 1
p2stateno = 3305
guard.dist = 0
getpower = 0,0
givepower = 0,0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0

[State 901, Throw]
type = ChangeState
trigger1 = numtarget
trigger1 = target,stateno = 3305
value = 3301
persistent = 0

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）
[Statedef 3301]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3301
velset = 0,0
sprpriority = 0

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 105,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 901, Throw]
type = TargetState
trigger1 = time = 0
value = 3305

[State 901, Throw]
type = TargetState
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(20) = 2
trigger3 = Helper(10000),animelemtime(23) = 2
trigger4 = Helper(10000),animelemtime(32) = 2
trigger5 = Helper(10000),animelemtime(35) = 2
trigger6 = Helper(10000),animelemtime(44) = 2
trigger7 = Helper(10000),animelemtime(47) = 2
trigger8 = Helper(10000),animelemtime(56) = 2
trigger9 = Helper(10000),animelemtime(59) = 2
trigger10 = Helper(10000),animelemtime(68) = 2
trigger11 = Helper(10000),animelemtime(71) = 2
trigger12 = Helper(10000),animelemtime(80) = 2
value = 3306

[State 901, Throw]
type = TargetState
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(14) = 2
trigger2 = Helper(10000),animelemtime(17) = 2
trigger3 = Helper(10000),animelemtime(26) = 2
trigger4 = Helper(10000),animelemtime(29) = 2
trigger5 = Helper(10000),animelemtime(38) = 2
trigger6 = Helper(10000),animelemtime(41) = 2
trigger7 = Helper(10000),animelemtime(50) = 2
trigger8 = Helper(10000),animelemtime(53) = 2
trigger9 = Helper(10000),animelemtime(62) = 2
trigger10 = Helper(10000),animelemtime(65) = 2
trigger11 = Helper(10000),animelemtime(74) = 2
trigger12 = Helper(10000),animelemtime(77) = 2
trigger13 = Helper(10000),animelemtime(87) = 3
value = 3307

[State 901, Throw]
type = TargetState
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelem = 89
value = 3308

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 901, Effect]
type = PlaySnd
trigger1 = time = 0
value = 900, 0

[State 901, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(14) = 2
trigger3 = Helper(10000),animelemtime(17) = 2
trigger4 = Helper(10000),animelemtime(20) = 2
trigger5 = Helper(10000),animelemtime(23) = 2
trigger6 = Helper(10000),animelemtime(26) = 2
trigger7 = Helper(10000),animelemtime(29) = 2
trigger8 = Helper(10000),animelemtime(32) = 2
trigger9 = Helper(10000),animelemtime(35) = 2
trigger10 = Helper(10000),animelemtime(38) = 2
trigger11 = Helper(10000),animelemtime(41) = 2
trigger12 = Helper(10000),animelemtime(44) = 2
trigger13 = Helper(10000),animelemtime(47) = 2
trigger14 = Helper(10000),animelemtime(50) = 2
trigger15 = Helper(10000),animelemtime(53) = 2
trigger16 = Helper(10000),animelemtime(56) = 2
trigger17 = Helper(10000),animelemtime(59) = 2
trigger18 = Helper(10000),animelemtime(62) = 2
trigger19 = Helper(10000),animelemtime(65) = 2
trigger20 = Helper(10000),animelemtime(68) = 2
trigger21 = Helper(10000),animelemtime(71) = 2
trigger22 = Helper(10000),animelemtime(74) = 2
trigger23 = Helper(10000),animelemtime(77) = 2
trigger24 = Helper(10000),animelemtime(80) = 2
value = 1, 5

[State 901, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(87) = 3
value = 2, 5

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelem = 2
value = 3000, 0
channel = 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelem = 12
value = 3300, 1
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelem = 64
value = 3300, 0
channel = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(23) = 2
trigger3 = Helper(10000),animelemtime(35) = 2
trigger4 = Helper(10000),animelemtime(47) = 2
trigger5 = Helper(10000),animelemtime(59) = 2
trigger6 = Helper(10000),animelemtime(71) = 2
Anim = 8204
id = 8204
pos = ceil(90*const(size.xscale)),ceil(-76*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(14) = 2
trigger2 = Helper(10000),animelemtime(26) = 2
trigger3 = Helper(10000),animelemtime(38) = 2
trigger4 = Helper(10000),animelemtime(50) = 2
trigger5 = Helper(10000),animelemtime(62) = 2
trigger6 = Helper(10000),animelemtime(74) = 2
Anim = 8204
id = 8204
pos = ceil(96*const(size.xscale)),ceil(-60*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(17) = 2
trigger2 = Helper(10000),animelemtime(29) = 2
trigger3 = Helper(10000),animelemtime(41) = 2
trigger4 = Helper(10000),animelemtime(53) = 2
trigger5 = Helper(10000),animelemtime(65) = 2
trigger6 = Helper(10000),animelemtime(77) = 2
Anim = 8204
id = 8204
pos = ceil(96*const(size.xscale)),ceil(-48*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(20) = 2
trigger2 = Helper(10000),animelemtime(32) = 2
trigger3 = Helper(10000),animelemtime(44) = 2
trigger4 = Helper(10000),animelemtime(56) = 2
trigger5 = Helper(10000),animelemtime(68) = 2
trigger6 = Helper(10000),animelemtime(80) = 2
Anim = 8204
id = 8204
pos = ceil(92*const(size.xscale)),ceil(-92*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(87) = 3
Anim = 8204
id = 8204
pos = ceil(96*const(size.xscale)),ceil(-84*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(75*const(size.xscale)),0
postype = P1
time = -1

[State 901,1]
type = targetBind
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(14) = 2
trigger3 = Helper(10000),animelemtime(17) = 2
trigger4 = Helper(10000),animelemtime(20) = 2
trigger5 = Helper(10000),animelemtime(23) = 2
trigger6 = Helper(10000),animelemtime(26) = 2
trigger7 = Helper(10000),animelemtime(29) = 2
trigger8 = Helper(10000),animelemtime(32) = 2
trigger9 = Helper(10000),animelemtime(35) = 2
trigger10 = Helper(10000),animelemtime(38) = 2
trigger11 = Helper(10000),animelemtime(41) = 2
trigger12 = Helper(10000),animelemtime(44) = 2
trigger13 = Helper(10000),animelemtime(47) = 2
trigger14 = Helper(10000),animelemtime(50) = 2
trigger15 = Helper(10000),animelemtime(53) = 2
trigger16 = Helper(10000),animelemtime(56) = 2
trigger17 = Helper(10000),animelemtime(59) = 2
trigger18 = Helper(10000),animelemtime(62) = 2
trigger19 = Helper(10000),animelemtime(65) = 2
trigger20 = Helper(10000),animelemtime(68) = 2
trigger21 = Helper(10000),animelemtime(71) = 2
trigger22 = Helper(10000),animelemtime(74) = 2
trigger23 = Helper(10000),animelemtime(77) = 2
trigger24 = Helper(10000),animelemtime(80) = 2
trigger25 = Helper(10000),animelemtime(83) = 2
pos = ceil(100*const(size.xscale)),0
postype = P1
time = 1

[State 901,1]
type = targetBind
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(87) = 3
pos = ceil(100*const(size.xscale)),ceil(-10*const(size.yscale))
postype = P1
time = 1

[State 901, Hit]
type = HitAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(14) = 2
trigger3 = Helper(10000),animelemtime(17) = 2
trigger4 = Helper(10000),animelemtime(20) = 2
trigger5 = Helper(10000),animelemtime(23) = 2
trigger6 = Helper(10000),animelemtime(26) = 2
trigger7 = Helper(10000),animelemtime(29) = 2
trigger8 = Helper(10000),animelemtime(32) = 2
trigger9 = Helper(10000),animelemtime(35) = 2
trigger10 = Helper(10000),animelemtime(38) = 2
trigger11 = Helper(10000),animelemtime(41) = 2
trigger12 = Helper(10000),animelemtime(44) = 2
trigger13 = Helper(10000),animelemtime(47) = 2
trigger14 = Helper(10000),animelemtime(50) = 2
trigger15 = Helper(10000),animelemtime(53) = 2
trigger16 = Helper(10000),animelemtime(56) = 2
trigger17 = Helper(10000),animelemtime(59) = 2
trigger18 = Helper(10000),animelemtime(62) = 2
trigger19 = Helper(10000),animelemtime(65) = 2
trigger20 = Helper(10000),animelemtime(68) = 2
trigger21 = Helper(10000),animelemtime(71) = 2
trigger22 = Helper(10000),animelemtime(74) = 2
trigger23 = Helper(10000),animelemtime(77) = 2
trigger24 = Helper(10000),animelemtime(80) = 2
trigger25 = Helper(10000),animelemtime(87) = 3
value = numtarget

[State 901, Hurt]
type = VarAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(14) = 2
trigger3 = Helper(10000),animelemtime(17) = 2
trigger4 = Helper(10000),animelemtime(20) = 2
trigger5 = Helper(10000),animelemtime(23) = 2
trigger6 = Helper(10000),animelemtime(26) = 2
trigger7 = Helper(10000),animelemtime(29) = 2
trigger8 = Helper(10000),animelemtime(32) = 2
trigger9 = Helper(10000),animelemtime(35) = 2
trigger10 = Helper(10000),animelemtime(38) = 2
trigger11 = Helper(10000),animelemtime(41) = 2
trigger12 = Helper(10000),animelemtime(44) = 2
trigger13 = Helper(10000),animelemtime(47) = 2
trigger14 = Helper(10000),animelemtime(50) = 2
trigger15 = Helper(10000),animelemtime(53) = 2
trigger16 = Helper(10000),animelemtime(56) = 2
trigger17 = Helper(10000),animelemtime(59) = 2
trigger18 = Helper(10000),animelemtime(62) = 2
trigger19 = Helper(10000),animelemtime(65) = 2
trigger20 = Helper(10000),animelemtime(68) = 2
trigger21 = Helper(10000),animelemtime(71) = 2
trigger22 = Helper(10000),animelemtime(74) = 2
trigger23 = Helper(10000),animelemtime(77) = 2
trigger24 = Helper(10000),animelemtime(80) = 2
trigger25 = Helper(10000),animelemtime(87) = 3
var(42) = numtarget

[State 901, Hurt]
type = TargetLifeAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(14) = 2
trigger3 = Helper(10000),animelemtime(17) = 2
trigger4 = Helper(10000),animelemtime(20) = 2
trigger5 = Helper(10000),animelemtime(23) = 2
trigger6 = Helper(10000),animelemtime(26) = 2
trigger7 = Helper(10000),animelemtime(29) = 2
trigger8 = Helper(10000),animelemtime(32) = 2
trigger9 = Helper(10000),animelemtime(35) = 2
trigger10 = Helper(10000),animelemtime(38) = 2
trigger11 = Helper(10000),animelemtime(41) = 2
trigger12 = Helper(10000),animelemtime(44) = 2
trigger13 = Helper(10000),animelemtime(47) = 2
trigger14 = Helper(10000),animelemtime(50) = 2
trigger15 = Helper(10000),animelemtime(53) = 2
trigger16 = Helper(10000),animelemtime(56) = 2
trigger17 = Helper(10000),animelemtime(59) = 2
trigger18 = Helper(10000),animelemtime(62) = 2
trigger19 = Helper(10000),animelemtime(65) = 2
trigger20 = Helper(10000),animelemtime(68) = 2
trigger21 = Helper(10000),animelemtime(71) = 2
trigger22 = Helper(10000),animelemtime(74) = 2
trigger23 = Helper(10000),animelemtime(77) = 2
trigger24 = Helper(10000),animelemtime(80) = 2
value = ceil(ifelse(-14*fvar(1)>-7,-7,-14*fvar(1)))
kill = 0

[State 901, Hurt]
type = TargetLifeAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(87) = 3
value = ceil(ifelse(-35*fvar(1)>-7,-7,-35*fvar(1)))

[State 2601, EnvShake]
type = EnvShake
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(11) = 3
trigger2 = Helper(10000),animelemtime(14) = 2
trigger3 = Helper(10000),animelemtime(17) = 2
trigger4 = Helper(10000),animelemtime(20) = 2
trigger5 = Helper(10000),animelemtime(23) = 2
trigger6 = Helper(10000),animelemtime(26) = 2
trigger7 = Helper(10000),animelemtime(29) = 2
trigger8 = Helper(10000),animelemtime(32) = 2
trigger9 = Helper(10000),animelemtime(35) = 2
trigger10 = Helper(10000),animelemtime(38) = 2
trigger11 = Helper(10000),animelemtime(41) = 2
trigger12 = Helper(10000),animelemtime(44) = 2
trigger13 = Helper(10000),animelemtime(47) = 2
trigger14 = Helper(10000),animelemtime(50) = 2
trigger15 = Helper(10000),animelemtime(53) = 2
trigger16 = Helper(10000),animelemtime(56) = 2
trigger17 = Helper(10000),animelemtime(59) = 2
trigger18 = Helper(10000),animelemtime(62) = 2
trigger19 = Helper(10000),animelemtime(65) = 2
trigger20 = Helper(10000),animelemtime(68) = 2
trigger21 = Helper(10000),animelemtime(71) = 2
trigger22 = Helper(10000),animelemtime(74) = 2
trigger23 = Helper(10000),animelemtime(77) = 2
trigger24 = Helper(10000),animelemtime(80) = 2
time = 12
ampl = 3

[State 2601, EnvShake]
type = EnvShake
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = NumHelper(10000)
trigger1 = Helper(10000),animelemtime(87) = 3
time = 30
ampl = 8

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）（成功）
[Statedef 13301]
type = S
movetype = A
physics = N
anim = 13301
velset = 0,0
sprpriority = 1

[State 8600, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 220, Position]
type = BindToParent
trigger1 = time = 0
pos = 24,0

[State 100, 2]
type = AssertSpecial
triggerall = animelemtime(91) >= 1
trigger1 = time%2=0
flag = invisible

[State -2]
type = helper
trigger1 = AnimElem = 12
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999

[State -2]
type = helper
trigger1 = AnimElem = 12
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 12100

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）（相手）1
[Statedef 3305]
type    = S
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = 1
value = 5010

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）（相手）3
[Statedef 3306]
type    = S
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5002

[State 5001, 2]
type = ChangeAnim
trigger1 = anim = 5002 && AnimTime = 0
value = 5007

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）（相手）3
[Statedef 3307]
type    = S
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 5001, 2]
type = ChangeAnim
trigger1 = anim = 5012 && AnimTime = 0
value = 5017

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;ラッシュオラ（相手）4
[Statedef 3308]
type = A
movetype = H
physics = N
velset = -2,-15

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5051)
value = 5051

[State 2601, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = time = 0
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 2601, Vel]
type = VelAdd
trigger1 = 1
y = .44

[State 2601, Screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;ラッシュオラ（スタンドモード）
[Statedef 3350]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 13350
velset = 0,0
sprpriority = 3

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, Superpause]
type = SuperPause
trigger1 = AnimElemTime(4) = 1
time = 30
movetime = 30
anim = -1
sound = S8000,10
pos = 0,0
darken = 0
p2defmul = 1
poweradd = -2000
unhittable = 0
persistent = 0

[State 8000, Super]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8000
name = "Super"
pos = ceil(8*const(size.xscale)),ceil(-64*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State 5201, 4]
type = NotHitBy
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = time <= 40
value = SCA

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 12
movetype = I

[State 900, 1]
type = HitDef
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),42]
trigger1 = AnimElem = 5
attr = S, HT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p2facing = 1
p2stateno = 3305
guard.dist = 0
getpower = 0,0
givepower = 0,0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0

[State 901, Throw]
type = ChangeState
trigger1 = numtarget
trigger1 = target,stateno = 3305
value = 3351
persistent = 0

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラッシュオラ（本体モード）
[Statedef 3351]
type = S
movetype = I
physics = S
ctrl = 0
anim = 13351
velset = 0,0
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 75,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, VarSet]
type = VarSet
triggerall = anim = 13351
trigger1 = AnimElem = 130
var(50) = 1

[State 901, Throw]
type = ChangeAnim
triggerall = anim = 13351
trigger1 = animtime = 0
value = 10000

[State 901, Throw]
type = TargetState
trigger1 = time = 0
value = 3305

[State 901, Throw]
type = TargetState
trigger1 = anim = 10000
trigger1 = AnimElemTime(17) = 3
value = 2700

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 901, SprPriority]
type = SprPriority
trigger1 = anim = 10000
value = 0

[State 4000, Pause]
type = Pause
trigger1 = anim = 13351
trigger1 = AnimElemTime(23) >= 0
trigger2 = anim = 10000
trigger2 = AnimElemTime(17) < 3
time = 2
movetime = 2

[State -2]
type = helper
triggerall = anim = 13351
trigger1 = AnimElem = 23
ID = 3360
stateno = 3360
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State -2]
type = helper
triggerall = anim = 13351
trigger1 = AnimElem = 69
ID = 17100
stateno = 17100
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State -2]
type = helper
triggerall = anim = 13351
trigger1 = AnimElem = 69
ID = 17100
stateno = 17101
pos = 0,0
postype = P1
pausemovetime = 99999999
persistent = 0

[State 8000, Super]
type = Helper
triggerall = anim = 13351
trigger1 = AnimElem = 165
pos = 0,0
postype = P1
stateno = 17401
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999
persistent = 0

[State 901, Effect]
type = PlaySnd
trigger1 = time = 0
value = 900, 0

[State 901, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 69
trigger2 = AnimElem = 72
trigger3 = AnimElem = 75
trigger4 = AnimElem = 78
trigger5 = AnimElem = 81
trigger6 = AnimElem = 84
trigger7 = AnimElem = 87
trigger8 = AnimElem = 90
trigger9 = AnimElem = 93
trigger10 = AnimElem = 96
trigger11 = AnimElem = 99
trigger12 = AnimElem = 102
trigger13 = AnimElem = 105
trigger14 = AnimElem = 108
trigger15 = AnimElem = 111
trigger16 = AnimElem = 114
trigger17 = AnimElem = 117
trigger18 = AnimElem = 120
trigger19 = AnimElem = 123
trigger20 = AnimElem = 126
trigger21 = AnimElem = 129
trigger22 = AnimElem = 132
trigger23 = AnimElem = 135
trigger24 = AnimElem = 138
trigger25 = AnimElem = 141
trigger26 = AnimElem = 144
trigger27 = AnimElem = 147
trigger28 = AnimElem = 150
trigger29 = AnimElem = 153
trigger30 = AnimElem = 156
trigger31 = AnimElem = 159
trigger32 = AnimElem = 162
value = 1, 5

[State 901, Effect]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 43
trigger2 = AnimElem = 167
value = 2, 5

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 5
value = 1100, 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 23
value = 3200, 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 43
value = 0, 2

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 49
value = 3000, 0

[State 220, Voice]
type = PlaySnd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 23
value = 3200, 3

[State -2]
type = helper
triggerall = anim = 13351
triggerall = !NumHelper(11010)
trigger1 = AnimElem = 69
ID = 11010
stateno = 11010
pos = 0,0
postype = P1
pausemovetime = 99999999
supermovetime = 99999999
persistent = 0

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 167
Anim = 17400
pos = 0, 0
postype = P1
ownpal = 1
sprpriority = 5
scale = const(size.xscale),const(size.yscale)
pausemovetime = 3

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 43
Anim = 8204
id = 8204
pos = ceil(60*const(size.xscale)),ceil(-73*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 69
trigger2 = AnimElem = 81
trigger3 = AnimElem = 93
trigger4 = AnimElem = 105
trigger5 = AnimElem = 117
trigger6 = AnimElem = 129
trigger7 = AnimElem = 141
trigger8 = AnimElem = 153
Anim = 8204
id = 8204
pos = ceil(52*const(size.xscale)),ceil(-76*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 72
trigger2 = AnimElem = 84
trigger3 = AnimElem = 96
trigger4 = AnimElem = 108
trigger5 = AnimElem = 120
trigger6 = AnimElem = 132
trigger7 = AnimElem = 144
trigger8 = AnimElem = 156
Anim = 8204
id = 8204
pos = ceil(64*const(size.xscale)),ceil(-60*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 78
trigger2 = AnimElem = 90
trigger3 = AnimElem = 102
trigger4 = AnimElem = 114
trigger5 = AnimElem = 126
trigger6 = AnimElem = 138
trigger7 = AnimElem = 150
trigger8 = AnimElem = 162
Anim = 8204
id = 8204
pos = ceil(68*const(size.xscale)),ceil(-48*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 75
trigger2 = AnimElem = 87
trigger3 = AnimElem = 99
trigger4 = AnimElem = 111
trigger5 = AnimElem = 123
trigger6 = AnimElem = 135
trigger7 = AnimElem = 147
trigger8 = AnimElem = 159
Anim = 8204
id = 8204
pos = ceil(56*const(size.xscale)),ceil(-92*const(size.yscale))
random = 20,20
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 1000, Spark]
type = Explod
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 167
Anim = 8204
id = 8204
pos = ceil(72*const(size.xscale)),ceil(-57*const(size.yscale))
postype = P1
ownpal = 1
ontop = 1
pausemovetime = 9999

[State 901,1]
type = targetBind
triggerall = anim = 13351
trigger1 = animelem = 1
pos = ceil(72*const(size.xscale)),0
postype = P1
time = -1

[State 901,1]
type = targetBind
triggerall = anim = 13351
trigger1 = AnimElem = 167
pos = ceil(72*const(size.xscale)),0
postype = P1
time = 1

[State 901, Hit]
type = HitAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 43
trigger2 = AnimElem = 69
trigger3 = AnimElem = 72
trigger4 = AnimElem = 75
trigger5 = AnimElem = 78
trigger6 = AnimElem = 81
trigger7 = AnimElem = 84
trigger8 = AnimElem = 87
trigger9 = AnimElem = 90
trigger10 = AnimElem = 93
trigger11 = AnimElem = 96
trigger12 = AnimElem = 99
trigger13 = AnimElem = 102
trigger14 = AnimElem = 105
trigger15 = AnimElem = 108
trigger16 = AnimElem = 111
trigger17 = AnimElem = 114
trigger18 = AnimElem = 117
trigger19 = AnimElem = 120
trigger20 = AnimElem = 123
trigger21 = AnimElem = 126
trigger22 = AnimElem = 129
trigger23 = AnimElem = 132
trigger24 = AnimElem = 135
trigger25 = AnimElem = 138
trigger26 = AnimElem = 141
trigger27 = AnimElem = 144
trigger28 = AnimElem = 147
trigger29 = AnimElem = 150
trigger30 = AnimElem = 153
trigger31 = AnimElem = 156
trigger32 = AnimElem = 159
trigger33 = AnimElem = 162
trigger34 = AnimElem = 167
value = numtarget

[State 901, Hurt]
type = TargetLifeAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = anim = 10000
trigger1 = AnimElemTime(17) = 3
value = ceil(ifelse(-371*fvar(1)>-7,-7,-371*fvar(1)))

[State 2601, EnvShake]
type = EnvShake
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 43
trigger2 = AnimElem = 167
time = 30
ampl = 8

[State 2601, EnvShake]
type = EnvShake
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = anim = 13351
trigger1 = AnimElem = 69
trigger2 = AnimElem = 72
trigger3 = AnimElem = 75
trigger4 = AnimElem = 78
trigger5 = AnimElem = 81
trigger6 = AnimElem = 84
trigger7 = AnimElem = 87
trigger8 = AnimElem = 90
trigger9 = AnimElem = 93
trigger10 = AnimElem = 96
trigger11 = AnimElem = 99
trigger12 = AnimElem = 102
trigger13 = AnimElem = 105
trigger14 = AnimElem = 108
trigger15 = AnimElem = 111
trigger16 = AnimElem = 114
trigger17 = AnimElem = 117
trigger18 = AnimElem = 120
trigger19 = AnimElem = 123
trigger20 = AnimElem = 126
trigger21 = AnimElem = 129
trigger22 = AnimElem = 132
trigger23 = AnimElem = 135
trigger24 = AnimElem = 138
trigger25 = AnimElem = 141
trigger26 = AnimElem = 144
trigger27 = AnimElem = 147
trigger28 = AnimElem = 150
trigger29 = AnimElem = 153
trigger30 = AnimElem = 156
trigger31 = AnimElem = 159
trigger32 = AnimElem = 162
time = 12
ampl = 3

[State 200, 7]
type = screenbound
trigger1 = var(50)
value = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
triggerall = anim = 10000
triggerall = AnimElemTime(21) > 4
trigger1 = numtarget
trigger1 = target,stateno = [2600,2601]
trigger2 = backedgebodydist < 0 || frontedgebodydist < 0
value = 2501

[State 200, 7]
type = TargetState
trigger1 = !var(24)
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = !var(0)
trigger1 = var(50)
value = 2700
ignorehitpause = 0
persistent = 0

[State 220, 3]
type = ChangeState
triggerall = anim = 10000
triggerall = AnimElemTime(21) > 4
trigger1 = numtarget
trigger1 = target,stateno != [2600,2601]
trigger1 = target,stateno != 2700
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;ラッシュオラ（背景変化）
[Statedef 3360]
type = U
physics = N
anim = 6900
velset = 0,0
ctrl = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = root,stateno = 3351 && root,time < 590
time = 1
invertall = 1
color = 0
ignorehitpause = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = root,stateno = 3351 && root,time < 590
flag = nomusic
flag2 = timerfreeze
ignorehitpause = 1

[State 420, 3]
type = DestroySelf
trigger1 = root,stateno = 3351 && root,time = 590

;---------------------------------------------------------------------------
;ラッシュオラ（エフェクト）
[Statedef 17401]
type = S
movetype = I
physics = N
ctrl = 0
anim = 17412
sprpriority = 4

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToParent
trigger1 = AnimElemTime(5) < 0
pos = 0,0

[State 2500, ChangeAnim]
type = ChangeAnim
triggerall = root,NumHelper(3360)
trigger1 = animelem = 5
value = anim
elem = 4

[State 100, 2]
type = AssertSpecial
trigger1 = !parent,NumHelper(8000)
trigger1 = time%2=0
flag = invisible

[State 0, 4]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;画面外から復帰（走り）
[Statedef 2500]
type = S
physics = N
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, AfterImage]
type = AfterImageTime
trigger1 = time = 0
value = 0

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = frontedgebodydist < 0
trigger1 = time = 0
value = 5+var(49)

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = frontedgebodydist >= 0
trigger1 = time = 0
trigger2 = anim = 5+var(49) && animtime = 0
value = 100+var(49)

[State 100, 2]
type = turn
trigger1 = anim = 5+var(49) && animelem = 1

[State 2500, ChangeAnim]
type = ChangeAnim
triggerall = anim = 100+var(49)
trigger1 = numtarget
trigger1 = target,stateno = [2600,2603]
trigger2 = var(42)
trigger2 = numenemy
trigger2 = enemynear,stateno = [2600,2603]
value = anim

[State 2500, ChangeAnim]
type = ChangeAnim
triggerall = anim = 100+var(49)
triggerall = animelem = 4
trigger1 = backedgebodydist < -50
trigger2 = frontedgebodydist < -50
value = anim
elem = 2

[State 2500, ScreenBound]
type = screenbound
trigger1 = backedgebodydist < 25 || frontedgebodydist < 25
value = 0

[State 2500, VelSet]
type = VelSet
triggerall = anim = 100+var(49)
trigger1 = animelem = 3
x = 10
persistent = 0

[State 2500, VelSet]
type = VelMul
triggerall = anim = 100+var(49)
trigger1 = animelemtime(4) > 0
x = .9

[State 2500, VelSet]
type = VelSet
triggerall = anim = 100+var(49)
trigger1 = !var(49) && AnimElem = 8
trigger2 = var(49) && AnimElemTime(11) = 1
x = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2500, ChangeState]
type = ChangeState
trigger1 = anim = 100+var(49)
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;画面外から復帰（走り）
[Statedef 2501]
type = S
movetype = I
physics = N
ctrl = 0
anim = var(49)
velset = 0,0

[State 200, 7]
type = screenbound
trigger1 = 1
value = 0

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = anim

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 200, 7]
type = ChangeState
triggerall = backedgebodydist < 0 || frontedgebodydist < 0
trigger1 = numtarget
trigger1 = target,stateno != [2600,2603]
trigger2 = !numtarget
value = 2500

[State 200, 7]
type = ChangeState
triggerall = time > 3
trigger1 = numtarget
trigger1 = target,stateno != [2600,2603]
trigger2 = !numtarget
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;壁激突（吹き飛び中）
[Statedef 2600]
type = A
movetype = H
physics = N
velset = -12,0
anim = 5012

[State 220, Position]
type = PosSet
triggerall = Time = 0
trigger1 = prevstateno = 3106
trigger2 = prevstateno = 3605
y = -10

[State 3450,1]
type = ChangeAnim
triggerall = SelfAnimExist(5900) = 1
triggerall = time = 0
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat" || AuthorName = "y.y"
value = 5900

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 5900
value = anim

[State 2601, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 2500, ScreenBound]
type = screenbound
trigger1 = time >= 30
value = 0

[State 2600, ChangeState]
type = ChangeState
trigger1 = backedgebodydist <= 0
trigger2 = time >= 60
value = 2601

;---------------------------------------------------------------------------
;壁激突（激突）
[Statedef 2601]
type = A
movetype = H
physics = N
velset = 0,0

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 0

[State 2601, Position]
type = PosAdd
trigger1 = Time < 12
x = ceil((12-ifelse(time%2=0,time,time-1))/4)*ifelse(time%2=1,1,-1)

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = Time < 12
value = anim

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 12
trigger1 = SelfAnimExist(5051)
value = 5051

[State 2601, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = time = 12
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = time >= 12
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 100, 2]
type = turn
trigger1 = backedgebodydist <= 0
trigger1 = time = 12

[State 2601, Vel]
type = VelSet
trigger1 = time = 12
x = -3.5
y = -4.3

[State 2601, Vel]
type = VelAdd
trigger1 = time > 12
y = .47

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;壁激突（吹き飛び中）
[Statedef 2602]
type = A
movetype = H
physics = N
velset = 0,0
anim = 5012

[State 3001, Width]
type = Width
trigger1 = time < 36
edge = 0,15

[State 220, Velocity]
type = VelSet
trigger1= Time = 36
x = -12

[State 3450,1]
type = ChangeAnim
triggerall = SelfAnimExist(5900) = 1
triggerall = time = 0
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat" || AuthorName = "y.y"
value = 5900

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 5900
value = anim

[State 2601, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 2500, ScreenBound]
type = screenbound
trigger1 = time >= 70
value = 0

[State 2600, ChangeState]
type = ChangeState
trigger1 = time > 40
trigger1 = backedgebodydist <= 0
trigger2 = time >= 100
value = 2601

;---------------------------------------------------------------------------
;壁激突（吹き飛び中）
[Statedef 2603]
type = A
movetype = H
physics = N
velset = 0,0
anim = 5012

[State 3001, Width]
type = Width
trigger1 = time < 30
edge = 0,15

[State 220, Velocity]
type = VelSet
trigger1= time = 24
x = -12
persistent = 0

[State 3450,1]
type = ChangeAnim
triggerall = SelfAnimExist(5900) = 1
triggerall = time = 0
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat" || AuthorName = "y.y"
value = 5900

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 5900
value = anim

[State 2601, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 2500, ScreenBound]
type = screenbound
trigger1 = time >= 60
value = 0

[State 2600, ChangeState]
type = ChangeState
trigger1 = time > 30
trigger1 = backedgebodydist <= 0
trigger2 = time >= 90
value = 2601

;---------------------------------------------------------------------------
;壁激突（待機）
[Statedef 2700]
type = A
movetype = H
physics = N
velset = -5,-7.5

[State 2601, Vel]
type = PosFreeze
trigger1 = 1

[State 2601, SelfState]
type = ChangeState
triggerall = roundstate = 2
trigger1 = time = 2
value = 2600

[State 2601, SelfState]
type = SelfState
trigger1 = time = 2
value = 5050

;---------------------------------------------------------------------------
;壁激突（待機）（時間停止後）
[Statedef 2701]
type = A
movetype = H
physics = N
velset = -5,-7.5

[State 2601, Vel]
type = PosFreeze
trigger1 = 1

[State 200, 7]
type = LifeAdd
triggerall = time = 1
trigger1 = numenemy
trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
trigger1 = enemy(0),var(15)
value = -enemy(0),var(15)

[State 200, 7]
type = LifeAdd
triggerall = time = 1
trigger1 = numenemy = 2
trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
trigger1 = enemy(1),var(15)
value = -enemy(1),var(15)

[State 2601, SelfState]
type = ChangeState
triggerall = roundstate = 2
trigger1 = time = 2
value = 2600

[State 2601, SelfState]
type = SelfState
trigger1 = time = 2
value = 5050

;---------------------------------------------------------------------------
;壁
[Statedef 6800]
type = U
physics = N
ctrl = 0
anim = 6900

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 10000, ChangeState]
type = DestroySelf
triggerall = roundstate = 2
trigger1 = root,movetype = H

;---------------------------------------------------------------------------
;スタンドクラッシュ（ヒット時）
[Statedef 4000]
type    = U
movetype = H
physics = N
velset = 0,0

[State 4000, Position]
type = PosAdd
trigger1 = Time = 0
x = -20

[State 4000, VarAdd]
type = VarAdd
trigger1 = time = 0
var(33) = 27
ignorehitpause = 1

[State 4000, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 4000, Effect]
type = PlaySnd
trigger1 = time = 0
value = 5100, 2

[State 4000, Effect]
type = PlaySnd
trigger1 = time = 0
value = 4000, 0

[State 4000, Explod];背景
type = Explod
trigger1 = time = 0
anim = 8720
id = 8720
postype = Left
pos = 160,104
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -105
pausemovetime = 99999999
supermovetime = 99999999
removetime = 7
scale = const(size.xscale),const(size.yscale)

[State 4000, Effect]
type = AssertSpecial
trigger1 = NumExplod(8720)
flag = NoFG
flag2 = NoBG

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),4000,4010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 4030

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 4000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 4000, 6]
type = ChangeState
triggerall = time > 1
trigger1 = !var(33)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001 ;HITG_SLIDE

[State 4000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = !var(33)
value = 4030

;---------------------------------------------------------------------------
; HITG_SLIDE（のけぞり）
[Statedef 4001]
type    = S
movetype = H
physics = S

[State 5001, 1]
type = VelSet
trigger1 = !var(33)
x = -8
persistent = 0

[State 5001, 2]
type = ChangeAnim
triggerall = prevstateno = 4000
trigger1 = !var(33)
value = 4007 + (GetHitVar(groundtype)=2)*10

[State 5001, 2]
type = ChangeAnim
triggerall = prevstateno = 4100
trigger1 = var(33)
value = anim

[State 5001, 4]
type = VelSet
trigger1 = !var(34)
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = !var(34)
value = 1

[State 1000, Spark]
type = Explod
trigger1 = !var(33)
Anim = 8160
id = 8160
pos = 0, 0
ownpal = 1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
persistent = 0
pausemovetime = 99999999*var(0)

[State 5001, 6]
type = ChangeState
trigger1 = !var(34)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_UP (initial going up)（ダウン）
[Statedef 4030]
type    = A
movetype = H
physics = N
ctrl = 0

[State 5030, 1]
type = Gravity
trigger1 = 1

[State 5030, 2]
type = HitVelSet
triggerall = prevstateno = 4000
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 2]
type = VelMul
triggerall = prevstateno = 4000
trigger1 = Time = 0
y = 1.1

[State 5030, 2]
type = VelSet
triggerall = prevstateno = 4100
trigger1 = Time = 0
x = -2.5
y = -2.5

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = !var(34)
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = !var(34)
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 4035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 4035]
type    = A
movetype = H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 1]
type = Gravity
trigger1 = 1

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = !var(34)  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = !var(34)  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITG_SHAKE（ガード時）
[Statedef 4100]
type    = S
movetype = H
physics = N
velset = 0,0

[State 4000, Position]
type = PosAdd
trigger1 = Time = 0
x = -20

[State -1, VarAdd]
type = VarAdd
trigger1 = time = 0
var(33) = 27
ignorehitpause = 1

[State -1, VarAdd]
type = VarAdd
trigger1 = time = 0
var(34) = 50
ignorehitpause = 1

[State 4000, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 220, Effect]
type = PlaySnd
trigger1 = time = 0
value = 5100, 2

[State 4000, Effect]
type = PlaySnd
trigger1 = time = 0
value = 4000, 0

[State 6000, Explod];背景
type = Explod
trigger1 = time = 0
anim = 8720
id = 8720
postype = Left
pos = 160,104
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -105
pausemovetime = 99999999
supermovetime = 99999999
removetime = 7
scale = const(size.xscale),const(size.yscale)

[State 4000, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = statetype != A
value = 4101

[State 4000, 2]
type = ChangeAnim
trigger1 = time = 0
trigger1 = statetype = A
value = 4030

[State 4000, 2]
type = ChangeAnim
trigger1 = 1
value = anim

[State 4000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 4000, 6]
type = ChangeState
triggerall = time > 1
trigger1 = !var(33)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001 ;HITG_SLIDE

[State 4000, 7]
type = ChangeState
triggerall = time > 1
trigger1 = !var(33)
value = 4030

;---------------------------------------------------------------------------
;本体待機1
[Statedef 20000]
type = U
physics = N
anim = 6900
velset = 0,0

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 10820
value = 20820

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 840 && root,time = 1
value = 20001

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,var(49) && roundstate = [2,3]
value = 20001

[State 420, VarSet]
type = VarSet
trigger1 = !var(0) && root,var(2)
var(0) = 1

[State 420, 3]
type = VarSet
trigger1 = var(0) && !root,var(2)
var(0) = 0

;---------------------------------------------------------------------------
;本体待機2
[Statedef 20001]
type = U
physics = N
sprpriority = 1
velset = 0,0

[State 420, VarSet]
type = VarSet
trigger1 = root,var(30) = gametime+1
var(1) = root,anim

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 830
trigger2 = root,stateno = 835
trigger3 = root,stateno = 850
value = 20830

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 901 && root,time = 1
value = 20901

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,stateno = 5030 && roundstate = 3
value = 25030

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = (root,stateno = [700,799]) && root,statetype = A && root,time = 1
trigger2 = root,stateno = 1060 && root,time = 1
trigger3 = root,stateno = 3060 && root,time = 1
value = 21010

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 4]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3350 && root,time = 1
value = 23350

[State 2600, ChangeState]
type = ChangeState
trigger1 = !(root,stateno = 840 && root,time <= 1)
trigger1 = !root,var(49) && root,var(30) = gametime+1
trigger2 = !root,var(49) && root,var(30) <= gametime && var(1) != root,anim
value = 20000

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,stateno = 170
trigger2 = root,stateno = 175
trigger3 = root,stateno = [181,189]
value = root,stateno

[State 0, 1]
type = ChangeAnim
triggerall = !root,hitshakeover
triggerall = animelem = 4
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5001
trigger3 = root,stateno = 5010
trigger4 = root,stateno = 5011
trigger5 = root,stateno = 5020
trigger6 = root,stateno = 5030
trigger7 = root,stateno = 5035
trigger8 = root,stateno = 5040
trigger9 = root,stateno = 5050
trigger10 = root,stateno = 5070
trigger11 = root,stateno = 5071
trigger12 = root,stateno = 5080
trigger13 = root,stateno = 5081
trigger14 = root,stateno = 5100
trigger15 = root,stateno = 5101
trigger16 = root,stateno = 5110
trigger17 = root,stateno = 5120
trigger18 = root,stateno = 5150
trigger19 = root,stateno = 5200
trigger20 = root,stateno = 5201
trigger21 = root,stateno = 5210
trigger22 = root,stateno = 15000
trigger23 = root,stateno = 15001
trigger24 = root,stateno = 15010
trigger25 = root,stateno = 15011
trigger26 = root,stateno = 15020
trigger27 = root,stateno = 15030
trigger28 = root,stateno = 15035
trigger29 = root,stateno = 15040
trigger30 = root,stateno = 15050
trigger31 = root,stateno = 15070
trigger32 = root,stateno = 15071
trigger33 = root,stateno = 15080
trigger34 = root,stateno = 15081
trigger35 = root,stateno = 15100
value = anim
elem = 2

[State 0, 1]
type = ChangeAnim
triggerall = !root,hitshakeover
trigger1 = root,anim = 10120
trigger2 = root,anim = 10121
trigger3 = root,anim = 10130
trigger4 = root,anim = 10131
trigger5 = root,anim = 10140
trigger6 = root,anim = 10141
trigger7 = root,anim = 10150
trigger8 = root,anim = 10151
trigger9 = root,anim = 10152
value = anim

[State 0, 1]
type = ChangeAnim
triggerall = anim != 20000
trigger1 = root,stateno = 0
trigger2 = root,stateno = 840
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = anim != 20100
trigger1 = root,stateno = 100
value = 20100

[State 0, 1]
type = ChangeAnim
triggerall = anim != 20105
trigger1 = root,stateno = 105
value = 20105

[State 0, 1]
type = ChangeAnim
triggerall = anim != (root,anim-10000)
trigger1 = root,stateno = 10
trigger2 = root,stateno = 11
trigger3 = root,stateno = 12
trigger4 = root,stateno = 20
trigger5 = root,stateno = 21
trigger6 = root,stateno = 40
trigger7 = root,stateno = 45
trigger8 = root,stateno = 48
trigger9 = root,stateno = 50
trigger10 = root,stateno = 52
trigger11 = root,stateno = 60
trigger12 = root,stateno = 120 && root,statetype != A
trigger13 = root,stateno = [130,132]
trigger14 = root,stateno = 150
trigger15 = root,stateno = 152
trigger16 = root,stateno = 154
trigger17 = root,stateno = 195
trigger18 = root,stateno = 196
trigger19 = root,stateno = 800
trigger20 = root,stateno = 810
trigger21 = root,stateno = 5000
trigger22 = root,stateno = 5001
trigger23 = root,stateno = 5010
trigger24 = root,stateno = 5011
trigger25 = root,stateno = 5020
trigger26 = root,stateno = 5030
trigger27 = root,stateno = 5035
trigger28 = root,stateno = 5040
trigger29 = root,stateno = 5050
trigger30 = root,stateno = 5070
trigger31 = root,stateno = 5071
trigger32 = root,stateno = 5080
trigger33 = root,stateno = 5081
trigger34 = root,stateno = 5100
trigger35 = root,stateno = 5101
trigger36 = root,stateno = 5110
trigger37 = root,stateno = 5120
trigger38 = root,stateno = 5150
trigger39 = root,stateno = 5200
trigger40 = root,stateno = 5201
trigger41 = root,stateno = 5210
trigger42 = root,stateno = 15000
trigger43 = root,stateno = 15001
trigger44 = root,stateno = 15010
trigger45 = root,stateno = 15011
trigger46 = root,stateno = 15020
trigger47 = root,stateno = 15030
trigger48 = root,stateno = 15035
trigger49 = root,stateno = 15040
trigger50 = root,stateno = 15050
trigger51 = root,stateno = 15070
trigger52 = root,stateno = 15071
trigger53 = root,stateno = 15080
trigger54 = root,stateno = 15081
trigger55 = root,stateno = 15100
trigger56 = root,stateno = 10825
value = root,anim-root,var(49)

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = root,movetype != H
trigger1 = anim != [5,6]
trigger2 = root,movetype = H
trigger2 = root,hitshakeover
pos = -20,0

[State 220, Position]
type = PosAdd
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = (anim = [5,6]) && rootdist x < 12
x = -6

[State 220, Position]
type = PosAdd
triggerall = root,var(0) != -1
triggerall = root,var(0) != 2
trigger1 = !root,hitshakeover
x = 1*ifelse(time%2=0,-1,1)

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 420, VarSet]
type = VarSet
trigger1 = !var(0) && root,var(2)
var(0) = 1

[State 420, 3]
type = VarSet
trigger1 = var(0) && !root,var(2)
var(0) = 0

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "MAX = %d Hit= %d Counter =%d Hit1 = %d Bit2 = %d \n "
params = var(1), var(39), var(38), gametime, root,var(35)
ignorehitpause = 1

;---------------------------------------------------------------------------
;スタンド解除
[Statedef 20830]
type = U
physics = N
anim = root,anim
velset = 0,0

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = time = 0
value = anim
elem = root,AnimElemNo(0)

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
trigger1 = time = 1
value = 20000

;---------------------------------------------------------------------------
;スタンド消滅（KO時本体）
[Statedef 25030]
type = U
physics = N
anim = root,anim
velset = 0,0

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
trigger1 = time = 1
value = 20000

;---------------------------------------------------------------------------
;投げ（スタンド時本体）
[Statedef 20901]
type = U
physics = N
anim = 901
velset = 0,0
sprpriority = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, 4]
type = ChangeState
trigger1 = root,stateno = 950 && root,time = 1
value = 20950

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
trigger3 = animtime = 0
value = 20001

;---------------------------------------------------------------------------
;スタンド発現
[Statedef 20820]
type = U
physics = N
anim = 820
velset = 0,0
sprpriority = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 901 && root,time = 1
value = 20901

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,stateno = 5030 && roundstate = 3
value = 25030

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = anim != 20000
trigger1 = root,stateno = 10820 && root,command != "holda"
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 0
trigger1 = root,ctrl && root,command != "holda"
trigger2 = root,movetype = H
trigger3 = animtime = 0
trigger4 = root,stateno = [1,159]
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;立ち攻撃1
[Statedef 21000]
type = U
physics = N
anim = 21000
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = root,statetype = S
trigger1 = anim = 21000
trigger1 = animtime = 0
trigger2 = anim =12
trigger2 = animtime = 0
value = 20000

[State 2600, ChangeState]
type = changeanim
triggerall = root,statetype = C
trigger1 = anim = 21000
trigger1 = animtime = 0
value = 12

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
trigger5 = root,stateno = 512 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
trigger8 = root,stateno = 3350 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;立ち攻撃2
[Statedef 21001]
type = U
physics = N
anim = 21001
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = root,statetype = S
trigger1 = anim = 21001
trigger1 = animtime = 0
trigger2 = anim =12
trigger2 = animtime = 0
value = 20000

[State 2600, ChangeState]
type = changeanim
triggerall = root,statetype = C
trigger1 = anim = 21001
trigger1 = animtime = 0
value = 12

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
trigger5 = root,stateno = 512 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
trigger8 = root,stateno = 3350 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;立ち攻撃3
[Statedef 21002]
type = U
physics = N
anim = 21002
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = root,statetype = S
trigger1 = anim = 21002
trigger1 = animtime = 0
trigger2 = anim =12
trigger2 = animtime = 0
value = 20000

[State 2600, ChangeState]
type = changeanim
triggerall = root,statetype = C
trigger1 = anim = 21002
trigger1 = animtime = 0
value = 12

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
trigger5 = root,stateno = 512 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
trigger8 = root,stateno = 3350 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;立ち攻撃4
[Statedef 21003]
type = U
physics = N
anim = 21003
velset = 0,0
sprpriority = 2-root,statetype=C

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = root,statetype = S
trigger1 = anim = 21003
trigger1 = animtime = 0
trigger2 = anim =12
trigger2 = animtime = 0
value = 20000

[State 2600, ChangeState]
type = changeanim
triggerall = root,statetype = C
trigger1 = anim = 21003
trigger1 = animtime = 0
value = 12

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
trigger5 = root,stateno = 512 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
trigger8 = root,stateno = 3350 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;しゃがみ攻撃1
[Statedef 21005]
type = U
physics = N
anim = 21005
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
trigger1 = anim = 21005
trigger1 = animtime = 0
value = 11

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
trigger5 = root,stateno = 512 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
trigger8 = root,stateno = 3350 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;しゃがみ攻撃2
[Statedef 21006]
type = U
physics = N
anim = 21006
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
trigger1 = anim = 21005
trigger1 = animtime = 0
value = 11

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 850 && root,time = 1
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = (root,stateno = [300,599]) && (root,prevstateno = [100,105]) && root,time = 1
value = 21003

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 300 && root,time = 1
trigger2 = root,stateno = 301 && root,time = 1
value = 21000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 320 && root,time = 1
trigger2 = root,stateno = 321 && root,time = 1
trigger3 = root,stateno = 330 && root,time = 1
trigger4 = root,stateno = 331 && root,time = 1
trigger5 = root,stateno = 530 && root,time = 1
trigger6 = root,stateno = 531 && root,time = 1
trigger7 = root,stateno = 532 && root,time = 1
value = 21001

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 310 && root,time = 1
trigger2 = root,stateno = 311 && root,time = 1
trigger3 = root,stateno = 312 && root,time = 1
trigger4 = root,stateno = 340 && root,time = 1
trigger5 = root,stateno = 341 && root,time = 1
trigger6 = root,stateno = 342 && root,time = 1
value = 21002

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 500 && root,time = 1
trigger2 = root,stateno = 501 && root,time = 1
trigger3 = root,stateno = 510 && root,time = 1
trigger4 = root,stateno = 511 && root,time = 1
trigger5 = root,stateno = 512 && root,time = 1
value = 21005

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 520 && root,time = 1
trigger2 = root,stateno = 521 && root,time = 1
value = 21006

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
trigger4 = root,stateno = 1350 && root,time = 1
trigger5 = root,stateno = 1950 && root,time = 1
trigger6 = root,stateno = 3050 && root,time = 1
trigger7 = root,stateno = 3150 && root,time = 1
trigger8 = root,stateno = 3350 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3250 && root,time = 1
value = 23200

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 3252
value = 23202

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;ジャンプ攻撃
[Statedef 21010]
type = U
physics = N
anim = 825
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1060 && root,time = 1
trigger2 = root,stateno = 3060 && root,time = 1
value = 21010

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,statetype != A
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;オラオラ（スタンド時本体）
[Statedef 21050]
type = U
physics = N
anim = 21050
velset = 0,0
sprpriority = 0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = rootdist x <= 20
pos = -20,0

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x > 20
x = 7

[State 1100, Velocity]
type = VelSet
trigger1 = rootdist x <= 20
x = 0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = root,movetype != H
trigger1 = root,stateno = 1050 && root,animtime = -12
value = 21051

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1150 && root,time = 1
trigger2 = root,stateno = 1160 && root,time = 1
trigger3 = root,stateno = 1170 && root,time = 1
trigger4 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;マッハオラ（スタンド時本体）
[Statedef 21150]
type = U
physics = N
anim = 21150
velset = 0,0
sprpriority = 0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 21151
trigger1 = root,stateno = 1150 && root,animelem = 5
trigger2 = root,stateno = 1160 && root,animelemtime(1) = 1
trigger3 = root,stateno = 1160 && root,animelem = 2
trigger4 = root,stateno = 1170 && root,animelemtime(1) = 1
trigger5 = root,stateno = 1170 && root,animelem = 2
trigger6 = root,stateno = 1180 && root,animelemtime(1) = 1
trigger7 = root,stateno = 1180 && root,animelem = 2
value = 21151

[State 2600, ChangeState]
type = changeanim
trigger1 = root,stateno = 1150 && !root,var(5) && root,animelem = 14
trigger2 = root,stateno = 1150 && root,var(5)=1 && root,animelem = 16
trigger3 = root,stateno = 1150 && root,var(5)=2 && root,animelem = 18
trigger4 = root,stateno = 1160 && root,animelem = 7
trigger5 = root,stateno = 1170 && root,animelem = 6
trigger6 = root,stateno = 1180 && root,animelem = 6
value = 21151
elem = 5

[State 0]
type = changeanim
triggerall = time > 0
trigger1 = parent,var(24)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;スターフィンガー（スタンド時本体）
[Statedef 21250]
type = U
physics = N
anim = 21250
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 21251
trigger1 = root,stateno = 1250 && root,anim = 11251
value = 21251

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;ゾッとするぜ（スタンド時本体）
[Statedef 21350]
type = U
physics = N
anim = 1300
velset = 0,0
sprpriority = 2

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 21351
trigger1 = root,stateno = 1351 && root,anim = 11351
trigger2 = root,stateno = 1351 && root,anim = 11352
value = 21351

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 21352
trigger1 = root,stateno = 1352 && root,anim = 11353
value = 21352

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 20000
trigger1 = anim = 1300
trigger1 = animtime = 0
value = 20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;プッツンオラ（スタンド時本体）
[Statedef 23050]
type = U
physics = N
anim = 3000
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 20
trigger1 = root,stateno = 3050 && root,animelemtime(3) >= 0
value = 20

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 0
trigger1 = root,stateno = 3050 && root,animelemtime(34) >= 0
value = 0

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;スターブレイカー（スタンド時本体）
[Statedef 23150]
type = U
physics = N
anim = 21050
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, changeanim]
type = changeanim
triggerall = anim != 23151
trigger1 = root,stateno = 3150 && root,anim = 13151
value = 23151
persistent = 0

[State 2600, changeanim]
type = changeanim
triggerall = anim != 23152
trigger1 = root,stateno = 3150 && root,anim = 13151 && root,animelemtime(10) = 1
value = 23152
persistent = 0

[State 2600, changeanim]
type = changeanim
triggerall = time > 0
trigger1 = parent,var(24)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 0
trigger1 = root,ctrl
trigger2 = root,movetype = H
trigger3 = anim = 23152 && animtime = 0
trigger4 = root,stateno = [1,159]
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;ガードキャンセル攻撃（スタンド時本体）
[Statedef 21950]
type = U
physics = N
anim = 21150
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 21151
trigger1 = root,stateno = 1950 && root,animelem = 5
value = 21151

[State 2600, ChangeState]
type = changeanim
trigger1 = root,stateno = 1950 && root,animelem = 14
value = 21151
elem = 5

[State 0]
type = changeanim
triggerall = time > 0
trigger1 = parent,var(24)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 9606, EnvColor]
type = palfx
trigger1 = time < 10
trigger1 = time%4=1
add = 168,168,168
time = 2
color = 0
persistent = 1
ignorehitpause = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1050 && root,time = 1
trigger2 = root,stateno = 1150 && root,time = 1
trigger3 = root,stateno = 1250 && root,time = 1
value = root,stateno+20000

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 1160 && root,time = 1
trigger2 = root,stateno = 1170 && root,time = 1
trigger3 = root,stateno = 1180 && root,time = 1
value = 21150

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード本体）
[Statedef 23200]
type = U
physics = N
anim = 21250
velset = 0,0

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,var(0)
value = 23201

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード本体）
[Statedef 23201]
type = U
physics = N
velset = 0,0

[State 10000, VarAdd]
type = VarSet
trigger1 = Time = 0
var(0) = 1

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード本体）
[Statedef 23202]
type = U
physics = N
velset = 0,0

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 20000
trigger1 = time = 0
value = 20000

[State 220, Voice]
type = PlaySnd
trigger1 = time = 40
value = 3200, 2
channel = 0

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
trigger1 = root,stateno = 3253
value = 23203

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド（本体モード本体）
[Statedef 23203]
type = U
physics = N
velset = 0,0

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;ラッシュオラ（スタンド時本体）
[Statedef 23350]
type = U
physics = N
anim = 23350
velset = 0,0
sprpriority = 2

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 1201, screenbound]
type = screenbound
trigger1 = !root,var(50)
value = 1

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2600, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = anim = 181
trigger1 = AnimElem = 4
value = 3200, 2
channel = 0

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 23351
trigger1 = root,stateno = 3351
value = 23351
persistent = 0

[State 2600, ChangeState]
type = changeanim
triggerall = anim != 181
trigger1 = root,stateno = 3351 && root,anim = 10000
value = 181
persistent = 0

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2500 && root,time = 1
value = 22500

[State 2600, ChangeState]
type = ChangeState
triggerall = root,movetype != H
triggerall = time > 1
trigger1 = root,stateno = 2501 && root,time = 1
value = 22501

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = root,stateno = 0 && root,time = 1
value = 20000

[State 0, 1]
type = ChangeAnim
triggerall = time > 1
trigger1 = (root,stateno = [1,159]) && root,time = 1
value = root,anim-10000

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = root,ctrl
trigger2 = root,movetype = H
value = 20001

[State 2600, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = !var(0) && root,stateno = 3200
value = 20000

;------------------------------------------------------------------------------------------
;画面外から復帰（走り）
[Statedef 22500]
type = S
physics = N
velset = 0,0
ctrl = 0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 5 && root,anim = 10005
value = 5

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 100 && root,anim = 10100
value = 100

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = root,anim = 10100 && root,animelemtime(2) <= 0
value = anim

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = root,anim = 10100 && animelem = 3
trigger1 = backedgebodydist < -50 || frontedgebodydist < -50
value = anim
elem = 2

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2500, ChangeState]
type = ChangeState
trigger1 = root,stateno != 2500
value = 20001

;------------------------------------------------------------------------------------------
;画面外から復帰（待機）
[Statedef 22501]
type = S
movetype = I
physics = N
ctrl = 0
anim = 0
velset = 0,0

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 1505,0]
type = BindToParent
trigger1 = 1
pos = -20,0

[State 200, 7]
type = screenbound
trigger1 = 1
value = 0

[State 2500, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = anim

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2600, ChangeState]
type = changeanim
triggerall = !parent,var(33)
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
trigger1 = parent,var(35) = 1
trigger2 = parent,var(0) = -1
trigger3 = parent,var(0) = 2

[State 2600, ChangeState]
type = ParentVarSet
trigger1 = 1
var(35) = 1

[State 2500, ChangeState]
type = ChangeState
trigger1 = root,stateno = 2500
value = 22500

[State 2500, ChangeState]
type = ChangeState
trigger1 = root,stateno != 2501
value = 20001

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 890]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 895]
type    = L
movetype= H
physics = N
anim = 5070
velset = 0,0

[State 5071, 1]
type = VelSet
trigger1 = Time = 0
x = -10

[State 5071, 2]
type = VelMul
trigger1 = 1
x = .88

[State 5071, 1]
type = VelSet
trigger1 = Time = 16
x = 0

[State 5071, 4] ;Hit ground
type = SelfState
trigger1 = Time = 16
value = 5110

;---------------------------------------------------------------------------
[Statedef -2]

;config呼び出し
[State 3001, Super]
type = Helper
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
id = 30000
name = "config"
pos = -999,-999
postype = Left
stateno = 30000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

;ジョジョキャラフラグ
[State 5900, 3]
type = VarSet
triggerall = roundstate <= 2
trigger1 = P2Name = "MIDLER" || P4Name = "MIDLER"
trigger2 = P2Name = "alessi" || P4Name = "alessi"
trigger3 = P2Name = "PetShop" || P4Name = "PetShop"
trigger4 = P2Name = "MARIAH" || P4Name = "MARIAH"
trigger5 = P2Name = "Hol horse & Boingo" || P4Name = "Hol horse & Boingo"
trigger6 = P2Name = "blackpolnareff" || P4Name = "blackpolnareff"
trigger7 = P2Name = "vanilla ice" || P4Name = "vanilla ice"
trigger8 = P2Name = "vanillaice" || P4Name = "vanillaice"
trigger9 = P2Name = "Devo" || P4Name = "Devo"
trigger10 = P2Name = "chaka" || P4Name = "chaka"
trigger11 = P2Name = "HOL HORSE" || P4Name = "HOL HORSE"
trigger12 = P2Name = "Shadow DIO" || P4Name = "Shadow DIO"
trigger13 = P2Name = "Rubber Soul" || P4Name = "Rubber Soul"
trigger14 = P2Name = "khan" || P4Name = "khan"
var(57) = 1

[State 5900, 3]
type = VarSet
triggerall = roundstate <= 2
trigger1 = P2Name = "Noriaki Kakyoin" || P4Name = "Noriaki Kakyoin"
trigger2 = P2Name = "J.P Polnareff" || P4Name = "J.P Polnareff"
trigger3 = P2Name = "AVDOL" || P4Name = "AVDOL"
trigger4 = P2Name = "joseph" || P4Name = "joseph"
trigger5 = P2Name = "Joseph Joestar" || P4Name = "Joseph Joestar"
var(57) = 2

[State 5900, 3]
type = VarSet
triggerall = roundstate <= 2
trigger1 = P2Name = "blackpolnareff" || P4Name = "blackpolnareff"
var(57) = 3

[State 5900, 3]
type = VarSet
triggerall = roundstate <= 2
trigger1 = P2Name = "DIO" || P4Name = "DIO"
trigger2 = P2Name = "Dio Brendo" || P4Name = "Dio Brendo"
var(57) = 4

[State 5900, 3]
type = VarSet
triggerall = roundstate <= 2
trigger1 = P2Name = "jotaro" || P4Name = "jotaro"
trigger2 = P2Name = "Jotaro Kujo" || P4Name = "Jotaro Kujo"
var(57) = 5

;チームモードイントロ判定（自分交代時）
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = time = 0
triggerall = roundstate = 0
trigger1 = roundsexisted <= 0
value = 190

;チームモードイントロ判定（相手交代時）
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = roundstate = 0
triggerall = numenemy
triggerall = enemynear,roundsexisted <= 0
triggerall = time = 0
trigger1 = (P2Name = "DIO" || P4Name = "DIO") && EnemyNear,AuthorName = "warusaki3"
trigger2 = (P2Name = "final dio" || P4Name = "final dio") && EnemyNear,AuthorName = "warusaki3"
value = 190

;管理用ヘルパー
[State -2]
type = helper
trigger1 = !NumHelper(8500)
ID = 8500
stateno = 8500
pos = -999,-999
pausemovetime = 99999999
supermovetime = 99999999

;本体ヘルパー（通常）
[State -2]
type = helper
trigger1 = roundstate >= 2
trigger1 = !NumHelper(20000)
ID = 20000
stateno = 20000
pos = 0,0
pausemovetime = 99999999
ownpal = 1

;スタンドヘルパー
[State -2]
type = helper
trigger1 = roundstate >= 2
trigger1 = !NumHelper(10000)
ID = 10000
stateno = 10000
pos = 0,0
pausemovetime = 99999999
ownpal = 1

;対DIO特殊勝利
[State 901, Throw]
type = ChangeState
triggerall = fvar(14) != 2
triggerall = matchover
triggerall = Statetype != A
triggerall = ctrl
trigger1 = Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger2 = fvar(14) = 3
value = ifelse(var(49),830,4800)

[State 901, Throw]
type = TargetState
triggerall = fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
value = 4850

[State 901, Throw]
type = TargetState
triggerall = fvar(14) != 2
triggerall = matchover
triggerall = Numtarget
triggerall = target,Name = "DIO"
triggerall = target,AuthorName = "warusaki3"
trigger1 = target,stateno = 5110 && target,prevstateno != 5100
trigger2 = target,stateno = 5100 && target,prevstateno = 906
trigger3 = target,stateno = 5100 && target,prevstateno = 3308
value = 4851

[State 5900, 3]
type = VarSet
triggerall = !fvar(14)
triggerall = Numtarget
trigger1 = target,Name = "DIO"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 1

;対DIO（最終ラウンド）特殊勝利
[State 901, Throw]
type = ChangeState
triggerall = fvar(14) != 5
triggerall = matchover
triggerall = Statetype != A
triggerall = ctrl
trigger1 = Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger2 = fvar(14) = 6
value = ifelse(var(49),830,4900)

[State 901, Throw]
type = TargetState
triggerall = fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = target,stateno = 5050
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
value = 4950

[State 901, Throw]
type = TargetState
triggerall = fvar(14) != 5
triggerall = matchover
triggerall = Numtarget
triggerall = target,Name = "final dio"
triggerall = target,AuthorName = "warusaki3"
trigger1 = target,stateno = 5110 && target,prevstateno != 5100
trigger2 = target,stateno = 5100 && target,prevstateno = 906
trigger3 = target,stateno = 5100 && target,prevstateno = 3308
value = 4951

[State 5900, 3]
type = VarSet
triggerall = !fvar(14)
triggerall = Numtarget
trigger1 = target,Name = "final dio"
trigger1 = target,AuthorName = "warusaki3"
trigger1 = matchover
fvar(14) = 4

[State 5900, 3]
type = VarSet
trigger1 = fvar(14) = 4
var(56) = 1

;勝利時壁
[State -2, BG]
type = Helper
trigger1 = roundstate = 3
trigger1 = alive
trigger1 = !NumHelper(6800)
ID = 6800
stateno = 6800
postype = front
pos = 0,0
ignorehitpause = 1
facing = -facing

[State -2, BG]
type = Helper
trigger1 = roundstate = 3
trigger1 = alive
trigger1 = !NumHelper(6801)
ID = 6801
stateno = 6800
postype = back
pos = 0,0
ignorehitpause = 1
facing = facing

;無敵
[State 5201, 4]
type = NotHitBy
trigger1 = NumHelper(8000)
trigger2 = NumHelper(8001)
trigger3 = NumHelper(10000)
trigger3 = Helper(10000),NumHelper(8000)
trigger4 = NumHelper(10000)
trigger4 = Helper(10000),NumHelper(8001)
value = SCA
ignorehitpause = 1

;オラオラ音声
[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(13) = 0
ignorehitpause = 1

;時間停止待機
[State -2, VarSet]
type = VarSet
triggerall = var(0)
trigger1 = roundstate != 2
trigger2 = !alive
var(0) = 0
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = var(13)
trigger1 = roundstate != 2
trigger2 = !alive
var(13) = 0
ignorehitpause = 1

[State -2, VarSet];enemy(0)のみ時止め可能な場合
type = VarSet
triggerall = var(0) = 2
triggerall = numenemy
triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
triggerall = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
trigger1 = numenemy = 1
trigger1 = !numpartner
trigger2 = numenemy = 2
trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
trigger2 = !numpartner
trigger3 = numenemy = 1
trigger3 = numpartner
trigger3 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
trigger4 = numenemy = 2
trigger4 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
trigger4 = numpartner
trigger4 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
var(0) = 0
ignorehitpause = 1

	[State -2, VarSet];enemy(1)のみ時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger1 = !numpartner
	trigger2 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger2 = numpartner
	trigger2 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];partnerのみ時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numpartner
	triggerall = partner,authorname="warusaki3" && partner,fvar(39) = 5
	triggerall = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	trigger1 = numenemy = 1
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger1 = !numpartner
	trigger2 = numenemy = 2
	trigger2 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(0)とpartnerが時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy
	triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	triggerall = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
	triggerall = numpartner
	triggerall = partner,authorname="warusaki3" && partner,fvar(39) = 5
	triggerall = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	trigger1 = numenemy = 1
	trigger2 = numenemy = 2
	trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(0)とenemy(1)が時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	triggerall = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	trigger1 = !numpartner
	trigger2 = numpartner
	trigger2 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(1)とpartnerが時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	triggerall = numpartner
	triggerall = partner,authorname="warusaki3" && partner,fvar(39) = 5
	triggerall = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];全員時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = numpartner
	trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	trigger1 = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
	trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	trigger1 = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	trigger1 = partner,authorname="warusaki3" && partner,fvar(39) = 5
	trigger1 = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	var(0) = 0
	ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = numenemy
triggerall = teamside = 1
triggerall = !var(0)
triggerall = enemy(0),authorname="warusaki3"
triggerall = enemy(0),var(0) = 1
triggerall = !numpartner
trigger1 = enemy(0),name="Jotaro Kujo"
trigger1 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
trigger2 = enemy(0),name="DIO"
trigger2 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
trigger3 = enemy(0),name="Final DIO"
trigger3 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
trigger4 = enemy(0),name="Shadow DIO"
trigger4 = enemy(0),stateno = 3200
var(0) = 2
ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numenemy
	triggerall = teamside = 1
	triggerall = !var(0)
	triggerall = enemy(0),authorname="warusaki3"
	triggerall = enemy(0),var(0) = 1
	triggerall = numpartner
	triggerall = ID < partner,ID
	trigger1 = enemy(0),name="Jotaro Kujo"
	trigger1 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
	trigger2 = enemy(0),name="DIO"
	trigger2 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
	trigger3 = enemy(0),name="Final DIO"
	trigger3 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
	trigger4 = enemy(0),name="Shadow DIO"
	trigger4 = enemy(0),stateno = 3200
	var(0) = 2
	ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numenemy = 2
	triggerall = teamside = 1
	triggerall = !var(0)
	triggerall = enemy(1),authorname="warusaki3"
	triggerall = enemy(1),var(0) = 1
	trigger1 = enemy(1),name="Jotaro Kujo"
	trigger1 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger2 = enemy(1),name="DIO"
	trigger2 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger3 = enemy(1),name="Final DIO"
	trigger3 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger4 = enemy(1),name="Shadow DIO"
	trigger4 = enemy(1),stateno = 3200
	var(0) = 2
	ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numenemy = 2
	triggerall = teamside = 1
	triggerall = !var(0)
	triggerall = enemy(1),authorname="warusaki3"
	triggerall = enemy(1),var(0) = 1
	triggerall = !numpartner
	trigger1 = enemy(1),name="Jotaro Kujo"
	trigger1 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger2 = enemy(1),name="DIO"
	trigger2 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger3 = enemy(1),name="Final DIO"
	trigger3 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger4 = enemy(1),name="Shadow DIO"
	trigger4 = enemy(1),stateno = 3200
	var(0) = 2
	ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numenemy = 2
	triggerall = teamside = 1
	triggerall = !var(0)
	triggerall = enemy(1),authorname="warusaki3"
	triggerall = enemy(1),var(0) = 1
	triggerall = numpartner
	triggerall = ID < partner,ID
	trigger1 = enemy(1),name="Jotaro Kujo"
	trigger1 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger2 = enemy(1),name="DIO"
	trigger2 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger3 = enemy(1),name="Final DIO"
	trigger3 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger4 = enemy(1),name="Shadow DIO"
	trigger4 = enemy(1),stateno = 3200
	var(0) = 2
	ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numpartner
	triggerall = ID < partner,ID
	triggerall = !var(0)
	triggerall = partner,authorname="warusaki3"
	triggerall = partner,var(0) = 1
	trigger1 = partner,name="Jotaro Kujo"
	trigger1 = partner,stateno = 3201 || partner,stateno = 3250
	trigger2 = partner,name="DIO"
	trigger2 = partner,stateno = 3201 || partner,stateno = 3250
	trigger3 = partner,name="Final DIO"
	trigger3 = partner,stateno = 3201 || partner,stateno = 3250
	trigger4 = partner,name="Shadow DIO"
	trigger4 = partner,stateno = 3200
	var(0) = 2
	ignorehitpause = 1

[State -2, CtrlSet];enemy(0)のみ時止め可能な場合
type = CtrlSet
triggerall = var(13)
triggerall = var(0) = 2
triggerall = numenemy
triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
triggerall = !enemy(0),var(2)
triggerall = alive
trigger1 = numenemy = 1
trigger2 = numenemy = 2
trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
value = 1
ignorehitpause = 1

	[State -2, CtrlSet];enemy(1)のみ時止め可能な場合
	type = CtrlSet
	triggerall = var(13)
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = !enemy(1),var(2)
	triggerall = alive
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	value = 1
	ignorehitpause = 1

	[State -2, CtrlSet];enemy(0)とenemy(1)が時止め可能な場合
	type = CtrlSet
	triggerall = var(13)
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = alive
	trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	trigger1 = !enemy(0),var(2)
	trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	trigger1 = !enemy(1),var(2)
	value = 1
	ignorehitpause = 1

[State -2, VarSet];enemy(0)のみ時止め可能な場合
type = VarSet
triggerall = var(0) = 3
triggerall = numenemy
triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
triggerall = !enemy(0),var(2)
trigger1 = numenemy = 1
trigger2 = numenemy = 2
trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
var(0) = 1
ignorehitpause = 1

	[State -2, VarSet];enemy(1)のみ時止め可能な場合
	type = VarSet
	triggerall = var(0) = 3
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = !enemy(1),var(2)
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	var(0) = 1
	ignorehitpause = 1

	[State -2, VarSet];enemy(0)とenemy(1)が時止め可能な場合
	type = VarSet
	triggerall = var(0) = 3
	triggerall = numenemy = 2
	trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	trigger1 = !enemy(0),var(2)
	trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	trigger1 = !enemy(1),var(2)
	var(0) = 1
	ignorehitpause = 1

[State -2, VarSet];enemy(0)のみ時止め可能な場合
type = VarSet
triggerall = var(0) = 2
triggerall = numenemy
triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
triggerall = !enemy(0),var(2)
trigger1 = numenemy = 1
trigger2 = numenemy = 2
trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
var(13) = 0
ignorehitpause = 1

	[State -2, VarSet];enemy(1)のみ時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = !enemy(1),var(2)
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	var(13) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(0)とenemy(1)が時止め可能な場合
	type = VarSet
	triggerall = var(0) = 2
	triggerall = numenemy = 2
	trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	trigger1 = !enemy(0),var(2)
	trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	trigger1 = !enemy(1),var(2)
	var(13) = 0
	ignorehitpause = 1

[State -2, ChangeAnim]
type = ChangeAnim
triggerall = !var(33)
triggerall = var(30) = gametime+1
trigger1 = var(0) = -1
trigger2 = var(0) = 2
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
ignorehitpause = 1

[State -2, posision]
type = PosFreeze
trigger1 = var(0) = -1
trigger2 = var(0) = 2
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = var(0) = 2
triggerall = var(13) = 1
trigger1 = movetype = H
var(13) = 0
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = ctrl
trigger1 = var(0) = -1
trigger2 = var(0) = 2
var(13) = 1
ignorehitpause = 1

[State -2, ctrl]
type = ctrlset
trigger1 = var(0) = -1
trigger2 = var(0) = 2
value = 0
ignorehitpause = 1

[State -2, ctrl]
type = ctrlset
triggerall = alive
triggerall = var(13) = 1
trigger1 = !var(0)
trigger2 = var(0) = 3
value = 1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = var(13) = 1
trigger1 = !var(0)
trigger2 = var(0) = 3
var(13) = 0
ignorehitpause = 1

;時止め時間
[State 3000, pause]
type = Pause
triggerall = roundstate = 2
triggerall = alive
trigger1 = var(0) > 0
time = 2
movetime = 2
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = numenemy
triggerall = teamside = 2
triggerall = !var(0)
triggerall = enemy(0),authorname="warusaki3"
triggerall = enemy(0),var(0) = 1
trigger1 = enemy(0),name="Jotaro Kujo"
trigger1 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
trigger2 = enemy(0),name="DIO"
trigger2 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
trigger3 = enemy(0),name="Final DIO"
trigger3 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
trigger4 = enemy(0),name="Shadow DIO"
trigger4 = enemy(0),stateno = 3200
var(0) = 2
ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numenemy
	triggerall = teamside = 1
	triggerall = !var(0)
	triggerall = enemy(0),authorname="warusaki3"
	triggerall = enemy(0),var(0) = 1
	triggerall = numpartner
	triggerall = ID > partner,ID
	trigger1 = enemy(0),name="Jotaro Kujo"
	trigger1 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
	trigger2 = enemy(0),name="DIO"
	trigger2 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
	trigger3 = enemy(0),name="Final DIO"
	trigger3 = enemy(0),stateno = 3201 || enemy(0),stateno = 3250
	trigger4 = enemy(0),name="Shadow DIO"
	trigger4 = enemy(0),stateno = 3200
	var(0) = 2
	ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numenemy = 2
	triggerall = teamside = 2
	triggerall = !var(0)
	triggerall = enemy(1),authorname="warusaki3"
	triggerall = enemy(1),var(0) = 1
	trigger1 = enemy(1),name="Jotaro Kujo"
	trigger1 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger2 = enemy(1),name="DIO"
	trigger2 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger3 = enemy(1),name="Final DIO"
	trigger3 = enemy(1),stateno = 3201 || enemy(1),stateno = 3250
	trigger4 = enemy(1),name="Shadow DIO"
	trigger4 = enemy(1),stateno = 3200
	var(0) = 2
	ignorehitpause = 1

	[State -2, VarSet]
	type = VarSet
	triggerall = numpartner
	triggerall = ID > partner,ID
	triggerall = !var(0)
	triggerall = partner,authorname="warusaki3"
	triggerall = partner,var(0) = 1
	trigger1 = partner,name="Jotaro Kujo"
	trigger1 = partner,stateno = 3201 || partner,stateno = 3250
	trigger2 = partner,name="DIO"
	trigger2 = partner,stateno = 3201 || partner,stateno = 3250
	trigger3 = partner,name="Final DIO"
	trigger3 = partner,stateno = 3201 || partner,stateno = 3250
	trigger4 = partner,name="Shadow DIO"
	trigger4 = partner,stateno = 3200
	var(0) = 2
	ignorehitpause = 1

[State 5110, 11] ;If just died
type = ChangeState
triggerall = alive
triggerall = stateno = 5110
trigger1 = var(0) = 2
value = 5120

[State 3000, pause]
type = Pause
triggerall = roundstate = 2
triggerall = alive
triggerall = var(0) > 0
trigger1 = movetype = A
time = 2
movetime = 2
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = var(2)
trigger1 = numenemy
trigger1 = !NumHelper(8000)
trigger1 = !NumHelper(8001)
trigger1 = !(enemy(0),authorname="warusaki3" && (enemy(0),NumHelper(8000) || enemy(0),NumHelper(8001)) && enemy(0),fvar(39) = 5)
trigger2 = numenemy = 2
trigger2 = !(enemy(1),authorname="warusaki3" && (enemy(1),NumHelper(8000) || enemy(1),NumHelper(8001)) && enemy(1),fvar(39) = 5)
trigger3 = numpartner
trigger3 = !(partner,authorname="warusaki3" && (partner,NumHelper(8000) || partner,NumHelper(8001)) && partner,fvar(39) = 5)
var(2) = -1
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = var(2) < 0
var(2) = 0
ignorehitpause = 1

[State 1100, PowerSet]
type = PowerSet
trigger1 = var(2) > 0
value = ceil(var(2)*19.23)
ignorehitpause = 1

[State -2, Power]
type = PowerSet
triggerall = var(0) = 1 || (var(0) = 3 && stateno != 3200 && stateno != 3201 && stateno != 3250)
trigger1 = !var(2)
value = 0
ignorehitpause = 1

[State -2]
type = helper
trigger1 = var(0) = [1,3]
trigger1 = !NumHelper(3210)
ID = 3210
stateno = 3210
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State 5201, 4]
type = NotHitBy
trigger1 = var(0) = 1
value = SCA
ignorehitpause = 1

[State 1100, VarSet]
type = VarAdd
triggerall = var(0) = 1
trigger1 = movehit
trigger2 = projhit = 1
var(15) = var(14)
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = !var(2)
triggerall = stateno != 3200
triggerall = stateno != 3201
triggerall = stateno != 3250
trigger1 = var(0) = 3
trigger2 = var(0) = 1
trigger2 = numpartner
trigger2 = partner,authorname="warusaki3" && partner,fvar(39) = 5
trigger2 = partner,var(0) = 1 && !partner,var(2)
var(0) = -1
ignorehitpause = 1

[State -3, Turns Mode Intro]
type = ChangeState
triggerall = stateno != 3252 && stateno != 3203
trigger1 = var(0) = 1
trigger1 = !var(2)
trigger1 = ctrl && statetype != A
value = ifelse(var(49),3252,3203)

[State -2, VarSet];enemy(0)のみ時止め可能な場合
type = VarSet
triggerall = var(0) = -1
triggerall = numenemy
triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
triggerall = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
trigger1 = numenemy = 1
trigger1 = !numpartner
trigger2 = numenemy = 2
trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
trigger2 = !numpartner
trigger3 = numenemy = 1
trigger3 = numpartner
trigger3 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
trigger4 = numenemy = 2
trigger4 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
trigger4 = numpartner
trigger4 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
var(0) = 0
ignorehitpause = 1

	[State -2, VarSet];enemy(1)のみ時止め可能な場合
	type = VarSet
	triggerall = var(0) = -1
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger1 = !numpartner
	trigger2 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger2 = numpartner
	trigger2 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];partnerのみ時止め可能な場合
	type = VarSet
	triggerall = var(0) = -1
	triggerall = numpartner
	triggerall = partner,authorname="warusaki3" && partner,fvar(39) = 5
	triggerall = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	trigger1 = numenemy = 1
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger1 = !numpartner
	trigger2 = numenemy = 2
	trigger2 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(0)とpartnerが時止め可能な場合
	type = VarSet
	triggerall = var(0) = -1
	triggerall = numenemy
	triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	triggerall = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
	triggerall = numpartner
	triggerall = partner,authorname="warusaki3" && partner,fvar(39) = 5
	triggerall = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	trigger1 = numenemy = 1
	trigger2 = numenemy = 2
	trigger2 = !(enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(0)とenemy(1)が時止め可能な場合
	type = VarSet
	triggerall = var(0) = -1
	triggerall = numenemy = 2
	triggerall = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	triggerall = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	trigger1 = !numpartner
	trigger2 = numpartner
	trigger2 = !(partner,authorname="warusaki3" && partner,fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];enemy(1)とpartnerが時止め可能な場合
	type = VarSet
	triggerall = var(0) = -1
	triggerall = numenemy = 2
	triggerall = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	triggerall = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	triggerall = numpartner
	triggerall = partner,authorname="warusaki3" && partner,fvar(39) = 5
	triggerall = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	trigger1 = !(enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5)
	var(0) = 0
	ignorehitpause = 1

	[State -2, VarSet];全員時止め可能な場合
	type = VarSet
	triggerall = var(0) = -1
	triggerall = numenemy = 2
	triggerall = numpartner
	trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
	trigger1 = enemy(0),var(0) = -1 || !enemy(0),var(0) || enemy(0),var(0) = 2
	trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
	trigger1 = enemy(1),var(0) = -1 || !enemy(1),var(0) || enemy(1),var(0) = 2
	trigger1 = partner,authorname="warusaki3" && partner,fvar(39) = 5
	trigger1 = partner,var(0) = -1 || !partner,var(0) || partner,var(0) = 2
	var(0) = 0
	ignorehitpause = 1

;入門
[State -2, VarSet]
type = VarSet
triggerall = power
triggerall = var(0) = 2
triggerall = !(movetype = H && gethitvar(hitshaketime))
triggerall = command = "スタープラチナ・ザ・ワールド"
triggerall = stateno != 3200
triggerall = stateno != 3201
triggerall = stateno != 3250
trigger1 = !numpartner
trigger2 = numpartner
trigger2 = partner,authorname="warusaki3" && partner,fvar(39) = 5
trigger2 = (partner,var(0) = [1,3]) || partner,var(2)
var(2) = ifelse(power>=10000,572,ceil(power*.052))+1
ignorehitpause = 1

[State -2, Helper]
type = helper
triggerall = power
triggerall = var(0) = 2
triggerall = !(movetype = H && gethitvar(hitshaketime))
triggerall = !NumHelper(3211)
triggerall = command = "スタープラチナ・ザ・ワールド"
trigger1 = !numpartner
trigger2 = numpartner
trigger2 = partner,authorname="warusaki3" && partner,fvar(39) = 5
trigger2 = (partner,var(0) = [1,3]) || partner,var(2)
ID = 3211
stateno = 3211
pos = 0,0
pausemovetime = 99999999
supermovetime = 99999999

[State -2, VarSet]
type = VarSet
triggerall = power
triggerall = !(movetype = H && gethitvar(hitshaketime))
triggerall = var(0) = 2
triggerall = command = "スタープラチナ・ザ・ワールド" || stateno = 3200 || stateno = 3201 || stateno = 3250
trigger1 = !numpartner
trigger2 = numpartner
trigger2 = partner,authorname="warusaki3" && partner,fvar(39) = 5
trigger2 = (partner,var(0) = [1,3]) || partner,var(2)
var(0) = 3
ignorehitpause = 1

[State -2, VarSet]
type = ChangeState
triggerall = power
triggerall = !(movetype = H && gethitvar(hitshaketime))
triggerall = var(0) = 3
triggerall = (!var(8) && !var(49)) || var(49)
trigger1 = var(13)
trigger1 = stateno != 3200
trigger1 = stateno != 3201
trigger1 = stateno != 3250
value = ifelse(var(49)&&statetype=A,835,ifelse(var(49)&&statetype!=A,830,ifelse(!var(49)&&statetype=A,10825,10820)))
ignorehitpause = 1

[State 200, 7]
type = LifeAdd
triggerall = power
triggerall = var(0) = 2
triggerall = !(movetype = H && gethitvar(hitshaketime))
triggerall = command = "スタープラチナ・ザ・ワールド"
trigger1 = numenemy
trigger1 = enemy(0),authorname="warusaki3" && enemy(0),fvar(39) = 5
trigger1 = enemy(0),var(15)
value = -enemy(0),var(15)
kill = 0

[State 200, 7]
type = LifeAdd
triggerall = power
triggerall = var(0) = 2
triggerall = !(movetype = H && gethitvar(hitshaketime))
triggerall = command = "スタープラチナ・ザ・ワールド"
trigger1 = numenemy = 2
trigger1 = enemy(1),authorname="warusaki3" && enemy(1),fvar(39) = 5
trigger1 = enemy(1),var(15)
value = -enemy(1),var(15)
kill = 0

[State 1100, VarSet]
type = VarSet
triggerall = var(0) != 1
trigger1 = numenemy = 1
trigger1 = enemy(0),movetype != H
trigger2 = numenemy = 2
trigger2 = enemy(0),movetype != H
trigger2 = enemy(1),movetype != H
var(15) = 0
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = power
triggerall = var(0) = 1
trigger1 = numenemy
trigger1 = enemy(0),authorname="warusaki3"
trigger1 = enemy(0),var(0)=3
trigger1 = enemy(0),fvar(39) = 5
trigger2 = numenemy = 2
trigger2 = enemy(1),authorname="warusaki3"
trigger2 = enemy(1),var(0)=3
trigger2 = enemy(1),fvar(39) = 5
var(0) = 3
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = var(0) = 1 || var(0) = 3
trigger1 = numpartner
trigger1 = partner,authorname="warusaki3"
trigger1 = partner,fvar(39) = 5
trigger1 = partner,var(0) = 1 || partner,var(0) = 3
trigger1 = var(2)>(partner,var(2)+(ID>partner,ID))
var(2) = partner,var(2)
ignorehitpause = 1

;ヒット間隔
[State 1100, VarSet]
type = VarSet
trigger1 = stateno = 1050 || stateno = 1060
trigger1 = var(1) = 6
trigger2 = stateno = 3050 || stateno = 3060
trigger2 = var(1) = 6
var(1) = 0
ignorehitpause = 0

[State 1100, VarSet]
type = VarAdd
trigger1 = stateno = 1050 || stateno = 1060 || stateno = 3050 || stateno = 3060
trigger1 = var(1)
var(1) = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
triggerall = movecontact
trigger1 = stateno = 1050 || stateno = 1060
trigger1 = animelemtime(4) >= 1
trigger2 = stateno = 3050 || stateno = 3060
trigger2 = animelemtime(4) >= 1
var(1) = 1
ignorehitpause = 1

;タンデム使用フラグ
[State 1100, VarSet]
type = VarSet
triggerall = fvar(37)
triggerall = stateno != [850,851]
triggerall = var(8) != 3
trigger1 = roundstate = 0
trigger2 = !var(42)
fvar(37) = 0

;先行入力処理
;===========================================================================
;---------------------------------------------------------------------------
[State 3001, VarSet]
type = VarSet
trigger1 = stateno = [200,599]
trigger1 = time = 1
var(25) = 0

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
trigger1 = !(var(25)&2**10)
trigger1 = command = "x"
var(25) = 2**0

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
trigger1 = !(var(25)&2**10)
trigger1 = command = "y"
var(25) = 2**1

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
trigger1 = !(var(25)&2**10)
trigger1 = command = "z"
var(25) = 2**2

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
trigger1 = !(var(25)&2**10)
trigger1 = command = "a"
var(25) = 2**3

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
trigger1 = !(var(25)&2**10)
trigger1 = command = "b"
var(25) = 2**4

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
trigger1 = !(var(25)&2**10)
trigger1 = command = "c"
var(25) = 2**5

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
triggerall = !(var(25)&2**10)
triggerall = command = "holdfwd"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(25) = 2**6

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
triggerall = !(var(25)&2**10)
triggerall = command = "holddown"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(25) = 2**7

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
triggerall = !(var(25)&2**10)
triggerall = command = "holdback"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(25) = 2**8

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
triggerall = !(var(25)&2**10)
triggerall = command = "holdup"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(25) = 2**9

[State 3001, VarSet]
type = VarAdd
triggerall = stateno = [200,599]
triggerall = time > 1
triggerall = !(var(25)&2**10)
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(25) = 2**10

;===========================================================================
;---------------------------------------------------------------------------
;オラオラ
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**0)
trigger1 = command = "オラオラ1"
var(26) = 2**0

[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**1)
trigger1 = command = "オラオラ2"
var(26) = 2**1

[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**2)
trigger1 = command = "オラオラ3"
var(26) = 2**2

;---------------------------------------------------------------------------
[State -2, Combo]
type = VarAdd
trigger1 = var(24)
trigger1 = (var(26)&2**16) && !(var(26)&2**17)
trigger1 = (var(26)&2**3) || (var(26)&2**4) || (var(26)&2**5) || (var(26)&2**11) || (var(26)&2**12) || (var(26)&2**13)
trigger1 = command = "マッハオラ1" || command = "スターブレイカー1" || command = "スターブレイカー3"
var(26) = 2**17
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = var(24)
trigger1 = (var(26)&2**16) && !(var(26)&2**18)
trigger1 = (var(26)&2**3) || (var(26)&2**4) || (var(26)&2**5) || (var(26)&2**11) || (var(26)&2**12) || (var(26)&2**13)
trigger1 = command = "マッハオラ2" || command = "スターブレイカー2"
var(26) = 2**18
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = var(24)
trigger1 = (var(26)&2**16) && !(var(26)&2**19)
trigger1 = (var(26)&2**3) || (var(26)&2**4) || (var(26)&2**5) || (var(26)&2**11) || (var(26)&2**12) || (var(26)&2**13)
trigger1 = command = "マッハオラ3"
var(26) = 2**19
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = var(24)
trigger1 = !(var(26)&2**16)
trigger1 = (var(26)&2**3) || (var(26)&2**4) || (var(26)&2**5) || (var(26)&2**11) || (var(26)&2**12) || (var(26)&2**13)
var(26) = 2**16
ignorehitpause = 1

;---------------------------------------------------------------------------
;マッハオラ
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**3)
trigger1 = command = "マッハオラ1"
var(26) = 2**3

[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**4)
trigger1 = command = "マッハオラ2"
var(26) = 2**4

[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**5)
trigger1 = command = "マッハオラ3"
var(26) = 2**5

;---------------------------------------------------------------------------
;スターフィンガー
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**6)
trigger1 = command = "スターフィンガー"
var(26) = 2**6

;---------------------------------------------------------------------------
;ゾッとするぜ
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**7)
trigger1 = command = "ゾッとするぜ"
var(26) = 2**7

;---------------------------------------------------------------------------
;スタンド出現攻撃
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**8)
trigger1 = command = "スタンド出現攻撃"
var(26) = 2**8

;---------------------------------------------------------------------------
;タンデム
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**9)
trigger1 = command = "タンデム"
var(26) = 2**9

;===========================================================================
;---------------------------------------------------------------------------
;プッツンオラ
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**10)
trigger1 = command = "プッツンオラ"
var(26) = 2**10

;---------------------------------------------------------------------------
;スターブレイカー
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**11)
trigger1 = command = "スターブレイカー1"
var(26) = 2**11

;---------------------------------------------------------------------------
;スターブレイカー
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**11)
trigger1 = command = "スターブレイカー2"
var(26) = 2**12

;---------------------------------------------------------------------------
;スターブレイカー
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**11)
trigger1 = command = "スターブレイカー3"
var(26) = 2**13

;---------------------------------------------------------------------------
;スタープラチナ・ザ・ワールド
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**12)
trigger1 = command = "スタープラチナ・ザ・ワールド"
var(26) = 2**14

;---------------------------------------------------------------------------
;ラッシュオラ
[State -2]
type = VarAdd
triggerall = var(24) > 0
trigger1 = !(var(26)&2**13)
trigger1 = command = "ラッシュオラ"
var(26) = 2**15

;---------------------------------------------------------------------------
;===========================================================================

[State -2]
type = VarSet
trigger1 = var(26)
trigger1 = !var(24)
var(26) = 0

;ヒットポーズ処理
[State -2, CornerPush]
type = VarAdd
trigger1 = var(24) > 0
var(24) = -1
ignorehitpause = 1

;弱
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 200
trigger2 = stateno = 400
trigger3 = stateno = 300
trigger4 = stateno = 301
trigger5 = stateno = 500 && prevstateno != [100,105]
trigger6 = stateno = 501
var(24) = 10
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 500 && prevstateno = [100,105]
var(24) = 17
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 200
trigger2 = stateno = 400
trigger3 = stateno = 300
trigger4 = stateno = 301
trigger5 = stateno = 500
trigger6 = stateno = 501
fvar(2) = 8.3
ignorehitpause = 1

;中
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 210
trigger2 = stateno = 230
trigger3 = stateno = 410
trigger4 = stateno = 310
trigger5 = stateno = 330
trigger6 = stateno = 331
trigger7 = stateno = 510
var(24) = 13
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 311
trigger2 = stateno = 340
trigger3 = stateno = 341
trigger4 = stateno = 342
trigger5 = stateno = 511
trigger6 = stateno = 512
var(24) = 10
ignorehitpause = 1

[State 210, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 210
trigger2 = stateno = 230
trigger3 = stateno = 410
trigger4 = stateno = 310
trigger5 = stateno = 311
trigger6 = stateno = 330
trigger7 = stateno = 331
trigger8 = stateno = 510
fvar(2) = 11.9
ignorehitpause = 1

[State 210, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 340
trigger2 = stateno = 341
trigger3 = stateno = 342
trigger4 = stateno = 511
trigger5 = stateno = 512
fvar(2) = 8.3
ignorehitpause = 1

;強
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 220 && animelemtime(6) >= 0
trigger2 = stateno = 240
trigger3 = stateno = 420
trigger4 = stateno = 430
trigger5 = stateno = 312
trigger6 = stateno = 320
trigger7 = stateno = 321
trigger8 = stateno = 520
trigger9 = stateno = 521
trigger10 = stateno = 530
trigger11 = stateno = 531
trigger12 = stateno = 532
var(24) = 15
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 220 && animelemtime(6) < 0
var(24) = 5
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 220 && animelemtime(6) >= 0
trigger2 = stateno = 240
trigger3 = stateno = 420
trigger4 = stateno = 430
trigger5 = stateno = 312
trigger6 = stateno = 320
trigger7 = stateno = 321
trigger8 = stateno = 520
trigger9 = stateno = 521
trigger10 = stateno = 530
trigger11 = stateno = 531
trigger12 = stateno = 532
fvar(2) = 16
ignorehitpause = 1

;ジャンプ攻撃
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 600
trigger2 = stateno = 610
trigger3 = stateno = 620
trigger4 = stateno = 700
trigger5 = stateno = 710
trigger6 = stateno = 720
var(24) = 10
ignorehitpause = 1

[State 400, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 600
trigger2 = stateno = 610
trigger3 = stateno = 620
trigger4 = stateno = 700
trigger5 = stateno = 710
trigger6 = stateno = 720
fvar(2) = 8.3
ignorehitpause = 1

;オラオラ
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1050
trigger2 = stateno = 1060
var(24) = 7
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movehit
triggerall = time > 1
trigger1 = stateno = 1050
trigger2 = stateno = 1060
fvar(2) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = moveguarded
triggerall = time > 1
trigger1 = stateno = 1050
trigger2 = stateno = 1060
fvar(2) = 16
ignorehitpause = 1

;マッハオラ
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1150
trigger2 = stateno = 1170
var(24) = 15
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1160
trigger2 = stateno = 1180
var(24) = 25
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1150
trigger2 = stateno = 1170
fvar(2) = 16
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1160
trigger2 = stateno = 1180
fvar(2) = 8
ignorehitpause = 1

;ガードキャンセル攻撃
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1950
var(24) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 1950
fvar(2) = 10
ignorehitpause = 1

;プッツンオラ
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 3050
trigger2 = stateno = 3060
var(24) = 4
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movehit
triggerall = time > 1
trigger1 = stateno = 3050 && animelemtime(33) < 0
trigger2 = stateno = 3060 && animelemtime(33) < 0
fvar(2) = 5
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = moveguarded
triggerall = time > 1
trigger1 = stateno = 3050 && animelemtime(33) < 0
trigger2 = stateno = 3060 && animelemtime(33) < 0
fvar(2) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movehit
triggerall = time > 1
trigger1 = stateno = 3050 && animelemtime(33) >= 0
trigger2 = stateno = 3060 && animelemtime(33) >= 0
fvar(2) = 10
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = moveguarded
triggerall = time > 1
trigger1 = stateno = 3050 && animelemtime(33) >= 0
trigger2 = stateno = 3060 && animelemtime(33) >= 0
fvar(2) = 16
ignorehitpause = 1

;スターブレイカー
[State -2, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 3150
var(24) = 15
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
triggerall = movecontact
triggerall = time > 1
trigger1 = stateno = 3150
fvar(2) = 16
ignorehitpause = 1

;ヒットストップ補正
[State -2, Combo]
type = VarSet
trigger1 = !var(42)
trigger2 = var(8) = 3
trigger3 = stateno = 1250
trigger4 = stateno = 3050
trigger5 = stateno = 3060
var(28) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = movehit
trigger2 = projHit = 1
var(28) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = !var(24)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
trigger1 = !fvar(2)
fvar(4) = 0

[State -2, CornerPush]
type = VarSet
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(4) = 1

[State -2, CornerPush]
type = VarSet
trigger1 = fvar(2) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = movetype = H
fvar(2) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = fvar(4)
triggerall = !NumHelper(8000) && !NumHelper(8001)
triggerall = NumHelper(10000)
triggerall = !Helper(10000),NumHelper(8000) && !Helper(10000),NumHelper(8001)
triggerall = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(2)

[State -2, CornerPush]
type = VarSet
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = fvar(2)
triggerall = !NumHelper(8000) && !NumHelper(8001)
triggerall = NumHelper(10000)
triggerall = !Helper(10000),NumHelper(8000) && !Helper(10000),NumHelper(8001)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(2) = fvar(2)*.75

[State -2, CornerPush]
type = VarSet
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = movetype = H
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = var(0) != -1
triggerall = var(0) != 1
triggerall = var(0) != 2
triggerall = !NumHelper(8000) && !NumHelper(8001)
triggerall = NumHelper(10000)
triggerall = !Helper(10000),NumHelper(8000) && !Helper(10000),NumHelper(8001)
triggerall = StateType != A || (StateType = A && !var(49) && !var(8))
trigger1 = fvar(3)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = var(0) != -1
triggerall = var(0) != 2
triggerall = !NumHelper(8000) && !NumHelper(8001)
triggerall = NumHelper(10000)
triggerall = !Helper(10000),NumHelper(8000) && !Helper(10000),NumHelper(8001)
trigger1 = fvar(3)
fvar(3) = fvar(3)*.75

;コンボ補正On
[State 52, Effect]
type = VarSet
trigger1 = !var(42)
trigger2 = var(48) = 1
trigger2 = time = 1
var(48) = 0
ignorehitpause = 1

[State 52, Effect]
type = VarSet
triggerall = var(48) != 2
trigger1 = stateno = 200
trigger2 = stateno = 210
trigger3 = stateno = 220 && prevstateno = [100,105]
trigger4 = stateno = 230
trigger5 = stateno = 300
trigger6 = stateno = 310
trigger7 = stateno = 320
trigger8 = stateno = 340
trigger9 = stateno = 400
trigger10 = stateno = 500 && prevstateno != [100,105]
trigger11 = stateno = 510 && prevstateno != [100,105]
trigger12 = stateno = 520 && prevstateno != [100,105]
trigger13 = stateno = 700
trigger14 = stateno = 710
trigger15 = stateno = 720
trigger16 = stateno = 1170
var(48) = 1
ignorehitpause = 1

[State 52, Effect]
type = VarSet
trigger1 = var(48) = 1
trigger1 = movehit
var(48) = 2
ignorehitpause = 1

;スタンドモード時影消去
[State 52, Effect]
type = AssertSpecial
trigger1 = var(49) && !numexplod(8720)
trigger1 = var(9)
flag = noshadow
ignorehitpause = 1

;スタンド出現判定リセット
[State 1100, VarSet]
type = VarSet
trigger1 = numhelper(10000)
trigger1 = helper(10000),stateno = 10000
trigger1 = stateno != 3000
trigger1 = stateno != 3200
var(9) = 0
ignorehitpause = 1

;スタンドモード時振り向きアニメ
[State 0, 1]
type = ChangeAnim
triggerall = roundstate >= 2
triggerall = var(49)
trigger1 = anim = [0,47]
trigger2 = anim = [120,152]
trigger3 = anim = [5000,5210]
value = anim+var(49)

;ガード時表示優先度変更
[State 52, Effect]
type = SprPriority
triggerall = var(49)
trigger1 = stateno = 120
trigger2 = stateno = [130,132]
trigger3 = stateno = 140
trigger4 = stateno = [150,155]
value = 1
ignorehitpause = 1

;スタンドモード時基本幅
[State 3001, Width]
type = Width
trigger1 = var(49)
player = 0,5

;スタンドモード判定リセット
[State 0, 1]
type = VarSet
triggerall = var(49)
trigger1 = !alive && hitshakeover
var(49) = 0

[State 0, 1]
type = VarSet
triggerall = var(49)
triggerall = movetype = H
trigger1 = stateno != 0
trigger1 = stateno != [10,12]
trigger1 = stateno != 20
trigger1 = stateno != 40
trigger1 = stateno != 120
trigger1 = stateno != [130,132]
trigger1 = stateno != 140
trigger1 = stateno != [150,155]
trigger1 = stateno != [5000,5001]
trigger1 = stateno != [5010,5011]
trigger1 = stateno != 5020
trigger1 = stateno != 5030
trigger1 = stateno != 5035
trigger1 = stateno != 5040
trigger1 = stateno != 5050
trigger1 = stateno != [5070,5071]
trigger1 = stateno != [5080,5081]
trigger1 = stateno != [5100,5101]
trigger1 = stateno != 5110
trigger1 = stateno != 5120
trigger1 = stateno != 5150
trigger1 = stateno != [5200,5201]
trigger1 = stateno != 5210
trigger1 = stateno != [15000,15001]
trigger1 = stateno != [15010,15011]
trigger1 = stateno != 15020
trigger1 = stateno != 15030
trigger1 = stateno != 15035
trigger1 = stateno != 15040
trigger1 = stateno != 15050
trigger1 = stateno != [15070,15071]
trigger1 = stateno != [15080,15081]
trigger1 = stateno != [15100,15101]
trigger1 = stateno != 15110
trigger1 = stateno != 15120
trigger1 = stateno != 15150
trigger1 = stateno != [15200,15201]
trigger1 = stateno != 15210
trigger1 = stateno != 1352
var(49) = 0

;スタンド消去不可時間
[State 0, 1]
type = VarAdd
trigger1 = var(51)
var(51) = -1
ignorehitpause = 1

;タンデム再入力不可時間
[State 0, 1]
type = VarAdd
trigger1 = var(39)
var(39) = -1
ignorehitpause = 1

;回り込み再入力不可時間
[State 0, 1]
type = VarAdd
trigger1 = var(40)
var(40) = -1
ignorehitpause = 1

;空中復帰誘導
[State -2, PowerReset]
type = VarAdd
triggerall = var(29)&2**0
trigger1 = !NumTarget
trigger2 = P2MoveType != H
trigger3 = movehit
trigger4 = projhit = 1
trigger5 = numtarget
trigger5 = !target,gethitvar(fall)
var(29) = -(2**0)
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = var(29)&2**0
triggerall = P2MoveType = H && P2stateType = A
triggerall = !var(49)
triggerall = var(0) != 1
triggerall = !(var(29)&2**0)
triggerall = movehit
triggerall = (stateno = [200,799])
trigger1 = stateno != 220
trigger1 = stateno != 240
trigger1 = stateno != 410
trigger1 = stateno != 420
trigger1 = stateno != 430
var(29) = 2**0
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = Numtarget
triggerall = var(29)&2**0
trigger1 = target,stateno = 5050 && target,alive
value = 890

;転倒誘導
[State -2, PowerReset]
type = VarAdd
triggerall = var(29)&2**1
trigger1 = !NumTarget
trigger2 = P2MoveType != H
trigger3 = movehit
trigger4 = projhit = 1
var(29) = -(2**1)
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = var(0) != 1
triggerall = !(var(29)&2**1)
triggerall = movehit
triggerall = numtarget
triggerall = target,gethitvar(groundtype)=3
trigger1 = stateno = 420
trigger2 = stateno = 530
trigger3 = stateno = 531
trigger4 = stateno = 532
trigger5 = stateno = 10421
trigger6 = stateno = 1160
var(29) = 2**1
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = Numtarget
triggerall = var(29)&2**1
trigger1 = target,stateno = 5071
value = 895
ignorehitpause = 1

;スタンドゲージ量
[State -1, Run Fwd]
type = VarSet
trigger1 = roundstate = 0
var(54) = 72
ignorehitpause = 1

[State -1, Run Fwd]
type = VarAdd
triggerall = var(49)
triggerall = var(54) = (0,72]
trigger1 = var(31) - Life > 0
var(54) = -2-ceil((var(31)-Life)*.25)
ignorehitpause = 1

[State -1, Run Fwd]
type = VarAdd
triggerall = roundstate = 2
triggerall = !var(49)&&stateno!=850&&stateno!=851
trigger1 = var(54) = (0,72)
trigger1 = gametime%2=0
var(54) = 1
ignorehitpause = 1

[State -1, Run Fwd]
type = VarSet
trigger1 = var(54) > 72
var(54) = 72
ignorehitpause = 1

[State -1, Run Fwd]
type = VarSet
trigger1 = var(54) < 0
var(54) = 0
ignorehitpause = 1

[State -1, Run Fwd]
type = LifeAdd
triggerall = var(49)
triggerall = var(31) - Life > 0
trigger1 = stateno = 120
trigger2 = stateno = [130,132]
trigger3 = stateno = 140
trigger4 = stateno = [150,155]
value = var(31)-Life
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
var(31) = life
ignorehitpause = 1

;ポーズ認識
[State -2, Combo]
type = VarSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(35) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = var(0) != -1
trigger1 = var(0) != 2
var(36) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = fvar(12) >= 0
trigger1 = MoveType = I
fvar(12) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = fvar(12) = -1
trigger1 = MoveType = I
fvar(12) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = MoveType != I
fvar(12) = -1
ignorehitpause = 1

;のけぞり時間代替処理
[State -1, VarAdd]
type = VarAdd
trigger1 = var(33) > 0
var(33) = -1
ignorehitpause = 1

[State -1, VarAdd]
type = VarAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(33) && var(11) > 0
var(11) = -1
ignorehitpause = 1

[State -1, VarAdd]
type = VarAdd
triggerall = var(0) != -1
triggerall = var(0) != 2
trigger1 = !var(33) && var(34) > 0
var(34) = -1
ignorehitpause = 1

[State -1, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
var(11) = gethitvar(slidetime)
ignorehitpause = 1

[State -1, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
var(33) = gethitvar(hitshaketime)
ignorehitpause = 1

[State -1, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
var(34) = gethitvar(hittime)+1
ignorehitpause = 1

;スタンドクラッシュ
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = var(49)
triggerall = !var(54)
triggerall = !var(32)
triggerall = stateno != 4000
triggerall = alive
trigger1 = stateno = [5000,5001]
trigger2 = stateno = [5010,5011]
trigger3 = stateno = 5020
trigger4 = stateno = 5030
trigger5 = stateno = 5035
trigger6 = stateno = 5040
trigger7 = stateno = 5050
trigger8 = stateno = [5070,5071]
trigger9 = stateno = [5080,5081]
trigger10 = stateno = [5100,5101]
trigger11 = stateno = 5110
trigger12 = stateno = 5120
trigger13 = stateno = 5150
trigger14 = stateno = [5200,5201]
trigger15 = stateno = 5210
trigger16 = stateno = [15000,15001]
trigger17 = stateno = [15010,15011]
trigger18 = stateno = 15020
trigger19 = stateno = 15030
trigger20 = stateno = 15035
trigger21 = stateno = 15040
trigger22 = stateno = 15050
trigger23 = stateno = [15070,15071]
trigger24 = stateno = [15080,15081]
trigger25 = stateno = [15100,15101]
trigger26 = stateno = 15110
trigger27 = stateno = 15120
trigger28 = stateno = 15150
trigger29 = stateno = [15200,15201]
trigger30 = stateno = 15210
value = 4000

[State -3, Turns Mode Intro]
type = ChangeState
triggerall = var(49)
triggerall = !var(54)
triggerall = !var(32)
triggerall = stateno != 4100
triggerall = alive
trigger1 = stateno = 120
trigger2 = stateno = [130,132]
trigger3 = stateno = 140
trigger4 = stateno = [150,155]
value = 4100

[State -1, Run Fwd]
type = VarAdd
trigger1 = var(32) = 20
var(54) = 1
ignorehitpause = 1

[State -1, Run Fwd]
type = VarSet
trigger1 = var(32) = 20
var(32) = 0
ignorehitpause = 1

[State -1, Run Fwd]
type = VarAdd
trigger1 = !var(54)
var(32) = 1
ignorehitpause = 1

;2段ジャンプ判定
[State 50, 1]
type = VarAdd
trigger1 = var(53) < 0
var(53) = -1

[State 50, 1]
type = VarSet
triggerall = Time = 1
trigger1 = stateno = 50
trigger2 = stateno = 5210
trigger3 = stateno = 10825 && var(53) != 1
var(53) = -1

[State 50, 1]
type = VarSet
trigger1 = var(53) <= -8
trigger1 = command != "holdup"
var(53) = 0

;吹き飛ばし判定
[State -1, Run Fwd]
type = VarSet
triggerall = numtarget
triggerall = time > 1
triggerall = !var(50)
trigger1 = stateno = 1180 && movehit && var(42) <= 1
trigger2 = stateno = 3150 && movehit && var(42) <= 1
var(50) = 1
ignorehitpause = 1

[State -1, Run Fwd]
type = VarSet
triggerall = movetype != H
triggerall = time = 1
trigger1 = !(stateno = 1250 && prevstateno = 1180 && var(50))
var(50) = 0

;ファーストストライク判定
[State -2, Combo]
type = VarSet
triggerall = !var(58)
trigger1 = (stateno != [900,999]) && (stateno != [1300,1399]) && (stateno != [3300,3399])
trigger1 = movehit && p2movetype = H
trigger2 = projHit = 1 && p2movetype = H
trigger3 = stateno = 1351 && animelem = 11 && time > 1
trigger4 = stateno = 3301
trigger4 = NumHelper(10000)
trigger4 = Helper(10000),animelemtime(11) = 3
trigger5 = stateno = 3351 && animelem = 43 && time > 1
var(58) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = !var(58)
trigger1 = MoveType = H && (stateno != [150,159]) && (stateno != [810,819])
var(58) = 2
ignorehitpause = 1

;壁激突
[State 52, Effect]
type = PlaySnd
triggerall = roundstate >= 2
triggerall = !NumHelper(8000)
triggerall = !NumHelper(8001)
trigger1 = numtarget
trigger1 = target,stateno = 2601 && target,time = 1
trigger2 = var(42)
trigger2 = numenemy
trigger2 = enemynear,stateno = 2601 && enemynear,time = 1
value = 5100,2
ignorehitpause = 1

[State 1000, Spark]
type = Explod
triggerall = roundstate >= 2
triggerall = !NumHelper(8000)
triggerall = !NumHelper(8001)
trigger1 = numtarget
trigger1 = target,stateno = 2601 && target,time = 1
trigger2 = var(42)
trigger2 = numenemy
trigger2 = enemynear,stateno = 2601 && enemynear,time = 1
Anim = 8260
pos = -10,-50
postype = P2
sprpriority = 7
scale = const(size.xscale),const(size.yscale)
pausemovetime = 99999999*var(0)

;バー非表示
[State 9000, Assert]
type = AssertSpecial
trigger1 = NumHelper(9000)
trigger2 = roundstate != [2,3]
trigger2 = matchover
flag = NoBarDisplay
ignorehitpause = 1

;ガード不能
[State 9000, Assert]
type = AssertSpecial
trigger1 = var(0)
trigger2 = var(8)
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
ignorehitpause = 1

;スタンドゲージ
[State -2]
type = helper
trigger1 = !NumHelper(6000)
trigger1 = roundstate = 2
ID = 6000
stateno = 6000
name = "STAND gauge"
pos = -999,-999
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999
facing = facing*ifelse(teamside=1,1,-1)

;メッセージアイコン
[State 3001, Super]
type = Helper
triggerall = roundstate = 2
trigger1 = !NumHelper(6500)
id = 6500
stateno = 6500
name = "messsge"
pos = -999,-999
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999
facing = facing*ifelse(teamside=1,1,-1)

;燃焼エフェクト発生
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8600)
trigger1 = 0
id = 8600
name = "FireEffect_Down"
pos = 0,0
postype = P2
stateno = 8600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999*var(0)

;燃焼エフェクト終了移行
[State -2, Combo]
type = VarSet
trigger1 = !NumHelper(8600)
trigger2 = !numtarget
var(27) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 0
var(27) = 1
ignorehitpause = 1

;ヒット管理
[State -2, Combo]
type = VarSet
trigger1 = numenemy
trigger1 = enemy,MoveType != H
var(42) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = movehit
trigger2 = projHit = 1
var(42) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(41) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(41) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = Time = 1
var(41) = 0
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;攻撃力補正
[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[129,144]
var(45) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[113,128]
var(45) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[97,112]
var(45) = 2
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[81,96]
var(45) = 3
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[65,80]
var(45) = 4
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[49,64]
var(45) = 5
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[33,48]
var(45) = 6
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[17,32]
var(45) = 7
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=[1,16]
var(45) = 8
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = ceil(144*life/const(data.life))=0
var(45) = 9
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[143,144]
var(46) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[128,142]
var(46) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[112,127]
var(46) = 2
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[96,111]
var(46) = 3
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[80,95]
var(46) = 4
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[64,79]
var(46) = 5
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[48,63]
var(46) = 8
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[32,47]
var(46) = 9
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[16,31]
var(46) = 12
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = ceil(144*enemynear,life/enemynear,const(data.life))=[0,15]
var(46) = 13
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(0) = (1+(.06*var(45)))*(1-(.04*var(46)))
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(1) = fvar(0)*ifelse(!var(48),1,ifelse(1-(.1*ifelse(!var(42),0,var(42)-1))<.2,.2,1-(.1*ifelse(!var(42),0,var(42)-1))))
ignorehitpause = 1

;KO時時間経過
[State -2,KO]
type = VarAdd
trigger1 = roundstate = 3
ignorehitpause = 1
var(44) = 1

[State -2,KO]
type = VarSet
trigger1 = roundstate != 3
ignorehitpause = 1
var(44) = 0

;エフェクト除去

;palfx除去

;afterimage除去
[State 52, RemoveAfterImage]
type = AfterImageTime
trigger1 = movetype = H
time = 0

;ラウンド開始時初期化
[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(0) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(1) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(2) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0 && roundno = 1
var(7) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(8) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(11) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(13) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(19) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0 && roundno = 1
var(20) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0 && roundno = 1
var(21) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0 && roundno = 1
var(22) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0 && roundno = 1
var(23) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(49) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
var(58) = 0

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
trigger2 = !alive
fvar(14) = 0

;フィニッシュブロー判別
[State -2, 1]
type = VarSet
trigger1 = roundstate <= 2
fvar(38) = 0

[State -2, 1]
type = VarSet
trigger1 = stateno = 3401 && movehit
trigger2 = stateno = 3411 && movehit
trigger3 = stateno = [3200,3299]
trigger4 = stateno = 3602
trigger5 = stateno = 3653
fvar(38) = 1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = stateno = 3501
trigger2 = stateno = 3552
fvar(38) = 2
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = stateno = 3302
trigger2 = stateno = 3352
fvar(38) = 5
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = stateno = 3102
trigger2 = stateno = 3103
fvar(38) = 6
ignorehitpause = 1

;原作判別
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(39) = 5;JOJO

;キャラ判別
[State -2, 1]
type = VarSet
triggerall = numenemy
triggerall = roundstate = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "H”" && enemy,fvar(39) = 1
trigger3 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
var(52) = 1

;やられ時にゲージ消去する相手動作の判定
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(20) = 0

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = enemynear,authorname="warusaki3" && enemynear,fvar(39)=1 && enemynear,var(13)
trigger2 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,NumHelper(9000)
trigger3 = enemynear,authorname="SUMI" && enemynear,name="Destrudo Ryu" && enemynear,var(16)=1
fvar(20) = 1
ignorehitpause = 1

;KO勝利時演出
[State 1000, Spark]
type = Explod
trigger1 = WinKo && var(44) = 1
anim = 8790
id = 8790
pos = 0,0
postype = Left
ontop = 1
bindtime = -1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1
scale = .84,1.08

[State -2, HyperComboFinish]
type = PlaySnd
trigger1 = WinKo && var(44) = 1
value = 9000,0
ignorehitpause = 1

;敗北
[State -2, HyperComboFinish];蜂の巣
type = Helper
triggerall = LoseKo && !NumHelper(9000) && !fvar(20)
triggerall = var(44) = 1
trigger1 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,fvar(38)=2
trigger2 = enemynear,authorname="warusaki3" && enemynear,name="blackpolnareff" && enemynear,stateno = 3101
trigger3 = enemynear,authorname="y.y" && enemynear,name="Hol horse" && (enemy,stateno = 3000 || enemy,stateno = 3002 || enemy,stateno = 3005)
trigger4 = enemynear,authorname="y.y" && enemynear,name="Hol horse & Boingo" && (enemy,stateno = 3000 || enemy,stateno = 3002 || enemy,stateno = 3005)
trigger5 = enemynear,authorname="y.y" && enemynear,name="Robo Rock Type-2" && enemynear,stateno = 3020
trigger6 = enemynear,name="morrigan by ryokucha" && enemynear,stateno = 3300
trigger7 = enemynear,authorname="KGenjuro" && enemynear,name="Yagyu Jubei" && enemy,stateno = 6610
trigger8 = enemynear,authorname="Baby Bonnie Hood" && enemynear,name="Baby Bonnie Hood" && (enemynear,stateno = 3000 || enemynear,stateno = 3050)
trigger9 = enemynear,authorname="Phantom.of.the.Server" && enemynear,name="Morrigan Aensland" && enemynear,stateno = 3300
ID = 9000
stateno = 9001
postype = left
pos = -999,-999
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1

[State -2, HyperComboFinish];横切断
type = Helper
triggerall = LoseKo && !NumHelper(9000) && !fvar(20)
triggerall = var(44) = 1
trigger1 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,fvar(38)=3
trigger2 = enemynear,authorname="warusaki3" && enemynear,name="blackpolnareff" && enemynear,stateno = 3001
trigger3 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru" && (enemynear,stateno = 3200 || enemynear,stateno = 3310)
trigger4 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru_normal" && (enemynear,stateno = 3200 || enemynear,stateno = 3310)
trigger5 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru_ex" && (enemynear,stateno = 3200 || enemynear,stateno = 3310)
trigger6 = enemynear,authorname="warusaki3" && enemynear,name="cvslilith" && (enemynear,stateno = 3100 || enemynear,stateno = 3201 || enemynear,stateno = 3211)
trigger7 = enemynear,authorname="warusaki3" && enemynear,name="cvshayato" && enemynear,stateno = 3000
trigger8 = enemynear,authorname="mouser" && enemynear,name="hibiki takane" && (enemynear,stateno = 3001 || enemynear,stateno = 3110 || enemynear,stateno = 3120)
trigger9 = enemynear,authorname="warusaki3" && enemynear,name="nakoruruss0" && enemynear,stateno = 871
trigger10 = enemynear,authorname="mouser" && enemynear,name="hanzo" && (enemynear,stateno = 3001 || enemynear,stateno = 3012)
trigger11 = enemynear,name="Tin's Kibagami" && enemynear,stateno = 3330
trigger12 = enemynear,name="Tin's Shiki" && enemynear,stateno = 3300
trigger13 = enemynear,authorname="H”" && enemynear,name="CHOI BOUNGE" && enemynear,stateno = [3500,3501]
trigger14 = enemynear,authorname="H”" && enemynear,name="Malin" && enemynear,stateno = [3600,3601]
trigger15 = enemynear,authorname="laiso_7" && enemynear,name="SHIKI" && enemynear,stateno = 4100
trigger16 = enemynear,authorname="Nyankoro" && enemynear,name="zantetsu" && (enemynear,stateno = 3321 || enemynear,stateno = 3544)
trigger17 = enemynear,authorname="M.M.R." && enemynear,name="Lilith" && (enemynear,stateno = 3040 || enemynear,stateno = 3140)
trigger18 = enemynear,authorname="taruse" && enemynear,name="Yumeji Kurokouchi" && (enemynear,stateno = 4523 || enemynear,stateno = 13050)
trigger19 = enemynear,authorname="tukemon" && enemynear,name="Rimururu" && enemynear,stateno = 4701
trigger20 = enemynear,authorname="PriPri Man" && enemynear,name="Rimururu" && enemynear,stateno = 3501
trigger21 = enemynear,authorname="PriPri Man" && enemynear,name="Mina" && enemynear,stateno = 3501
trigger22 = enemynear,authorname="Capuchino" && enemynear,name="Haohmaru" && (enemynear,stateno = 3200 || enemynear,stateno = 4051)
trigger23 = enemynear,authorname="Capuchino" && enemynear,name="Shizumaru" && enemynear,stateno = 4051
trigger24 = enemynear,authorname="Roque" && enemynear,name="Rera" && enemynear,stateno = 3610
trigger25 = enemynear,authorname="KGenjuro" && enemynear,name="Yagyu Jubei" && enemy,stateno = 6030
ID = 9000
stateno = 9002
postype = left
pos = -999,-999
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1

[State -2, HyperComboFinish];縦切断
type = Helper
triggerall = LoseKo && !NumHelper(9000) && !fvar(20)
triggerall = var(44) = 1
trigger1 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,fvar(38)=4
trigger2 = enemynear,authorname="warusaki3" && enemynear,name="cvsgouki" && enemynear,stateno = 3400
trigger3 = enemynear,authorname="warusaki3" && enemynear,name="cvsgouki_ex" && enemynear,stateno = 3400
trigger4 = enemynear,authorname="warusaki3" && enemynear,name="cvsrugal" && enemynear,stateno = 3100
trigger5 = enemynear,authorname="warusaki3" && enemynear,name="cvsrugal_normal" && enemynear,stateno = 3100
trigger6 = enemynear,authorname="warusaki3" && enemynear,name="cvsrugal_ex" && enemynear,stateno = 3100
trigger7 = enemynear,authorname="warusaki3" && enemynear,name="cvsg_rugal" && enemynear,stateno = 3100
trigger8 = enemynear,authorname="warusaki3" && enemynear,name="cvsjill" && enemynear,stateno = 3202
trigger9 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru" && (enemynear,stateno = 3000 || enemynear,stateno = 3102)
trigger10 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru_normal" && (enemynear,stateno = 3000 || enemynear,stateno = 3102)
trigger11 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru_ex" && (enemynear,stateno = 3000 || enemynear,stateno = 3102)
trigger12 = enemynear,authorname="warusaki3" && enemynear,name="cvshayato" && (enemynear,stateno = 3011 || enemynear,stateno = 3200 || enemynear,stateno = 3301)
trigger13 = enemynear,authorname="mouser" && enemynear,name="hibiki takane" && enemynear,stateno = 3201
trigger14 = enemynear,authorname="bad darkness" && enemynear,name="khan" && (enemynear,stateno = 2003 || enemynear,stateno = 2102 || enemynear,stateno = 2200)
trigger15 = enemynear,authorname="bad darkness" && enemynear,name="Adel" && (enemynear,stateno = 1402 || enemynear,stateno = 1403 || enemynear,stateno = 2200)
trigger16 = enemynear,name="Tin's Kibagami" && (enemynear,stateno = 3010 || enemynear,stateno = 3400 || enemynear,stateno = 3410 || enemynear,stateno = 3511 || enemynear,stateno = 3600)
trigger17 = enemynear,name="Tin's Shiki" && enemynear,stateno = 3030
trigger18 = enemynear,authorname="laiso_7" && enemynear,name="SHIKI" && enemynear,stateno = [3000,3099]
trigger19 = enemynear,authorname="Nyankoro" && enemynear,name="zantetsu" && (enemynear,stateno = 3000 || enemynear,stateno = 3010 || enemynear,stateno = 3105 || enemynear,stateno = 3300)
trigger20 = enemynear,authorname="Nyankoro" && enemynear,name="zantetsu" && (enemynear,stateno = 3310 || enemynear,stateno = 3325 || enemynear,stateno = 3511 || enemynear,stateno = 3516 || enemynear,stateno = 3535)
trigger21 = enemynear,authorname="adamskie" && enemynear,name="Laurence" && enemynear,stateno = 3000
trigger22 = enemynear,authorname="AOAO" && enemynear,name="JOHNNY" && (enemynear,stateno = 2401 || enemynear,stateno = 3012)
trigger23 = enemynear,authorname="MEKA" && enemynear,name="Chipp Zanuff" && (enemynear,stateno = 3860 || (enemynear,stateno = [3012,3016]) || enemynear,stateno = 3237 || enemynear,stateno = 3503)
trigger24 = enemynear,authorname="MEKA" && enemynear,name="May" && enemynear,stateno = 3001
trigger25 = enemynear,authorname="MEKA" && enemynear,name="Ky Kiske" && enemynear,stateno = 3500
trigger26 = enemynear,authorname="Capuchino" && enemynear,name="Haohmaru" && enemynear,stateno = [3000,3030]
trigger27 = enemynear,authorname="Capuchino" && enemynear,name="Shizumaru" && (enemynear,stateno = 3001 || enemynear,stateno = 3103)
trigger28 = enemynear,authorname="KGenjuro" && enemynear,name="Tachibana Ukyo" && (enemynear,stateno = 4050 || enemynear,stateno = 4060 || enemynear,stateno = 4210 || enemynear,stateno = 4270 || enemynear,stateno = 6510)
trigger29 = enemynear,authorname="yuto" && enemynear,name="zankuro" && enemynear,stateno = 4001
trigger30 = enemynear,authorname="Phantom.of.the.Server" && enemynear,name="Morrigan Aensland" && enemynear,stateno = 3100
ID = 9000
stateno = 9003
postype = left
pos = -999,-999
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1

[State -2, HyperComboFinish];血まみれ
type = Helper
triggerall = LoseKo && !NumHelper(9000) && !fvar(20)
triggerall = var(44) = 1
trigger1 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,fvar(38)=5
trigger2 = enemynear,authorname="bad darkness" && enemynear,name="Demitri" && enemynear,stateno = 2011
trigger3 = enemynear,authorname="Deuce" && enemynear,name="Jedah" && (enemynear,stateno = 3040 || enemynear,stateno = 3145)
trigger4 = enemynear,authorname="warusaki3" && enemynear,name="cvshaohmaru" && enemynear,stateno = 3320
ID = 9000
stateno = 9004
postype = left
pos = -999,-999
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1

[State -2, HyperComboFinish];カットインなし
type = Helper
triggerall = LoseKo && !NumHelper(9000) && !fvar(20)
triggerall = var(44) = 1
trigger1 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,fvar(38)=6
ID = 9000
stateno = 9005
postype = left
pos = -999,-999
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1

[State -2, HyperComboFinish];通常
type = Helper
triggerall = LoseKo && !NumHelper(9000) && !fvar(20)
triggerall = var(44) = 1
trigger1 = enemynear,authorname="warusaki3" && (enemynear,fvar(39)=[4,5]) && enemynear,fvar(38)=1
trigger2 = enemynear,stateno = [3000,4799]
ID = 9000
stateno = 9000
postype = left
pos = -999,-999
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ignorehitpause = 1

;勝利アイコン（自分死亡時）
[State -2, win]
type = helper
triggerall = win
triggerall = !var(55) || (!var(56) && matchover)
trigger1 = roundstate = 4
trigger1 = !alive
trigger1 = numpartner
trigger1 = partner,authorname="warusaki3" && partner,fvar(39) = [4,6]
trigger1 = partner,NumHelper(6600)
trigger1 = !NumHelper(6600)
stateno = 6600
ID = 6600
pos = 0,100
name = "win"
pausemovetime = 999999999
supermovetime = 999999999

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "MAX = %d Hit= %d Counter =%d Hit1 = %d Bit2 = %d \n "
params = ceil(fvar(14)), var(20), var(21), var(22), var(13)
ignorehitpause = 1

[Statedef -3]

[State -2,KO]
type = Varset
trigger1 = 1
var(30) = gametime+1

;スタンド食らい時の本体食らいState移行
[State -3]
type = ChangeState
triggerall = stateno != [5000,5999]
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 12200
trigger1 = helper(10000),time = 1
trigger1 = statetype != A && helper(10000),GetHitVar(groundtype) = 3
trigger2 = helper(10000),stateno = 12200
trigger2 = helper(10000),time = 1
trigger2 = statetype = A && helper(10000),GetHitVar(airtype) = 3
trigger3 = helper(10000),stateno = 12201
trigger3 = statetype != A && helper(10000),GetHitVar(groundtype) = 3
trigger4 = helper(10000),stateno = 12201
trigger4 = statetype = A && helper(10000),GetHitVar(airtype) = 3
value = 15070
ctrl = 0

[State -3]
type = ChangeState
triggerall = stateno != [5000,5999]
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
triggerall = statetype = S
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 12200
trigger1 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 12201
value = 15000
ctrl = 0

[State -3]
type = ChangeState
triggerall = stateno != [5000,5999]
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
triggerall = statetype = C
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 12200
trigger1 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 12201
value = 15010
ctrl = 0

[State -3]
type = ChangeState
triggerall = stateno != [5000,5999]
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
triggerall = statetype = A
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 12200
trigger1 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 12201
value = 15020
ctrl = 0

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = Alive = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5100 || StateNo = 15000 || StateNo = 15010 || StateNo = 15020 || StateNo = 15070 || StateNo = 15100
value = 5000, ifelse(StateNo = 5100 || StateNo = 15100 || GetHitVar(animtype) = 2, 2, ifelse(GetHitVar(animtype) = 1, 1, 0))
channel = 10

[State 3000, Voice]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5201 || StateNo = 5210
value = 0, 0
channel = 1

[State 820, Voice]
type = Stopsnd
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5100 || StateNo = 15000 || StateNo = 15010 || StateNo = 15020 || StateNo = 15070 || StateNo = 15100
trigger2 = StateNo = 150 || StateNo = 152 || StateNo = 154
trigger3 = StateNo = 0 && (PrevStateno = [190,194]) && time = 1
channel = 0
