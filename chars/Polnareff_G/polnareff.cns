;---------------------- Integer variable list ----------------------

; var(0):= 1750 - 遠隔操作（ｽﾀﾝﾄﾞ）, 10900 - スタンド発現(地上), 10910 - スタンド発現(空中), 10950 - Stand Out Attack, 900 - スタンド解除, 910 - スタンド解除（空中）, 7500 - メッセージアイコン, 7501 - STAND ON, 7502 - DANGER!, 7503 - STAND CRUSH, 7504 - FIRST ATTACK, 7505 - GUARD CANCEL, 20032 - スタンドゲージ, 51000 - ヘルパー式射撃感知, 12201, -2, 9105, 3000 - タンデム, 60000, 1251110 - Leaving Taunt, 1251111 - Leave the stage, 1251112 - Standby (offscreen), 1251131 - Tag Hyper Cancel Move selection
; var(1):= 9500 - 被ダメ時スタンド消去(スタンド被ダメ), 20032 - スタンドゲージ, 51000 - ヘルパー式射撃感知, 51010, -2, 9105, 3000 - タンデム, 60000
; var(2):= 51000 - ヘルパー式射撃感知, 12150 - Laser Shot Proj, 2150 - Laser Shot (Non Stand), 2160 - Air, 1250 - Shooting Star (Non-Stand), 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 11000 - Million Pricks, 11100 - Ray Dart, 11200 - Shooting Star, 11300 - Needle Pierce, 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 12110 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg(‹ó’†)
; var(3):= 10000 - スタンド待機1, 51000 - ヘルパー式射撃感知, 48 - 2’iƒWƒƒƒ“ƒvŠJŽn, -2
; var(4):= 10000 - スタンド待機1, 30000 - タンデムコマンド記憶helper, 50000 - AI起動用ヘルパー, 40 - Jump Start, 41 - ƒWƒƒƒ“ƒvŠJŽn(AI), 42 - ƒWƒƒƒ“ƒvŠJŽn(AI’ÇŒ‚), 48 - 2’iƒWƒƒƒ“ƒvŠJŽn, 7525
; var(5):= 10000 - スタンド待機1, 50000 - AI起動用ヘルパー, 40 - Jump Start, 41 - ƒWƒƒƒ“ƒvŠJŽn(AI), 42 - ƒWƒƒƒ“ƒvŠJŽn(AI’ÇŒ‚), 48 - 2’iƒWƒƒƒ“ƒvŠJŽn, 11000 - Million Pricks, 11100 - Ray Dart, 11200 - Shooting Star, 11300 - Needle Pierce, 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 7525, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z
; var(6):= 1700 - 遠隔操作（未実装）, 50000 - AI起動用ヘルパー, 11000 - Million Pricks, 11100 - Ray Dart, 11200 - Shooting Star, 11201, 11202, 11210, 11300 - Needle Pierce, 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 3051 - タンデム(スタンド/開始), 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z
; var(7):= 50000 - AI起動用ヘルパー, 1252, -2
; var(8):= 10000 - スタンド待機1, 7500 - メッセージアイコン, 7501 - STAND ON, 7502 - DANGER!, 7503 - STAND CRUSH, 7504 - FIRST ATTACK, 7505 - GUARD CANCEL, 50000 - AI起動用ヘルパー, 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 11000 - Million Pricks, 11010, 415 - d.Y Helper, -2
; var(9):= 750 - Guard Cancel - ガーキャン(スタンド), 9000 - Stand Disappear, 9001 - Stand Disappear too, 9002 - スタンド消去3, 9003 - スタンド消去, 9500 - 被ダメ時スタンド消去(スタンド被ダメ), 9505 - 被ダメ時スタンド消去(本体被ダメ), 9510 - スタンドクラッシュ時スタンド消去, 9600 - ガークラ時スタンド消去, 10000 - スタンド待機1, 2250 - Requiem Start-up, 2150 - Laser Shot (Non Stand), 2160 - Air, 2050 - Armor Take-off (Non-Stand), 1250 - Shooting Star (Non-Stand), 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 3050 - タンデム(スタンド/待機), 801
;var(10):= 1260, 9001 - Stand Disappear too, 9505 - 被ダメ時スタンド消去(本体被ダメ), 10000 - スタンド待機1, 9201 - 敗北演出2(蜂の巣), 50000 - AI起動用ヘルパー, 1252
;var(11):= 11000 - Million Pricks, 11010
;var(13):= 20032 - スタンドゲージ, 11000 - Million Pricks, 11010, -2
;var(14):= 20032 - スタンドゲージ, 1250 - Shooting Star (Non-Stand), 1251, 1252, 11200 - Shooting Star, 11201, 11202
;var(15):= 20032 - スタンドゲージ, 1252, 11202
;var(16):= 20032 - スタンドゲージ, -2
;var(17):= 12001, 2051
;var(18):= -2
;var(19):= 10900 - スタンド発現(地上), 10910 - スタンド発現(空中), 10950 - Stand Out Attack, -2
;var(20):= 10000 - スタンド待機1, -2
;var(21):= 12150 - Laser Shot Proj, 12151, 2150 - Laser Shot (Non Stand), 2160 - Air, 3000 - タンデム
;var(22):= 3000 - タンデム
;var(23):= 10000 - スタンド待機1, -2
;var(24):= 300 - 回り込み, 75000 - Stylish Cancel, -2
;var(25):= 9500 - 被ダメ時スタンド消去(スタンド被ダメ), 20001 - Polnareff, 20211 - 立ち6中時本体, 20700 - ガーキャン時本体, 21000 - ミリオンスピット時本体, 21100 - レイダーツ時本体, 21200 - シューティングスター時本体, 21300 - 針串刺しの刑時本体, 21310 - hit, 22300 - スタンドシュート時本体, 22310 - スタンドシュート時本体(hit), 22311 - スタンドシュート時本体(hit2), 22312 - スタンドシュート時本体(hit2), 22313 - スタンドシュート時本体(失敗), -2, 3051 - タンデム(スタンド/開始)
;var(26):= -3
;var(27):= -2
;var(28):= -2
;var(29):= 2001 - アーマーテイクオフ(ヘルパー), 12000 - Armor Take-off (Stand), 2050 - Armor Take-off (Non-Stand)
;var(30):= 51010, -2, -1
;var(31):= 51010, -2
;var(32):= -1
;var(34):= -1
;var(35):= 9505 - 被ダメ時スタンド消去(本体被ダメ), 10000 - スタンド待機1, 50000 - AI起動用ヘルパー, 1250 - Shooting Star (Non-Stand), 1251, 1252, -2
;var(36):= 10000 - スタンド待機1, 50000 - AI起動用ヘルパー, -2, 3000 - タンデム
;var(37):= 10000 - スタンド待機1, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z, -1
;var(38):= 30000 - タンデムコマンド記憶helper, 41 - ƒWƒƒƒ“ƒvŠJŽn(AI), 42 - ƒWƒƒƒ“ƒvŠJŽn(AI’ÇŒ‚), 3051 - タンデム(スタンド/開始), -1
;var(39):= 10000 - スタンド待機1, 50000 - AI起動用ヘルパー, 3000 - タンデム
;var(40):= 12150 - Laser Shot Proj, 12151, 2150 - Laser Shot (Non Stand), 2160 - Air, 12001, 2050 - Armor Take-off (Non-Stand), 2051, 1252, 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 11000 - Million Pricks, 11100 - Ray Dart, 11202, 11300 - Needle Pierce, 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 12110 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg(‹ó’†), 3110 - ƒXƒ^ƒ“ƒhƒVƒ…[ƒghit, 3111 - ƒXƒ^ƒ“ƒhƒVƒ…[ƒghit2, -2, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z
;var(41):= 12150 - Laser Shot Proj, 12151, -2
;var(43):= 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand)
;var(44):= 12150 - Laser Shot Proj, 12151, 2050 - Armor Take-off (Non-Stand), 1252, -2, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z
;var(45):= 75000 - Stylish Cancel, -2
;var(46):= 12150 - Laser Shot Proj, 12151, 2150 - Laser Shot (Non Stand), 2160 - Air, 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 12110 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg(‹ó’†), -2
;var(47):= 10000 - スタンド待機1, -2
;var(48):= -1
;var(49):= 4900
;var(50):= 2001 - アーマーテイクオフ(ヘルパー), 10000 - スタンド待機1, 12000 - Armor Take-off (Stand), 12001, 2050 - Armor Take-off (Non-Stand), 2051, 1252, 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 12110 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg(‹ó’†)
;var(51):= -2
;var(52):= 4000 - STAND_CRASH, 4100 - HITG_SHAKE, -2
;var(53):= 4100 - HITG_SHAKE, -2
;var(54):= -2
;var(55):= 50000 - AI起動用ヘルパー
;var(56):= 3000 - タンデム, -1
;var(57):= 50000 - AI起動用ヘルパー, -2
;var(58):= -1
;var(59):= 50000 - AI起動用ヘルパー, -1

;---------------------- Float variable list ----------------------

; fvar(0):= 9200 - 敗北演出, 9201 - 敗北演出2(蜂の巣), 9202 - 敗北演出3(血), 11000 - Million Pricks, 11100 - Ray Dart, 11200 - Shooting Star, 11201, 11202, 11210, 11300 - Needle Pierce, 12100 - ƒ‰ƒXƒgƒVƒ‡ƒbƒg, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z
; fvar(1):= 9200 - 敗北演出, 9201 - 敗北演出2(蜂の巣), 9202 - 敗北演出3(血)
; fvar(2):= 9201 - 敗北演出2(蜂の巣), 9202 - 敗北演出3(血), 75000 - Stylish Cancel
; fvar(3):= 425, 625, 9000 - Stand Disappear, 9001 - Stand Disappear too, 9002 - スタンド消去3, 9003 - スタンド消去, 10000 - スタンド待機1, 10950 - Stand Out Attack, 2250 - Requiem Start-up, 2150 - Laser Shot (Non Stand), 2160 - Air, 12000 - Armor Take-off (Stand), 2050 - Armor Take-off (Non-Stand), 1250 - Shooting Star (Non-Stand), 1251, 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 10700 - Guard Cancel, 11000 - Million Pricks, 11010, 11100 - Ray Dart, 11200 - Shooting Star, 11202, 11300 - Needle Pierce, 415 - d.Y Helper, 3100 - ƒXƒ^ƒ“ƒhƒVƒ…[ƒg, -2, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z, 200 - X Attack, 210 - Y Attack, 220 - Z Attack, 400 - d.X Attack, 410 - d.Y Attack, 412 - d.Y Attack, 420 - d.Z Attack, 422 - d.Z No Stand, 600 - j.X Attack, 610 - j.Y Attack, 620 - j.Z Attack, 10200 - X Attack, 10201 - Dash X Attack, 10210 - Y Attack, 10211 - f.Y Attack, 10212 - b.Y Attack, 10220 - Z Attack, 10222 - f.Z, 10310 - Y Attack (Combo), 10400 - d.X Attack, 10410 - d.Y Attack, 10420 - d.Z Attack, 10510 - d.Y Attack (Combo), 10511 - d.Y Attack (Combo Launcher) - ½ÀÝÄÞ‹ü’†2(ƒXƒ^ƒ“ƒhƒRƒ“ƒ{), 10520 - d.Z Attack (Combo), 10312, 10320 - Z Attack (Combo), 10321 - ½ÀÝÄÞºÝÎÞ—§‚¿‹­2, 10322 - ½ÀÝÄÞºÝÎÞ—§‚¿‹­2-2, 10600 - j.X Attack, 10610 - j.Y Attack, 10620 - j.Z Attack
; fvar(4):= 10000 - スタンド待機1, 2250 - Requiem Start-up, 2150 - Laser Shot (Non Stand), 2160 - Air, 2050 - Armor Take-off (Non-Stand), 1250 - Shooting Star (Non-Stand), 1251, 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), -2
; fvar(5):= 9000 - Stand Disappear, 9001 - Stand Disappear too, 9002 - スタンド消去3, 9003 - スタンド消去, 10000 - スタンド待機1, 2050 - Armor Take-off (Non-Stand), 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 11010, 11100 - Ray Dart, 11202, 11300 - Needle Pierce, -2, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z
; fvar(6):= 7525
; fvar(7):= -2
; fvar(8):= -2, -1
;fvar(10):= 750 - Guard Cancel - ガーキャン(スタンド), 10950 - Stand Out Attack, 12000 - Armor Take-off (Stand), 2050 - Armor Take-off (Non-Stand), 1252, 1050 - Million Picks (Non-Stand), 1150 - Ray Dart (Non-Stand), 10700 - Guard Cancel, 11000 - Million Pricks, 11010, 11100 - Ray Dart, 11202, 11300 - Needle Pierce, -2, 30200 - X, 30210 - Y, 30211 - f.Y, 30212 - b.Y, 30220 - Z, 30222 - f.Z, 30310 - Z, 30312 - f.Z, 30313 - f.Z, 30320 - Z, 30321 - fZ, 30322 - Z, 30400 - d.X, 30410 - d.Y, 30420 - d.Z, 30510 - d.Y Combo, 30511 - d.Y Combo, 30520 - d.Z, 802, 200 - X Attack, 210 - Y Attack, 220 - Z Attack, 400 - d.X Attack, 410 - d.Y Attack, 412 - d.Y Attack, 420 - d.Z Attack, 422 - d.Z No Stand, 600 - j.X Attack, 610 - j.Y Attack, 620 - j.Z Attack, 601 - No Stand, 10200 - X Attack, 10201 - Dash X Attack, 10210 - Y Attack, 10211 - f.Y Attack, 10212 - b.Y Attack, 10220 - Z Attack, 10222 - f.Z, 10310 - Y Attack (Combo), 10400 - d.X Attack, 10410 - d.Y Attack, 10420 - d.Z Attack, 10510 - d.Y Attack (Combo), 10511 - d.Y Attack (Combo Launcher) - ½ÀÝÄÞ‹ü’†2(ƒXƒ^ƒ“ƒhƒRƒ“ƒ{), 10520 - d.Z Attack (Combo), 10312, 10320 - Z Attack (Combo), 10321 - ½ÀÝÄÞºÝÎÞ—§‚¿‹­2, 10322 - ½ÀÝÄÞºÝÎÞ—§‚¿‹­2-2, 10600 - j.X Attack, 10610 - j.Y Attack, 10620 - j.Z Attack, 1251112 - Standby (offscreen)
;fvar(11):= -2
;fvar(12):= 3111 - ƒXƒ^ƒ“ƒhƒVƒ…[ƒghit2
;fvar(20):= 10000 - スタンド待機1, 200010 - Kanji, 200000, 20002, 20003, 20006, 20007, 20026, 20015, 20016, 20017
;fvar(36):= 9203 - 敗北時演出（横切断）, 9204 - 敗北時演出（縦切断）
;fvar(37):= 9203 - 敗北時演出（横切断）, 9204 - 敗北時演出（縦切断）
;fvar(38):= 9203 - 敗北時演出（横切断）, 9204 - 敗北時演出（縦切断）
;fvar(39):= 9203 - 敗北時演出（横切断）, 9204 - 敗北時演出（縦切断）


;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000  ;ライフ（体力ゲージ）最大値
power             = 5000  ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 0     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 36     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255    ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 59     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める
FloatPersistIndex = 39     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める

[Size]
xscale           = .833    ;キャラの横の大きさ（絶対値・float）
yscale           = 1.07       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 15      ;地上にいる時の「後方の物理的な幅」
ground.front     = 15      ;地上にいる時の「前方の物理的な幅」
air.back         = 20      ;空中にいる時の「後方の物理的な幅」
air.front        = 20      ;空中にいる時の「前方の物理的な幅」
height           = 65      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-95  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -2,-64  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.8           ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.6        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 9,0         ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -9,0        ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu = 0,-12.0	　 ;垂直ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.back = -2.5	   ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd = 3.33		　 ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -4.5,-11	   ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される） 
runjump.fwd = 4.5,-11	   ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8        ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.5        ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5        ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .6       ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; State
;===========================================================================
;:Time Up - Lose
[Statedef 170]
type = S
movetype = I
physics = S
ctrl = 0
anim = ifelse(var(0),15300,5300)
velset = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = time < 120
flag = RoundNotOver

;---------------------------------------------------------------------------
;Time Up - Draw
[Statedef 175]
type = S
movetype = I
physics = S
ctrl = 0
anim = ifelse(var(0),15300,5300)
velset = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = time < 120
flag = RoundNotOver

;---------------------------------------------------------------------------
;Win
[Statedef 180]
type = S
movetype = I
physics = S
ctrl = 0
;anim = 180 + (random%2)
velset = 0,0

[State 0, end]
type = changestate
trigger1 = fvar(12)
value = 181

[State 0, end]
type = changestate
trigger1 = time > 0
value = ifelse(matchover,181,182)+(random%2)

;---------------------------------------------------------------------------
[Statedef 181]
type = S
physics = S
ctrl = 0
anim = ifelse(!var(0),180,10181)
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = time < 240
flag = RoundNotOver

[State 0, snd]
type = playsnd
trigger1 = time = 12
value = 4,7
channel = 0

[state 0, helper]
type = helper
trigger1 = !ishelper
trigger1 = !fvar(19) || !numpartner
trigger1 = time = 1
trigger2 = !ishelper
trigger2 = fvar(19) = 92
trigger3 = ishelper
trigger3 = !root,fvar(19) || !numpartner
trigger3 = time = 1
trigger4 = ishelper
trigger4 = root,fvar(19) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100
postype = p1

;---------------------------------------------------------------------------
[Statedef 182]
type = S
physics = S
ctrl = 0
velset = 0,0

[State 0, end]
type = changestate
trigger1 = !IsHelper
trigger1 = var(0)
trigger1 = time > 0
value = 10182

[State 0, anim]
type = changeanim
trigger1 = IsHelper
trigger1 = time = 40
trigger2 = !IsHelper
trigger2 = time = 1
value = 181

[State 0, assert]
type = assertspecial
trigger1 = time < 240
flag = RoundNotOver

[State 0, snd]
type = playsnd
trigger1 = anim = 181 && animelemtime(5) = 12
value = 4,2
volume = 255
channel = 0

[State 0, explod]
type = explod
trigger1 = anim = 181 && animelemtime(5) = 2
anim = 182
id = 182
pos = 0,0
postype = p1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
trigger1 = !ishelper
trigger1 = !fvar(19) || !numpartner
trigger1 = time = 1
trigger2 = !ishelper
trigger2 = fvar(19) = 92
trigger3 = ishelper
trigger3 = !root,fvar(19) || !numpartner
trigger3 = time = 1
trigger4 = ishelper
trigger4 = root,fvar(19) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100
postype = p1

;===========================================================================
;スタンド消去(win)
[Statedef 10182]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 10
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [8,20]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 10
scale = (const(size.xscale)-(.08*(time-10))),(const(size.yscale)+(.06*(time-10)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 20
value = 20000

;---------------------------------------------------------------------------
[Statedef 183]
type = S
physics = S
ctrl = 0
anim = ifelse(!var(0),183,10181)
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = time < 240
flag = RoundNotOver

[State 0, snd]
type = playsnd
trigger1 = time = 22
value = 2,1
volume = 255
channel = 0

[state 0, helper]
type = helper
trigger1 = !ishelper
trigger1 = !fvar(19) || !numpartner
trigger1 = time = 1
trigger2 = !ishelper
trigger2 = fvar(19) = 92
trigger3 = ishelper
trigger3 = !root,fvar(19) || !numpartner
trigger3 = time = 1
trigger4 = ishelper
trigger4 = root,fvar(19) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100
postype = p1

;===========================================================================
;Intro
[Statedef 190]
type = S
movetype = I
physics = S
anim = 190
ctrl = 0
velset = 0,0

[State 0, power]
type = powerset
trigger1 = roundsexisted = 0
trigger1 = !time
trigger1 = power < 1000
value = 1000

[State 0, end]
type = changestate
triggerall = enemy,authorname = "warusaki3" || enemy,authorname = "kikurage" || enemy,authorname = "Shio"
trigger1 = p2name = "dio"
trigger2 = p2name = "final dio"
trigger3 = p2name = "shadow dio"
trigger4 = p2name = "Shadow Dio"
trigger5 = p2name = "DIO BRANDO"
value = 194

[State -2, 3]
type = ChangeState
triggerall = teamside = 1
trigger1 = (P2Name = "Polnareff" || P4Name = "Polnareff") && EnemyNear,AuthorName = "Nimame"
value = 191+(random%2)

[State -2, 3]
type = ChangeState
triggerall = teamside = 2
trigger1 = (P2Name = "Polnareff" || P4Name = "Polnareff") && EnemyNear,AuthorName = "Nimame"
value = 191+(P2stateno=191)

[State 0, end]
type = changestate
trigger1 = 1
value = 191 + (random%3)

;---------------------------------------------------------------------------
[Statedef 191]
type = S
physics = S
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 300
trigger3 = p2name = "jotaro" && enemy,authorname = "y.y" && p2stateno = 160
trigger4 = p2name = "joseph" && enemy,authorname = "y.y" && p2stateno = 160
trigger5 = p2name = "Hol horse" && enemy,authorname = "y.y" && p2stateno = 160
trigger6 = p2name = "Rubber Soul" && enemy,authorname = "bad darkness" 
value = 191
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 191 && animelem = 7
value = 3,4
volume = 255
channel = 0

[State 0, explod]
type = explod
trigger1 = anim = 191 && animelem = 3
anim = 10190
id = 10190
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, end]
type = changestate
trigger1 = anim = 191 && !animtime
value = 0

;---------------------------------------------------------------------------
[Statedef 192]
type = S
physics = S
anim = 192
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 4,0
volume = 255
channel = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(2) = 3
anim = 10191
id = 10191
pos = 14,0
postype = p1
scale = .833,1
sprpriority = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0

;---------------------------------------------------------------------------
[Statedef 193]
type = S
physics = S
anim = 193
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 3,5
volume = 255
channel = 0

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 10192
id = 10192
pos = 14,0
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
postype = p1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0

;---------------------------------------------------------------------------
;vs DIO Intro
[Statedef 194]
type = S
physics = S
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger1 = enemy,time >= 10
trigger2 = time > 400
trigger3 = p2name = "dio" && p2stateno = 192
trigger4 = p2name = "final dio" && p2stateno = 192
trigger5 = p2name = "shadow dio" && p2stateno = 192
trigger6 = p2name = "Shadow Dio" && p2stateno = 190
value = 194
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 194 && animelem = 5
value = 5,0
volume = 255
channel = 0

[State 0, end]
type = changestate
trigger1 = anim = 194 && !animtime
value = 0

;---------------------------------------------------------------------------
[Statedef 195]
type = S
movetype = I
physics  = S
ctrl = 0
anim = ifelse(!var(0),195,10196)
velset = 0,0
sprpriority = 0

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = anim = 195
trigger1 = command = "holdfwd" || command = "holdback"
value = 197

[State 0, snd]
type = playsnd
trigger1 = anim = 195 && animelem = 4
value = 3,3
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 10196 && time = 16
value = 3,5
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 197 && animelem = 6
value = 3,12
volume = 255
channel = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
  
;---------------------------------------------------------------------------
 

;===========================================================================
;回り込み
[Statedef 300]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
sprpriority = -1
facep2 = 1;-(prevstateno=[100,119])

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, hitby]
type = hitby
trigger1 = 1
value = SCA,AT

[State 0, snd]
type = playsnd
trigger1 = !time
value = 3,2
volume = 255
channel = 0

[State 0, vel]
type = velset
trigger1 = !time
x = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 0, helper]
type = helper
trigger1 = animelemtime(1) = 4
helpertype = normal
name = "Image"
stateno = 305
id = 305
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(3) <= 0
x = .91

[State 0, vel]
type = velmul
trigger1 = animelemtime(5) > 0
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 7
x = 0

[State 0, var]
type = varset
trigger1 = !animtime
var(24) = 8

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 305]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = velset
trigger1 = !time
x = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(3) <= 0
x = .91

[State 0, vel]
type = velmul
trigger1 = animelemtime(5) > 0
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 7
x = 0

[State 0, end]
type = DestroySelf
trigger1 = !animtime
trigger2 = root,movetype = H

;===========================================================================
 
;---------------------------------------------------------------------------
 

;---------------------------------------------------------------------------
 

;===========================================================================
 
;---------------------------------------------------------------------------
 
;---------------------------------------------------------------------------
[Statedef 425]
type = S
movetype = I
physics = N
velset = 0,0
anim = 425
ctrl = 0
sprpriority = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = 1
value = 20,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(3) = root,fvar(3)
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(8) > 0
value = anim
elem = 3

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 2000
trigger2 = root,stateno = 2100
trigger3 = root,stateno = 2110
trigger4 = root,stateno = 2200
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3000 && root,time = 3
value = 3050

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
value = root,stateno + 50

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 420
value = 10000

 

;---------------------------------------------------------------------------
;ジャンプ強(no stand) 

;---------------------------------------------------------------------------
[Statedef 625]
type = A
movetype = A
physics = N
velset = 0,0
anim = 625
ctrl = 0
sprpriority = 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
value = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(3) = root,fvar(3)
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(8) > 0
value = anim
elem = 4

[State 0, end]
type = changestate
triggerall = root,movetype != H && root,time = 6
trigger1 = root,stateno = 2110
value = 2160

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 620
value = 10000

;===========================================================================
;ガーキャン(本体)


;---------------------------------------------------------------------------
;ガーキャン(スタンド)
[Statedef 750 - Guard Cancel]
type = S
movetype = A
physics = S
ctrl = 0
anim = 10700
velset = 0,0
sprpriority = 2

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, width]
type = width
trigger1 = 1
edge = 20,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 10
value = SCA

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = bindtoroot
trigger1 = time <= 1
pos = 15,0

[State 0, hit]
type = hitdef
trigger1 = animelem = 8
attr = S, SA
damage = ceil(root,fvar(10)*120),30
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -10,-90
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0
ground.type = High
ground.slidetime = 26
ground.hittime = 26
ground.velocity = -5,-7
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -5,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 1
fall.recover = 1
fall.recovertime = 24
guard.kill = 0
yaccel = .44
p2facing = 1

[state 0]
type = parentvarSet
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.9

[State 0, end]
type = changestate
trigger1 = animelem = 14
value = 9000

;===========================================================================
;アドバンシングガード
[Statedef 710]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6020
id = 6020
pos = ceil(28*const(size.xscale)),ifelse(statetype=C&&!var(0),ceil(-45*const(size.xscale)),ceil(-90*const(size.xscale)))
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "AVG"
stateno = 715
id = 715
pos = -10,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 810, 1]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8030
id = 8030
pos = 0,0
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 3,12
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 0,20

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"  
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, nhb]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 151+(command = "holddown")*2

;---------------------------------------------------------------------------
;アドバンシングガード2
[Statedef 711]
type = U
movetype = I
physics = N

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, end]
type = changestate
trigger1 = numhelper(715)
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 0, end]
type = changestate
trigger1 = !numhelper(715)
value = 130+(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
;アドバンシングガード(ヘルパー)
[Statedef 715]
type = S
movetype = I
physics = N
anim = 715
velset = 0,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = !time
x = 20

[State 0, vel]
type = veladd
trigger1 = time > 0
x = -1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;---------------------------------------------------------------------------
; アドバンシングガード(煙)
[Statedef 8030]
type = S
movetype = I
physics = N
velset = 0,0
anim = 8030
sprpriority = 4

[State 0, pos]
type = posset
trigger1 = 1
x = enemynear,pos x
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime

;===========================================================================
;投げ
 

;---------------------------------------------------------------------------
;投げ
 

;---------------------------------------------------------------------------
;投げぬけ（自分）（y.yさん製作）
[Statedef 820]
type = A
movetype = I
physics = A
anim = 5210+var(0)
velset = -3,-6

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 830

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ(スタンド)
[Statedef 850]
type = U
movetype = I
physics = N
ctrl = 0
anim = 10801
velset = 0,0
sprpriority = 0

[State 0, btr]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,0

[State 0, anim]
type = changeanim
triggerall = anim != root,anim+10000
triggerall = SelfAnimExist(root,anim+10000)
trigger1 = root,stateno = [800,802]
value = root,anim+10000

[State 0, end]
type = changestate
trigger1 = anim = 10802
trigger1 = root,stateno != 802
value = 9000
 

;---------------------------------------------------------------------------
[Statedef 1260]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11210
sprpriority = -2

[State 0, screen]
type = posset
trigger1 = !time
y = 0

[State 0, screen]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = !time; && var(7)
x = 0
y = 0

[State 0, vel]
type = velset
trigger1 = !time && !var(7)
x = -vel x*.2
y = -4

[State 0, vel]
type = veladd
trigger1 = pos y < 0
y = .3

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, var];AI
type = varadd
trigger1 = var(10)
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = pos y >= 0 && (time >= 6||var(7))
trigger1 = animelemtime(1) >= 0
value = 9001

;===========================================================================
;遠隔操作（未実装）
[Statedef 1700]
type = S
movetype = A
physics = N
ctrl = 0
anim = 105
velset = -4,0
sprpriority = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
var(6) = 1

[State 0, anim]
type = changeanim
trigger1 = time>10
value = 106

[State 0, vel]
type = velset
trigger1 = anim = 106
x = 0

[State 0, end]
type = changestate
trigger1 = anim = 106 && !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠隔操作（ｽﾀﾝﾄﾞ）
[Statedef 1750]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10100
velset = 4,0
sprpriority = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = 15

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, anim]
type = changeanim
trigger1 = time>10
value = 101

[State 0, vel]
type = velset
trigger1 = anim = 101
x = 0

[State 0, end]
type = changestate
trigger1 = anim = 101 && !animtime
value = 0
ctrl = 1

;==============================================================================
;アーマーテイクオフ(本体)
 
;==============================================================================
;アーマーテイクオフ(ヘルパー)
[Statedef 2001]
type = S
movetype = A
physics = S
ctrl = 0
anim = 2003
velset = 0,0
sprpriority = 0

[State 1100, VarSet]
type = attackdist
trigger1 = 1
value = 0

[State 0, hit]
type = hitdef
trigger1 = animelem = 1
attr = S, HA
damage = 0,0
priority = 4,Hit
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = -1
sparkxy = -1
guard.sparkno = s6010
hitsound = -1
guardsound = -1
givepower = 0,0
ground.type = High
ground.slidetime = 0
ground.hittime = 0
ground.velocity = 0,0
air.velocity = 0
guard.velocity = 0
airguard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
kill = 0
guard.kill = 0
p2stateno = 2080
id = 2081
p2facing = 1

[State 1100, VarSet]
type = parentvarset
trigger1 = movehit
var(29) = 1

[State 0, target]
type = varset
trigger1 = time = 100
var(50) = 1

[State 0, target]
type = targetstate
trigger1 = time = 139
value = 2081

[State 0, life]
type = targetlifeadd
trigger1 = time = 147+29
trigger2 = time = 162+29
trigger3 = time = 177+29
trigger4 = time = 192+29
trigger5 = time = 207+29
trigger6 = time = 215+29
trigger7 = time = 223+29
trigger8 = time = 234+29
value = ceil(ifelse(-21*root,fvar(0)>-7,-7,-21*root,fvar(0)))
kill = 0

[State 0, life]
type = targetlifeadd
trigger1 = time = 265+29
value = ceil(ifelse(-133*root,fvar(0)>-7,-7,-133*root,fvar(0)))
kill = 1

[State 1100, VarSet]
type = destroyself
trigger1 = parent,stateno != [2050,2052]
trigger1 = parent,stateno != [12000,12002]

 

;---------------------------------------------------------------------------
;アーマーテイクオフ(敵)
[Statedef 2080]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,-10
sprpriority = -1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, hitby]
type = nothitby
trigger1 = 1
value = SCA

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5050

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = SelfAnimExist(5051)
value = 5051

[State 0, vel]
type = velset
trigger1 = time = 20
y = 0

[State 0, pos]
type = posset
trigger1 = time = 20
x = 0
y = -400

[State 0, anim]
type = changeanim
trigger1 = time = 150
trigger1 = SelfAnimExist(5061)
value = 5061

[State 0, vel]
type = veladd
trigger1 = time > 150
y = .44

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;アーマーテイクオフ(敵2)
[Statedef 2081]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,18
sprpriority = -1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, hitby]
type = nothitby
trigger1 = 1
value = SCA

[State 0, pos]
type = posset
trigger1 = time <= 190
x = 0

[State 0, anim]
type = changeanim2
trigger1 = !time
value = 2080
elem = 5

[State 0, vel]
type = velset
trigger1 = pos y >= -130
trigger1 = time <= 160
y = 0

[State 0, anim]
type = changeanim2
trigger1 = time = 37
trigger2 = time = 52
trigger3 = time = 67
trigger4 = time = 82
trigger5 = time = 97
trigger6 = time = 105
trigger7 = time = 113
trigger8 = time = 118
trigger9 = time = 125
trigger10 = time = [155,185]
value = 2080
elem = ifelse((time=113||time>145),1,3)

[State 0, vel]
type = velset
trigger1 = time = 37
trigger2 = time = 52
trigger3 = time = 67
trigger4 = time = 82
trigger5 = time = 97
trigger6 = time = 105
trigger7 = time = 113
trigger8 = time = 118
trigger9 = time = 125
y = ifelse(time=125,-5,-2.5)

[State 0, vel]
type = velset
trigger1 = time = 185
y = -2

[State 0, vel]
type = veladd
trigger1 = pos y < -130
trigger1 = time = [37,166]
y = .4

[State 0, vel]
type = veladd
trigger1 = time > 192
y = .44

[State 0, vel]
type = changestate
trigger1 = !alive
value = 2082

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;アーマーテイクオフ(敵/死亡)
[Statedef 2082]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, anim]
type = changeanim2
trigger1 = time < 12
value = 2080

[State 0, vel]
type = velset
trigger1 = time = 12
x = -4
y = -6

[State 0, vel]
type = veladd
trigger1 = time >= 12
y = .36

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;===========================================================================
;ラストショット(本体)
 
;---------------------------------------------------------------------------
;ラストショット(本体/空中)
[Statedef 2110]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20910
velset = 0,0
sprpriority = 2

[State 0, nhb]
type = nothitby
trigger1 = !time
value = SCA
time = 24

[State -2, CornerPush]
type = posadd
trigger1 = prevstateno = 620
x = (fvar(3)+(fvar(3)*.25)+1)
persistent = 0

[State 0, vel]
type = velset
triggerall = !var(8)
trigger1 = time = 14
x = -3
y = -5
persistent = 0

[State 0, vel]
type = veladd
triggerall = !var(8)
trigger1 = time >= 14
y = .44

[State 0, anim]
type = changeanim
triggerall = !var(8)
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 1100
persistent = 0

[State 0, pos]
type = posset
trigger1 = pos y >= 0
trigger1 = vel y > 0
y = 0

[State 0, vel]
type = velset
trigger1 = pos y >= 0
trigger1 = vel y > 0
y = 0

[State 0, state]
type = statetypeset
trigger1 = anim = 1100
statetype = S
movetype = I
physics = S
persistent = 0

[State 0, end]
type = changestate
triggerall = !animtime
trigger1 = anim = 1100
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラストショット(スタンド)
 
;---------------------------------------------------------------------------
;ラストショット(空中/スタンド)
 



;---------------------------------------------------------------------------
;レクイエムの片鱗(本体強制移動)
[Statedef 2281]
type = U
movetype = I
physics = N
ctrl = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, proj]
type = projectile
trigger1 = 1
projID = 2281
projanim = anim
projhits = 0
projheightbound = -999,999 
projscale = 100,100
projpriority = 20
projremovetime = 1
postype = p1
attr = SCA,HP
priority = 7,Hit
affectteam = B
hitflag = MAFD
guardflag = -1
p1stateno = 0

[State 0, end]
type = DestroySelf
trigger1 = time > 0

;===========================================================================
;STAND_CRASH
[Statedef 4000]
type = U
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod]
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -20
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),4000,4010)

[State 0, anim]
type = changeanim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 4030

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = animelem = 4
value = anim
elem = 2

[State 0, state]
type = statetypeset
trigger1 = !time
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 4001]
type = S
movetype = H
physics = S

[State 0, vel]
type = velset
trigger1 = !var(52)
x = -8
persistent = 0

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4000
trigger1 = !var(52)
value = 5006 + (GetHitVar(groundtype)=2)*10

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4100
trigger1 = var(52)
value = 4101

[State 0, vel]
type = velmul
trigger1 = !var(52)
x = .9

[State 0, vel]
type = velset
trigger1 = !var(53)
x = 0

[State 0, defence]
type = defencemulset
trigger1 = !var(53)
value = 1

[State 0, explod]
type = explod
trigger1 = !var(52)
anim = 8030
id = 8030
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = !var(53)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;HITA_UP (initial going up)
[Statedef 4030]
type = A
movetype = H
physics = N
ctrl = 0

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, hitvel]
type = hitvelset
trigger1 = prevstateno = 4000
trigger1 = !time
x = 1
y = 1

[State 0, vel]
type = velmul
trigger1 = prevstateno = 4000
trigger1 = !time
y = 1.1

[State 0, vel]
type = velset
trigger1 = prevstateno = 4100
trigger1 = !time
x = -2.5
y = -2.5

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 5050

[State 0, end]
type = changestate
trigger1 = !animtime
value = 4035

;---------------------------------------------------------------------------
;HITA_UP_T (transition)
[Statedef 4035]
type = A
movetype = H
physics = N

[State 0, anim]
type = null;changeanim
trigger1 = !time
trigger1 = SelfAnimExist(5035)
trigger1 = anim != [5051,5059]
trigger1 = anim != 5090
value = 5035

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5050

;---------------------------------------------------------------------------
;HITG_SHAKE
[Statedef 4100]
type = S
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = !time
var(53) = 50
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod]
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -30
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype != A
value = 4100

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype = A
value = 4030

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim

[State 0, state] ;State type gets set to aerial if getting hit up
type = statetypeset
trigger1 = !time
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030
 
[Statedef 9000 - Stand Disappear]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = prevstateno = 1150
value = 1158

[State 0, anim]
type = changeanim
trigger1 = !prevstateno = 1150
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 10
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [8,20]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 10
scale = (const(size.xscale)-(.08*(time-10))),(const(size.yscale)+(.06*(time-10)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 20
value = 20000

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 20
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0 

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2000
trigger1 = root,anim = 2000
value = 2050 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2150 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2200
value = 2250 
 
[Statedef 9001 - Stand Disappear too]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, var];AI
type = parentvarset
trigger1 = var(10)
var(10) = -1
ignorehitpause = 1

[State 0, var];AI
type = varadd
trigger1 = var(10)
var(10) = -1
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [1,20]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 20
scale = (const(size.xscale)-(.08*(time-20))),(const(size.yscale)+(.06*(time-20)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 32
value = 20000

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 32
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0 

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75


[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2160

;===========================================================================
;スタンド消去3
[Statedef 9002]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 30
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [8,50]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 30
scale = (const(size.xscale)-(.08*(time-30))),(const(size.yscale)+(.06*(time-30)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 32
value = 20000

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 42
value = 10000

[State 0, explod]
type = explod
trigger1 = anim = 2150
trigger1 = !time
anim = 6053
id = 6053
pos = 70,-100
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2150
trigger1 = !time
anim = 6053
id = 6053
pos = 85,-95
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2150
trigger1 = !time
anim = 6053
id = 6053
pos = 100,-90
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2150
trigger1 = !time
anim = 6053
id = 6053
pos = 115,-85
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 2151 || anim = 2161
trigger1 = !time
anim = 6053
id = 6053
pos = 30,-130
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2151 || anim = 2161
trigger1 = !time
anim = 6053
id = 6053
pos = 30,-145
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2151 || anim = 2161
trigger1 = !time
anim = 6053
id = 6053
pos = 30,-160
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2151 || anim = 2161
trigger1 = !time
anim = 6053
id = 6053
pos = 30,-175
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 2152
trigger1 = !time
anim = 6053
id = 6053
pos = -50,-110
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2152
trigger1 = !time
anim = 6053
id = 6053
pos = -60,-120
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2152
trigger1 = !time
anim = 6053
id = 6053
pos = -70,-130
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 2152
trigger1 = !time
anim = 6053
id = 6053
pos = -80,-140
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0 

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75
 

;===========================================================================
;スタンド消去
[Statedef 9003]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 10
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [1,20]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 10
scale = (const(size.xscale)-(.08*(time-10))),(const(size.yscale)+(.06*(time-10)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 20
value = 20000

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 20
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0 

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

;---------------------------------------------------------------------------
;被ダメ時スタンド消去(スタンド被ダメ)
[Statedef 9500]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(25) = GetHitVar(damage)

[State -1, Run Fwd]
type = ParentVarAdd
triggerall = root,var(1) = (0,80]
trigger1 = time = 0
var(1) = -2-ceil(var(25)*.25)
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = HitShakeOver
value = 9520

;---------------------------------------------------------------------------
;被ダメ時スタンド消去(本体被ダメ)
[Statedef 9505]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 0, var];AI
type = parentvarset
trigger1 = !time
var(35) = 0
ignorehitpause = 1

[State 0, var];AI
type = varset
trigger1 = var(10)
var(10) = 0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = root,HitShakeOver
value = 9520

;---------------------------------------------------------------------------
;スタンドクラッシュ時スタンド消去
[Statedef 9510]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = !root,var(52)
value = 9520

;---------------------------------------------------------------------------
;被ダメ時スタンド消去2
[Statedef 9520]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9501
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,15

[State 0, hitvel]
type = hitvelset
trigger1 = prevstateno = 9500
trigger1 = !time
x = 1
y = 1

[State 0, hitvel]
type = velset
trigger1 = prevstateno = 9505
trigger1 = !time
x = -2
y = -4

[State 0, pos]
type = posadd
trigger1 = !time
x = -5
y = -66

[State 0, pos]
type = posfreeze
trigger1 = time >= 4

[State 0, scale]
type = angledraw
trigger1 = time < 12
scale = (const(size.xscale)+(.04*time)),(const(size.yscale)-(.075*time))

[State 0, anim]
type = changeanim
trigger1 = time = 12
value = 20000

[State 0, end]
type = changestate
trigger1 = HitOver && time >= 12
value = 10000

;===========================================================================
;ガークラ時スタンド消去
[Statedef 9600]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9600
velset = 0,0
sprpriority = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posadd
trigger1 = time = 1
x = 15

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != 4100
value = 10000

;===========================================================================
;スタンド待機1
[Statedef 10000]
type = U
movetype = I
physics = N
anim = 20000
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, btr]
type = statetypeset
trigger1 = root,movetype = H
movetype = H
[State 0, btr]
type = statetypeset
trigger1 = root,movetype != H
movetype = I

[State 0, var];AI
type = parentvarset
trigger1 = root,var(36) = 15
var(36) = 0
ignorehitpause = 1

[State 0, var];AI
type = parentvarset
trigger1 = root,var(35) != 51
trigger1 = !time
var(35) = 0
ignorehitpause = 1

[State 0, var];AI
type = varset
trigger1 = var(10)
var(10) = 0
ignorehitpause = 1

[State 0, var];AI
type = parentvarset
trigger1 = root,var(39) != 10005
trigger1 = !time
var(39) = 0
ignorehitpause = 1

[state -2, debug]
type = DisplayToClipboard
trigger1 = 1
text = "fvar(20) = %f"
params = fvar(20)
ignorehitpause = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, var]
type = parentvarset
trigger1 = parent,var(9) = 2
trigger1 = !time
var(23) = 120

[State 0, var]
type = parentvarset
trigger1 = parent,var(9) != 0
var(9) = 0

[State 0, var]
type = varset
trigger1 = !time
var(3) = 0

[State 0, var]
type = varset
trigger1 = !time
var(4) = 0

[State 0, var]
type = varset
trigger1 = !time
var(5) = 0

[State 0, var]
type = varset
trigger1 = !time
var(10) = 0

[State 0, var]
type = varset
trigger1 = !time
var(20) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(47) = 0

[State 0, var]
type = varset
trigger1 = !time
var(50) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
fvar(20) = 0

[State 0, var]
type = varset
trigger1 = !time
fvar(3) = 0

[State 0, var]
type = varset
trigger1 = !time
fvar(4) = 0

[State 0, var]
type = varset
trigger1 = !time
fvar(5) = 0

[State 0, var]
type = varset
trigger1 = !time
var(8) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(37) = 0

[State 0, end]
type = changestate
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
value = ifelse(root,stateno=4000,9510,9600)


[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 2000
trigger2 = root,stateno = 2100
trigger3 = root,stateno = 2110
trigger4 = root,stateno = 2200
value = root,stateno + 50

;即キャン(スタンドを使わない攻撃からのキャンセル)

[State 0, end];即キャン（レクイエムの片鱗）
type = changestate
triggerall = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 3000
triggerall = root,command = "63214aa" || (root,var(28)&2**13)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 2250

[State 0, end];即キャン（アーマーテイクオフ）
type = changestate
triggerall = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "236aa" || root,command = "236b" || (root,var(28)&2**9)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 2050

[State 0, end];即キャン（ラストショット）
type = changestate
triggerall = !root,var(59)
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "214aa1" || root,command = "214aa2" || root,command = "214aa3" || (root,var(28)&2**10) || (root,var(28)&2**11) || (root,var(28)&2**12)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 2150

[State 0, end];即キャン（ラストショット（空中））
type = changestate
triggerall = !root,var(59)
triggerall = root,pos y < -5
triggerall = root,movetype != H
triggerall = root,command = "214aa1" || root,command = "214aa2" || root,command = "214aa3" || (root,var(28)&2**10) || (root,var(28)&2**11) || (root,var(28)&2**12)
trigger1 = root,stateno = 600
trigger2 = root,stateno = 610
value = 2160
;

[State 0, end];即キャン（ミリオンスピット）
type = changestate
triggerall = !root,var(59)
triggerall = root,movetype != H
triggerall= (root,command="x" || root,command="y" || root,command="z" || root,command="b") && root,var(18)>4
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 1050

[State 0, end];即キャン（レイダーツ）
type = changestate
triggerall = !root,var(59)
triggerall = root,movetype != H
triggerall = root,command = "46x" || root,command = "46y" || root,command = "46z" || (root,var(28)&2**0) || (root,var(28)&2**1) || (root,var(28)&2**2)
trigger1 = root,stateno = 200 
trigger2 = root,stateno = 210 
trigger3 = root,stateno = 220 
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 1150

[State 0, end];即キャン（シューティングスター）
type = changestate
triggerall = !root,var(59)
triggerall = root,movetype != H
triggerall = root,command = "28x" || root,command = "28y" || root,command = "28z" || root,command = "28b" || (root,var(28)&2**3) || (root,var(28)&2**4) || (root,var(28)&2**5)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 1250

;AI

[State 0, end];即キャン（アーマーテイクオフ）
type = changestate
triggerall = root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000

triggerall = root,var(36) = 8
triggerall = root,p2bodydist x < 40
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 2050

[State 0, end];即キャン（アーマーテイクオフ）
type = changestate
triggerall = root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000

triggerall = !root,var(36)
triggerall = root,P2stateno != 5120
triggerall = root,P2stateno != 5201
Triggerall = numhelper(50000)
Triggerall = helper(50000),var(7) >= 42
triggerall = root,P2MoveType = A
triggerall = Random < 600+(power/10)
Triggerall = (enemynear(root,var(48)),animtime<-19)
triggerall = (root,P2BodyDist X = [5,90+(enemynear(root,var(48)),vel x>3)*15])
triggerall = root,P2bodydist y > -100

trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 220
trigger4 = root,stateno = 400
trigger5 = root,stateno = 412
trigger6 = root,stateno = 422
value = 2050

;AIここまで

[State 0, 4]
type = ChangeState
triggerall = !root,var(0)
triggerall = root,time = 1
trigger1 = root,stateno = 120 && root,statetype != A
trigger2 = root,stateno = [130,132]
trigger3 = root,stateno = 150
trigger4 = root,stateno = 152
trigger5 = root,stateno = 154; || root,stateno = 155
value = 125

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3000 && root,time = 3
value = 3050

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1400
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 700 && root,time = 4
value = 750

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = !root,var(0)
trigger1 = root,stateno = 801 && root,time = 5
value = 850

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 410 && root,time = 1
value = 415

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 420 && root,time = 1
value = 425

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 620 && root,time = 1
value = 625

;---------------------------------------------------------------------------
;本体時ガード（スタンド）
[Statedef 125]
type = U
physics = U
sprpriority = 2

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 120, 1]
type = ChangeAnim
triggerall = anim != 125
trigger1 = root,anim = 120
trigger2 = root,anim = 130
trigger3 = root,anim = 132
value = 125

[State 120, 1]
type = ChangeAnim
triggerall = anim != 126
trigger1 = root,anim = 121
trigger2 = root,anim = 131
value = 126

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 150
value = 155
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 151
value = 156
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 152
value = 157
persistent = 0

[State 2600, ChangeState]
type = changeanim
trigger1 = root,stateno = [150,155];154
trigger1 = root,command = "holdback"
trigger1 = animelem = 4
value = anim
elem = 2
persistent = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = parent,var(25) = 1
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = parent,var(25) = 1

[State 120, 5]
type = ChangeState
triggerall = time > 1
triggerall = root,time = 1
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
value = 125

[State 120, 5]
type = ChangeState
trigger1 = root,stateno != 120
trigger1 = root,stateno != [130,132]
trigger1 = root,stateno != 140
trigger1 = root,stateno != [150,155]
trigger2 = anim = 145 || anim = 146 || anim = 155 || anim = 156 || anim = 157
trigger2 = animtime = 0
value = 10000
 
 

;===========================================================================
;スタンド解除
[Statedef 900]
type = S
movetype = I
physics = S
anim = 900
ctrl = ifelse(var(35)!=50,1,0)
sprpriority = 0

[State 0, pos]
type = nothitby
trigger1 = time <= 4
value = SCA

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 10901
id = 10000
pos = 15,0
postype = p1
scale = const(size.xscale),const(size.yscale)
bindtime = -1
sprpriority = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;スタンド解除（空中）
[Statedef 910]
type = A
movetype = I
physics = N
ctrl = 0
anim = 44
sprpriority = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 4030, Gravity]
type = null;VelAdd
trigger1 = 1
y = .5

[State 0, explod]
type = explod
trigger1 = !time
anim = 10911
id = 10000
pos = 15,0
postype = p1
scale = const(size.xscale),const(size.yscale)
bindtime = -1
sprpriority = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse(var(5),.5,.6)-.08

[State 1100, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
;本体待機状態
[Statedef 20000]
type = U
movetype = I
physics = N
anim = 20000
ctrl = 0
sprpriority = 0

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = anim = 20000
triggerall = root,movetype != H
triggerall = root,anim != [5000,5999]
trigger1 = root,stateno = [10900,10950]
trigger2 = root,var(0)
value = 20001
 
[Statedef 20001 - Polnareff]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 800
value = 800
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 10900
value = 20900
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 10910
value = 20910
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 10950
value = 20950
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, anim]
type = changeanim
triggerall = root,time
trigger1 = anim = 20501 || anim = 20511 || anim = 20521
trigger1 = !animtime
trigger2 = anim != 20501 && anim != 20511
trigger2 = root,stateno = 0 && root,anim != 10005
trigger3 = root,stateno = 11 && anim != 10 && anim != 20521
trigger4 = root,stateno = 10200
trigger5 = root,stateno = 10201
trigger6 = root,stateno = 10220 && root,anim = 10221
trigger7 = root,stateno = 10400 && anim != 10
value = ifelse(root,statetype=S,20001,11)

[State 0, anim]
type = changeanim
triggerall = root,time
triggerall = anim != 20500 && anim != 20510
trigger1 = root,stateno = 10210
trigger2 = root,stateno = 10212
trigger3 = root,stateno = 10220 && root,anim = 10220
trigger4 = root,stateno = 10222
trigger5 = root,stateno = 10310
trigger6 = root,stateno = 10320
value = ifelse(random<500,20500,20510)

[State 0, anim]
type = changeanim
triggerall = root,time
triggerall = anim != 20520
trigger1 = root,stateno = 10410
trigger2 = root,stateno = 10420
trigger3 = root,stateno = 10510
trigger4 = root,stateno = 10511
trigger5 = root,stateno = 10520
value = 20520

[State 0, anim]
type = changeanim
triggerall = (root,stateno = [10600,10620])
trigger1 = anim = 41 && animelem = 5
trigger2 = anim = 44 && animelemtime(2) >= 0
trigger3 = anim = 20000
value = 44
elem = ifelse(anim = 44,animelemno(0),1)

[State 0, anim]
type = changeanim
trigger1 = anim = 20500 || anim = 20510 || anim = 20520
trigger1 = root,animtime=-2;root,movetype != A
value = anim+1

[State 0, anim]
type = changeanim
triggerall = animelemtime(2) = 2
trigger1 = anim = 5000 || anim = 5001 || anim = 5002
trigger2 = anim = 5010 || anim = 5011 || anim = 5012
trigger3 = anim = 5020 || anim = 5021 || anim = 5022
trigger4 = anim = 5030 || (anim = 5070 && root,stateno=5070)
value = anim
elem = ifelse(anim = 5070,1,2)

[State 0, anim]
type = changeanim
triggerall = root,time
triggerall = anim != root,anim-10000
triggerall = SelfAnimExist(root,anim-10000)
trigger1 = root,stateno = 10
trigger2 = root,stateno = [12,159]
trigger3 = root,stateno = [5000,5999]
trigger4 = root,stateno = 195
trigger5 = root,stateno = [800,820]
trigger6 = root,stateno = 4900
value = root,anim-10000

[State 0, anim]
type = changeanim
trigger1 = root,statetype = S
trigger1 = anim = 12 && !animtime
value = 0

[State 0, anim]
type = changeanim
trigger1 = root,statetype = C
trigger1 = anim = 10 && !animtime
value = 11


[State 0, btr]
type = bindtoroot
trigger1 = root,movetype != H
trigger2 = root,movetype = H
trigger2 = root,hitshakeover
pos = -15,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[state ]
type = assertSpecial
trigger1 = root,stateno = 75000
flag = invisible

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = ifelse((root,stateno = [120,159])||(root,stateno = 4900),-1,2)

[State 0, pos]
type = posadd
trigger1 = !root,hitshakeover
x = 1*ifelse(time%2=0,-1,1)

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 10211
trigger2 = root,stateno = 10700
trigger3 = (root,stateno = [11000,11300])
trigger4 = (root,stateno = [12000,12200])
value = root,stateno + 10000

;destroy
[State 0, end]
type = changestate
trigger1 = root,stateno = 900
trigger2 = root,stateno = 910
trigger3 = root,stateno = 12201
trigger4 = root,stateno = 3000
trigger5 = root,anim < 10000
trigger6 = !root,var(0) && ((root,var(46)=gametime+1)||(anim!=root,anim-10000))
value = 20000

;Win
[State 0, anim]
type = changeanim
triggerall = anim != 180
trigger1 = root,stateno = 181
value = 180

[State 0, end]
type = changestate
trigger1 = root,stateno = 182
value = 182

[State 0, anim]
type = changeanim
triggerall = anim != 183
trigger1 = root,stateno = 183
value = 183

[State 0, anim]
type = changestate
trigger1 = root,stateno = 3100
value = 22300

;Lose
[State 0, end]
type = changestate
trigger1 = !root,alive
trigger1 = root,anim = [5000,5099]
value = 9500

;Time Up
[State 0, end]
type = changeanim
trigger1 = root,anim = 15300
value = 5300
persistent = 0

;---------------------------------------------------------------------------
;立ち6中時本体
[Statedef 20211]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 20
sprpriority = 2

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = anim = 20001
x = 0

[State 0, end]
type = changeanim
trigger1 = time = 30
value = 20001

[State 0, end]
type = changestate
trigger1 = root,stateno != 10211
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;ガーキャン時本体
[Statedef 20700]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 700
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = changeanim
trigger1 = !animtime
value = 20001

[State 0, end]
type = changestate
trigger1 = root,stateno != 10700
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;ミリオンスピット時本体
[Statedef 21000]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 20510
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 11020
trigger1 = root,animtime = -3
value = 20511

[State 0, end]
type = changestate
trigger1 = root,stateno != [11000,11020]
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;レイダーツ時本体
[Statedef 21100]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 21100
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, btr]
type = bindtoroot
trigger1 = rootdist x < 15
pos = -15,0

[State 0, vel]
type = velset
trigger1 = rootdist x > 60
trigger2 = root,animelem = 5
x = 11

[State 0, anim]
type = changeanim
trigger1 = vel x > 0
trigger1 = rootdist x <= 15
value = 21101

[State 0, vel]
type = velset
trigger1 = anim = 21101
x = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != 11100
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;シューティングスター時本体
[Statedef 21200]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = root,anim + 10000
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, btr]
type = bindtoroot
trigger1 = root,stateno != 11201
pos = -15,0

[State 0, btr]
type = bindtoroot
trigger1 = root,stateno = 11201
pos = -4,46

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
trigger1 = root,stateno != 52
trigger1 = anim != root,anim + 10000
value = root,anim + 10000

[State 0, end]
type = changestate
trigger1 = root,stateno != [11200,11210]
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;針串刺しの刑時本体
[Statedef 21300]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 21300
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, anim]
type = changeanim
trigger1 = root,anim = 11305
value = 20511
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,anim = 11310
value = 21310
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,anim = [11301,11303]
value = 21301
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != [11300,11310]
trigger2 = anim = 20511 && animtime = -1
trigger3 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;hit
[Statedef 21310]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 21310
sprpriority = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = rootdist x < 15
x = 0

[State 0, btr]
type = bindtoroot
trigger1 = rootdist x < 15
trigger2 = root,animelemtime(10) >= 0
pos = -15,0

[State 0, vel]
type = velset
trigger1 = rootdist x > 15
trigger1 = animelem = 4
x = 6

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, anim]
type = changeanim
trigger1 = root,animelem = 22
value = 21311
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != [11300,11310]
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタンドシュート時本体
[Statedef 22300]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 22300
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = root,stateno = 3110
trigger2 = root,movetype = H
value = 22310

[State 0, end]
type = changestate
trigger1 = root,animelemtime(5) = 0
trigger1 = root,movetype != H
value = 22313

[State 0, end]
type = changestate
trigger1 = root,stateno != 3100
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタンドシュート時本体(hit)
[Statedef 22310]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 22310
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, end]
type = changeanim
trigger1 = anim != 22311
trigger1 = root,stateno = 3111
value = 22311

[State 0, end]
type = changestate
trigger1 = root,stateno = 3111 && root,animelemtime(6) >= 0
value = 22311

[State 0, end]
type = changestate
trigger1 = root,stateno != [3110,3111]
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタンドシュート時本体(hit2)
[Statedef 22311]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = changeanim
triggerall = anim != 109
triggerall = root,animelemtime(9) > 0
trigger1 = rootdist x > 16
value = 109

[State 0, nhb]
type = velset
trigger1 = anim = 109
x = 6

[State 0, nhb]
type = changeanim
triggerall = anim = 109
trigger1 = rootdist x < 15
value = 101

[State 0, nhb]
type = changeanim
triggerall = anim = 101
trigger1 = !animtime
value = 20001

[State 0, nhb]
type = velset
trigger1 = anim = 101
x = 0

[State 0, end]
type = changestate
trigger1 = root,stateno = 3112
trigger2 = root,movetype = H
value = 22312

[State 0, end]
type = changestate
trigger1 = root,stateno != 3111
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタンドシュート時本体(hit2)
[Statedef 22312]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = changeanim
trigger1 = anim != root,anim - 10000
value = root,anim - 10000

[State 0, end]
type = changestate
trigger1 = root,stateno != 3112
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;スタンドシュート時本体(失敗)
[Statedef 22313]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = changeanim
triggerall = anim != 109
trigger1 = rootdist x > 16
value = 109

[State 0, nhb]
type = velset
trigger1 = anim = 109
x = 6

[State 0, nhb]
type = changeanim
triggerall = anim = 109
trigger1 = rootdist x < 15
value = 101

[State 0, nhb]
type = changeanim
triggerall = anim = 101
trigger1 = !animtime
value = 20001

[State 0, nhb]
type = velset
trigger1 = anim = 101
x = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != 3100
trigger2 = root,movetype = H
value = 20001

;==============================================================================
;アーマーテイクオフ(本体)
[Statedef 22000]
type = U
movetype = I
physics = N
ctrl = 0
anim = 2000
velset = 0,0
sprpriority = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 0, btr]
type = bindtoroot
trigger1 = root,stateno = 12000
trigger1 = time <= 11
pos = -25,0

[State 0, btr]
type = bindtoroot
trigger1 = root,stateno = 12000
trigger1 = time >= 15
pos = -20,0

[State 0, anim]
type = changeanim
trigger1 = root,var(50) = 2
value = 2001
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 12002
value = 2002
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = time > 40
trigger1 = root,var(50) = 1
value = 2005
persistent = 0

[State 0, snd]
type = playsnd
triggerall = anim = 2001
trigger1 = root,time = 134 && root,stateno = 12001
value = 4,1
channel = 0

[State 0, turn]
type = turn
trigger1 = anim = 2001
trigger1 = p2dist x < 0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 2002
trigger1 = animelem = 7
value = 3,3
channel = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 2002 && !animtime
trigger2 = anim = 2005 && !animtime
value = 20001
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != [12000,12002]
trigger2 = root,movetype = H
value = 20001


;==============================================================================
;ラストショット(本体)
[Statedef 22100]
type = U
movetype = I
physics = N
ctrl = 0
anim = 2100
velset = 0,0
sprpriority = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, anim]
type = changeanim
trigger1 = root,var(50) = 1
value = 2101
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != 12100
trigger2 = root,movetype = H
value = 20001

;---------------------------------------------------------------------------
;ラストショット(空中/本体)
[Statedef 22110]
type = U
movetype = I
physics = N
ctrl = 0
anim = 21202
velset = 0,0
sprpriority = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, anim]
type = changeanim
trigger1 = root,statetype = S
value = 2100
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(50) = 1
value = 2101
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != 12110
trigger2 = root,movetype = H
value = 20001

;==============================================================================
;レクイエムの片鱗(本体)
[Statedef 22200]
type = U
movetype = I
physics = N
ctrl = 0
anim = 20500
velset = 0,0
sprpriority = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -25,0

[State 0, end]
type = changestate
trigger1 = root,stateno != 12200
trigger2 = root,movetype = H
value = 20001

;///////////////////////////////////////////////////////////////////////////
; Helper
;///////////////////////////////////////////////////////////////////////////
;===========================================================================
;勝利時画面移動停止
[Statedef 6000]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = roundstate != [3,4]
trigger1 = root,movetype = H
;===========================================================================
;オラムダ時画面移動停止
[Statedef 6001]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 4900

;===========================================================================
;スパコン背景
[Statedef 7000]
ctrl = 0
anim = 20000

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = time <= 29
flag = NoFG
flag2 = NoBG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7300
id = 7300
pos = 0,0
postype = back
removetime = 30
scale = .84,1.08
sprpriority = -20
pausemovetime = 30
supermovetime = 30

;cut in
[State 0, explod]
type = explod
trigger1 = time = 7
anim = 7000
id = 7000
pos = -20,170
postype = back
removetime = 23
sprpriority = -10
pausemovetime = 23
supermovetime = 23

[State 8000, ModifyExplod-3]
type = ModifyExplod
trigger1 = Numexplod(7000)
Id = 7000
postype = back
pos = ceil(-20+((random%16)*ifelse((time%6=[1,3]),-1,1))),ceil(170+((random%16)*ifelse((time%6=[1,3]),-1,1)))
scale = ifelse(time>=22,2,.2+((time-6)*.125))*.833,ifelse(time>=22,2,.2+((time-6)*.125))*1.07

[State 0, end]
type = DestroySelf
trigger1 = time = 31

;===========================================================================
;オラムダ背景（cut）
[Statedef 4950]
ctrl = 0
anim = 20000

;back
[State 0, assert]
type = assertspecial
trigger1 = time <= 32
flag = NoBG
flag2 = NoFG

;cut in
[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7001
id = 7001
pos = -200,100
postype = back
removetime = -1
scale = .84,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

;cut in
[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7002
id = 7001
pos = -200,100
postype = back
removetime = -1
scale = .84,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(7001)
trigger1 = time <= 20
id = 7001
pos = ceil(-200+(time*10)),110
postype = back

[State 0, explod]
type = removeexplod
trigger1 = root,stateno != 4900
id = 7001

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 4900

;===========================================================================
;メッセージアイコン
[Statedef 7500]
ctrl = 0
anim = 20000

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(0)
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = time > 1
trigger1 = var(0)
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND ON
[Statedef 7501]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7500
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7505
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !root,var(0)
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 1
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;DANGER!
[Statedef 7502]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7501
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7506
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,var(1) > 20
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 2
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND CRUSH
[Statedef 7503]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7502
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7507
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 4000
trigger1 = root,stateno != 4100
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
var(0) = 1
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 3
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;FIRST ATTACK
[Statedef 7504]
ctrl = 0
anim = 20000

[State 0, var]
type = varset
trigger1 = !time
var(8) = 2
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7503
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7508
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;GUARD CANCEL
[Statedef 7505]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7504
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7509
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 700
trigger1 = root,stateno != 10700
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 5
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;スタンドゲージ
 

;===========================================================================
;タンデム背景+エフェクト
[Statedef 8000]
ctrl = 0
anim = 20000
sprpriority = 5

;efe
[State 0, anim]
type = changeanim
trigger1 = time = 2
value = 8000

[State 0, anim]
type = changeanim
trigger1 = root,stateno != 3000
value = 8001
persistent = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

[State 0, assert]
type = bindtoroot
trigger1 = 1
pos = 0,0

;back
[State 0, assert]
type = assertspecial
trigger1 = time <= 119
flag = NoBG
flag2 = NoFG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7310
id = 7310
pos = 0,0
postype = back
removetime = 120
scale = .842,1.08
sprpriority = -20
ownpal = 1
pausemovetime = 120
supermovetime = 120
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 7000
id = 7000
pos = -200,100
postype = back
removetime = 120
scale = .842,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(7000)
trigger1 = time <= 10
id = 7000
pos = ceil(-200+(time*20)),110
postype = back

[State 0, end]
type = DestroySelf
trigger1 = anim = 8001 && !animtime

;===========================================================================
;勝利アイコン
[Statedef 9100]
ctrl = 0
anim = 20000

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "config"
stateno = 9105
id = 9105
pausemovetime = 999999
supermovetime = 999999
postype = p1

;「WIN」
[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 1
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9102
pos = -285,80
postype = left
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time <= 20
id = 9102
pos = ceil(-285+(time*15)),80
postype = left

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time >= 81
id = 9102
pos = ceil(15-((time-80)*15)),80
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 2
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9103
pos = 130,80
postype = right
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time <= 20
id = 9103
pos = ceil(130-(time*15)),80
postype = right

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time >= 81
id = 9103
pos = ceil(-170+((time-80)*15)),80
postype = right

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,28

;「To Be Continued...」
[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 1
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(19)
trigger2 = root,fvar(19)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9100
id = 9100
pos = 412,210
postype = left
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9100)
trigger1 = time <= 40
id = 9100
pos = ceil(412-((time-20)*20)),210
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 2
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(19)
trigger2 = root,fvar(19)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9101
id = 9101
pos = -412,210
postype = right
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9101)
trigger1 = time <= 40
id = 9101
pos = ceil(-412+((time-20)*20)),210
postype = right

;===========================================================================
;敗北演出
[Statedef 9200]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
removetime = 60
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8200
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8205
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8206
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8202
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8207
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8203
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8208
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 9000, DestroySelf]
type = ChangeState
trigger1 = Root,StateNo=5150
trigger2 = !numexplod(9200)
value = 9205

;---------------------------------------------------------------------------
;敗北演出2(蜂の巣)
[Statedef 9201]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
fvar(2) = 0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time > 6
fvar(2) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = 0;-1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;穴
[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9110
pos = 16,17
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9111
pos = 24,117
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110
id = 9112
pos = 9,212
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9113
pos = 40,18
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9114
pos = 43,115
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9115
pos = 22,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9116
pos = 92,4
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9117
pos = 89,127
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9118
pos = 36,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9111
id = 9119
pos = 119,38
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110
id = 9120
pos = 124,100
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 12
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110+var(10)
id = 9121
pos = 88,188
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9111
id = 9122
pos = 133,112
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9110
id = 9123
pos = 131,190
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9124
pos = 177,68
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9125
pos = 157,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 22
anim = 9110
id = 9126
pos = 166,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -14
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 9110
id = 9127
pos = 187,28
postype = back
bindtime = -1
ownpal = 0
sprpriority = -13
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9110)
id = 9110
pos = ceil(16-fvar(2)),17
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9111)
id = 9111
pos = ceil(24-fvar(2)),117
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9112)
id = 9112
pos = ceil(9-fvar(2)),212
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9113)
id = 9113
pos = ceil(40-fvar(2)),18
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9114)
id = 9114
pos = ceil(43-fvar(2)),115
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9115)
id = 9115
pos = ceil(22-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9116)
id = 9116
pos = ceil(92-fvar(2)),4
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9117)
id = 9117
pos = ceil(89-fvar(2)),127
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9118)
id = 9118
pos = ceil(36-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9119)
id = 9119
pos = ceil(119-fvar(2)),38
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9120)
id = 9120
pos = ceil(124-fvar(2)),100
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9121)
id = 9121
pos = ceil(81-fvar(2)),188
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9122)
id = 9122
pos = ceil(133-fvar(2)),112
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9123)
id = 9123
pos = ceil(131-fvar(2)),190
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9124)
id = 9124
pos = ceil(177-fvar(2)),68
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9125)
id = 9125
pos = ceil(166-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9126)
id = 9126
pos = ceil(157-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9127)
id = 9127
pos = ceil(187-fvar(2)),28
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9110

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9111

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9112

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9113

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9114

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9115

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9116

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9117

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9118

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9119

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9120

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9121

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9122

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9123

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9124

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9125

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9126

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9127

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出3(血)
[Statedef 9202]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(2) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time >= 6
fvar(2) = fvar(0)
ignorehitpause = 1


;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;血
[State 0, explod]
type = explod
trigger1 = time = 3
anim = 9150+random%3
id = 9150
pos = 42,9
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 9150+random%3
id = 9151
pos = 18,122
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 5
anim = 9150+random%3
id = 9152
pos = 24,196
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9150+random%3
id = 9153
pos = 180,55
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 7
anim = 9150+random%3
id = 9154
pos = 30,103
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9150+random%3
id = 9155
pos = 68,172
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9150+random%3
id = 9156
pos = 206,44
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 9150+random%3
id = 9157
pos = 49,106
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 11
anim = 9150+random%3
id = 9158
pos = 156,230
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9150+random%3
id = 9159
pos = 130,138
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 9150+random%3
id = 9160
pos = 191,227
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 9150+random%3
id = 9161
pos = 128,115
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9150)
id = 9150
pos = ceil(42-fvar(2)),9
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9151)
id = 9151
pos = ceil(18-fvar(2)),122
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9152)
id = 9152
pos = ceil(24-fvar(2)),196
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9153)
id = 9153
pos = ceil(180-fvar(2)),55
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9154)
id = 9154
pos = ceil(30-fvar(2)),103
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9155)
id = 9155
pos = ceil(68-fvar(2)),172
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9156)
id = 9156
pos = ceil(206-fvar(2)),44
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9157)
id = 9157
pos = ceil(49-fvar(2)),106
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9158)
id = 9158
pos = ceil(156-fvar(2)),230
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9159)
id = 9159
pos = ceil(166-fvar(2)),138
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9160)
id = 9160
pos = ceil(191-fvar(2)),227
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9161)
id = 9161
pos = ceil(128-fvar(2)),115
postype = back
ignorehitpause = 1



[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9150

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9151

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9152

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9153

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9154

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9155

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9156

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9157

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9158

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9159

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9160

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9161

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北時演出（横切断）
[Statedef 9203]
ctrl = 0
anim = 20000
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = .96*root,const(size.yscale)
;fvar(36) = -.55*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;敗北時演出（縦切断）
[Statedef 9204]
ctrl = 0
anim = 20000
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -1.15*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 1.15*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = 3*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;===========================================================================
;アーマーテイクオフ(helper)
[Statedef 12010]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
anim = 20000
sprpriority = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, pos]
type = posset
trigger1 = !time
x = 0
y = -140

[State 0, assert]
type = assertspecial
trigger1 = parent,var(17) < 9
trigger1 = time < 12
trigger1 = !(time%2)
flag = Invisible

[State 0, snd]
type = playsnd
triggerall = !time
trigger1 = parent,var(17) = 1
trigger2 = parent,var(17) = 3
trigger3 = parent,var(17) = 5
trigger4 = parent,var(17) = 7
trigger5 = parent,var(17) = 9
value = 6,1

[State 0, snd]
type = playsnd
triggerall = !time
trigger1 = parent,var(17) = 0
trigger2 = parent,var(17) = 2
trigger3 = parent,var(17) = 4
trigger4 = parent,var(17) = 8
value = 6,3

[State 0, turn]
type = turn
triggerall = !time
trigger1 = parent,var(17) = 1
trigger2 = parent,var(17) = 3
trigger3 = parent,var(17) = 5
trigger4 = parent,var(17) = 7

[State 0, anim]
type = changeanim
triggerall = !time
trigger1 = parent,var(17) = 0
value = 12030

[State 0, anim]
type = changeanim
triggerall = !time
trigger1 = parent,var(17) = 1
trigger2 = parent,var(17) = 2
trigger3 = parent,var(17) = 5
trigger4 = parent,var(17) = 6
value = 12031

[State 0, anim]
type = changeanim
triggerall = !time
trigger1 = parent,var(17) = 4
trigger2 = parent,var(17) = 7
value = 12032

[State 0, anim]
type = changeanim
triggerall = !time
trigger1 = parent,var(17) = 3
;trigger2 = parent,var(17) = 8
value = 12033

[State 0, scale]
type = angledraw
trigger1 = parent,var(17) < 9
trigger1 = time > 20
scale = (const(size.xscale)-(.045*(time-20))),(const(size.yscale)-(.045*(time-20)))

[State 0, spr]
type = sprpriority
trigger1 = time > 20
value = -2

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12040
pos = 160,80
postype = back
scale = const(size.xscale),const(size.yscale)
sprpriority = 4

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12041
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12042
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 4

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12043
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12044
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = -3

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12045
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = -4

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12046
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = -3

[State 0, explod]
type = explod
triggerall = !time
trigger1 = parent,var(17) = 9
anim = 12047
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3

[State 0, explod]
type = explod
triggerall = time = 28
trigger1 = parent,var(17) = 9
anim = 12048
id = 12048
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3

[State 0, explod]
type = explod
triggerall = time = 28
trigger1 = parent,var(17) = 9
anim = 12049
id = 12049
pos = 160,80
postype = back
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = -3

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12050
pos = 160,80
postype = back
vel = 0,-20
scale = const(size.xscale),const(size.yscale)
sprpriority = -2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12051
pos = 160,80
postype = back
vel = 0,20
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12052
pos = 160,80
postype = back
vel = 18,-18
scale = const(size.xscale),const(size.yscale)
sprpriority = -2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12053
pos = 160,80
postype = back
vel = 18,18
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12054
pos = 160,80
postype = back
vel = -18,-18
scale = const(size.xscale),const(size.yscale)
sprpriority = -2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12055
pos = 160,80
postype = back
vel = -18,18
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12056
pos = 160,80
postype = back
vel = -20,0
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
ignorehitpause = 1

[State 0, explod]
type = explod
triggerall = time = 91
trigger1 = parent,var(17) = 9
anim = 12057
pos = 160,80
postype = back
vel = 20,0
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime && parent,var(17) < 9
trigger2 = time > 92 && parent,var(17) = 9 && Ishelper(12010)
trigger3 = time > 72 && parent,var(17) = 9 && Ishelper(12011)
;(root,stateno != [12001,12002])
;===========================================================================
;アーマーテイクオフ(helper2)
[Statedef 12011]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
anim = 20000
sprpriority = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, pos]
type = posset
trigger1 = !time
x = 0
y = -140

[State 0, assert]
type = assertspecial
trigger1 = parent,var(17) < 9
trigger1 = time < 12
trigger1 = !(time%2)
flag = Invisible

[State 0, anim]
type = changeanim
trigger1 = !time
value = 12031

[State 0, scale]
type = angledraw
trigger1 = time > 20
scale = (const(size.xscale)-(.045*(time-20))),(const(size.yscale)-(.045*(time-20)))

[State 0, scale]
type = destroyself
trigger1 = time = 30

;===========================================================================
;ラストショット（弾1）
 

;===========================================================================
;レクイエム(helper)
 

;===========================================================================
;タンデムコマンド記憶helper
[Statedef 30000]
type = U
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 0, var]
type = varset
trigger1 = root,var(22) = [1,60]
trigger1 = !var(root,var(22)-1)
var(root,var(22)-1) = root,var(21)

[State 0, var]
type = varset
trigger1 = root,var(22) = [61,100]
trigger1 = !var(root,var(22)-61)
fvar(root,var(22)-1) = root,var(21)

[State 0, var]
type = parentvarset
trigger1 = parent,var(5) = [0,59]
var(4) = var(parent,var(5))

[State 0, var]
type = parentvarset
trigger1 = parent,var(5) = [60,99]
var(4) = fvar(parent,var(5)-60)

[State 0, state]
type = parentvarset
trigger1 = !time
var(38) = -1
[State 0, state]
type = parentvarset
trigger1 = parent,stateno = 3051
var(38) = 0
persistent = 0
[State 0, state]
type = parentvaradd
trigger1 = var(38) >= 0
var(38) = 1

[State 0, end]
type = DestroySelf
triggerall = time > 1
trigger1 = parent,stateno = 10000
trigger2 = root,movetype = H
trigger3 = parent,movetype = H

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 890]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040
;===========================================================================
[Statedef 4900];オラムダ合戦
type = S
movetype = A
physics = N
sprpriority = 0
velset = 0,0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda back"
stateno = 9300
id = 9300
postype = back
trigger1 = id > enemy,id

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda cut"
stateno = 4950
id = 4950
postype = back

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = playsnd
trigger1 = !time
value = 3,4

[State 0, end]
type = changeanim
trigger1 = time < 30
value = anim
elem = animelemno(0)

[State 0, end]
type = changeanim
trigger1 = time = 30
value = 14900

[State 0, end]
type = playsnd
trigger1 = time = 30
value = 3,5

[State 0, end]
type = playsnd
triggerall = anim = 14900
trigger1 = animelem = 3
trigger2 = animelem = 10
value = 2,3

[State 0, end]
type = playsnd
triggerall = anim = 14900
trigger1 = !(gametime%10)
value = 0,5

[State 0, end]
type = explod
triggerall = anim = 14900
trigger1 = !enemy,numexplod(6004)
trigger1 = !(gametime%5)
pos = ceil(P2BodyDist X*.5),-60
postype = p1
anim = 6004
id = 6004
random = 24,24
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, vel]
type = velset
trigger1 = time = 35
y = -.1

[State 0, var]
type = varset
trigger1 = !time
var(49) = 0

[State 0, var]
type = varadd
triggerall = time > 35
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
var(49) = 1

[State 0, change];勝利
type = changestate
trigger1 = time = 250
trigger1 = var(49) > enemy,var(49)
value = 4910

[State 0, change];敗北
type = changestate
trigger1 = time = 250
trigger1 = var(49) < enemy,var(49)
value = 4920

[State 0, change];同じ
type = changestate
trigger1 = time = 250
trigger1 = var(49) = enemy,var(49)
value = 4910
;------------------------------------------------------------------------------
;オラムダ勝利（落下）
[Statedef 4910]
ctrl = 0
anim = 10044
physics = A
type = A

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;オラムダ敗北（吹っ飛び）
[Statedef 4920]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 4921

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び（壁激突）
[Statedef 4921]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 10
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 10
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 10
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 10

[State 0, vel]
type = veladd
trigger1 = time > 10
y = .4

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > -1
triggerall = alive
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;------------------------------------------------------------------------------
;超必背景（縦）
[Statedef 9300]
ctrl = 0
anim = 20000

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8210
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8215
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8211
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8216
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8212
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8217
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8213
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8218
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8210)
id = 8210
pos = 0,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8211)
id = 8211
pos = 107,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8212)
id = 8212
pos = 214,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8213)
id = 8213
postype = back
pos = 320,-(time*8)%512
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8215)
id = 8215
pos = 0,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8216)
id = 8216
pos = 107,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8217)
id = 8217
pos = 214,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8218)
id = 8218
pos = 320,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8210

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8211

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8212

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8213

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8215

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8216

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8217

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8218

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900

;-------------------------------------------------------------------------
;AI起動用ヘルパー
[Statedef 50000]
anim=20000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

;----------------------------------------------------------------------------------
; AIフラグセット
;----------------------------------------------------------------------------------
[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 10000,ﾌﾗｸﾞON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1

;----------------------------------------------------------------------------------
; 当て投げ
;----------------------------------------------------------------------------------
[State -1, 当て投げ分岐]
type = parentvarset
triggerall = roundstate = 2 && root,moveguarded = 2
triggerall = !root,var(36)
triggerall = root,p2bodydist x < 90
triggerall = root,p2statetype != A
triggerall = random < 200-(root,var(9))*100
trigger1 = root,stateno = 600
trigger2 = root,stateno = 610
trigger3 = root,stateno = 620
trigger4 = root,stateno = 400
trigger5 = root,stateno = 10400
trigger6 = root,stateno = 10600
trigger7 = root,stateno = 10610
trigger8 = root,stateno = 10220 && prevstateno = 100
var(36) = 20

[State -1, あて投げモード解除]
type = parentvarset
triggerall = root,var(36) = 20
trigger1 = root,p2statetype = A || root,p2statetype = L
trigger2 = root,movetype = H
trigger3 = root,p2bodydist x > 100
trigger4 = (root,stateno = [800,802])
var(36) = 0

;----------------------------------------------------------------------------------
; コンボ分岐
;----------------------------------------------------------------------------------
;Soff始動

[State -1, コンボ分岐];J攻から
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = !root,var(39)
triggerall = random < 500+(root,movehit)*300
trigger1 = root,stateno = 610 && root,vel x >= 0
trigger2 = root,stateno = 620 && root,vel x >= 0
var(36) = 1
ignorehitpause = 1

[State -1, コンボ分岐];Sonへ行くかどうか
type = parentvarset
triggerall = roundstate = 2 && root,movecontact && !root,Ishelper
triggerall = root,var(36) = 1
triggerall = !root,var(35)
triggerall = !root,var(39)
;trigger1 = root,stateno = 420
;trigger1 = root,p2bodydist x > 70
trigger1 = root,stateno = 420
trigger1 = root,moveguarded
var(36) = 2
ignorehitpause = 1

[State -1, コンボ分岐];SS等へ
type = parentvarset
triggerall = roundstate = 2 && root,movecontact && !root,Ishelper
triggerall = root,var(36) = 2
triggerall = !root,var(35)
triggerall = !root,var(39)
trigger1 = root,stateno = 400 && root,prevstateno = 2
var(36) = 3
ignorehitpause = 1

;SSヒット時分岐
[State -1, コンボ分岐]
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = (!root,var(35)) || (root,var(35) = 1 || root,var(35) = 11) || (root,var(35) = 23 || root,var(35) = 33) || (root,var(35) = 14&&root,p2bodydist x < 45)
trigger1 = (helper(10000),stateno = [1252,1260]) && helper(10000),movecontact = 1
;trigger1 = root,p2bodydist x < 120
var(36) = 4
ignorehitpause = 1

;SSヒット時分岐
[State -1, コンボ分岐]
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = root,var(35) = 12
trigger1 = root,stateno = 422 && root,movecontact
var(36) = 14
ignorehitpause = 1

;SSヒット時分岐
[State -1, コンボ分岐]
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
;triggerall = !root,var(36)
triggerall = !root,var(39)
;triggerall = !root,var(35)
trigger1 = (helper(10000),stateno = [1252,1260]) && helper(10000),movecontact = 1
trigger1 = (root,p2bodydist x = [120,-80])
var(36) = 15
ignorehitpause = 1
;SSヒット時分岐
[State -1, コンボ分岐]
type = parentvarset
trigger1 = root,stateno = 400
trigger1 = root,var(36) = 15
var(36) = 0
ignorehitpause = 1

;SSヒット時分岐
[State -1, コンボ分岐]
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = root,var(35) = 2 || root,var(35) = 12
trigger1 = (helper(10000),stateno = [1252,1260]) && helper(10000),movecontact = 1
var(36) = 5;ifelse(random<500,5,6)
ignorehitpause = 1

[State -1, コンボ分岐];屈弱から(コンボ5)
type = parentvarset
triggerall = roundstate = 2 && root,movecontact && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = !root,var(39)
trigger1 = root,stateno = 400
var(36) = 7
ignorehitpause = 1
;(出現かデムへ)

[State -1, コンボ分岐];テイクオフへ
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 2 && !root,Ishelper
triggerall = !root,var(35)
triggerall = !root,var(39)
trigger1 = root,var(36) = 7
trigger1 = power >= 1000
trigger1 = root,stateno = 220
trigger1 = random < 100+(p2life<120)*400
trigger1 = root,p2bodydist x < 50
var(36) = 8
ignorehitpause = 1

[State -1, コンボ分岐];補正無しテイクオフへ
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 2 && !root,Ishelper
triggerall = !root,var(35)
triggerall = !root,var(39)
trigger1 = root,var(36) = 1
trigger1 = power >= 1000
trigger1 = root,stateno = 620 && (root,var(57) = 1 ||enemynear(root,var(48)),BackEdgeBodyDist<15)
trigger1 = (random < 400+power/10)+(p2life<230)*400
var(36) = 9
ignorehitpause = 1

[State -1, コンボ分岐];補正無しデムコンへ
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 3 && !root,Ishelper
triggerall = !root,var(35)
triggerall = !root,var(39)
triggerall = !root,var(56)
trigger1 = root,var(36) = 9 && !(p2life < 230)
trigger1 = power >= 2000
trigger1 = root,stateno = 420
trigger1 = (random < 300+power/10)
var(36) = 10
ignorehitpause = 1

[State -1, コンボ分岐];デムへ
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 2 && !root,Ishelper
triggerall = !root,var(35)
triggerall = !root,var(39)
triggerall = !root,var(56)
trigger1 = root,var(36) = 1
trigger1 = power >= 2000
trigger1 = root,stateno = 422
trigger1 = enemynear(root,var(48)),BackEdgeBodyDist < 27
trigger1 = root,p2bodydist x < 15
trigger1 = (random < 400+power/10)
var(36) = 11
ignorehitpause = 1

[State -1, コンボ分岐];デムへ
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 2 && !root,Ishelper
triggerall = !root,var(35)
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = !root,var(56)
trigger1 = power >= 1000
trigger1 = root,stateno = 420
var(36) = ifelse(root,p2bodydist x <30&&random < 400+power/10,12,13)
ignorehitpause = 1

;----------------------------------------------------------------------------------
;SSルートを変える
[State -1, コンボ分岐]
type = parentvarset
trigger1 = root,var(35) = 3
trigger1 = root,stateno = 50
var(35) = 23

;SSルートを変える
[State -1, コンボ分岐]
type = null;parentvarset
triggerall = root,var(35) = 23
trigger1 = root,stateno = 52 && p2bodydist x > 60
trigger2 = root,stateno = 400 && !root,movecontact
trigger3 = root,stateno = 100 && root,anim = 101 && root,p2bodydist x > 45
var(35) = 1
ignorehitpause = 1

;SSルートを変える
[State -1, コンボ分岐]
type = parentvarset
trigger1 = root,var(35) = 4
trigger1 = root,stateno = 105
trigger1 = root,backedgebodydist < 60
var(35) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
;Son始動
[State -1, コンボ分岐];J攻からデムとかいろいろ行く
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
trigger1 = root,stateno = [10600,10620]
trigger1 = random < 999-(moveguarded)*600
var(36) = ifelse(root,pos y <=-40,101,ifelse(power/10&&(root,var(57)=1||enemynear(root,var(48)),BackEdgeBodyDist<15),100,101))
ignorehitpause = 1

;
[State -1, コンボ分岐];弱等＞屈強からゲージ技狙い
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)

triggerall = power > 1000
triggerall = root,prevstateno != [100,105]
trigger1 = random < 300+(power/10)
trigger1 = root,stateno = 10201 || root,stateno = 10400
trigger1 = root,p2bodydist x < 25
trigger2 = random < 360+(power/10)
trigger2 = root,stateno = root,stateno = 10210
trigger2 = root,p2bodydist x < 18
var(36) = 104
ignorehitpause = 1

[State -1, コンボ分岐];弱から屈中
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = root,prevstateno != [100,105]
trigger1 = root,stateno = 10200 || root,stateno = 10201 || root,stateno = 10400
trigger1 = root,p2bodydist x < 60
var(36) = 103
ignorehitpause = 1

[State -1, コンボ分岐];中＞強
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = root,prevstateno != [100,105]
trigger1 = root,stateno = 10210
trigger1 = root,p2bodydist x < 42
var(36) = 105
ignorehitpause = 1

[State -1, コンボ分岐];4中＞次の強＞
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = root,prevstateno != [100,105]
trigger1 = root,stateno = 10212
trigger1 = root,p2bodydist x < 68
var(36) = 106
ignorehitpause = 1

[State -1, コンボ分岐];屈強へ
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
trigger1 = root,stateno = 10200 && root,p2bodydist x >= 44
trigger2 = root,stateno = 10410
var(36) = 107
ignorehitpause = 1

[State -1, コンボ分岐];D屈弱から
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
trigger1 = root,prevstateno = 100 && root,stateno = 10400
var(36) = 108
ignorehitpause = 1

[State -1, コンボ分岐];デムへ
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = root,var(36) = 108
triggerall = !root,var(35)
trigger1 = root,prevstateno = 100 && root,stateno = 10400 && root,p2bodydist x < 11
var(36) = 109
ignorehitpause = 1

[State -1, コンボ分岐];屈強近hit＞デムへ
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
trigger1 = root,stateno = 10420 && root,p2bodydist x < 12
trigger1 = random < 400
var(36) = 110
ignorehitpause = 1

[State -1, コンボ分岐];SonSShit
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
trigger1 = root,stateno = 11202; && root,p2bodydist x < 30
;trigger1 = random < 800
var(36) = 111
ignorehitpause = 1

;----------------------------------------------------------------------------------
[State -1, コンボ分岐];;画面端デム後J攻へ
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = root,var(39) != 10002
trigger1 = root,stateno = 42; && p2statetype = S
var(36) = 1000
ignorehitpause = 1

[State -1, コンボ分岐];SShit後S無屈強hit後
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = root,var(36) = 1000
triggerall = !root,var(35)
trigger1 = root,stateno = 422 && root,prevstateno = 100
var(36) = 1001
ignorehitpause = 1

[State -1, コンボ分岐];針串刺しルートへ
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = root,var(36) = 1001
triggerall = !root,var(35)
trigger1 = helper(10000),stateno = 9000
trigger1 = root,stateno = 422 && root,prevstateno = 100
trigger1 = p2life > 90 || power < 1000
var(36) = 1002
ignorehitpause = 1

[State -1, コンボ分岐];とどめテイクオフ
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = root,var(36) = 1001
triggerall = !root,var(35)
trigger1 = helper(10000),stateno = 9000
trigger1 = root,stateno = 422 && root,prevstateno = 100
trigger1 = p2life <= 90 && power >= 1000
var(36) = 1004
ignorehitpause = 1

[State -1, コンボ分岐];補正無しコンの続きへ
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = root,var(39) = 10002
trigger1 = root,stateno = 42
var(36) = 1003
ignorehitpause = 1

[State -1, コンボ分岐];相手屈かつnot画面端
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(35)
triggerall = root,var(39) != 10002
trigger1 = root,stateno = 100
trigger1 = !(enemynear(root,var(48)),backedgebodydist < 10)
trigger1 = helper(10000),stateno = 30320 && helper(10000),var(5) = 15
var(36) = 1005
ignorehitpause = 1

;1005の繋ぎ
[State 0, var]
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = root,var(59)
trigger1 = root,var(36) = 1005
trigger1 = root,stateno = 1100 && root,time = 2
var(36) = 1006

;------------------
;挟んでデム後
[State -1, コンボ分岐];J中からの基本コンボへ(not画面端)
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = root,var(36) = 1000
triggerall = !root,var(35)
triggerall = root,var(39) = 10000 || root,var(39) = 10003
trigger1 = (enemynear(root,var(48)),BackEdgeBodyDist >= 15)
trigger1 = root,stateno = 610 && root,var(57) = 1
var(36) = 1
ignorehitpause = 1
;------------------
;対空デム後
[State -1, コンボ分岐]
type = parentvarset
triggerall = root,var(39) = 10005
trigger1 = enemynear(root,var(48)),statetype != A
trigger2 = root,p2bodydist x > 150
var(39) = 0
ignorehitpause = 1

;------------------
;
[State -1, コンボ調整]
type = varset
trigger1 = (enemynear(root,var(48)),authorname = "amarimono" || enemynear(root,var(48)),authorname = "あまりもの") && enemynear(root,var(48)),var(49)=10000
trigger2 = enemynear(root,var(48)),authorname = "y.y" && enemynear(root,var(48)),name = "jotaro"
trigger2 = enemynear(root,var(48)),var(4)=1
var(10) = 10
ignorehitpause = 1

[State -1, コンボ調整]
type = varset
trigger1 = (enemynear(root,var(48)),authorname = "amarimono" || enemynear(root,var(48)),authorname = "あまりもの")
trigger1 = (enemynear(root,var(48)),var(49)=0)
trigger2 = (enemynear(root,var(48)),authorname = "y.y" && enemynear(root,var(48)),name = "jotaro")
trigger2 = (enemynear(root,var(48)),var(4)=0)
var(10) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
[State -1, レクイエム成功]
type = parentvarset
trigger1 = enemynear(root,var(48)),stateno = 2280 && enemynear(root,var(48)),anim = 5110
var(35) = 50
ignorehitpause = 1

[State -1, J強hit]
type = parentvarset
trigger1 = root,var(35) = 50
trigger1 = root,stateno = 620 && root,movehit
var(35) = 51
ignorehitpause = 1

[State -1, リセット]
type = parentvarset
trigger1=  root,var(35) >= 50
trigger1 = (enemynear(root,var(48)),movetype != H && enemynear(root,var(48)),stateno != 2280)
var(35) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; 相手クラッシュ時
;----------------------------------------------------------------------------------
[State -1, コンボ分岐];デムへ
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(39)
triggerall = !root,var(9)
triggerall = p2statetype != A
triggerall = power >= 1000
triggerall = enemynear(root,var(48)),time < 10
triggerall = ((p2stateno = [4000,4100]) || (p2stateno = [6000,6001]) && p2movetype = H) || (p2stateno = 5910)
trigger1 = root,stateno = 210 || root,stateno = 220 || (root,stateno = [410,420]) || (root,stateno = [10200,10222]) || (root,stateno = [10400,10520]) || root,stateno = 11100 || root,stateno = 10950
trigger1 = random < 800
trigger1 = root,p2bodydist x < 120
var(36) = 180

;----------------------------------------------------------------------------------
; off判別
;----------------------------------------------------------------------------------
;遠くでガードしたら
[State -1, コンボ分岐]
type = parentvarset
trigger1 = root,var(0)
trigger1 = (root,stateno = [150,153]) && root,p2bodydist x > 150
trigger1 = random < 20
var(55) = 1
ignorehitpause = 1

[State -1, コンボ分岐]
type = parentvarset
trigger1 = !root,var(0)
trigger2 = root,p2bodydist x < 55
var(55) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; めくり対策
;----------------------------------------------------------------------------------
[state ]
type=posset
trigger1=1
x=root,pos x-30*facing
y=0
[state ]
type=varadd
trigger1=var(57):=0||1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x+30*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x-60*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x+60*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x-90*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x+90*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist

[state ]
type=turn
trigger1=facing!= root,facing

;----------------------------------------------------------------------------------
; 立ち下段学習
;----------------------------------------------------------------------------------
;学習用
[State -2];地上中段＆空中下段学習用
type = varset
trigger1 = root,stateno = 131||(root,stateno = [152,153])
var(4) = 1
ignorehitpause = 1

[State -2];地上中段＆空中下段学習用
type = varset
trigger1 = root,stateno = 130||(root,stateno = [150,151])
var(4) = -1
ignorehitpause = 1

[State -2];地上＆空中下段中段学習用
type = varset
trigger1 = !((root,stateno = [130,131])||(root,stateno = [150,153]))
trigger1 = root,time >= 2
var(4) = 0
ignorehitpause = 1

[State -2];地上中段学習用
type = varset
trigger1 = var(4)=1
trigger1 = !var(5)
trigger1 = root,movetype = H
trigger1 = root,stateno >= 200
trigger1 = root,P2Statetype != A
trigger1 = root,P2Movetype = A
var(5) = root,P2Stateno
ignorehitpause = 1

[State -2];地上中段学習用
type = varset
trigger1 = var(4)=-1
trigger1 = var(5)=root,P2stateno
trigger1 = root,movetype = H
trigger1 = root,stateno > 200
trigger1 = root,P2statetype != A
trigger1 = root,P2movetype = A
var(5) = 0
ignorehitpause = 1

[State -2];立ち下段学習用
type = varset
trigger1 = var(4)=-1
trigger1 = !var(6)
trigger1 = root,movetype = H
trigger1 = root,stateno >= 200
trigger1 = root,P2Statetype = S
trigger1 = root,P2Movetype = A
var(6) = root,P2Stateno
ignorehitpause = 1

[State -2];立ち下段学習用
type = varset
trigger1 = var(4)=1
trigger1 = var(6)=root,P2Stateno
trigger1 = root,movetype = H
trigger1 = root,stateno > 200
trigger1 = root,P2Statetype = S
trigger1 = root,P2Movetype = A
var(6) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; 暗転計測
;----------------------------------------------------------------------------------
[State -1]
type = VarSet
trigger1 = root,var(59) > 0
trigger1 = enemynear(root,var(48)),time = 1
v = 7
value = 0
[State -1]
type = VarAdd
trigger1 = root,var(59)
v = 7
value = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; ガードしている時間の計測(ガーキャン条件用)
;----------------------------------------------------------------------------------
[State -1]
type = Varadd
trigger1 = root,var(59)
trigger1 = (root,stateno = [150,153]) || root,stateno = 710
var(8) = 1
ignorehitpause = 1
[State -1]
type = Varset
trigger1 = root,stateno != [150,153]
trigger1 = root,stateno != 710
var(8) = 0
ignorehitpause = 1

;===========================================================================
; ヘルパー式射撃感知
;===========================================================================
[Statedef 51000]
anim=20000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[state 51000]	;ID初期値設定開始
type = varset
trigger1 = var(0) = 0
trigger1 = var(1) = 0
v = 1
value = 70+root,RoundsExisted*200

[state 30000]	;定期更新用ヘルパー射出
type=helper
trigger1 = NumHelper(51010)=0 && ishelper
trigger1 = roundstate<=2 && root,alive
helpertype=normal
name="Clear"
stateno=51010
ID=51010
pos=0,0
pausemovetime=2147483647
supermovetime=2147483647
persistent = 999

[state 30000]	;常駐ヘルパーの除外
type = varadd
trigger1 = var(0) = 0
trigger1 = var(1) > 0
trigger1 = !playerIDexist(var(1))
v = 1
value = -1

[state 30000]	;ID初期値確定フラグ
type = varadd
trigger1 = var(0) = 0
trigger1 = playerIDexist(var(1))
trigger1 = var(0):= 1
v = 1
value = 1

------------------------------ loop start -----------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

------------------------------- loop end ------------------------------------

[statedef 51010]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 20000

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[state 30000]
type = assertspecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[state 30000]
type = Nothitby
trigger1 = 1
value = SCA

[state 30000]	;ID初期値設定開始
type = varset
trigger1 = var(30) = 0
trigger1 = var(31) = 0
v = 31
value = parent,var(1)+120+(parent,var(1)=58)*1000

[state 30000]	;既存ヘルパーの除外
type = varadd
trigger1 = var(30) = 0
trigger1 = var(31) > 0
trigger1 = !playerIDexist(var(31))
v = 31
value = -1

[state 30000]	;ID初期値確定フラグ
type = varadd
trigger1 = var(30) = 0
trigger1 = playerIDexist(var(31))
trigger1 = var(30):= 1
v = 31
value = 1

[state 30000]	;フィードバック
type = parentvarset
trigger1 = var(30) = 1
trigger1 = parent,var(1)<var(31)
v = 1
value = var(31)

[state 30000]	;消滅
type = destroyself
trigger1 = var(30) = 1

;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.
[ja.Quotes]
victory1 = "ブラボー！\nおお…ブラボー！！"
victory2 = "悪あがきでおそってくるか\n見苦しいな"
victory3 = "立ちな！\nもう一度切り刻んでやるぜ"
victory4 = "ノンノンノン！\n無理といったろう"
victory5 = "これしきの威力しかないのか？"
victory6 = "「ゾッ」としたようだな"
victory7 = "おめー　おれが負けるとでも？"
victory8 = "後は閻魔様にまかせたぜ"
