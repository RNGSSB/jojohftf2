[Statedef 12200 - Requiem (Stand ver)]
type = S
movetype = I
physics = N
ctrl = 0
anim = 12206
velset = 0,0
sprpriority = 3
facep2 = 1;-(prevstateno=[100,119])

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0
player = 15,15

[State 0, super]
type = superpause
trigger1 = time = 8
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 7100
id = 7100
pos = ceil(12*const(size.xscale)),ceil(-91*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 5
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 8
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 0,8

[State 20000]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "moji"
ID = 20022
pos = 30, -105
postype = p1
facing = facing
stateno = 20022
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 0, snd]
type = playsnd
trigger1 = time = 7
value = 4,5
channel = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(1) = 34
anim = 12205
id = 12205
pos = 0,0
postype = p1
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 9
value = 6,6

[State 0, explod]
type = explod
trigger1 = time = 61
anim = 12210
id = 12210
pos = ceil(12*const(size.xscale)),ceil(-50*const(size.yscale))
postype = p1
removetime = 80
scale = .1,.1
sprpriority = -2
pausemovetime = 0
supermovetime = 0
removeongethit = 1
bindtime = -1

[State 0, explod]
type = modifyexplod
trigger1 = time > 61
scale = .1+((time-61)*.025),.1+((time-61)*.025)
id = 12210

[state 4100, 1]
type = envcolor
trigger1 = time = 51
value = 0,0,0
time = 2
persistent = 0
ignorehitpause = 1

[state 4100, 1]
type = envcolor
trigger1 = time = 141
time = 2
persistent = 0
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = time >= 139
trigger1 = !numhelper(12230)
helpertype = normal
name = "requiem"
stateno = 12230
id = 12230
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, nhb]
type = nothitby
trigger1 = time > 139
value = SCA

[State 0, end]
type = changestate
trigger1 = time > 140
value = 12201
 
[Statedef 12201]
type = A
movetype = A
physics = N
ctrl = 0
anim = 2201
velset = 0,0
sprpriority = 0
poweradd = -3000

[State Sound Effect]
type     = PlaySnd
trigger1 = !time
value    = S10,80
ignorehitpause = 1
volume = 300

[State ]
type=Explod
trigger1 = !time
anim=10238
sprpriority=214748364
postype=back
pos=0,-90
bindtime=-1
ownpal=1
ontop=1
removetime=8
pausemovetime = 9999
supermovetime = 9999
supermove = 1

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, explod]
type = explod
trigger1 = !time
anim = 12201
id = 12201
pos = 50,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
pausemovetime = 0
supermovetime = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 12220+(random%2)
id = 12220
pos = 0,0
postype = p2
facing = enemynear,facing
scale = 1,1
bindtime = -1
ontop = 1
removetime = 300
pausemovetime = 0
supermovetime = 0

[State 0, snd]
type = playsnd
trigger1 = time = 8
value = 4,6
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 25
value = 0,15

[State 0, end]
type = changestate
trigger1 = !numexplod(12201)
trigger2 = time > 25
value = 0
ctrl = 1

[Statedef 2250 - Requiem Start-up]
type = U
movetype = I
physics = N
ctrl = 0
anim = 12200
velset = 0,0
sprpriority = 3

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, vel]
type = velset
trigger1 = !time
x = root,fvar(20)

[State 0, vel]
type = velmul
trigger1 = vel x != 0
x = .9

[State 0, pos]
type = posfreeze
trigger1 = time = [11,43]
value = 1

[State 0, vel]
type = velset
trigger1 = time = 15
x = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0
player = 15,15

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 8
value = SCA

[State 0, nhb]
type = nothitby
trigger1 = time = [9,165]
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, btr]
type = bindtoroot
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = time <= 1
pos = 25,-240

[State 0, pos]
type = posset
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = time = 2
y = -210

[State 0, pos]
type = posadd
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = time <= 8
y = 30

[State 0, scale]
type = angledraw
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = time <= 8
scale = (const(size.xscale)*(.2+(time*.1))),(const(size.yscale)*(1.32-(time*.04)))

[State 0, super]
type = superpause
trigger1 = time = 13
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 7100
id = 7100
pos = ceil(12*const(size.xscale)),ceil(-91*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 5
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 13
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,29

[State 20000]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "moji"
ID = 20022
pos = 30, -105
postype = p1
facing = facing
stateno = 20022
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 0, snd]
type = playsnd
trigger1 = time = 13
value = 10900,0+random%3
channel = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) = 38
anim = 12205
id = 12205
pos = 0,0
postype = p1
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, explod]
type = explod
trigger1 = time = 65
anim = 12210
id = 12210
pos = ceil(12*const(size.xscale)),ceil(-50*const(size.yscale))
postype = p1
removetime = 80
scale = .1,.1
sprpriority = -2
pausemovetime = 0
supermovetime = 0
removeongethit = 1
bindtime = -1

[State 0, explod]
type = modifyexplod
trigger1 = time > 65
scale = .1+((time-65)*.025),.1+((time-65)*.025)
id = 12210

[State 0, snd]
type = playsnd
trigger1 = !time
value = 6,0

[State 0, snd]
type = playsnd
trigger1 = time = 65
value = 6,6

[state 4100, 1]
type = envcolor
trigger1 = time = 54
value = 0,0,0
time = 2
persistent = 0
ignorehitpause = 1

[state 4100, 1]
type = envcolor
trigger1 = time = 145
time = 2
persistent = 0
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = time >= 143
trigger1 = !numhelper(12230)
helpertype = normal
name = "requiem"
stateno = 12230
id = 12230
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, nhb]
type = nothitby
trigger1 = time > 143
value = SCA

[State 0, end]
type = changestate
trigger1 = time > 146
value = 10000

[Statedef 12230 - Requiem Hit Helper]
type = A
movetype = A
physics = N
ctrl = 0
anim = 12230

[State 0, reversal]
type = reversaldef
trigger1 = (time%3) = 0
reversal.attr = SCA,AA,AP,AT
pausetime = 0,0
sparkno = -1
hitsound = -1
numhits = 0
hitonce = 0
p2stateno = 2280

[State 0, hit]
type = hitdef
trigger1 = (time%3) = 1
attr = SCA,HT
priority = 1,Miss
affectteam = B
hitflag = MAF
guardflag = -1
sparkno = -1
hitsound = -1
numhits = 0
hitonce = 0
p2stateno = 2280
fall = 1

[State 0, hit]
type = hitdef
trigger1 = (time%3) = 2
attr = SCA,HA
priority = 1,Miss
affectteam = B
hitflag = MAF
guardflag = -1
sparkno = -1
hitsound = -1
numhits = 0
hitonce = 0
p2stateno = 2280
fall = 1

[State 0, end]
type = DestroySelf
trigger1 = time > 24

[Statedef 12150 - Laser Shot Proj]
type = A
movetype = A
physics = N
ctrl = 0
anim = 20000
velset = 0,0
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

[State 0, anim]
type = varset
trigger1 = !time
var(2) = parent,var(2)

[State 0, anim]
type = changeanim
trigger1 = time = 2
trigger1 = parent,var(2) = 0
value = 12158

[State 0, anim]
type = changeanim
trigger1 = time = 2
trigger1 = parent,var(2) = 1
value = 12164

[State 0, anim]
type = changeanim
trigger1 = time = 2
trigger1 = parent,var(2) = 3
value = 12169

[State 0, vel]
type = velset
trigger1 = time = 2
trigger1 = parent,var(2) = 0
x = 69*const(size.xscale)
y = 4.5*const(size.yscale)
;y = 8.5*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = time = 2
trigger1 = parent,var(2) = 1
x = 54*const(size.xscale)
y = -20*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = time = 2
trigger1 = parent,var(2) = 3
x = 54*const(size.xscale)
y = 54*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12151
trigger1 = parent,var(2) = 1
x = 6*const(size.xscale)
y = 52.5*const(size.yscale)
persistent = 0
[State 0, vel]
type = velset
trigger1 = anim = 12161
trigger1 = parent,var(2) = 3
x = 7.5*const(size.xscale)
y = -52.5*const(size.yscale)
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 12164
trigger1 = parent,var(2) = 1 || parent,var(2) = 3
trigger1 = pos y <= -200 || pos y >= 0
trigger2 = anim = 12169
trigger2 = parent,var(2) = 1 || parent,var(2) = 3
trigger2 = pos y >= 0
value = 12151

[State 0, anim]
type = changeanim
triggerall = anim = [12160,12168]
trigger1 = pos y <= -200
value = anim-10

[State 0, anim]
type = changeanim
triggerall = anim = [12150,12159]
triggerall = anim != 12169 && anim != 20000
trigger1 = pos y >= 0;-30
value = anim+10

[State 0, snd]
type = screenbound
trigger1 = anim = 12164
value = 1

[State 0, snd]
type = playsnd
;triggerall = random<400
trigger1 = frontedgebodydist < -30;0
trigger2 = pos y >= 0;-30
trigger3 = anim != 12169 && anim != 20000
trigger3 = pos y <= -200
value = 6,5


[State 20000]
type = Helper
trigger1 = frontedgebodydist < -30;0
trigger2 = pos y >= 0;-30
trigger3 = anim != 12169 && anim != 20000
trigger3 = pos y <= -200
helpertype = normal
name = "moji"
ID = (20006+(random%2=0)*9)
pos = 0,0
postype = p1
facing = facing
stateno = (20006+(random%2=0)*9)
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 0, snd]
type = explod
trigger1 = frontedgebodydist < -30;0
trigger2 = pos y >= 0;-30
trigger3 = anim != 12169 && anim != 20000
trigger3 = pos y <= -200
anim = 12160
id = 12150
postype = p1
pos = 10,0
ignorehitpause = 1

[state -2, var]
type = changeanim
trigger1 = frontedgebodydist < -30;0
trigger2 = pos y >= 0;-30
trigger3 = anim = [12160,12168]
trigger3 = pos y <= -200
value = anim
elem = 1

[State 0, vel]
type = velset
triggerall = anim != 12164
trigger1 = frontedgebodydist < -30;0
x = vel x*-1

[State 0, turn]
type = turn
triggerall = anim != 12164
trigger1 = frontedgebodydist < -30;0

[State 0, vel]
type = velset
trigger1 = pos y >= 0;-30
trigger2 = anim != 12169 && anim != 20000
trigger2 = pos y <= -200
y = vel y*-1

[State 0, hit]
type = hitdef
trigger1 = 1
trigger1 = root,var(9) != 2
attr = A, HP
damage = 21,7
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,20
sparkno = s6002
sparkxy = 0,0
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 20,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -2,-5;*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
fall = 0
air.fall = 1
guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = !var(20)
trigger1 = root,var(9) = 2
attr = A, HP
damage = 21,7
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,20
sparkno = s6002
sparkxy = 0,0
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 20,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -2,-5;*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
fall = 0
air.fall = 1
guard.kill = 0
p2facing = 1

[State 0, vel]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1
ignorehitpause = 1

[State 0, vel]
type = parentvarset
trigger1 = movecontact = 1
var(21) = 1
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

;????????????
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,29-(moveguarded=1)*20
ignorehitpause = 1
channel = 2

[state -2, var]
type = varadd
trigger1 = movehit = 1
var(40) = 1

[state -2, var]
type = varadd
trigger1 = movecontact = 1
var(41) = 1

[state -2, var]
type = varset
trigger1 = movehit = 1
var(44) = 1

[state -2, var]
type = changeanim
trigger1 = movecontact = 1
value = anim
elem = 2

[State 0, end]
type = DestroySelf
trigger1 = time >= 100 && var(2) = 0
trigger2 = time >= 60 && (var(2) = 1 || var(2) = 3)
trigger3 = root,movetype = H
trigger4 = var(41) = 8
 
[Statedef 12151]
type = A
movetype = A
physics = N
ctrl = 0
anim = 20000
velset = 0,0
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

[State 0, anim]
type = changeanim
trigger1 = time = 2
value = 12155

[State 0, anim]
type = changeanim
trigger1 = anim = [12160,12169]
trigger1 = pos y >= -30
value = 12152+random%6

[State 0, anim]
type = changeanim
trigger1 = anim = [12150,12159]
trigger1 = pos y <= -200;-210
value = 12162+random%6

[State 0, vel]
type = velset
trigger1 = anim = 12152 && animelemtime(1) = 1
x = -24*const(size.xscale)
y = -54*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12153 && animelemtime(1) = 1
x = -38*const(size.xscale)
y = -50*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12154 && animelemtime(1) = 1
x = -54*const(size.xscale)
y = -54*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12155 && animelemtime(1) = 1
x = -52*const(size.xscale)
y = -38*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12156 && animelemtime(1) = 1
x = -56*const(size.xscale)
y = -30*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12157 && animelemtime(1) = 1
x = -60*const(size.xscale)
y = -15*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12162 && animelemtime(1) = 1
x = -24*const(size.xscale)
y = 54*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12163 && animelemtime(1) = 1
x = -38*const(size.xscale)
y = 50*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12164 && animelemtime(1) = 1
x = -54*const(size.xscale)
y = 54*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12165 && animelemtime(1) = 1
x = -52*const(size.xscale)
y = 38*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12166 && animelemtime(1) = 1
x = -56*const(size.xscale)
y = 30*const(size.yscale)

[State 0, vel]
type = velset
trigger1 = anim = 12167 && animelemtime(1) = 1
x = -60*const(size.xscale)
y = 15*const(size.yscale)

[State 0, snd]
type = playsnd
trigger1 = backedgebodydist < -30;0
trigger2 = (anim = [12150,12169]) && animelemtime(1) = 0
value = 6,5
;channel = 3

[State 20000]
type = Helper
trigger1 = backedgebodydist < -30;0
trigger2 = (anim = [12150,12169]) && animelemtime(1) = 0
helpertype = normal
name = "moji"
ID = (20006+(random%2=0)*9)
pos = 0,0
postype = p1
facing = facing
stateno = (20006+(random%2=0)*9)
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 0, snd]
type = explod
trigger1 = backedgebodydist < -30;0
trigger2 = (anim = [12150,12169]) && animelemtime(1) = 0
anim = 12160
id = 12150
postype = p1
pos = 10,0
ignorehitpause = 1

[state -2, var]
type = changeanim
trigger1 = frontedgebodydist < -30;0
trigger2 = pos y >= 0;-30
trigger3 = pos y <= -200
value = anim
elem = 1

[State 0, snd]
type = null;playsnd
triggerall = random<400
trigger1 = backedgebodydist < -30;0
trigger2 = pos y >= -vel y
trigger3 = pos y <= -210
value = 6,5

[State 0, vel]
type = velset
trigger1 = backedgebodydist < -30;0
x = vel x*-1

[State 0, turn]
type = turn
trigger1 = backedgebodydist < -30;0

[State 0, hit]
type = hitdef
trigger1 = 1
trigger1 = root,var(9) != 2
attr = A, HP
damage = 21,7
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,20
sparkno = s6002
sparkxy = 0,0
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 20,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -2,-5;*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
fall = 0
air.fall = 1
guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = 1
trigger1 = root,var(9) = 2
attr = A, HP
damage = 21,7
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,20
sparkno = s6002
sparkxy = 0,0
guard.sparkno = s6010
hitsound = -1
guardsound = -1
givepower = 20,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -2,-5;*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
fall = 0
air.fall = 1
guard.kill = 0
p2facing = 1

[State 0, vel]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1
ignorehitpause = 1

[State 0, vel]
type = parentvarset
trigger1 = movecontact = 1
var(21) = 1
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

;????????????
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,29-(moveguarded=1)*20
ignorehitpause = 1
channel = 2

[state -2, var]
type = varadd
trigger1 = movehit = 1
var(40) = 1

[state -2, var]
type = varadd
trigger1 = movecontact = 1
var(41) = 1

[state -2, var]
type = varset
trigger1 = movehit = 1
var(44) = 1

[state -2, var]
type = changeanim
trigger1 = movecontact = 1
value = anim
elem = 2

[State 0, end]
type = DestroySelf
trigger1 = time >= 80
trigger2 = root,movetype = H
trigger3 = var(41) = 8

[Statedef 2150 - Laser Shot (Non Stand)]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(root,command = "214aa3",2,ifelse(root,command = "214aa2",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**12),2,ifelse((root,var(28)&2**11),1,0))

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, width]
type = width
trigger1 = 1
edge = 30,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT
time = 1

[State 0, nhb]
type = nothitby
triggerall = time > 3
trigger1 = var(2) = 0 && animelemtime(10) <= 0
trigger2 = var(2) = 1 && animelemtime(9) <= 0
trigger3 = var(2) = 2 && animelemtime(11) <= 0
value = SCA
time = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, btr]
type = bindtoroot
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = time <= 1
pos = 25,0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 2150 + var(2)

[State 0, super]
type = superpause
trigger1 = time = 11
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = var(2) = 0 && time = 10
anim = 7100
pos = ceil(72*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = var(2) = 1 && time = 10
anim = 7100
pos = ceil(62*const(size.xscale)),ceil(-130*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = var(2) = 2 && time = 10
anim = 7100
pos = ceil(-46*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 12
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 10900,0+random%3
channel = 0

[state 0, helper]
type = helper
trigger1 = var(2) = 0 && animelem = 9
helpertype = normal
name = "shot"
stateno = 12150
id = 12150
pos = ceil(72*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1

[state 0, helper]
type = helper
trigger1 = var(2) = 1 && animelem = 8
helpertype = normal
name = "shot"
stateno = 12150
id = 12150
pos = ceil(62*const(size.xscale)),ceil(-130*const(size.yscale))
postype = p1

[state 0, helper]
type = helper
trigger1 = var(2) = 2 && animelem = 10
helpertype = normal
name = "shot"
stateno = 12151
id = 12150
pos = ceil(-46*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1

[State 0, explod]
type = explod
trigger1 = var(2) = 0 && animelem = 9
trigger2 = var(2) = 1 && animelem = 8
trigger3 = var(2) = 2 && animelem = 10
anim = 12105 + var(2)
id = 12105
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
postype = p1

[State 0, snd]
type = playsnd
trigger1 = var(2) = 0 && animelem = 9
trigger2 = var(2) = 1 && animelem = 8
trigger3 = var(2) = 2 && animelem = 10
value = 6,4

[State 0, state]
type = statetypeset
trigger1 = var(2) = 0 && animelem = 10
trigger2 = var(2) = 1 && animelem = 9
trigger3 = var(2) = 2 && animelem = 11
movetype = I
persistent = 0

[State 0, end]
type = changestate
trigger1 = var(2) = 0 && animelem = 15
trigger2 = var(2) = 1 && animelem = 13
trigger3 = var(2) = 2 && animelem = 15
;trigger4 = !numhelper(12150) && time > 60
value = 9002

[State 0, end]
type = changeanim
trigger1 = !numhelper(12150) && time > 60
value = anim
elem = ifelse(var(2)=2||var(2)=0,12,10)
persistent = 0

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[Statedef 2160 - Air]
type = A
movetype = A
physics = N
ctrl = 0
anim = 2160
velset = 0,0 
sprpriority = 1 

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
var(2) = 3

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = IsHelper
value = 1

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = null;PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 0, width]
type = width
trigger1 = 1
edge = 30,30

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT
time = 1

[State 0, nhb]
type = nothitby
triggerall = time > 3
trigger1 = anim = 2160 && animelemtime(7) <= 0
value = SCA
time = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posadd
trigger1 = !time
x = 15

[State 0, super]
type = superpause
trigger1 = time = 10
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 7100
pos = ceil(55*const(size.xscale)),ceil(-33*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 10
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 10900,0+random%3
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 6
helpertype = normal
name = "shot"
stateno = 12150
id = 12150
pos = ceil(55*const(size.xscale)),ceil(-33*const(size.yscale))
postype = p1
persistent = 0

[State 0, explod]
type = explod
trigger1 = animelem = 6
anim = 12115
id = 12105
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
postype = p1

[State 0, snd]
type = playsnd
trigger1 = animelem = 6
value = 6,4
persistent = 0

[State 0, vel]
type = velset
trigger1 = animelem = 7
x = -3
y = -5
persistent = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(7) >= 0
y = .44

[State 0, anim]
type = changeanim
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 2161
persistent = 0

[State 0, pos]
type = posset
trigger1 = pos y >= 0
trigger1 = vel y > 0
y = 0

[State 0, vel]
type = velset
trigger1 = pos y >= 0
trigger1 = vel y > 0
y = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 2161 && animelemtime(2) < 0
trigger1 = !numhelper(12150)
value = anim
elem = 2
persistent = 0

[State 0, state]
type = statetypeset
trigger1 = anim = 2161
statetype = S
movetype = I
physics = S
persistent = 0

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, end]
type = changestate
trigger1 = anim = 2161 && animelemtime(5) >= 0
value = 9002
 
[Statedef 12100 - Laser Shot (Stand)]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = changestate
trigger1 = IsHelper && !time
trigger1 = root,power <= 1000
value = 11300

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, pos]
type = posset
trigger1 = IsHelper
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = !time
var(5) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = Ishelper
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = Ishelper
value = 1

;---------------------------------------

[State 0, var]
type = varset
trigger1 = IsHelper
trigger1 = !time
var(2) = var(4)%10

;=======================================

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, nhb]
type = nothitby
triggerall = !IsHelper || (IsHelper && !var(6))
triggerall = time > 3
trigger1 = var(2) = 0 && animelemtime(10) <= 5
trigger2 = var(2) = 1 && animelemtime(9) <= 5
trigger3 = var(2) = 2 && animelemtime(11) <= 5
value = SCA
time = 1

[State 0, var]
type = varset
triggerall = var(59) = 0
trigger1 = !time
trigger1 = !Ishelper
var(2) = ifelse(command = "214aa3",2,ifelse(command = "214aa2",1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59) = 0
triggerall = var(28)
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse((var(28)&2**12),2,ifelse((var(28)&2**11),1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59)
trigger1 = !IsHelper
trigger1 = !time
trigger1 = var(36) || prevstateno = 10420
var(2) = 0

[State 0, var]
type = varset
trigger1 = !time
var(50) = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 12100 + var(2)

[State 0, super]
type = superpause
trigger1 = time = 12
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = var(2) = 0 && time = 12
anim = 7100
pos = ceil(72*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = var(2) = 1 && time = 12
anim = 7100
pos = ceil(62*const(size.xscale)),ceil(-130*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = var(2) = 2 && time = 12
anim = 7100
pos = ceil(-46*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 12
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 10900,0+random%3
channel = 0

[state 0, helper]
type = helper
trigger1 = var(2) = 0 && animelem = 9
helpertype = normal
name = "shot"
stateno = 12150
id = 12150
pos = ceil(72*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1

[state 0, helper]
type = helper
trigger1 = var(2) = 1 && animelem = 8
helpertype = normal
name = "shot"
stateno = 12150
id = 12150
pos = ceil(62*const(size.xscale)),ceil(-130*const(size.yscale))
postype = p1

[state 0, helper]
type = helper
trigger1 = var(2) = 2 && animelem = 10
helpertype = normal
name = "shot"
stateno = 12151
id = 12150
pos = ceil(-46*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1

[State 0, explod]
type = explod
trigger1 = var(2) = 0 && animelem = 9
trigger2 = var(2) = 1 && animelem = 8
trigger3 = var(2) = 2 && animelem = 10
anim = 12105 + var(2)
id = 12105
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
postype = p1

[State 0, snd]
type = playsnd
trigger1 = var(2) = 0 && animelem = 9
trigger2 = var(2) = 1 && animelem = 8
trigger3 = var(2) = 2 && animelem = 10
value = 6,4

[State 0, state]
type = statetypeset
trigger1 = var(2) = 0 && animelem = 10
trigger2 = var(2) = 1 && animelem = 9
trigger3 = var(2) = 2 && animelem = 11
movetype = I
persistent = 0

[State 0, var]
type = varset
trigger1 = var(2) = 0 && animelem = 13
trigger2 = var(2) = 1 && animelem = 11
trigger3 = var(2) = 2 && animelem = 13
var(50) = 1

[State 0, explod]
type = explod
trigger1 = var(2) = 0 && animelem = 12
anim = 12180
pos = ceil(101*const(size.xscale)),ceil(-91*const(size.yscale))
sprpriority = 2
postype = p1

[State 0, explod]
type = explod
trigger1 = var(2) = 1 && animelem = 10
anim = 12180
pos = ceil(83*const(size.xscale)),ceil(-147*const(size.yscale))
sprpriority = 2
postype = p1

[State 0, explod]
type = explod
trigger1 = var(2) = 2 && animelem = 12
anim = 12180
pos = ceil(-61*const(size.xscale)),ceil(-110*const(size.yscale))
sprpriority = 2
postype = p1

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = (var(2)=0 && animelemtime(12)>=15) || (var(2)=1 && animelemtime(11)>=15) || (var(2)=2 && animelemtime(12)=15)
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = (var(2)=0 && animelemtime(12)>=15) || (var(2)=1 && animelemtime(11)>=15) || (var(2)=2 && animelemtime(12)=15)
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = (var(2)=0 && animelemtime(12)>=15) || (var(2)=1 && animelemtime(11)>=15) || (var(2)=2 && animelemtime(12)=15)
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = (var(2)=0 && animelemtime(12)>=15) || (var(2)=1 && animelemtime(11)>=15) || (var(2)=2 && animelemtime(12)=15)
trigger2 = roundstate != 2
;trigger3 = !root,var(59) && root,command = "c" && !numhelper(12150)
value = 10000

[State 0, end]
type = changeanim
triggerall = !numhelper(12150) && time >= 50
trigger1 = !animelemtime(12) <= 0 && var(2)!=1
trigger2 = !animelemtime(10) <= 0 && var(2)=1
value = anim
elem = ifelse(var(2)=1,10,12)
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 12100
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = 70,-100
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12100
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = 85,-95
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12100
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = 100,-90
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12100
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = 115,-85
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 12101
trigger1 = animelemtime(10) = 0
anim = 6053
id = 6053
pos = 60,-145
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12101
trigger1 = animelemtime(10) = 0
anim = 6053
id = 6053
pos = 70,-155
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12101
trigger1 = animelemtime(10) = 0
anim = 6053
id = 6053
pos = 80,-165
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12101
trigger1 = animelemtime(10) = 0
anim = 6053
id = 6053
pos = 90,-175
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 12102
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = -50,-110
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12102
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = -60,-120
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12102
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = -70,-130
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12102
trigger1 = animelemtime(12) = 0
anim = 6053
id = 6053
pos = -80,-140
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, end]
type = parentvaradd
triggerall = Ishelper
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
triggerall = Ishelper
trigger1 = var(46)
var(46) = 0

[State 0, end]
type = changestate
triggerall = !IsHelper
trigger1 = !animtime
value = 0
ctrl = 1
 
[Statedef 12110]
type = A
movetype = A
physics = N
ctrl = 0
anim = 12110
velset = 0,0

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = p2dist x < 0

[State 0, width]
type = width
trigger1 = 1
edge = 30,30

[State 0, nhb]
type = nothitby
triggerall = time > 3
trigger1 = anim = 12110 && animelemtime(7) <= 5
value = SCA
time = 1

[State 0, var]
type = varset
trigger1 = !time
var(2) = 3

[State 0, var]
type = varset
trigger1 = !time
var(50) = 0

[State 0, super]
type = superpause
trigger1 = time = 15
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = time = 15
anim = 7100
pos = ceil(55*const(size.xscale)),ceil(-33*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 15
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 10900,0+random%3
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 6
helpertype = normal
name = "shot"
stateno = 12150
id = 12150
pos = ceil(55*const(size.xscale)),ceil(-33*const(size.yscale))
postype = p1
persistent = 0

[State 0, explod]
type = explod
trigger1 = animelem = 6
anim = 12115
id = 12105
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
persistent = 0
postype = p1

[State 0, snd]
type = playsnd
trigger1 = animelem = 6
value = 6,4
persistent = 0

[State 0, vel]
type = velset
trigger1 = animelem = 7
x = -3
y = -5
persistent = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(7) >= 0
y = .44

[State 0, anim]
type = changeanim
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 12111
persistent = 0

[State 0, pos]
type = posset
trigger1 = pos y >= 0
trigger1 = vel y > 0
y = 0

[State 0, vel]
type = velset
trigger1 = pos y >= 0
trigger1 = vel y > 0
y = 0

[State 0, vel]
type = velset
trigger1 = pos y >= 0
x = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 12111 && animelemtime(2) < 0
trigger1 = !numhelper(12150)
value = anim
elem = 2
persistent = 0

[State 0, state]
type = statetypeset
trigger1 = anim = 12111
statetype = S
movetype = I
physics = N
persistent = 0

[State 0, var]
type = varset
trigger1 = anim = 12111 && animelem = 4
var(50) = 1

[State 0, end]
type = changeanim
triggerall = !numhelper(12150) && anim = 12111
trigger1 = !animelemtime(2) <= 0
value = anim
elem = 2
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 12111 && animelem = 3
anim = 12180
pos = ceil(83*const(size.xscale)),ceil(-147*const(size.yscale))
sprpriority = 2
postype = p1

[State 0, explod]
type = explod
trigger1 = anim = 12111
trigger1 = animelemtime(3) = 0
anim = 6053
id = 6053
pos = 60,-145
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12111
trigger1 = animelemtime(3) = 0
anim = 6053
id = 6053
pos = 70,-155
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12111
trigger1 = animelemtime(3) = 0
anim = 6053
id = 6053
pos = 80,-165
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1
[State 0, explod]
type = explod
trigger1 = anim = 12111
trigger1 = animelemtime(3) = 0
anim = 6053
id = 6053
pos = 90,-175
postype = p1
scale = .833,1.07
sprpriority = 3
ownpal = 1

[State 0, end]
type = parentvaradd
trigger1 = Ishelper
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = Ishelper
trigger1 = var(46)
var(46) = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

[Statedef 12000 - Armor Take-off (Stand)]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12000
velset = 0,0
sprpriority = 1
facep2 = 1;-(prevstateno=[100,119])

[State 0, var]
type = varset
trigger1 = !time
var(50) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0
player = 15,15

[State 0, nhb]
type = nothitby
trigger1 = animelemtime(6) <= 4
trigger2 = movehit
value = SCA
time = 1

[State 0, super]
type = superpause
trigger1 = time = 0
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = time = 0
anim = 7100
id = 7100
pos = ceil(20*const(size.xscale)),ceil(-70*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 0
value = 10900,0+random%3
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 5
value = 0,12

[State 0, pos]
type = posadd
trigger1 = time = 0
x = 20
 

[State 0, hit]
type = hitdef
trigger1 = animelem = 5
attr = S, HA
damage = 28,50
priority = 4,Hit
hitflag = MAF
guardflag = M 
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 2,2
sparkno = s6040
sparkxy = -10,-90
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
givepower = 60 
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0
air.velocity = 0
guard.velocity = -8
airguard.velocity = -3,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 12
envshake.freq = 55
envshake.ampl = -4
fall = 1
kill = 0
guard.kill = 0
id = 2050
p2facing = 1

[State 20000]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "moji"
ID = 20016
pos = 35, -85
postype = p1
facing = facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
persistent = 0

[State 901, Throw]
type = TargetState
triggerall = numtarget
trigger1 = time > 1 && movehit
value = 2080
ignorehitpause = 1
persistent = 0
id = 2050

[state 0]
type = varset
trigger1 = time = 0
trigger1 = fvar(10) < 1
fvar(10) = fvar(10)*0.9

[State 901, Throw]
type = helper
triggerall = !numhelper(2001)
triggerall = time > 1 && movehit
triggerall = (TeamMode = Single) || (TeamMode = Turns)
trigger1 = enemy,authorname = "Nimame"
trigger1 = enemy,name = "devo"
stateno = 2001
id = 2001
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1
persistent = 0

[State 0, var]
type = varset
trigger1 = !time
var(29) = 0

[State 0, state]
type = statetypeset
trigger1 = var(50)
movetype = I
persistent = 0

[State 0, var]
type = varset
triggerall = animelem = 8
trigger1 = !movehit
trigger2 = !numtarget
trigger3 = numtarget
trigger3 = target,stateno != 2080
var(50) = 1

[State 0, end]
type = changestate
triggerall = animelem = 9
trigger1 = !var(50)
trigger2 = var(29)
value = 12001

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = animelemtime(15) > 3
value = 0
ctrl = 1

[Statedef 12001]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12001
velset = 0,0
sprpriority = 1

[State 3000, ZOOM]
type = zoom 
trigger1 = time<=6
scale = 1 + (0.04*time)
pos = pos x, pos y;zoom
ignorehitpause = 1
[State 3000, ZOOM]
type = zoom 
trigger1 = time>6
trigger1 = time<=50
scale = 1.4
pos = pos x, pos y;zoom
ignorehitpause = 1
[State 3000, ZOOM]
type = zoom 
trigger1 = time>50
trigger1 = time<=56
scale = 1.4 - (0.04*(time-50))
pos = pos x, pos y;zoom
ignorehitpause = 1
 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, var]
type = varset
trigger1 = !time
var(17) = 0

[State 0, snd]
type = playsnd
trigger1 = time = 14
value = 3,5
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 6,2

[State 0, explod] 
type = explod
trigger1 = time = 20
anim = 7200
pos = 8,-63
sprpriority = 10
postype = p1

[State 20000]
type = Helper
trigger1 = time = 26
helpertype = normal
name = "moji"
ID = 20022
pos = 30, -85
postype = p1
facing = facing
stateno = 20022
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

;--------------------------------------[]
;アーマーパージ
[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12010
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12011
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12012
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12013
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12014
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12015
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12016
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12017
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12018
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12019
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12020
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12021
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12022
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12023
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12024
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12025
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12026
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12027
sprpriority = -3
postype = p1
;--------------------------------------[]

[State 0, vel]
type = veladd
trigger1 = animelemtime(3) >= 2
trigger1 = pos y >= -300
y = -14

[State 0, scale]
type = angledraw
trigger1 = time >= 58
scale = (const(size.xscale)-(.14*(time-58))),(const(size.yscale)+(.05*(time-58)))

[State 0, vel]
type = velset
trigger1 = pos y < -300
y = 0

[State 0, assert]
type = assertspecial
trigger1 = pos y < -300
flag = Invisible

[State 0, target]
type = targetstate
trigger1 = time = 110
value = 2081

[State 0, var]
type = varset
trigger1 = time = 124
var(50) = 2

[State 0, var]
type = varadd
trigger1 = time = 122
trigger2 = time = 137
trigger3 = time = 152
trigger4 = time = 167
trigger5 = time = 182
trigger6 = time = 190
trigger7 = time = 198
trigger8 = time = 204
trigger9 = time = 234
var(17) = 1

[state 0, helper]
type = helper
trigger1 = time = 122
trigger2 = time = 137
trigger3 = time = 152
trigger4 = time = 167
trigger5 = time = 182
trigger6 = time = 190
trigger7 = time = 198
trigger8 = time = 204
trigger9 = time = 210
trigger10 = time = 234
helpertype = normal
stateno = ifelse(time!=210,12010,12011)
id = ifelse(time!=234,12010,12011)
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 234
trigger9 = time = 265
value = 0,ifelse(time=265,8,29)
channel = 1

[State 0, life]
type = targetlifeadd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 234
value = ceil(-21*fvar(10))
kill = 0

[State 0, life]
type = targetlifeadd
trigger1 = time = 265
value = ceil(-70*fvar(10))
kill = 1

[State 0, hit]
type = varadd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 235
trigger9 = time = 265
var(40) = 1

[State 0, hit]
type = hitadd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 235
trigger9 = time = 265
value = numtarget

[State 20000]
type = Helper
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 235
trigger9 = time = 265
helpertype = normal
name = "moji"
ID = 20016
pos = -10+random%20,-10+random%20
postype = p2
facing = -facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1 

[State 0, explod]
type = explod
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 234
anim = 6002
pos = 160,88
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 165,75
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0
postype = p1
[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 160,75
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0
postype = p1
[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 165,93
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
postype = p1
supermovetime = 0
[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 160,93
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0

postype = p1
[State 0, explod]
type = explod
trigger1 = time = 147
trigger2 = time = 192
trigger3 = time = 223
anim = 6070
pos = 160,88
postype = back
sprpriority = 4

[State 0, explod]
type = explod
trigger1 = time = 162
trigger2 = time = 207
trigger3 = time = 234
anim = 6071
pos = 160,88
postype = back
sprpriority = 4

[State 0, explod]
type = explod
trigger1 = time = 177
trigger2 = time = 211
trigger3 = time = 283
anim = 6072
pos = 160,88
postype = back
sprpriority = 4

[State 0, explod]
type = explod
trigger1 = time = 179
trigger2 = time = 215
trigger3 = time = 265
anim = 6073
pos = 160,88
postype = back
sprpriority = 4

[State 0, pal]
type = allpalfx
trigger1 = time = 263
time = 3
add = 64,64,64

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 215
trigger2 = time = 223
trigger3 = time = 234
time = 5
ampl = 4

[State 0, end]
type = changestate
trigger1 = time = 270
value = 12002

[Statedef 12002]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12005
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != helper(20000),facing

[State 0, pos]
type = posset
trigger1 = !time
x = helper(20000),pos x + (15*facing)

[State 0, vel]
type = velset
trigger1 = time = 30
y = 16

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 12006

[State 0, vel]
type = velset
trigger1 = vel y > 0
trigger1 = pos y >= 0
y = 0

[State 0, pos]
type = posset
trigger1 = anim = 12006
y = 0

[State 0, end]
type = changestate
trigger1 = anim = 12006 && animelemtime(3) > 2
value = 0
ctrl = 1

[Statedef 2050 - Armor Take-off (Non-Stand)]
type = U
movetype = A
physics = N
ctrl = 0
anim = 12000
velset = 0,0
sprpriority = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 1100, VarSet]
type = varset
trigger1 = !time
var(29) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0
player = 15,15

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT
time = 1

[State 0, nhb]
type = nothitby
trigger1 = animelemtime(6) <= 4
trigger2 = movehit
value = SCA
time = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, btr]
type = bindtoroot
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = time <= 1
pos = 10,0

[State 0, pos]
type = posadd
triggerall = prevstateno != [1050,1150]
triggerall = prevstateno != 9000
trigger1 = Time = 0
x = 20

[State 0, super]
type = superpause
trigger1 = Time = 0
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = Time = 0
anim = 7100
id = 7100
pos = ceil(20*const(size.xscale)),ceil(-70*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = Time = 0
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = Time = 0
value = 10900,0+random%3
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,12

[State 0, pos]
type = posadd
trigger1 = animelem = 5
x = ceil(26*const(size.xscale))

[state 0]
type = parentvarset
trigger1 = time = 0
trigger1 = root,fvar(10) < 1
fvar(10) = root,fvar(10)*0.9

[State 0, hit]
type = hitdef
trigger1 = animelem = 5
attr = S, HA
damage = ceil(root,fvar(11)*29),50
priority = 4,Hit
hitflag = MAF
guardflag = M 
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 2,2
sparkno = s6040
sparkxy = -10,-90
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
givepower = 40,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0,-5
air.velocity = 0
guard.velocity = -5.5
airguard.velocity = -3,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 12
envshake.freq = 55
envshake.ampl = -4
fall = 1
kill = 0
guard.kill = 0
id = 2050
p2facing = 1

[State 20000]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "moji"
ID = 20016
pos = 35, -85
postype = p1
facing = facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
persistent = 0

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

;??????????
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 901, Throw]
type = TargetState
triggerall = numtarget
trigger1 = time > 1 && movehit
value = 2080
ignorehitpause = 1
persistent = 0
id = 2050

[State 901, Throw]
type = helper
triggerall = !numhelper(2001)
triggerall = time > 1 && movehit
triggerall = (TeamMode = Single) || (TeamMode = Turns)
trigger1 = enemy,authorname = "Nimame"
trigger1 = enemy,name = "devo"
stateno = 2001
id = 2001
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1
persistent = 0

[State 0, state]
type = statetypeset
trigger1 = var(50)
movetype = I
persistent = 0

[State 0, var]
type = varset
triggerall = animelem = 8
trigger1 = !movehit
trigger2 = !numtarget
trigger3 = numtarget
trigger3 = target,stateno != 2080
var(50) = 1

[State 0, end]
type = changestate
triggerall = animelem = 9
trigger1 = !var(50)
trigger2 = var(29)
value = 2051

[State 0, end]
type = changestate
trigger1 = animelemtime(15) > 4
value = 9000
 
[Statedef 2051]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12001
velset = 0,0
sprpriority = 1

[State 3000, ZOOM]
type = zoom 
trigger1 = time<=6
scale = 1 + (0.04*time)
pos = pos x, pos y;zoom
ignorehitpause = 1
[State 3000, ZOOM]
type = zoom 
trigger1 = time>6
trigger1 = time<=50
scale = 1.4
pos = pos x, pos y;zoom
ignorehitpause = 1
[State 3000, ZOOM]
type = zoom 
trigger1 = time>50
trigger1 = time<=56
scale = 1.4 - (0.04*(time-50))
pos = pos x, pos y;zoom
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

[State 0, var]
type = varset
trigger1 = !time
var(17) = 0

[State 0, snd]
type = playsnd
trigger1 = time = 14
value = 3,5
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 6,2

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 7200
pos = 8,-63
sprpriority = 10
postype = p1


[State 20000]
type = Helper
trigger1 = time = 26
helpertype = normal
name = "moji"
ID = 20022
pos = 30, -85
postype = p1
facing = facing
stateno = 20022
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

;--------------------------------------[]
;???????
[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12010
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12011
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12012
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12013
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12014
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12015
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12016
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12017
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12018
postype = p1
sprpriority = -3

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12019
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12020
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12021
sprpriority = 3

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12022
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12023
postype = p1
sprpriority = 3

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12024
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12025
sprpriority = 3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12026
sprpriority = -3
postype = p1

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 12027
sprpriority = -3
postype = p1
;--------------------------------------[]

[State 0, vel]
type = veladd
trigger1 = animelemtime(3) >= 2
trigger1 = pos y >= -300
y = -14

[State 0, scale]
type = angledraw
trigger1 = time >= 58
scale = (const(size.xscale)-(.14*(time-58))),(const(size.yscale)+(.05*(time-58)))

[State 0, vel]
type = velset
trigger1 = pos y < -300
y = 0

[State 0, assert]
type = assertspecial
trigger1 = pos y < -300
flag = Invisible

[State 0, target]
type = targetstate
trigger1 = time = 110
value = 2081
id = 2050

[State 0, var]
type = varset
trigger1 = time = 124
var(50) = 2

[State 0, var]
type = varadd
trigger1 = time = 122
trigger2 = time = 137
trigger3 = time = 152
trigger4 = time = 167
trigger5 = time = 182
trigger6 = time = 190
trigger7 = time = 198
trigger8 = time = 204
trigger9 = time = 234
var(17) = 1

[state 0, helper]
type = helper
trigger1 = time = 122
trigger2 = time = 137
trigger3 = time = 152
trigger4 = time = 167
trigger5 = time = 182
trigger6 = time = 190
trigger7 = time = 198
trigger8 = time = 204
trigger9 = time = 210
trigger10 = time = 234
helpertype = normal
stateno = ifelse(time!=210,12010,12011)
id = ifelse(time!=234,12010,12011)
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 234
trigger9 = time = 265
value = 0,ifelse(time=265,8,29)
channel = 1

[State 0, life]
type = targetlifeadd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 234
value = ceil(-21*root,fvar(10))
kill = 0

[State 0, life]
type = targetlifeadd
trigger1 = time = 265
value = ceil(-70*root,fvar(10))
kill = 1

[State 0, hit]
type = parentvaradd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 235
trigger9 = time = 265
var(40) = 1

[State 0, hit]
type = hitadd
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 235
trigger9 = time = 265
value = numtarget

[State 20000]
type = Helper
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 235
trigger9 = time = 265
helpertype = normal
name = "moji"
ID = 20016
pos = -10+random%20,-10+random%20
postype = p2
facing = -facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1 

[State 0, explod]
type = explod
trigger1 = time = 147
trigger2 = time = 162
trigger3 = time = 177
trigger4 = time = 192
trigger5 = time = 207
trigger6 = time = 215
trigger7 = time = 223
trigger8 = time = 234
anim = 6002
pos = 160,88
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 165,75
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0
[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 160,75
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0
[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 165,93
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0
[State 0, explod]
type = explod
trigger1 = time = 265
anim = 6002
pos = 160,93
postype = back
random = 24,24
;postype = p2
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, explod]
type = explod
trigger1 = time = 147
trigger2 = time = 192
trigger3 = time = 223
anim = 6070
pos = 160,88
postype = back
sprpriority = 4

[State 0, explod]
type = explod
trigger1 = time = 162
trigger2 = time = 207
trigger3 = time = 234
anim = 6071
pos = 160,88
postype = back
sprpriority = 4

[State 0, explod]
type = explod
trigger1 = time = 177
trigger2 = time = 211
trigger3 = time = 283
anim = 6072
pos = 160,88
postype = back
sprpriority = 4

[State 0, explod]
type = explod
trigger1 = time = 179
trigger2 = time = 215
trigger3 = time = 265
anim = 6073
pos = 160,88
postype = back
sprpriority = 4

[State 0, pal]
type = allpalfx
trigger1 = time = 263
time = 3
add = 64,64,64

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 215
trigger2 = time = 223
trigger3 = time = 234
time = 5
ampl = 4

[State 0, end]
type = changestate
trigger1 = time = 270
value = 2052
 
[Statedef 2052]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12005
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, pos]
type = posset
trigger1 = !time
x = root,pos x + (15*facing)

[State 0, vel]
type = velset
trigger1 = time = 30
y = 16

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 12006

[State 0, vel]
type = velset
trigger1 = vel y > 0
trigger1 = pos y >= 0
y = 0

[State 0, end]
type = changestate
trigger1 = anim = 12006 && animelemtime(3) = 6
value = 9000

[Statedef 1250 - Shooting Star (Non-Stand)]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 0, var]
type = nothitby
trigger1 = 1
value = SCA

[State 0, var]
type = varset
trigger1 = !root,var(59)
trigger1 = !time
var(2) = ifelse(root,command = "28z",2,ifelse(root,command = "28y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !root,var(59)
trigger1 = !time
trigger1 = root,var(28)
var(2) = ifelse((root,var(28)&2**5),2,ifelse((root,var(28)&2**4),1,0))

[State 1000, VarSet]
type = varset
trigger1 = root,var(59)
;trigger1 = time = 1
var(2) = 2

[State 1000, VarSet];AI??????????
type = parentvarset
trigger1 = root,var(59)
trigger1 = root,var(36) != 1000
trigger1 = var(2) = 2
trigger1 = time = 1
var(35) = ifelse(random<500,1,ifelse(Random%2=0,3,4))

[State 1000, VarSet];AI??????????
type = parentvarset
trigger1 = root,var(59)
trigger1 = root,var(35) = 4
trigger1 = power > 4000
var(35) = ifelse(Random%2=0,1,3)

[State 0, turn]
type = turn
triggerall = var(2) < 2
trigger1 = time <= 1
trigger1 = facing != root,facing
[State 0, turn]
type = turn
triggerall = var(2) = 2
trigger1 = time <= 1
trigger1 = facing = root,facing

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = var(2) = 2

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = fvar(4);*facing

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = varset
trigger1 = !time
var(14) = 1

[State 0, anim]
type = changeanim
trigger1 = !time
value = 11200

[State 0, pos]
type = posadd
trigger1 = !time
trigger1 = backedgedist < 40
x = 40 - backedgedist

[State 0, snd]
type = playsnd
trigger1 = !time
value = 6,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 3,8
volume = 255
channel = 0

[State 0, state]
type = statetypeset
trigger1 = animelem = 2
statetype = A

[State 0, vel]
type = velset
trigger1 = animelem = 2
y = -6
persistent = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(2) > 2
trigger1 = vel y <= 0
y = .15

[State 0, vel]
type = veladd
trigger1 = backedgedist > 5
trigger1 = time <= 27
trigger1 = vel x >= -10
x = -0.52

[State 0, vel]
type = veladd
trigger1 = backedgedist > 5
trigger1 = time > 27
x = -0.8

[State 0, vel]
type = velset
trigger1 = backedgedist <= 5
x = 0

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, screen]
type = null;playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = backedgedist <= 5
trigger1 = pos y <= -60
value = 1251
ignorehitpause = 1

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2160

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 75000
value = 10000 

;---------------------------------------------------------------------------
[Statedef 1251]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11201
velset = 0,0
sprpriority = 1

[State 1000, VarSet];AI
type = parentvarset
trigger1 = root,var(59)
trigger1 = !root,var(35)
trigger1 = root,var(36) != 1000
trigger1 = !time
var(35) = ifelse(Random%2=0,1,3)

[State 0, var]
type = posadd
trigger1 = !time
y = -55

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)*facing

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 0, pos]
type = posadd
trigger1 = backedgedist != 0
x = -backedgedist

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, var]
type = varadd
trigger1 = time > 20 && !(time%20)
var(14) = 1

[state 1, explod]
type = explod
trigger1 = !(gametime%10)
anim = 12160
id = 12160
vel = 0,0
accel = .2,0
postype = p1
pos = 0,-60
random = 60,110
sprpriority = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = !root,var(59)
trigger1 = time > 10
trigger1 = root,command != "holdx" && root,command != "holdb" && var(2)=0
trigger2 = time > 10
trigger2 = root,command != "holdy" && var(2)=1
trigger3 = time > 10
trigger3 = root,command != "holdz" && var(2)=2
trigger4 = time > 100
value = 1252

[State 0, end]
type = changestate
triggerall = time > 10
triggerall = root,var(59)
triggerall = root,var(35) = 1
trigger1 = root,p2bodydist x < 120
trigger2 = root,stateno = 300
trigger3 = time > 100 || roundstate != 2
value = 1252

[State 0, end]
type = changestate
triggerall = time > 10
triggerall = root,var(59)
triggerall = root,var(35) = 2
trigger1 = root,stateno = 100
trigger2 = !(root,p2bodydist x > -5)
trigger3 = root,stateno = 300
trigger4 = p2movetype = A
value = 1252

[State 0, end]
type = changestate
triggerall = time > 10
triggerall = root,var(59)
triggerall = root,var(35) = 23
trigger1 = root,stateno = 400 && root,movecontact >= 5
trigger2 = root,stateno = 400 && !root,animtime
trigger3 = root,stateno = 300
trigger4 = !(root,p2bodydist x > -15)
trigger5 = p2movetype = A && root,statetype = A && random < 300
trigger6 = p2statetype = A && random < 200
value = 1252

[State 0, end]
type = changestate
triggerall = time > 10
triggerall = root,var(59)
triggerall = root,var(35) = 4
trigger1 = root,stateno = 422 && root,movecontact
trigger2 = root,stateno = 300
trigger3 = !(root,p2bodydist x > -5)
value = 1252

[State 0, end]
type = changestate
triggerall = root,var(59)
triggerall = time > 10
trigger1 = root,var(36) = 1000
trigger2 = root,stateno = 300
trigger3 = time > 100 || roundstate != 2
trigger4 = enemynear(root,var(48)),pos y < -60 && random < 100
trigger5 = root,var(36) && root,movecontact && random < 200 && root,statetype != A
trigger6 = root,stateno = 220 && root,movecontact >= 10
value = 1252

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 75000
value = 10000 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2160

;---------------------------------------------------------------------------
[Statedef 1252]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11202
velset = 0,0
sprpriority = 1

[State 0, var]
type = posadd
trigger1 = !time
y = 55

;SS??????
[State -1, ?????]
type = parentvaradd
trigger1 = !time
trigger1 = !root,var(36)
var(35) = 10
ignorehitpause = 1

[State 0, var]
type = sprpriority
trigger1 = 1
value = -2

[State 0, push]
type = playsnd
trigger1 = !time
value = 2,2
channel = 0

[State 0, width]
type = width
trigger1 = 1
edge = 5,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
 
[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, var]
type = varset
trigger1 = !time
var(15) = var(14)

[State 0, var]
type = varset
trigger1 = !time
var(14) = 0

[State 0, var]
type = varadd
trigger1 = movehit
var(14) = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 0,13
persistent = 0

[State 0, vel]
type = velset
triggerall = anim = 11202
trigger1 = animelem = 2 && abs(p2bodydist x) <= 50
x = 1.6
y = 16

[State 0, vel]
type = velset
triggerall = anim = 11202
trigger1 = animelem = 2 && abs(p2bodydist x) > 50
x = 16*abs(cos(p2dist y/p2dist x))
y = 16*abs(sin(p2dist y/p2dist x))

[State 0, vel]
type = velset
triggerall = anim = 11202
trigger1 = animelem = 2
trigger1 = vel y < 3.5
y = 3.5

[State 0, hit]
type = hitdef
triggerall = anim = 11202
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
trigger1 = !var(7)
;trigger1 = var(15) = [1,2]
attr = A, SA
damage = ceil(root,fvar(11)*56),10
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 10,11
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60
givepower = 30
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -4
guard.velocity = -3
air.type = High
air.velocity = -3,-3*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 11202
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
trigger1 = var(7) = 1
;trigger1 = var(15) = [3,4]
attr = A, SP
damage = ceil(root,fvar(11)*21),5
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 10,11
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 20
givepower = 10 
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3
guard.velocity = -2
air.type = High
air.velocity = -3,-3*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 11202
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
trigger1 = var(7) >= 2
;trigger1 = var(15) = 5
attr = A, SP
damage = ceil(root,fvar(11)*14),5
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 10,11
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 10
givepower = 5
ground.type = High
ground.slidetime = 12
ground.hittime = 12
air.hittime = 12
ground.velocity = -2
guard.velocity = -1
air.type = High
air.velocity = -3,-3*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
p2facing = 1
 
[state 0]
type = parentvarset 
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.925

[State 0, power]
type = parentvaradd
trigger1 = movecontact = 1
var(40) = 1

[State 0, power]
type = parentvarset
trigger1 = movehit = 1
var(44) = 2

[State 0, var]
type = varset
trigger1 = !time
var(7) = 0
[State 0, var]
type = varadd
trigger1 = movehit = 1
var(7) = 1
ignorehitpause = 1
 
 
[State 0, var]
type = varset
trigger1 = movecontact = 1
var(10) = 23
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(10)
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = anim = 11202
trigger1 = pos y >= 0
trigger1 = vel y > 0
trigger2 = moveguarded
value = 1260
ignorehitpause = 1

[State 0, pos]
type = posset
trigger1 = anim = 10047
y = 0

[State 0, var]
type = varset
trigger1 = movehit = 1
var(50) = 1

[State 0, power]
type = poweradd
trigger1 = var(50)
value = 20

[State 0, var]
type = varset
trigger1 = 1
var(50) = 0

[state 1, explod]
type = explod
trigger1 = !(gametime%10)
anim = 12160
id = 12160
vel = 1,0
accel = 0,0
postype = p1
pos = 0,-60
random = 60,110
sprpriority = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = anim = 12002
trigger1 = animelem = 3
value = 9000

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 75000
value = 10000 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2160



[Statedef 1050 - Million Picks (Non-Stand)]
type = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(root,command = "z",2,0)

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
value = 10,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1050+var(2)

[State 0, btr]
type = bindtoroot
trigger1 = time <= 1
pos = 15,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
trigger2 = var(2) != 0 && animelem = 10
trigger3 = var(2) = 2 && animelem = 16
value = 2,3
volume = 255
channel = 0

[State 0, explod]
type = explod
trigger1 = animelem = 4
anim = 11011
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = animelem = 7
anim = 11012
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
pausemovetime = 999999
postype = p1

[State 0, explod]
type = explod
trigger1 = animelem = 10
anim = 11013
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
pausemovetime = 999999
postype = p1

[State 0, explod]
type = explod
trigger1 = anim = 1052 && animelem = 13
anim = 11014
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
pausemovetime = 999999
postype = p1

[State 0, explod]
type = explod
trigger1 = anim = 1051 && animelem = 13
trigger2 = anim = 1052 && animelem = 16
anim = 11015
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
pausemovetime = 999999
postype = p1

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 10
trigger4 = animelem = 13
trigger5 = animelem = 16
attr = S, SA
damage = ceil(root,fvar(11)*14),3
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,4
sparkno = s6002
sparkxy = -8,-90+(random%40)
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,10
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -7,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
guard.kill = 0
id = 1000
p2facing = 1

[state 0]
type = parentvarset 
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.995

;????
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,29-(moveguarded=1)*20
ignorehitpause = 1
channel = 2

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(50) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 3
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

;??????????
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, power]
type = poweradd
trigger1 = var(50)
value = 10

[State 0, var]
type = varset
trigger1 = 1
var(50) = 0

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2000
value = 2050 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2150 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2200
value = 2250 
 
[State 0, end]
type = changestate
trigger1 = anim = 1050 && animelemtime(17) >= 2
trigger2 = anim = 1051 && animelemtime(20) >= 4
trigger3 = anim = 1052 && animelemtime(23) >= 6
value = 9000

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 75000
value = 10000 

[Statedef 1150 - Ray Dart (Non-Stand)]
type = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, var]
type = sprpriority
trigger1 = 1
value = -2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, btr]
type = bindtoroot
trigger1 = time <= 1
pos = 25,0

[State 0, var]
type = varset
trigger1 = !root,var(59)
trigger1 = !time
var(2) = ifelse(root,command = "46z",2,ifelse(root,command = "46y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !root,var(59)
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**2),2,ifelse((root,var(28)&2**1),1,0))

[State 0, var]
type = varset
triggerall = root,var(59)
triggerall = !time
trigger1 = root,var(36) = 1 || root,var(36) = 2 || root,var(36) = 1000 || var(36) = 1006
var(2) = 2

[State 0, var]
type = varset
triggerall = root,var(59)
trigger1 = var(2) > 2
var(2) = 2

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 0, assert]
type = assertspecial
triggerall = anim = 1150+var(2)
trigger1 = !(time%2) && animelemtime(3) <= 0
flag = Invisible

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1
 
[State 0, anim]
type = changeanim
trigger1 = !time
value = 1150 + var(2)

[State 0, explod]
type = explod
triggerall = anim = 1150+var(2)
trigger1 = animelem = 3
anim = 8020
id = 8000
pos = 0,0
postype = p1
scale = 1,1
sprpriority = -1
;bindtime = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, snd]
type = playsnd
triggerall = anim = 1150+var(2)
trigger1 = animelem = 3
value = 1100,0
volume = 255
channel = 0

[State 0, snd]
type = playsnd
triggerall = anim = 1150+var(2)
trigger1 = animelem = 3
value = 6,0

[State 0, vel]
type = velset
triggerall = anim = 1150+var(2)
trigger1 = animelem = 3
x = 14; + (var(2)*.6)

[State 0, hit]
type = hitdef
triggerall = anim = 1150+var(2)
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = ceil(root,fvar(11)*70),15
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 0 
givepower = 35
ground.type = Low
ground.slidetime = 6
ground.hittime = 6
ground.velocity = -6
guard.velocity = -8
guard.hittime = 8
guard.ctrltime = 8
air.velocity = -6,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
id = 1100
p2facing = 1

[State 20000]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "moji"
ID = 20016
pos = 75, -85
postype = p1
facing = facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[state 0]
type = parentvarset 
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.925

[State 0, anim]
type = velset
trigger1 = movecontact
x = 0
persistent = 0

[State 0, vel]
type = velmul
triggerall = anim = 1150+var(2)
triggerall = vel x > 0
trigger1 = animelemtime(3) >= 1 && var(2) = 0
trigger2 = animelemtime(3) >= 3 && var(2) = 1
trigger3 = animelemtime(3) >= 6 && var(2) = 2
x = .8

[State 0, vel]
type = velset
trigger1 = anim = 1155+var(2)
x = 0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;??????????
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(50) = 1

[State 0, power]
type = poweradd
trigger1 = var(50)
value = 40

[State 0, var]
type = varset
trigger1 = 1
var(50) = 0

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, end]
type = changeanim
triggerall = !var(8)
triggerall = anim = 1150+var(2)
trigger1 = !animtime
value = 1155+var(2)

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2000
value = 2050 

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 2100
trigger2 = root,stateno = 2110
value = 2150 

[State 0, end]
type = changestate
triggerall = !var(8)
trigger1 = anim = 1155+var(2)
trigger1 = animelem = 3
trigger2 = anim = 1150+var(2)
trigger2 = movecontact
value = ifelse(movecontact,9000,9003)

[State 0, Cancel]
type = changestate
triggerall = !var(8)
trigger1 = root,stateno = 75000
value = 10000 

[Statedef 10700 - Guard Cancel]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10705
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
poweradd = -1000

[State 0, width]
type = width
trigger1 = 1
edge = 20,0

[State 0, nhb]
type = nothitby
trigger1 = !time
value = SCA
time = 10

[State 0, snd]
type = playsnd
trigger1 = time = 4
value = 3,3
channel = 0

[State 0, pal]
type = palfx
trigger1 = time < 10
trigger1 = time%2
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
trigger1 = animelem = 8
attr = S, SA
damage = 120,30
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6004
sparkxy = -10,-90
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -5,-7
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -5,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 1
fall.recover = 1

guard.kill = 0
yaccel = .44
p2facing = 1

[state 0]
type = varset
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.9

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

[Statedef 11000 - Million Pricks]
type = S
movetype = A
physics = N
ctrl = 0
poweradd = 60*!IsHelper
sprpriority = 2
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = IsHelper
trigger1 = !time
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = !time
var(5) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = animelemtime(4) = 0
x = 3

[State 1100, Velocity]
type = VelMul
trigger1 = IsHelper
trigger1 = animelemtime(4) = 1
x = .4

[State 1100, Velocity]
type = VelSet
triggerall = IsHelper
trigger1 = animelem = 15 && var(2) = 0
trigger2 = animelem = 18 && var(2) = 1
trigger3 = animelem = 21 && var(2) = 2
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = Ishelper
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = Ishelper
value = 1

;---------------------------------------

[State 0, var]
type = varset
trigger1 = IsHelper
trigger1 = !time
var(2) = var(4)%10

[State 0, anim]
type = changeanim
trigger1 = IsHelper
trigger1 = !time
value = 1050 + var(2)

[State 0, vel]
type = velset
trigger1 = IsHelper
trigger1 = !time
y = 0

;=======================================

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
value = 12,0

[State 0, vel]
type = velset
trigger1 = !IsHelper
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 0, var]
type = varset
triggerall = var(59) = 0
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse(command = "z",2,ifelse(command = "y",1,0))

[State 0, var]
type = null;varset
triggerall = var(59)
trigger1 = !IsHelper
trigger1 = !time
var(2) = 2

[State 0, var]
type = varset
trigger1 = !IsHelper
trigger1 = !time
var(11) = 0

[State 0, var]
type = varset
trigger1 = !time
var(13) = 0

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = !time
value = 11000; + var(2)

[State 0, vel]
type = velset
triggerall = var(2)
trigger1 = !IsHelper
trigger1 = animelemtime(5) = 0
trigger2 = IsHelper
trigger2 = animelemtime(4) = 0
x = 4

[State 0, vel]
type = velmul
triggerall = var(2)
trigger1 = !IsHelper
trigger1 = animelemtime(7) >= 0
trigger2 = IsHelper
trigger2 = animelemtime(6) >= 0
x = .6

[State 0, snd]
type = playsnd
trigger1 = animelem = 5
trigger2 = animelem = 11
value = 2,3
volume = 255
channel = 0
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = animelemtime(5) = 0
anim = 11011
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
pausemovetime = 0
supermovetime = 0
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = animelemtime(8) = 0
anim = 11015
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = animelemtime(11) = 0
anim = 11012
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ignorehitpause = 1
postype = p1

[State 0, hit]
type = hitdef
triggerall = !IsHelper
trigger1 = animelem = 5
trigger2 = animelem = 8
trigger3 = animelem = 11
attr = S, SA
damage = 21,5
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6002
sparkxy = -8,-90+(random%40)
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 20,20
givepower = 10,10
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6;*(var(13)*.25)
guard.velocity = -5.5;*var(13)
air.velocity = -8,-1.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
id = 11000
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = IsHelper
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 10
trigger4 = animelem = 13
trigger5 = animelem = 16
attr = S, SA
damage = ceil(root,fvar(11)*21),5
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,4
sparkno = s6002
sparkxy = -8,-90+(random%40)
guard.sparkno = s6010
hitsound = -1
guardsound = -1
givepower = 0,0
ground.type = High
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -5,-6;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
id = 11000
p2facing = 1

[state 0]
type = varset
trigger1 = !Ishelper
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.975

[state 0]
type = parentvarset
trigger1 = Ishelper
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.975

[state -2, var]
type = parentvaradd
trigger1 = Ishelper
trigger1 = movehit = 1
var(40) = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,29-(moveguarded=1)*20
ignorehitpause = 1
channel = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varadd
trigger1 = Ishelper
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = !ishelper
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = ishelper
trigger1 = movecontact = 1
var(8) = 3
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = var(59) = 0
triggerall = !IsHelper
triggerall = animelemtime(5) >= 0
trigger1 = command ="x"
trigger2 = command ="y"
trigger3 = command ="z" 
var(11) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = var(59)
triggerall = !IsHelper
triggerall = animelemtime(5) >= 0
truggerall = roundstate = 2
trigger1 = p2statetype != L
trigger1 = p2bodydist x < 100
trigger1 = p2movetype = H
trigger1 = !(time%5)
var(11) = 1
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = movecontact = 1
var(13) = 1

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = (anim=1050 && animelemtime(16)>=0) ||  (anim=1051 && animelemtime(19)>=0) ||  (anim=1052 && animelemtime(22)>=0)
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = (anim=1050 && animelemtime(16)>=0) ||  (anim=1051 && animelemtime(19)>=0) ||  (anim=1052 && animelemtime(22)>=0)
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = (anim=1050 && animelemtime(16)>=0) ||  (anim=1051 && animelemtime(19)>=0) ||  (anim=1052 && animelemtime(22)>=0)
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = (anim=1050 && animelemtime(16)>=0) ||  (anim=1051 && animelemtime(19)>=0) ||  (anim=1052 && animelemtime(22)>=0)
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c"
value = 10000

[State 0, end]
type = changestate
triggerall = !IsHelper
triggerall = var(11)
trigger1 = anim = 11000 && animelem = 12
trigger2 = anim = 11001 && animelem = 15
trigger3 = anim = 11002 && animelem = 18
value = 11010

[State 0, end]
type = changestate
triggerall= !IsHelper
trigger1 = !animtime
value = 0
ctrl = 1
 
[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000
;ガーキャン

 
 
;---------------------------------------------------------------------------
[Statedef 11010]
type = S
movetype = A
physics = N
ctrl = 0
anim = 11005
sprpriority = 0

[State 0, vel]
type = velmul
trigger1 = 1
x = .8

[State 0, snd]
type = playsnd
trigger1 = anim = 11005
trigger1 = !(time%9)
value = 2,3
volume = 255
channel = 0
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = anim = 11005 && animelemtime(2) = 0
anim = 11014
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = anim = 11005 && animelemtime(5) = 0
anim = 11013
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = anim = 11005 && animelemtime(8) = 0
anim = 11012
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = anim = 11005 && animelemtime(11) = 0
anim = 11015
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ignorehitpause = 1
postype = p1

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
trigger2 = animelem = 6
trigger3 = animelem = 9
trigger4 = animelem = 12
attr = S, SA
damage = 21,5
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6002
sparkxy = -8,-90+(random%40)
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 40,40
givepower = 20,20
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -8,-1.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
id = 11000
p2facing = 1

[state 0]
type = varset
trigger1 = !Ishelper
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.975 

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,29-(moveguarded=1)*20
ignorehitpause = 1
channel = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, var]
type = varadd
trigger1 = Ishelper
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = !var(59)
triggerall = anim = 11005 && animelemtime(3) >= 0
trigger1 = command ="x"
trigger2 = command ="y"
trigger3 = command ="z" 
var(11) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = var(59)
triggerall = anim = 11005 && animelemtime(3) >= 0
trigger1 = roundstate = 2
trigger1 = p2statetype != L
trigger1 = p2bodydist x < 100
trigger1 = p2movetype = H
trigger1 = !(time%5)
var(11) = 1
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = movecontact = 1
var(13) = 1

[State 0, reset]
type = null;movehitreset
trigger1 = movecontact

[State 0, anim]
type = changeanim
triggerall = !var(11) || time>=112
trigger1 = anim = 11005
trigger1 = animelem = 7 || !animtime
value = 11000
elem = 12
persistent = 0

[State 0, anim]
type = changeanim
triggerall = var(11)
trigger1 = anim = 11005
trigger1 = !animtime
value = 11005

[State 0, var]
type = varset
trigger1 = !time
trigger2 = anim = 11005 && animelem = 1
var(11) = 0

[State 0, end]
type = changestate
trigger1 = anim = 11000
trigger1 = !animtime
value = 0
ctrl = 1
 
[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

[Statedef 11100 - Ray Dart]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 40*!IsHelper
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = IsHelper
trigger1 = !time
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = !time
var(5) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = Ishelper
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = Ishelper
value = 1

;---------------------------------------

[State 0, var]
type = varset
trigger1 = IsHelper
trigger1 = !time
var(2) = var(4)%10

;=======================================

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, vel]
type = velset
trigger1 = !IsHelper
trigger1 = !time
trigger1 = vel x != 0
x = 0

[State 0, var]
type = varset
triggerall = var(59) = 0
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse(command = "46z",2,ifelse(command = "46y",1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59) = 0
triggerall = var(28)
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse((var(28)&2**2),2,ifelse((var(28)&2**1),1,0))

[State 0, var]
type = varset
triggerall = var(59)
triggerall = var(36);コンボ中は弱固定
trigger1 = !IsHelper
trigger1 = !time
var(2) = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 11100 + var(2)+(IsHelper*5)

[State 0, explod]
type = explod
trigger1 = animelem = 2
anim = 8020
id = 8000
pos = 0,0
postype = p1
scale = 1,1
sprpriority = -1
ownpal = 0
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 1100,0
volume = 255
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 2
value = 6,0

[State 0, vel]
type = velset
triggerall = !var(8)
trigger1 = animelem = 2
x = 11+var(2)*2

[State 0, hit]
type = hitdef
triggerall = !IsHelper
triggerall = !var(8)
triggerall = anim = 11100 || anim = 11105
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = 77, 19
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0+(Ishelper)*9,10
guard.pausetime = 9,10
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper,60*!IsHelper
givepower = 30*!IsHelper,30*!IsHelper
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
guard.hittime = 5
guard.ctrltime = 16
air.velocity = -10,-4.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !IsHelper
triggerall = !var(8)
triggerall = anim = 11101 || anim = 11106
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = 77, 19
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0+(Ishelper)*9,10
guard.pausetime = 9,10
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper,60*!IsHelper
givepower = 30*!IsHelper,30*!IsHelper
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
guard.hittime = 5
guard.ctrltime = 16
air.velocity = -10,-4.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !IsHelper
triggerall = !var(8)
triggerall = anim = 11102 || anim = 11107
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = 77, 19
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0+(Ishelper)*9,10 
guard.pausetime = 9,10
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper,60*!IsHelper
givepower = 30*!IsHelper,30*!IsHelper
ground.type = Low
ground.slidetime = 12
ground.hittime = 12 
ground.velocity = -6
guard.velocity = -5.5
guard.hittime = 5
guard.ctrltime = 16
air.velocity = -10,-4.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = IsHelper
triggerall = !var(8)
triggerall = anim = 11100 || anim = 11105
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = ceil(root,fvar(11)*77), 19
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0+(Ishelper)*9,25
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper,60*!IsHelper
givepower = 30*!IsHelper,30*!IsHelper
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = ifelse(!Ishelper,-10,-6)
guard.velocity = ifelse(!Ishelper,-8,-5.5)
guard.hittime = 16
guard.ctrltime = 16
air.velocity = -10,-4.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = IsHelper
triggerall = !var(8)
triggerall = anim = 11101 || anim = 11106
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = ceil(root,fvar(11)*77), 19
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0+(Ishelper)*9,25
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper,60*!IsHelper
givepower = 30*!IsHelper,30*!IsHelper
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = ifelse(!Ishelper,-10,-6)
guard.velocity = ifelse(!Ishelper,-8,-5.5)
guard.hittime = 16
guard.ctrltime = 16
air.velocity = -10,-4.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = IsHelper
triggerall = !var(8)
triggerall = anim = 11102 || anim = 11107
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = ceil(root,fvar(11)*77), 19
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0+(Ishelper)*9,25
sparkno = s6004
sparkxy = -8,-84
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper,60*!IsHelper
givepower = 30*!IsHelper,30*!IsHelper
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = ifelse(!Ishelper,-10,-6)
guard.velocity = ifelse(!Ishelper,-8,-5.5)
guard.hittime = 16
guard.ctrltime = 16
air.velocity = -10,-4.2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 20000]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "moji"
ID = 20016
pos = 75, -85
postype = p1
facing = facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
persistent = 0

[State 220, Targetstate]
type = TargetState
triggerall = numhelper(9999) = 0
trigger1 = !Ishelper 
trigger1 = numtarget
trigger1 = target,statetype != A
trigger1 = movehit = 1
value = 5410
ignorehitpause = 1 


[State 220, Targetstate]
type = TargetState
triggerall = numhelper(9999) = 0
trigger1 = !Ishelper 
trigger1 = numtarget
trigger1 = target,statetype = A
trigger1 = movehit = 1
value = 5420
ignorehitpause = 1 

[state 0]
type = helper
triggerall = numhelper(9999) = 0
trigger1 = !Ishelper 
trigger1 = numtarget 
trigger1 = movehit = 1
stateno = 9999
id = 9999
pos = 0,0
postype = p1
supermovetime = 99999999999
pausemovetime = 99999999999

 

[state 0]
type = varset
trigger1 = !Ishelper
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.9

[state 0]
type = parentvarset
trigger1 = Ishelper
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.6

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(6) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1
 

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[state -2, var]
type = parentvaradd
trigger1 = Ishelper
trigger1 = movehit = 1
var(40) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = !Ishelper
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = Ishelper
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, anim]
type = changeanim
trigger1 = movecontact
value = anim
elem = 6
persistent = 0

[State 0, vel]
type = velmul
triggerall = anim = 11100+var(2) || anim = 11105+var(2)
triggerall = vel x > 0
trigger1 = animelemtime(3) >= 1 && var(2) = 0
trigger2 = animelemtime(3) >= 3 && var(2) = 1
trigger3 = animelemtime(3) >= 5 && var(2) = 2
x = .8

[State 0, vel]
type = velset
trigger1 = animelemtime(5) = 0
;trigger2 = vel x <= 0
x = 0

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4) = [11300,11302]
trigger1 = animelemtime(7) = 0
value = 11300

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c"
trigger4 = root,var(59)
trigger4 = p2bodydist x < -15
value = 10000

[State 0, end]
type = changestate
trigger1 = !IsHelper
trigger1 = !animtime
value = 0
ctrl = 1
 
[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

[Statedef 11200 - Shooting Star]
type = S
movetype = I
physics = N
ctrl = 0
anim = 11200
velset = 0,0
poweradd = 60*!IsHelper
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3)
fvar(3) = 0

[State 0, pos]
type = posset
trigger1 = IsHelper
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = !time
var(5) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = Ishelper
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = Ishelper
value = 1

;---------------------------------------

[State 0, var]
type = varset
trigger1 = IsHelper
trigger1 = !time
var(2) = var(4)%10

;=======================================

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, width]
type = width
trigger1 = 1
edge = 0,4

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, var]
type = varset
triggerall = var(59) = 0
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse(command = "28z",2,ifelse(command = "28y",1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59) = 0
triggerall = var(28)
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse((var(28)&2**5),2,ifelse((var(28)&2**4),1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59)
trigger1 = !IsHelper
trigger1 = !time
var(2) = 2

[State 0, var]
type = varset
trigger1 = !time
var(14) = 1

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = var(2) = 2

[State 0, pos]
type = posadd
trigger1 = !time
trigger1 = backedgedist < 40
x = 40 - backedgedist

[State 0, snd]
type = playsnd
trigger1 = !time
value = 6,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 3,8
volume = 255
channel = 0

[State 0, state]
type = statetypeset
trigger1 = animelem = 2
statetype = A

[State 0, vel]
type = velset
trigger1 = animelem = 2
y = -6
persistent = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(2) > 2
trigger1 = vel y <= 0
y = .15

[State 0, vel]
type = veladd
trigger1 = backedgedist > 5
trigger1 = time <= 27
trigger1 = vel x >= -10
x = -0.52

[State 0, vel]
type = veladd
trigger1 = backedgedist > 5
trigger1 = time > 27
x = -0.8

[State 0, end]
type = changestate
trigger1 = backedgedist <= 5
trigger1 = pos y <= -50
value = 11201
ignorehitpause = 1

[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

;---------------------------------------------------------------------------
[Statedef 11201]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11201
velset = 0,0

[State 0, var]
type = posadd
trigger1 = !time
y = -55

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 0, width]
type = width
trigger1 = 1
edge = 0,4

[State 0, pos]
type = posadd
trigger1 = backedgedist != 5
x = 5-backedgedist

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[State 0, var]
type = varadd
trigger1 = time > 20 && !(time%20)
var(14) = 1

[State 0, end]
type = changestate
triggerall = var(59) = 0
triggerall = time > 10
trigger1 = command != "holdx" && command != "holdb" && var(2)=0
trigger2 = command != "holdy" && var(2)=1
trigger3 = command != "holdz" && var(2)=2
trigger4 = time >= 100
trigger5 = IsHelper
value = 11202

[State 0, end]
type = changestate
triggerall = var(59)
trigger1 = time > 10
trigger2 = time >= 100
trigger3 = IsHelper
trigger4 = roundstate != 2
value = 11202

[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

;---------------------------------------------------------------------------
[Statedef 11202]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11202
velset = 0,0

[State 0, var]
type = posadd
trigger1 = !time
y = 55

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[State 0, snd]
type = playerpush
trigger1 = 1
value = 1

[State 0, var]
type = varset
trigger1 = !time
var(15) = var(14)

[State 0, var]
type = varset
trigger1 = !time
var(14) = 0

[State 0, var]
type = varadd
trigger1 = movehit
var(14) = 1

[State 0, var]
type = varset
trigger1 = Ishelper && !time
var(15) = 2

[State 0, push]
type = playsnd
trigger1 = !time
value = 2,2
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 0,13

[State 0, vel]
type = velset
triggerall = anim = 11202
trigger1 = animelem = 2 && abs(p2bodydist x) <= 50
x = 1.6
y = 16

[State 0, vel]
type = velset
triggerall = anim = 11202
trigger1 = animelem = 2 && abs(p2bodydist x) > 50
x = 16*abs(cos(p2dist y/p2dist x))
y = 16*abs(sin(p2dist y/p2dist x))

[State 0, vel]
type = velset
triggerall = anim = 11202
trigger1 = animelem = 2
trigger1 = vel y < 3.5
y = 3.5

[State 0, hit]
type = hitdef
triggerall = !Ishelper
triggerall = anim = 11202
triggerall = !movecontact
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
attr = A, SA
damage = 63,10
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 9,20
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper 
givepower = 30*!IsHelper 
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !Ishelper
triggerall = anim = 11202
triggerall = movecontact
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
attr = A, SA
damage = 28,7
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 9,9
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 20*!IsHelper 
givepower = 10*!IsHelper 
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = Ishelper
triggerall = anim = 11202
triggerall = !movecontact
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
attr = A, SA
damage = ceil(root,fvar(11)*63),10
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 9,20
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 60*!IsHelper 
givepower = 30*!IsHelper 
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = Ishelper
triggerall = anim = 11202
triggerall = movecontact
trigger1 = animelemtime(3) >= 0
trigger1 = var(14) < var(15)
attr = A, SA
damage = ceil(root,fvar(11)*28),7
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 9,9
sparkno = s6004
sparkxy = -8,-48
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 20*!IsHelper 
givepower = 10*!IsHelper 
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1

guard.kill = 0
p2facing = 1

[state 0]
type = varset
trigger1 = !Ishelper
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.9

[state 0]
type = parentvarset
trigger1 = Ishelper
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.6

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[state -2, var]
type = parentvaradd
trigger1 = Ishelper
trigger1 = movehit = 1
var(40) = 1

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = pos y > 0
trigger1 = vel y > 0
trigger1 = movehit
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = pos y > 0
trigger1 = vel y > 0
trigger1 = movehit
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = pos y > 0
trigger1 = vel y > 0
trigger1 = movehit
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = pos y > 0
triggerall = vel y > 0
triggerall = movehit
trigger1 = !var(4)
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c"
value = 10000

[State 0, end]
type = changestate
triggerall = !IsHelper
trigger1 = pos y > 0
trigger1 = vel y > 0
trigger1 = movehit
value = 52

[State 0, end]
type = changestate
trigger1 = pos y >= 0
trigger1 = vel y > 0
trigger2 = moveguarded
value = 11210

[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

;---------------------------------------------------------------------------
[Statedef 11210]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11210
;velset = -2.8,-4
sprpriority = 1

[State 0, end]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
x = -vel x*.2
y = -4

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, assert]
type = screenbound
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 0, vel]
type = veladd
trigger1 = 1
y = .3

[State 0, end]
type = velset
trigger1 = pos y >= 10
x = 0
y = 0

[State 0, end]
type = posset
trigger1 = pos y >= 10
y = 0

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = pos y = 0
trigger1 = vel y = 0
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = pos y = 0
trigger1 = vel y = 0
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = pos y = 0
trigger1 = vel y = 0
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = pos y = 0
triggerall = vel y = 0
trigger1 = !var(4)
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c"
value = 10000

[State 0, end]
type = changestate
triggerall = !IsHelper
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 52 

[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

[Statedef 11300 - Needle Pierce]
type = S
movetype = A
physics = N
ctrl = 0
anim = 11300
velset = 0,0
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, pos]
type = posset
trigger1 = IsHelper
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = IsHelper
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = IsHelper
trigger1 = !time
var(5) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Ishelper
fvar(0) = root,fvar(0)*.25

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = !time
x = 0

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = Ishelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
triggerall = Ishelper
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = Ishelper
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = Ishelper
value = 1

;---------------------------------------

[State 0, var]
type = varset
trigger1 = IsHelper
trigger1 = !time
var(2) = var(4)%10

;=======================================

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !IsHelper
trigger1 = !time
trigger1 = vel x != 0
x = 0

[State 0, var]
type = varset
triggerall = var(59) = 0
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse(command = "214z",2,ifelse(command = "214y",1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59) = 0
triggerall = var(28)
trigger1 = !IsHelper
trigger1 = !time
var(2) = ifelse((var(28)&2**16),2,ifelse((var(28)&2**15),1,0))

[State 1000, VarSet]
type = varset
triggerall = var(59)
triggerall = var(36);コンボ中は強固定
trigger1 = !IsHelper
trigger1 = !time
var(2) = 2

[State 0, snd]
type = playsnd
trigger1 = anim = 11300 && animelem = 2
value = 3,7
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 11300 && animelemtime(5) = 24
value = 6,1

[State 0, anim]
type = changeanim
triggerall = var(59) = 0
triggerall = !Ishelper
triggerall = anim = 11300 && ((var(2)=0 && animelemtime(5)>=9) || (var(2)=1 && animelemtime(5)>=7) || (var(2)=2 && animelemtime(5)>=7))
trigger1 = command != "holdx" && command != "holdb" && var(2)=0
trigger2 = command != "holdy" && var(2)=1
trigger3 = command != "holdz" && var(2)=2
trigger4 = time >= 82
value = 11301 + var(2)
persistent = 0

[State 0, anim]
type = changeanim
triggerall = var(59)
triggerall = !Ishelper
triggerall = anim = 11300 && ((var(2)=0 && animelemtime(5)>=9) || (var(2)=1 && animelemtime(5)>=7) || (var(2)=2 && animelemtime(5)>=7))
trigger1 = 1
trigger2 = roundstate != 2
trigger3 = time >= 82
value = 11301 + var(2)
persistent = 0

[State 0, anim]
type = changeanim
triggerall = Ishelper
trigger1 = anim = 11300 && ((var(2)=0 && animelemtime(3)>=4) || (var(2)=1 && animelemtime(3)>=2) || (var(2)=2 && animelemtime(3)>=2))
value = 11301 + var(2)+(IsHelper*5)
persistent = 0

[State 0, anim]
type = changeanim
triggerall = !IsHelper
triggerall = var(59) = 0
triggerall = anim = 11300 && animelemtime(5) >= 4
trigger1 = command = "c"
value = 11304
persistent = 0

[State 0, pos]
type = posadd
trigger1 = (anim = [11301,11303]) && animelem = 3
trigger2 = (anim = [11306,11308]) && animelem = 3
x = ceil(32*const(size.xscale))

[State 0, snd]
type = playsnd
trigger1 = (anim = [11301,11303]) && animelem = 1
trigger2 = (anim = [11306,11308]) && animelem = 2
value = 0,13

[State 0, power]
type = poweradd
trigger1 = (anim = [11301,11303]) && animelem = 5
value = 60*!IsHelper

[State 0, hit]
type = hitdef
triggerall = !IsHelper
triggerall = (anim = [11301,11303])
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = 7,2
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,20
guard.pausetime = 1,1
sparkno = s6004
sparkxy = -9,-80
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 80*!IsHelper,80*!IsHelper
givepower = 40*!IsHelper,40*!IsHelper
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = 0
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !IsHelper
triggerall = (anim = [11306,11308])
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = 7,2
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
guard.pausetime = 1,1
sparkno = s6004
sparkxy = -9,-80
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 80*!IsHelper,80*!IsHelper
givepower = 40*!IsHelper,40*!IsHelper
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
guard.velocity = -5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = IsHelper
triggerall = (anim = [11301,11303])
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = ceil(root,fvar(11)*7),2
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,20
guard.pausetime = 1,1
sparkno = s6004
sparkxy = -9,-80
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 80*!IsHelper,80*!IsHelper
givepower = 40*!IsHelper,40*!IsHelper
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = 0
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = IsHelper
triggerall = (anim = [11306,11308])
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage = ceil(root,fvar(11)*7),2
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
guard.pausetime = 1,1
sparkno = s6004
sparkxy = -9,-80
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 80*!IsHelper,80*!IsHelper
givepower = 40*!IsHelper,40*!IsHelper
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
guard.velocity = -5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
sprpriority = 2
p2facing = 1

[state 0]
type = varset
trigger1 = !Ishelper
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.975

[state 0]
type = parentvarset
trigger1 = Ishelper
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.975

[state -2, var]
type = parentvaradd
trigger1 = Ishelper
trigger1 = movehit = 1
var(40) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = !Ishelper
trigger1 = moveguarded = 1
fvar(3) = 16
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = Ishelper
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c"
value = 10000

[State 0, end]
type = changestate
triggerall = !IsHelper
triggerall = movehit
trigger1 = anim = [11301,11303]
trigger1 = animelemtime(8) >= 0
value = 11310

[State 0, end]
type = changestate
triggerall = !IsHelper
trigger1 = anim = [11301,11304]
trigger1 = !animtime
value = 0
ctrl = 1

[state 0]
type = changestate
trigger1 = IsHelper
trigger1 = root,stateno = 75000
value = 10000

;---------------------------------------------------------------------------
[Statedef 11310]
type = S
movetype = A
physics = N
ctrl = 0
anim = 11310
velset = 0,0
sprpriority = 1

[State 0, width]
type = width
trigger1 = 1
value = 10,0

[State 0, vel]
type = velset
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(10) =  0
trigger3 = animelemtime(16) =  0
trigger4 = animelemtime(20) =  0
x = ifelse(p2bodydist x>0,p2bodydist x / 7,10)

[State 0, vel]
type = velset
trigger1 = animelemtime(6) = 0
trigger2 = animelemtime(12) =  0
trigger3 = animelemtime(17) =  0
trigger4 = animelemtime(22) =  0
x = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 21
value = 0,12

[State 0, image]
type = afterimage
trigger1 = !time
time = 50
length = 16
palbright = 15,15,15
palcontrast = 196,196,196
paladd = 0,0,0
palmul = 1,1,1
timegap = 2
framegap = 4
;trans = add1

[State 0, image]
type = afterimage
trigger1 = animelemtime(22) = 0
time = 1
ignorehitpause = 1

[State 0, pos]
type = posadd
trigger1 = animelem = 10
trigger2 = animelem = 16
trigger3 = animelem = 21
x = ceil(16*const(size.xscale))

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
attr = S, SA
damage = 14,5
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 5,20
sparkno = s6004
sparkxy = -9,-87
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 40,40
givepower = 20,20
ground.type = High
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 12
attr = S, SA
damage = 28,10
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 5,20
sparkno = s6004
sparkxy = -9,-68
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 40,40
givepower = 20,20
ground.type = High
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 17
attr = S, SA
damage = 42,15
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 5,20
sparkno = s6004
sparkxy = -12,-40
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 40,40
givepower = 20,20
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 22
attr = S, SA
damage = 56,10
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = up
air.animtype = up
fall.animtype = up
pausetime = 5,20
sparkno = s6004
sparkxy = -7,-90
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,40
givepower = 20,20
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -1.2,ifelse(var(40)<12,-10.2+(var(40)*.30),ifelse((var(40)*.38)<0,0,(var(40)*.8)))
guard.velocity = -2
air.velocity = -1.2,ifelse(var(40)<12,-10.6+(var(40)*.02),ifelse((var(40)*.38)<0,0,(var(40)*.8)))
airguard.velocity = -2,ifelse(var(40)<12,-10.4+(var(40)*.02),ifelse((var(40)*.38)<0,0,(var(40)*.8)))
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .44
guard.kill = 0
id = 11310
p2facing = 1

[State 20000]
type = Helper
trigger1 = animelem = 6
trigger2 = animelem = 12
trigger3 = animelem = 17
helpertype = normal
name = "moji"
ID = 20017
pos = 60+random%20, -65-random%20
postype = p1
facing = facing
stateno = 20017
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1


[State 20000]
type = Helper
trigger1 = animelem = 21
helpertype = normal
name = "moji"
ID = 20016
pos = 60, -95
postype = p1
facing = facing
stateno = 20016
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 0, end]
type = targetstate
trigger1 = numtarget(11310) && movehit = 1 && var(40) >= 13
value = 11320
id = 11310

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;やられ
[Statedef 11320]
movetype = H
physics = N
anim = 5030
ctrl = 0
velset = 0,0

[State 1223, 速度]
type = velset
trigger1 = HitShakeOver
trigger1 = enemynear,Pos X <= 0
x = -2
y = -1
persistent = 0

[State 1223, 速度]
type = VelAdd
trigger1 = 1
y = .44

[State 5030, 4]
type = Changeanim
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5050

[State 1223, 自分のステートへ]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y > 0
value = 11321

[Statedef 415 - d.Y Helper]
type = A
movetype = A
physics = N
ctrl = 0
anim = 415
sprpriority = 2


[state 0]
type = assertSpecial
trigger1 = root,stateno = 75000
flag = invisible
 
[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = 1
value = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(3) = root,fvar(3)
ignorehitpause = 1

[State 0, anim]
type = varset
trigger1 = var(8)
var(8) = -1

[State 400, CornerPush]
type = VarSet
trigger1 = 1
var(8) = root,var(8)
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(0)

[State 0, end]
type = changestate
triggerall = root,movetype != H  
trigger1 = root,stateno = 2000
trigger2 = root,stateno = 2100
trigger3 = root,stateno = 2110
trigger4 = root,stateno = 2200
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3000 ;&& root,time = 3
value = 3050

[State 0, end]
type = changestate 
trigger1 = root,stateno = 1000
value = 1050

[State 0, end]
type = changestate 
trigger1 = root,stateno = 1100
value = 1150

[State 0, end]
type = changestate 
trigger1 = root,stateno = 1200
value = 1250

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 410
trigger3 = root,stateno = 75000
value = 10000
 
 
;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 11321]
type    = L
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = time = 50
value = 5120
  
 
 
;==============================================================================
;スタンドシュート
[Statedef 3100]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12300
velset = 0,0
sprpriority = 1
poweradd = -1000
facep2 = 1;-(prevstateno=[100,119])

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 3,0
channel = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, nhb]
type = nothitby
trigger1 = animelemtime(4) < 3
trigger2 = movehit
value = SCA
time = 1

[State 0, image]
type = afterimage
trigger1 = animelem = 4
time = 14
length = 14
palbright = 15,15,15
palcontrast = 196,196,196
paladd = 0,0,0
palmul = 1,1,1
timegap = 2
framegap = 4
;trans = add1

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 6,0

[State 0, pos]
type = velset
trigger1 = animelemtime(4) = 0
x = 15

[State 0, pos]
type = velmul
trigger1 = animelemtime(4) >= 0
x = .9

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
attr = S, HA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
guard.pausetime = 13,13
sparkno = s6004
sparkxy = -10,-57
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
givepower = 40,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0
air.velocity = 0
ground.velocity = -12
guard.velocity = -8
airguard.velocity = -3,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 12
envshake.freq = 55
envshake.ampl = -4
fall = 0
kill = 0
guard.kill = 0
id = 12300
p2facing = 1

[State 901, Throw]
type = TargetState
triggerall = numtarget(12300)
trigger1 = movehit
value = 12320
ignorehitpause = 1
id = 12300

[State 0, end]
type = changestate
triggerall = numtarget(12300)
trigger1 = movehit
trigger1 = target,stateno = 12320
value = 3110

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;スタンドシュートhit
[Statedef 3110]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12301
velset = 0,0
sprpriority = -1
poweradd = -1000

[State 0, screen]
type = targetbind
trigger1 = !time
pos = 125,0
id = 12300

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 130,0

[State 0, nhb]
type = attackdist
trigger1 = 1
value = 0

[State 0, nhb]
type = velset
trigger1 = animelem = 3
x = 5

[State 0, nhb]
type = velmul
trigger1 = animelemtime(3) >= 0
x = .9

[State 0, nhb]
type = playsnd
trigger1 = animelemtime(3) = 1
trigger2 = animelem = 6
trigger3 = animelem = 9
trigger4 = animelem = 12
value = 6,7
channel = 2

[State 0, nhb]
type = playsnd
trigger1 = animelemtime(3) = 1
trigger2 = animelem = 9
value = 0,30
channel = 3

[State 0, nhb]
type = explod
trigger1 = animelemtime(3) = 1
trigger2 = animelem = 6
trigger3 = animelem = 9
trigger4 = animelem = 12
anim = 12350
id = 12350
postype = p2
facing = -1
sprpriority = 3
pos = -5,-40-(random%40)
scale = const(size.xscale),const(size.yscale)

[State 0, explod]
type = explod
trigger1 = animelemtime(3) = 1
anim = 11015
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = animelem = 6
anim = 11013
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = animelem = 9
anim = 11012
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 1
postype = p1

[State 0, explod]
type = explod
trigger1 = animelem = 12
anim = 11011
id = 11010
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 1
postype = p1

[State 0, nhb]
type = targetstate
trigger1 = animelemtime(3) = 1
trigger2 = animelem = 6
trigger3 = animelem = 9
trigger4 = animelem = 12
value = 12321
id = 12300

[State 0, nhb]
type = targetlifeadd
trigger1 = animelemtime(3) = 1
;trigger2 = animelem = 6
trigger2 = animelem = 9
;trigger4 = animelem = 12
value = ceil(ifelse(-14*fvar(0)>-7,-7,-14*fvar(0)))
id = 12300
kill = 0

[State 0, nhb]
type = hitadd
trigger1 = animelemtime(3) = 1
trigger2 = animelem = 6
trigger3 = animelem = 9
trigger4 = animelem = 12
value = numtarget(12300)

[State 0, nhb]
type = varadd
trigger1 = animelemtime(3) = 1
;trigger2 = animelem = 6
trigger2 = animelem = 9
;trigger4 = animelem = 12
var(40) = 1

[State 0, nhb]
type = targetstate
trigger1 = time = 240
value = 12322
id = 12300

[State 0, nhb]
type = changestate
trigger1 = time = 240
value = 3111

;------------------------------------------------------------------------------
;スタンドシュートhit2
[Statedef 3111]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12302
velset = -1,0
sprpriority = 1

[State 0, screen]
type = playsnd
trigger1 = !time
value = 2,4
channel = 0

[State 0, screen]
type = playsnd
trigger1 = !time
value = 6,0

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 100,0

[State 0, nhb]
type = attackdist
trigger1 = 1
value = 0

[State 0, nhb]
type = velset
trigger1 = animelem = 2
x = 15

[State 0, explod]
type = explod
trigger1 = animelem = 2
anim = 8020
id = 8000
pos = 10,0
postype = p1
scale = 1,1
sprpriority = -1
ownpal = 0
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, nhb]
type = null;velmul
trigger1 = animelemtime(2) > 0
x = .6

[State 0, nhb]
type = changeanim
trigger1 = target,pos x*facing - pos x*facing < 45
value = anim
elem = 4
persistent = 0

[State 0, nhb]
type = velset
trigger1 = animelemtime(4) = 0
x = 0

;最後
[State 0, nhb]
type = null;playsnd
trigger1 = animelemtime(4) = 1
value = 0,27

[State 0, nhb]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 6,8

[State 0, nhb]
type = targetlifeadd
trigger1 = animelemtime(4) = 1
value = ceil(ifelse(-56*fvar(0)>-7,-7,-56*fvar(0)))
id = 12300
kill = 1

[State 0, nhb]
type = hitadd
trigger1 = animelemtime(4) = 1
value = numtarget(12300)

[State 0, nhb]
type = varadd
trigger1 = animelemtime(4) = 1
var(40) = 1

[State 0, shake]
type = varset
trigger1 = animelemtime(5) >= 0
trigger1 = win
trigger1 = matchover
fvar(12) = 1

[State 0, shake]
type = envshake
trigger1 = animelem = 4
time = 20
freq = 70
ampl = 5

[State 0, explod]
type = explod
trigger1 = animelem = 4
anim = 6004
id = 6000
facing = -1
postype = p2
pos = -10,-60
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ignorehitpause = 1

[State 0, nhb]
type = targetstate
trigger1 = animelem = 4
value = 12323
id = 12300

[State 0, shake]
type = velset
trigger1 = animelemtime(4) = 11
trigger1 = target(12300),BackEdgeBodyDist < 15
x = -16

[State 0, shake]
type = velmul
trigger1 = animelemtime(4) >= 11
x = .8

[State 0, nhb]
type = changestate
triggerall = animelemtime(9) > 26
trigger1 = BackEdgeBodyDist < 30
value = 3112

[State 0, nhb]
type = changestate
triggerall = animelemtime(9) > 26
trigger1 = !numtarget
trigger2 = target(12300),statetype = L
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;スタンドシュートend
[Statedef 3112]
type = S
movetype = I
physics = N
ctrl = 0
anim = 10100
velset = 0,0
sprpriority = 1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = velset
trigger1 = animelem = 2
x = 5

[State 0, nhb]
type = changeanim
triggerall = anim != 10101
triggerall = animelemtime(3) >= 0
trigger1 = !(BackEdgeBodyDist < 30)
value = 10101

[State 0, nhb]
type = changestate
trigger1 = anim = 10101
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;スタンドシュート(enemy)
[Statedef 12320]
type = S
movetype = H
physics = N
ctrl = 0
velset = -3,0
sprpriority = 0
anim = 5012

[State 0, screen]
type = null;posadd
trigger1 = time = 7
y = -10

[State 0, screen]
type = velmul
trigger1 = 1
x = .85

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, screen]
type = playerpush
trigger1 = 1
value = 0

[State 0, screen]
type = nothitby
trigger1 = 1
value = SCA

;------------------------------------------------------------------------------
;スタンドシュート(enemy2)
[Statedef 12321]
type = A
movetype = H
physics = N
ctrl = 0
velset = -.05,0
sprpriority = 0
anim = 5002+(random%2)*10

[State 0, pos]
type = posadd
trigger1 = 1
x = 1*ifelse(time%2=0,-1,1)

[State 0, screen]
type = changeanim
trigger1 = time = 4
value = anim+5

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, screen]
type = playerpush
trigger1 = 1
value = 0

[State 0, screen]
type = nothitby
trigger1 = 1
value = SCA

;------------------------------------------------------------------------------
;スタンドシュート(enemy3)
[Statedef 12322]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0
anim = 5017

[State 210, 3]
type = ScreenBound
trigger1 = 1
value = 1

[State 0, screen]
type = changeanim
trigger1 = selfanimexist(5950)
trigger1 = !time
value = 5950

;------------------------------------------------------------------------------
;スタンドシュート(enemy4)
[Statedef 12323]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0
anim = 5012

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 0, pos]
type = changeanim
trigger1 = time < 11
value = 5012

[State 0, pos]
type = posadd
trigger1 = time < 11
x = 1*ifelse(time%2=0,-1,1)

[State 0, screen]
type = changeanim
trigger1 = time = 11
value = 5050
[State 0, screen]
type = changeanim
trigger1 = time = 11
trigger1 = selfanimexist(5052)
value = 5052
[State 0, screen]
type = changeanim
trigger1 = time = 11
trigger1 = selfanimexist(5900)
value = 5900

[State 0, screen]
type = playerpush
trigger1 = 1
value = 0

[State 0, screen]
type = velset
trigger1 = time = 11
x = -12
y = -5

[State 0, screen]
type = veladd
trigger1 = time >= 11
y = .4

[State 0, self]
type = SelfState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 5100


