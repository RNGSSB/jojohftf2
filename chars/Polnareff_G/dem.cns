;タンデム
[Statedef 3000]
type = U
movetype = A
physics = S
ctrl = 0
anim = 3000
velset = 0,0
sprpriority = 0

[State 0, pos]
type = posadd
trigger1 = var(0)
x = -15

;AI画面端までの距離を測る
[state 0]
type=Helper
trigger1=!numhelper(60000)
helpertype=normal
name="f_edge"
ID=60000
pos=220, 0
postype=p1
facing=1
stateno=60000
ownpal=1
supermovetime=99999
pausemovetime=99999

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, var]
type = varset
trigger1 = !time
var(1) = 80

[State 0, var]
type = varset
trigger1 = !time
var(21) = 0

[State 0, var]
type = varset
trigger1 = !time
var(22) = 0

[State 0, super]
type = superpause
trigger1 = time = 4
time = 120
movetime = 120
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000
persistent = 0

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 7100
id = 7100
pos = 0,ceil(-88*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[state 0, helper]
type = helper
trigger1 = time = 4
helpertype = normal
name = "super2"
stateno = 8000
id = 8000
pos = 0,0
postype = p1
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = .83
size.yscale = .83
persistent = 0

[State 0, nhb]
type = nothitby
trigger1 = time < 125
value = SCA

[State 0, nhb]
type = nothitby
trigger1 = time = 125
value = SCA
time = 20

[State 0, var]
type = varadd
trigger1 = time >= 125
var(1) = -1

[State 0, snd]
type = playsnd
trigger1 = time = 4
value = 3,4
channel = 0

;AIデムデム制限
[State 0, var]
type = varset
trigger1 = 1
var(56) = 1

;AIルート指定

;Aルート(画面端ではなく相手立屈関係無し)
[State 0, snd]
type = varset
triggerall = var(39) != 10002 && var(39) != 10005
trigger1 = time = 1
trigger1 = !(enemynear(var(48)),BackEdgeBodyDist <= 27)
trigger2 = time = 4 && !var(39)
var(39) = 10000

;Fルート(対空デム)
[State 0, snd]
type = varset
triggerall = var(39) != 10002
trigger1 = time = 1
trigger1 = p2statetype = A
var(39) = 10005

;Bルート(画面端で相手立屈関係無し)
[State 0, snd]
type = varset
triggerall = var(39) != 10002 && var(39) != 10005
trigger1 = time = 3
trigger1 = (enemynear(var(48)),BackEdgeBodyDist <= 27)
trigger1 = !helper(60000),var(1)
var(39) = 10001

;Eルート(画面端コン2)
[State 0, snd]
type = varset
triggerall = var(39) != 10002 && var(39) != 10005
trigger1 = time = 4
trigger1 = (enemynear(var(48)),BackEdgeBodyDist <= 27)
trigger1 = !helper(60000),var(1)
trigger1 = random < 500
var(39) = 10004

;Dルート(2回ラスショ魅せコン)
[State 0, snd]
type = varset
triggerall = var(39) != 10002 && var(39) != 10005
trigger1 = time = 3
trigger1 = power >= 2500
trigger1 = p2life > 300 && p2statetype = S
trigger1 = !helper(60000),var(0)
trigger1 = random < power/10+200
var(39) = 10003

;Cルート(補正無しコン)
[State 0, snd]
type = varset
trigger1 = time = 1
trigger1 = var(36) = 10
var(39) = 10002

[State 0, snd];AI
type = varset
trigger1 = time = 2
var(36) = 0

;===========================================================================
;ルートA
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = var(59) && var(39)= 10000
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 36
trigger3 = time = 60
trigger4 = time = 84
trigger5 = time = 108
var(21) = 30200

;---------------------------------------------------------------------------
[State 0, var];SMA
type = varset
triggerall = var(59) && var(39)= 10000
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 40
trigger3 = time = 64
trigger4 = time = 88
trigger5 = time = 112
var(21) = 30210

;---------------------------------------------------------------------------
[State 0, var];SHA
type = varset
triggerall = var(59) && var(39)= 10000
triggerall = time > 3
triggerall = var(18)!=4
trigger1 = time = 20
trigger2 = time = 44
trigger3 = time = 68
trigger4 = time = 92
trigger5 = time = 116
var(21) = 30220

;===========================================================================
;ルートA(音とか)
;===========================================================================
[State 0, var]
type = varadd
triggerall = var(59) && var(39)= 10000
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 36
trigger3 = time = 60
trigger4 = time = 84
trigger5 = time = 108
trigger6 = time = 16
trigger7 = time = 40
trigger8 = time = 64
trigger9 = time = 88
trigger10 = time = 112
trigger11 = time = 20
trigger12 = time = 44
trigger13 = time = 68
trigger14 = time = 92
trigger15 = time = 116
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10000
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 36
trigger3 = time = 60
trigger4 = time = 84
trigger5 = time = 108
value = 0,23
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10000
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 40
trigger3 = time = 64
trigger4 = time = 88
trigger5 = time = 112
value = 0,24
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10000
triggerall = time > 3
trigger1 = time = 20
trigger2 = time = 44
trigger3 = time = 68
trigger4 = time = 92
trigger5 = time = 116
value = 0,25
channel = 2+(time%5)

;===========================================================================
;ルートB
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = var(59) && var(39)= 10001
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 108
var(21) = 30200

;---------------------------------------------------------------------------
[State 0, var];SMA
type = varset
triggerall = var(59) && var(39)= 10001
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 112
var(21) = 30210

;---------------------------------------------------------------------------
[State 0, var];SHA
type = varset
triggerall = var(59) && var(39)= 10001
triggerall = time > 3
triggerall = var(18)!=4
trigger1 = time = 20
trigger2 = time = 116
var(21) = 30220

;---------------------------------------------------------------------------
[State 0, var];11100(L)
type = varset
triggerall = var(59) && var(39)= 10001
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 40
trigger2 = time = 58
trigger3 = time = 76
trigger4 = time = 94
var(21) = 11100

;===========================================================================
;ルートB(音とか)
;===========================================================================
[State 0, var]
type = varadd
triggerall = var(59) && var(39)= 10001
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 17
trigger3 = time = 22
trigger4 = time = 40
trigger5 = time = 58
trigger6 = time = 76
trigger7 = time = 94
trigger8 = time = 108
trigger9 = time = 113
trigger10= time = 118
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10001
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 40
trigger3 = time = 58
trigger4 = time = 76
trigger5 = time = 94
trigger6 = time = 108
value = 0,23
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10001
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 112
value = 0,24
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10001
triggerall = time > 3
trigger1 = time = 20
trigger2 = time = 116
value = 0,25
channel = 2+(time%5)

;===========================================================================
;ルートC
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = var(59) && var(39)= 10002
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 35
trigger2 = time = 95
var(21) = 30220

;---------------------------------------------------------------------------
[State 0, var];11000(H)
type = varset
triggerall = var(59) && var(39)= 10002
triggerall = time > 3
trigger1 = time = 70
var(21) = 11100

;===========================================================================
;ルートC(音とか)
;===========================================================================
[State 0, var]
type = varadd
triggerall = var(59) && var(39)= 10002
triggerall = time > 3
trigger1 = time = 35
trigger2 = time = 95
trigger3 = time = 70
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10002
triggerall = time > 3
trigger1 = time = 70
value = 0,23
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10002
triggerall = time > 3
trigger1 = time = 35
trigger2 = time = 95
value = 0,25
channel = 2+(time%5)

;===========================================================================
;ルートD
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = var(59) && var(39)= 10003
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 16
trigger3 = time = 60
trigger4 = time = 108
var(21) = 30200

;---------------------------------------------------------------------------
[State 0, var];SMA
type = varset
triggerall = var(59) && var(39)= 10003
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 64
trigger2 = time = 112
var(21) = 30210

;---------------------------------------------------------------------------
[State 0, var];SMA
type = varset
triggerall = var(59) && var(39)= 10003
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 24
trigger2 = time = 28
var(21) = 30212

;---------------------------------------------------------------------------
[State 0, var];SHA
type = varset
triggerall = var(59) && var(39)= 10003
triggerall = time > 3
triggerall = var(18)!=4
trigger1 = time = 68
trigger2 = time = 116
var(21) = 30220

;---------------------------------------------------------------------------
[State 0, var];12100
type = varset
triggerall = var(59) && var(39)= 10003
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 30
trigger2 = time = 78
var(21) = 12100

;===========================================================================
;ルートD(音とか)
;===========================================================================
[State 0, var]
type = varadd
triggerall = var(59) && var(39)= 10003
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 16
trigger3 = time = 60
trigger4 = time = 108
trigger5 = time = 64
trigger6 = time = 112
trigger7 = time = 24
trigger8 = time = 28
trigger9 = time = 68
trigger10 = time = 116
trigger11 = time = 30
trigger12 = time = 78
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10003
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 45
trigger3 = time = 83
trigger4 = time = 30
trigger5 = time = 68
value = 0,23
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10003
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 20
trigger3 = time = 49
trigger4 = time = 87
trigger5 = time = 30
trigger6 = time = 68
value = 0,24
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10003
triggerall = time > 3
trigger1 = time = 53
trigger2 = time = 91
value = 0,25
channel = 2+(time%5)

;===========================================================================
;ルートE
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = var(59) && var(39)= 10004
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 50
trigger3 = time = 88
var(21) = 30200

;---------------------------------------------------------------------------
[State 0, var];SMA
type = varset
triggerall = var(59) && var(39)= 10004
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 54
trigger3 = time = 92
var(21) = 30210

;---------------------------------------------------------------------------
[State 0, var];SHA
type = varset
triggerall = var(59) && var(39)= 10004
triggerall = time > 3
triggerall = var(18)!=4
trigger1 = time = 20
trigger2 = time = 58
trigger3 = time = 96
var(21) = 30220

;---------------------------------------------------------------------------
[State 0, var];11200(L)
type = varset
triggerall = var(59) && var(39)= 10004
triggerall = var(18)!=4
trigger1 = time = 40
trigger2 = time = 78
var(21) = 11200

;===========================================================================
;ルートE(音とか)
;===========================================================================
[State 0, var]
type = varadd
triggerall = var(59) && var(39)= 10004
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 50
trigger3 = time = 88
trigger4 = time = 16
trigger5 = time = 54
trigger6 = time = 92
trigger7 = time = 20
trigger8 = time = 58
trigger9 = time = 96
trigger10= time = 40
trigger11= time = 78
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10004
triggerall = time > 3
trigger1 = time = 12
trigger2 = time = 50
trigger3 = time = 88
trigger4 = time = 40
trigger5 = time = 78
value = 0,23
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10004
triggerall = time > 3
trigger1 = time = 16
trigger2 = time = 54
trigger3 = time = 92
value = 0,24
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10004
triggerall = time > 3
trigger1 = time = 20
trigger2 = time = 58
trigger3 = time = 96
value = 0,25
channel = 2+(time%5)

;===========================================================================
;ルートF
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = var(59) && var(39)= 10005
triggerall = var(18)!=4
triggerall = time > 3
trigger1 = time = 100
var(21) = 30200

;===========================================================================
;ルートF(音とか)
;===========================================================================
[State 0, var]
type = varadd
triggerall = var(59) && var(39)= 10005
triggerall = time > 3
trigger1 = time = 100
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = var(59) && var(39)= 10005
triggerall = time > 3
trigger1 = time = 100
value = 0,23
channel = 2+(time%5)

;===========================================================================
;tandem input
;===========================================================================
[State 0, var];SLA
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = (command = "x" || command = "b") && command != "holddown"
var(21) = 30200

;---------------------------------------------------------------------------
[State 0, var];SMA
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "y" && command != "holddown"
var(21) = 30210

;---------------------------------------------------------------------------
[State 0, var];SMA2
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "y" && command != "holddown" && command = "holdfwd"
var(21) = 30211

;---------------------------------------------------------------------------
[State 0, var];SMA3
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "y" && command != "holddown" && command = "holdback"
var(21) = 30212

;---------------------------------------------------------------------------
[State 0, var];SHA
type = varset
triggerall = !var(59)
trigger1 = time > 3
triggerall = var(18)!=4
trigger1 = command = "z" && command != "holddown"
var(21) = 30220

;---------------------------------------------------------------------------
[State 0, var];SHA2
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "z" && command != "holddown" && command = "holdfwd"
var(21) = 30222

;---------------------------------------------------------------------------
[State 0, var];CLA
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = (command = "x" || command = "b") && command = "holddown"
var(21) = 30400

;---------------------------------------------------------------------------
[State 0, var];CMA
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "y" && command = "holddown"
var(21) = 30410

;===========================================================================
[State 0, var];CHA
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "z" && command = "holddown"
var(21) = 30420

;---------------------------------------------------------------------------
[State 0, var];11000(L)
type = varset
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "x" && var(18)=4
var(21) = 11000

;---------------------------------------------------------------------------
[State 0, var];11000(M)
type = varset
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "y" && var(18)=4
var(21) = 11001

;---------------------------------------------------------------------------
[State 0, var];11000(H)
type = varset
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "z" && var(18)=4
var(21) = 11002
;---------------------------------------------------------------------------
[State 0, var];11300(L)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "214x" 
var(21) = 11300

;---------------------------------------------------------------------------
[State 0, var];11300(M)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "214y"
var(21) = 11301

;---------------------------------------------------------------------------
[State 0, var];11300(H)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "214z"
var(21) = 11302

;---------------------------------------------------------------------------
[State 0, var];11100(L)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "demrei1"
var(21) = 11100

;---------------------------------------------------------------------------
[State 0, var];11100(M)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "demrei2"
var(21) = 11101

;---------------------------------------------------------------------------
[State 0, var];11100(H)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "demrei3"
var(21) = 11102

;---------------------------------------------------------------------------
[State 0, var];11200(L)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "demSS1"
var(21) = 11200

;---------------------------------------------------------------------------
[State 0, var];11200(M)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "demSS2"
var(21) = 11201

;---------------------------------------------------------------------------
[State 0, var];11100(H)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "demSS3"
var(21) = 11202

;===========================================================================
[State 0, var];12100
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "214aa1"
var(21) = 12100

;---------------------------------------------------------------------------
[State 0, var];12100(2)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "214aa2"
var(21) = 12101

;---------------------------------------------------------------------------
[State 0, var];12100(3)
type = varset
triggerall = !var(59)
triggerall = var(18)!=4
trigger1 = time > 3
trigger1 = command = "214aa3"
var(21) = 12102

;---------------------------------------------------------------------------
;===========================================================================
;tandem count
;===========================================================================
[State 0, var]
type = varadd
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "x" || command = "y" || command = "z"
var(22) = 1

[State 0, snd]
type = playsnd
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "x"
value = 0,23
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "y"
value = 0,24
channel = 2+(time%5)

[State 0, snd]
type = playsnd
triggerall = !var(59)
trigger1 = time > 3
trigger1 = command = "z"
value = 0,25
channel = 2+(time%5)

;---------------------------------------------------------------------------

[State 0, end]
type = changestate
triggerall = time > 125
trigger1 = command != "holdc" || var(59)
trigger2 = var(1) <= 0
value = 3001
;---------------------------------------------------------------------------
;タンデム入力終了
[Statedef 3001]
type = S
movetype = I
physics = S
anim = 3001

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;タンデム(スタンド/待機)
[Statedef 3050]
type = U
movetype = I
physics = N
ctrl = 0
anim = 20000
sprpriority = 2

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 5,0

[state 0, helper]
type = helper
trigger1 = !numhelper(30000)
trigger1 = root,stateno = 3000
helpertype = normal
name = "tandem input"
stateno = 30000
id = 30000
pausemovetime = 999999
supermovetime = 999999
postype = p1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 10000

[State 0, end]
type = changestate
trigger1 = root,stateno = 3001
trigger1 = root,time = 2
value = 3051

;---------------------------------------------------------------------------
;タンデム(スタンド/開始)
[Statedef 3051]
type = U
movetype = I
physics = N
ctrl = 0
anim = 10102
velset = 0,0

[State 0, state]
type = varset
trigger1 = !time
var(38) = 0

[State 0, state]
type = velset
trigger1 = time = 2
x = 10;10.5

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, hit]
type = hitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varset
trigger1 = !time
var(6) = 15

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = 1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(25)
value = anim
elem = animelemno(0)

[State 0, pos]
type = posfreeze
trigger1 = root,var(25)

[State 0, var]
type = parentvarset
trigger1 = 1
var(25) = 1

[State 0, velset]
type = velset
trigger1 = roundstate = 2
trigger1 = (p2bodydist x = [-10,30]) || (time = 60)
trigger1 = var(4)
x = 0

[State 0, velset]
type = turn
triggerall = roundstate = 2
trigger1 = p2bodydist x < -10 && time = 60
trigger1 = var(4)
;trigger2 = (p2bodydist x = [-15,-10]) && !time

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = (p2bodydist x = [-10,30]) || (time = 60)
trigger1 = var(4) = [12100,12102]
value = 12100

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = (p2bodydist x = [-10,30]) || (time = 60)
trigger1 = var(4) = [11000,11302]
value = var(4)-(var(4)%10)

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = (p2bodydist x = [-10,30]) || (time = 60)
trigger1 = var(4)
value = var(4)

[State 0, end]
type = changestate
triggerall = time > 3
trigger1 = (p2bodydist x = [-10,30]) || (time = 60)
trigger2 = root,command = "c" && var(38) >= 30
trigger3 = roundstate != 2
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000
 
[Statedef 30200 - X]
type = S
movetype = A
physics = N
ctrl = 0
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changeanim
trigger1 = !time
value = ifelse(p2bodydist x < 26,10206,10205)

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 2,0
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 30205
trigger1 = animelem = 2
value = 0,30

[State 0, hit]
type = hitdef
trigger1 = anim = 10205
trigger1 = animelem = 2
attr = S, NA
damage = ceil(root,fvar(11)*35),9
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6000
sparkxy = -9,-68
guard.sparkno = s6010
hitsound = s0,6
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 18
guard.kill = 0
sprpriority = 2
id = 10200
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 10206
trigger1 = animelem = 2
attr = S, NA
damage = 14,3
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 9,11
sparkno = s6000
sparkxy = -8,-72
guard.sparkno = s6010
hitsound = s0,1
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 18
guard.kill = 0
sprpriority = 2
id = 10201
p2facing = 1

[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.8
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(4)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(4)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30222
trigger1 = animelemtime(4)=0 || movecontact
value = 30320

[State 0, end];チェーン（中）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30211 || var(4) = 30212
trigger1 = animelemtime(4)=0 || movecontact
value = 30310

[State 0, end];チェーン
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30210 || var(4) = 30220 || var(4) = 30410 || var(4) = 30420
trigger1 = animelemtime(4)=0 || movecontact
value = var(4)+100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15 || (movehit && root,var(39)=10005)
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30210 - Y]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10215
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,13

[State 0, pos]
type = posadd
trigger1 = animelem = 3
x = ceil(18*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = S, NA
damage = ceil(root,fvar(11)*56),14
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 5,11
sparkno = s6001
sparkxy = -8,-54
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 21
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 24
guard.kill = 0
sprpriority = 2
id = 10210
p2facing = 1

[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.75
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(8)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(8)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30222
trigger1 = animelemtime(8)=0 || movecontact
value = 30320

[State 0, end];チェーン
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30220 || var(4) = 30420
trigger1 = animelemtime(8)=0 || movecontact
value = var(4)+100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30211 - f.Y]
type = A
movetype = A
physics = N
ctrl = 0
anim = 10216
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, pos]
type = offset
trigger1 = 1
y = -10

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 2

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 8
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = animelem = 8
attr = S, NA
damage = ceil(root,fvar(11)*35),8
priority = 5,Hit
hitflag = MAF
guardflag = HA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6001
sparkxy = -3,-88
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
guard.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 28
guard.kill = 0
sprpriority = 2
id = 10211
p2facing = 1

[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.75
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30212 - b.Y]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10217
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,30

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
attr = S, NA
damage = ceil(root,fvar(11)*49),12
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6001
sparkxy = -8,-89
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 28
guard.kill = 0
sprpriority = 2
id = 10212
p2facing = 1

[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.75
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(4)=1; || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(4)=1; || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30220 || var(4) = 30420 || var(4) = 30222
trigger1 = animelemtime(4)=1; || movecontact
value = 30321

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "a" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30220 - Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10225
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = anim = 10220 && animelem = 5
trigger2 = anim = 10221 && animelem = 3
trigger3 = anim = 10225 && animelem = 5
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 10220 && animelem = 5
trigger2 = anim = 10221 && animelem = 3
trigger3 = anim = 10225 && animelem = 5
value = 0,13

[State 0, pos]
type = posadd
triggerall = anim = 10220
trigger1 = animelem = 6
trigger2 = animelem = 7
x = ceil(14*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
attr = S, NA
damage = ceil(root,fvar(11)*84),21
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 11,11
sparkno = s6002
sparkxy = -4,-64
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -5.5,-5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10220
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
trigger5 = root,var(59) && root,var(39) = 10002
trigger5 = animelemtime(8) >= 0
value = 10000

 [state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30222 - f.Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10227
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = velset
trigger1 = animelemtime(5) >= 0
x = 3

[State 0, vel]
type = velmul
trigger1 = animelemtime(7) >= 0
x = .4

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
attr = S, NA
damage = ceil(root,fvar(11)*63),16
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 11,11
sparkno = s6002
sparkxy = -10,-89
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -8,-5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = -16
air.hittime = 20
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10222
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(9)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(9)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30310 - Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10315
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,13

[State 0, pos]
type = posadd
trigger1 = animelem = 3
x = ceil(18*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = S, NA
damage = ceil(root,fvar(11)*56),14
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 9,11
;pausetime = 5,11
sparkno = s6001
sparkxy = -8,-54
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 24
guard.kill = 0
sprpriority = 2
id = 10310
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（SC6強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
triggerall = prevstateno = 30200
trigger1 = var(4) = 30222
trigger1 = animelemtime(7)=0 || movecontact
value = 30321

[State 0, end];チェーン
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30220 || var(4) = 30420
trigger1 = animelemtime(7)=0 || movecontact
value = var(4)+100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30312 - f.Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10317
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,30

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = ceil(root,fvar(11)*49),12
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6001
sparkxy = -8,-89
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 28
guard.kill = 0
sprpriority = 2
id = 10312
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

;4中→強→中→中
[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
triggerall = prevstateno = 30321
trigger1 = var(4) = 30210 || var(4) = 30211 || var(4) = 30212 || var(4) = 30410
trigger1 = animelemtime(4)=0; || movecontact
value = 30313

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30313 - f.Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10317
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,30

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = ceil(root,fvar(11)*49),12
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6001
sparkxy = -8,-89
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 28
guard.kill = 0
sprpriority = 2
id = 10312
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

;4中→強→中→中→強
[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
triggerall = prevstateno = 30312
trigger1 = var(4) = 30220 || var(4) = 30222 || var(4) = 30420
trigger1 = animelemtime(4)=0 || movecontact
value = 30322

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30320 - Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10325
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
trigger2 = animelemtime(8) >= 0
x = 1

[State -2, クリップボード]
type     = DisplayToClipBoard
trigger1 = 1
text     = "stand=%f"
params   = vel x
IgnoreHitPause = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 7
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 7
value = 0,13

[State 0, pos]
type = posadd
trigger1 = animelem = 2
x = ceil(10*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animelem = 9
attr = S, NA
damage = ceil(root,fvar(11)*84),21
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6002
sparkxy = -4,-64
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -5.5,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 24
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10320
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = null;VarSet
trigger1 = movecontact = 1
var(8) = 6
ignorehitpause = 1

[State 0, pos]
type = null;posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 7;8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30321 - fZ]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10327
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = velset
trigger1 = animelemtime(5) >= 0
x = 3

[State 0, vel]
type = velmul
trigger1 = animelemtime(7) >= 0
x = .4

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = ceil(root,fvar(11)*63),16
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 1,11
sparkno = s6002
sparkxy = -10,-89
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -7,-3*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10321
p2facing = 1
 

[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime; || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

;6強から
[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
triggerall = prevstateno = 30310
trigger1 = var(4) = 30220 || var(4) = 30222 || var(4) = 30420
trigger1 = animelemtime(6)=0; || movecontact
value = 30322

;4中から
[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
triggerall = prevstateno = 30212
trigger1 = var(4) = 30210 || var(4) = 30211 || var(4) = 30212 || var(4) = 30410
trigger1 = animelemtime(6)=0; || movecontact
value = 30312

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30322 - Z]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10326
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, pos]
type = posadd
trigger1 = animelemtime(4) <= 0
x = 2

[State 0, snd]
type = playsnd
trigger1 = !time
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = ceil(root,fvar(11)*42),11
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 3,11
sparkno = s6002
sparkxy = -8,-80
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -7,-5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 28
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10322
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30400 - d.X]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10405
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,0
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,30

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = C, NA
damage = ceil(root,fvar(11)*35),9
priority = 3,Hit
hitflag = MAF
guardflag = LA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6000
sparkxy = -7,-40
guard.sparkno = s6010
hitsound = s0,6
guardsound = s0,9
getpower = 20*!IsHelper,0
givepower = 10*!IsHelper,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 18
guard.kill = 0
sprpriority = 2
id = 10400
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.8
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(5)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(5)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30222
trigger1 = animelemtime(5)=0 || movecontact
value = 30320

[State 0, end];チェーン（中）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30211 || var(4) = 30212
trigger1 = animelemtime(5)=0 || movecontact
value = 30310

[State 0, end];チェーン
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30210 || var(4) = 30220 || var(4) = 30410 || var(4) = 30420
trigger1 = animelemtime(5)=0 || movecontact
value = var(4)+100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30410 - d.Y]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10415
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = animelem= 4
attr = C, NA
damage = ceil(root,fvar(11)*56),14
priority = 5,Hit
hitflag = MAF
guardflag = LA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 9,11
sparkno = s6001
sparkxy = -8,-12
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 24
guard.kill = 0
sprpriority = 2
id = 10410
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.75
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(7)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(7)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30222
trigger1 = animelemtime(7)=0 || movecontact
value = 30320

[State 0, end];チェーン
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30220 || var(4) = 30420
trigger1 = animelemtime(7)=0 || movecontact
value = var(4)+100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30420 - d.Z]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10425
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,13

[State 0, pos]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = ceil(14*const(size.xscale))

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = C, NA
damage = ceil(root,fvar(11)*70),17
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 11,11
sparkno = s6002
sparkxy = -2,-80
guard.sparkno = s6010
hitsound = s0,29
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10420
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30510 - d.Y Combo]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10515
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = animelem= 4
attr = C, NA
damage = ceil(root,fvar(11)*56),14
priority = 5,Hit
hitflag = MAF
guardflag = LA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6001
sparkxy = -8,-12
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
guard.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
air.fall = 1
fall.recover = 1
fall.recovertime = 24
guard.kill = 0
sprpriority = 2
id = 10510
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.75
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = animelemtime(7)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = animelemtime(7)=0 || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end];チェーン（強）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30222
trigger1 = animelemtime(7)=0 || movecontact
value = 30320

[State 0, end];チェーン（6中）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30211
trigger1 = animelemtime(7)=0 || movecontact
value = 30211

[State 0, end];チェーン（中）
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30210 || var(4) = 30212 || var(4) = 30410
trigger1 = animelemtime(7)=0 || movecontact
value = 30511

[State 0, end];チェーン
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(37) != 1
trigger1 = var(4) = 30420 || var(4) = 30220
trigger1 = animelemtime(7)=0 || movecontact
value = var(4)+100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = ifelse(var(37)=1,movecontact,!animtime)
value = ifelse(var(37)!=1,stateno,ifelse((var(4)=[12100,12102]),12100,ifelse((var(4)=[11000,11302]),var(4)-(var(4)%10),var(4))))

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30511 - d.Y Combo]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10416
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 2,1
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 0,13

[State 0, pos]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
x = ceil(16*const(size.xscale))

[State 0, hit]
type = hitdef
trigger1 = animelem= 2
trigger2 = animelem= 3
attr = C, NA
damage = ceil(root,fvar(11)*7),2
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 7,11
sparkno = s6001
sparkxy = -7,-46
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 20*!IsHelper,0
givepower = 10*!IsHelper,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -.3
guard.velocity = -.2
air.type = Low
air.velocity = -2,-3*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
attr = C, NA
damage = ceil(root,fvar(11)*7),2
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = up
fall.animtype = up
pausetime = 7,11
sparkno = s6001
sparkxy = -6,-84
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -2.2,ifelse(root,var(40)<12,-9.8+(root,var(40)*.02),0)
guard.velocity = -5.5
air.type = Low
air.velocity = -2.2,ifelse(root,var(40)<12,-9.8+(root,var(40)*.02),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 1
fall.recover = 1
fall.recovertime = 34
yaccel = .44
guard.kill = 0
sprpriority = 2
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.95
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000
 
[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

[Statedef 30520 - d.Z]
type = C
movetype = A
physics = N
ctrl = 0
anim = 10525
poweradd = 0
sprpriority = 2

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = IsHelper
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = var(6)
value = SCA

[State 10000, HitBy]
type = HitBy
triggerall = IsHelper
trigger1 = !var(6)
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, var]
type = varadd
trigger1 = var(6)
var(6) = -1

[State 0, var]
type = varadd
trigger1 = animelemtime(1) = 1
var(5) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 1100, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root,fvar(0)

[State 1100, Velocity]
type = VelSet
trigger1 = IsHelper
trigger1 = time = 0
x = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,2
volume = 255
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,13

[State 0, pos]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = ceil(14*const(size.xscale))

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = C, NA
damage = ceil(root,fvar(11)*77),28
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 11,11
sparkno = s6002
sparkxy = -2,-80
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.kill = 0
sprpriority = 2
id = 10520
p2facing = 1


[state 0]
type = parentVarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.7
persistent = 0
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [12100,12102]
trigger1 = var(37) != 1
trigger1 = !animtime || movecontact
trigger2 = var(37) = 1 && !animtime
value = 12100

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
triggerall = var(4) = [11000,11302]
trigger1 = var(37) != 1
trigger1 = !animtime || movecontact
trigger2 = var(37) = 1 && !animtime
value = var(4)-(var(4)%10)

;終点フラグ
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 2
var(37) = 0
[State 0, end]
type = varset
trigger1 = !time
trigger1 = var(37) = 1
var(37) = 2
[State 0, end]
type = varadd
trigger1 = time = 1 && !var(37)
trigger1 = prevstateno = stateno
var(37) = 1

[State 0, end]
type = changestate
triggerall = IsHelper
triggerall = roundstate = 2
trigger1 = var(4)
trigger1 = !animtime
value = var(4)

[State 0, end]
type = changestate
triggerall = IsHelper
trigger1 = !var(4)
trigger1 = !animtime
trigger2 = roundstate != 2
trigger3 = !root,var(59) && root,command = "c" && var(38) >= 30
trigger4 = root,var(59) && var(38) >= 30
trigger4 = p2bodydist x < -15
value = 10000

[state 0]
type = changestate
trigger1 = root,stateno = 75000
value = 10000

;------------------------------------------
;------------------------------------------

[Statedef 60000]
type=A
movetype=I
physics=N
ctrl=0
anim=20000;何も表示しないAnimなら、下記完全無敵と影消し、不可視化は不要
sprpriority=0
velset=0, 0;速度。projectileのものと同じにする

[State 9741, Safety];一応
type=selfstate
trigger1=!ishelper
value=0

[State 0];常時完全無敵
type=Nothitby
trigger1=1
value=SCA


[State 30000];画面にとらわれない
type=ScreenBound
trigger1=1
value=0
movecamera=0,0

[State 30000];判定用飛び道具射出
type=Projectile
trigger1=time=0
projID=60001
projanim=20000
velocity=.1, 0;へルパーの初期速度と同じに
projpriority=4
projsprpriority=2
projstagebound=0;0がオススメ
projedgebound=99999
offset=0, 0
postype=p1
supermovetime=99999
pausemovetime=99999
projremovetime=3

[State 30000];判定用飛び道具射出
type=Projectile
trigger1=time=0
projID=60002
projanim=20000
velocity=.1, 0;へルパーの初期速度と同じに
projpriority=4
projsprpriority=2
projstagebound=0;0がオススメ
projedgebound=99999
offset=-150, 0
postype=p1
supermovetime=99999
pausemovetime=99999
projremovetime=3

[State 0];不可視化＆影消し。
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 0];飛び道具が消えたらフラグon。
type=varset
trigger1 = time <= 2
trigger1=!(root,numprojID(60001))
var(0) = 1

[State 0];飛び道具が消えたらフラグon。(近め)
type=varset
trigger1 = time <= 2
trigger1=!(root,numprojID(60002))
var(1) = 1

[State 0]
type=destroyself
trigger1=root,stateno != 3000

