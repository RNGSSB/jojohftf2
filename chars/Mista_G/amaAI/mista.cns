; ミスタのコンスタンツとステートのファイルです。特に難しい記述は使ってないと思います。
;===========================================================================
; コンスタンツ（定数）
;===========================================================================
;---------------------------------------------------------------------------
; ここがキャラの心臓部とも言うべき場所。
; １キャラ単位のライフや大きさなど、標準のステータスを予め決めておく部分。
; このコーナー自体省略出来ません。
;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 960   ;ライフ（体力ゲージ）最大値
power             = 5000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 0     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 11     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 0      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex  = 55,59     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
; ※１：変数のラウンド持ち越し方法
;
; 　変数を次のラウンドへ持ち越したい場合は、↑の
; 　「IntPersistIndex」と「FloatPersistIndex」を使う。
; 　そのやり方はM.U.G.E.Nの説明書にすら載ってないので、ここで例を元に解説。
;
; 　①IntPersistIndex = 23　（Var(23)～Var(59)までを全て次のラウンドへ持ち越せる）
; 　②FloatPersistIndex = 18（FVar(18)～FVar(39)までを全て次のラウンドへ持ち越せる）
;
; 　つまり「Var(**)（Fvar(**)）以降全ての変数を持ち越す」という命令になる。
; 　それ以前のアドレスの変数は全て持ち越さなくなる。
;
; 　全ての変数を持ち越さない場合は、
; 　IntPersistIndexは60以上、FloatPersistIndexは40以上にしておこう。
;
; 　×これはダメ×
; 　　①IntPersistIndex = 10,15,20,25　（15,20,25の部分は意味無し）
; 　　②FloatPersistIndex = 4,16 　　　（16の部分は意味無し）
; 　　これらは最初の数字以外全て無効。
; 
;---------------------------------------------------------------------------
; 改訂前の和訳ＫＦＭではPersistIndexの解釈が無茶苦茶間違ってました。
; 大変失礼致しました。(人・ω・｀)ごめんなさい
; 今回はちゃんと調べて正確な情報を載せてるんで安心してください（苦笑
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale = 0.90			;水平方向の縮尺（通常１）
yscale = 1.00			;垂直方向の縮尺（通常１）
ground.back      = 15      ;地上にいる時の「後方の物理的な幅」
ground.front     = 16      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 12      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-90  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-60  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.5       ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.3        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -6,0   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-9.0      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -3.5       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.5         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -3.5,-10.8  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 3.5,10.8      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-6      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.9       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.9         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .5      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）
;---------------------------------------------------------------------------
; 勝利メッセージ
;---------------------------------------------------------------------------
[ja.Quotes]
victory1 = "ナメてんじゃねーぞ"
victory2 = "じゃあ死ね！覚悟はして来てんだろ？"
victory3 = "自分の幸福を願うならよォーーー\n背中見せてここから消えるんだ…"
;===========================================================================
; ステート
;===========================================================================
;---------------------------------------------------------------------------
; ここからはキャラのそれぞれの行動（ステート）を設定する。
; 番号（ステートナンバー）に気を付ければ良いだけで、
; 行動の決め方もステートの数も作りたいキャラによって自由。
;
; 本来ステートは別のファイルとして扱っているものだけど、
; このようにコンスタンツファイルと一緒にまとめる事も可能。
;
; ステートの基本的な設定はおまけフォルダの「テンプレート.txt」を参照。
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 180, ステート変更]
type = ChangeState
triggerall = Time = 0
trigger1 = matchover
value = 186

[State 180, ステート変更]
type = ChangeState
trigger1 = Time = 0
value = 181
;---------------------------------------------------------------------------
;勝利ポーズ
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 7, 3

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 185
id = 185
pos = ceil(25*const(size.xscale)),ceil(-85*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 183
id = 183
pos = ceil(-40*const(size.xscale)),ceil(-75*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 184
id = 184
pos = ceil(0*const(size.xscale)),ceil(-100*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 182
id = 182
pos = ceil(12*const(size.xscale)),ceil(-62*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 183
id = 183
pos = ceil(20*const(size.xscale)),ceil(-35*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 184
id = 184
pos = ceil(-30*const(size.xscale)),ceil(-35*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;勝利ポーズ ヘルパー
[Statedef 182]
type = S
movetype = I
physics = S
ctrl = 0
anim = 182
velset = 0,0
sprpriority = 3

[State 195, ステート変更]
type = ChangeState
trigger1 = root,stateno != 181
value = 1004
;---------------------------------------------------------------------------
;勝利ポーズ ヘルパー
[Statedef 183]
type = S
movetype = I
physics = S
ctrl = 0
anim = 183
velset = 0,0
sprpriority = 3

[State 195, ステート変更]
type = ChangeState
trigger1 = root,stateno != 181
value = 1004
;---------------------------------------------------------------------------
;勝利ポーズ ヘルパー
[Statedef 184]
type = S
movetype = I
physics = S
ctrl = 0
anim = 184
velset = 0,0
sprpriority = 3

[State 195, ステート変更]
type = ChangeState
trigger1 = root,stateno != 181
value = 1004
;---------------------------------------------------------------------------
;勝利ポーズ ヘルパー
[Statedef 185]
type = S
movetype = I
physics = S
ctrl = 0
anim = 185
velset = 0,0
sprpriority = 3

[State 195, ステート変更]
type = ChangeState
trigger1 = root,stateno != 181
value = 1004
;---------------------------------------------------------------------------
;勝利ポーズ
[Statedef 186]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 10

[State -3,Super]
type = Helper
triggerall = !Numhelper(186)
trigger1 = animelem = 1
id = 187
name = "pistors"
pos = 0,0
postype = P1
stateno = 187
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;勝利時スタンド
[Statedef 187]
type = S
anim = 29999

[State 1000, Spark]
type = Explod
trigger1 = time = 1
Anim = 186
id = 186
pos = 160, 130
postype = left
ownpal = 1
pausemovetime = 99999999
ontop = 1
removetime = -1
facing = root,facing

[State 1000, Spark]
type = Explod
trigger1 = time = 15
Anim = 187
id = 187
pos = 160, 130
;pos = 180, 230
postype = left
ownpal = 1
pausemovetime = 99999999
ontop = 1
removetime = -1
facing = root,facing
scale = 2.0, 2.0

[State 4900, 16]
type = modifyExplod
trigger1 = Time <= 15
Id = 186
scale = .5+(.08*Time)*root,const(size.xscale),.5+(.08*Time)*root,const(size.yscale)

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 15
time = 20
ampl = 8

[State 181, 2]
type = PlaySnd
trigger1 = time = 15
value = 1,14
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 1000, var]
type = varset
trigger1 = time = 0
var(55) = 6

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 3, 4

[State 191, アニメ変更];バトル画面に切り替わった瞬間のフェードインの時、アニメを固定している
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; ※２：AssertSpecial
;
; 　他のコントローラでは設定出来ない『特殊な効果』を指定する命令。
; 　設定したトリガーが有効になってる間だけ一時的に適用される。
;
; 　適用出来るパラメータはこのコントローラを一つ設置する場合、最大３つまで。
; 　書式としては「flag」「flag2」「flag3」を順に加えていく形。
; 　flag2とflag3はオプション。ではその特殊効果を全て紹介。
;
; 　Intro          = イントロ（試合開始前の登場演出アクション）の状態になる。イントロステート専用。
; 　Invisible      = 自分の姿を消す。しかし残像（AfterImage）は消せない。
; 　RoundNotOver   = 現在のラウンドを過ぎない。勝利ポーズ専用。
; 　NoBarDisplay   = ライフバーを非表示にする。
; 　NoBG           = ステージの奥の画像を非表示にし、「真っ黒の背景」にする。
; 　NoFG           = ステージの手前の画像を非表示にする。
; 　NoStandGuard   = 立ちガードが出来なくなる。
; 　NoCrouchGuard  = しゃがみガードが出来なくなる。
; 　NoAirGuard     = 空中ガードが出来なくなる。
; 　NoAutoTurn     = 自動で振り向かない。
; 　NoJuggleCheck  = ジャグルをチェックしない。（ジャグルポイントが減らなくなる）
; 　NoKOSnd        = ＫＯ時の音声（11,0）を鳴らさないようにする。画面中に存在する全員に有効なので注意。
; 　NoKOSlow       = ＫＯ時のスローモーションを無効にする。（ＫＯ直前に有効にしないといけない）
; 　NoShadow       = 自分の影を消す。
; 　GlobalNoShadow = 画面中に存在する全てのプレイヤー（ヘルパーとProjectileも含む）の影を消す。
; 　NoMusic        = 演奏しているＢＧＭを止める。（プラグインによってはＢＧＭがバグるので要注意）
; 　NoWalk         = 歩かない。（前か後ろのキーを入力中コントロールが可能の時に勝手に[Statedef 20]にならない）
; 　TimerFreeze    = タイムカウント（制限時間）を停止する。
; 　UnGuardable    = 自分の全ての攻撃が『ガード不可』になる。
;
;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 3, 13
channel = 0

[state 3003　ピストルズ　ヘルパー]
type = helper
trigger1 = time = 0
name = "s p"
helpertype = normal
stateno = 196
id = 196
pos = ceil(-30*const(size.xscale)),ceil(-105*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 195, ステート変更]
type = ChangeState
trigger1 = Time = 105
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;挑発 ヘルパー
[Statedef 196]
type = S
movetype = I
physics = S
ctrl = 0
anim = 196
velset = 0,0
sprpriority = 3

[State 195, ステート変更]
type = ChangeState
trigger1 = root,stateno != 195
trigger2 = Time = 100
value = 1004
;===========================================================================
; 通常攻撃技
;===========================================================================
;---------------------------------------------------------------------------
; 通常技はそんなに難しいテクニックは使ってないから、
; テンプレートを見ながら確認すれば覚えやすいと思う。
; 基本忘るべからず。
;
; ステートナンバーは、立ち技が２００～２９９、しゃがみ技が４００～４９９、
; ジャンプ技が６００～６９９の間で決めて作るのが一般的。
; しかし強制じゃないので自由に作っちゃってＯＫ。
;---------------------------------------------------------------------------
;立ち弱
 

;---------------------------------------------------------------------------
; 下の「立ち強パンチ」のステートを見てみましょ。
;
;「Width」のコントローラは相手や画面端を押すための『物理的な幅』を
; 一時的に伸ばしたり縮ませたりする命令。
; キャラの幅はバトル中に「Ctrl+C」を押して「判定ボックス」を表示させてる時に
; 一緒に確認出来る。「軸位置から伸びる黄緑色の線」がその幅。
;
; 後は「ChangeAnim」を使って５枚目で攻撃を当てたらすぐに６枚目に
; コマを進ませる命令をしてたり、
;『画像表示優先度』で「振りかぶる時は奥」「振り切った直後から手前」に
; モーション表示の操作をしてるくらいで、難しくない処理。
;
; これは余談だけど、Widthの読み方は「ウィッズ」。
; この解説文書いた時に初めて読み方知ったよ！　｡ﾟ(ﾟつД`ﾟ)ﾟ｡
;---------------------------------------------------------------------------
;立ち中
 
;---------------------------------------------------------------------------
;立ち強
 
;---------------------------------------------------------------------------
;ガーキャン
 
;---------------------------------------------------------------------------
;前立ち強
 
;===========================================================================
;---------------------------------------------------------------------------
; ２Ｄ格ゲーでのしゃがみ通常攻撃は空中ガードが不可な作品が結構多い。
; カンフーマンも例外ではなかったみたい。
; ↓のしゃがみ弱パンチのguardflagが「L」のみになってるのに注目。
; 意味は「Low」。相手はこのしゃがみ弱パンチをガードする場合、
; 「しゃがみガードだけしか出来ない」という事になる。
;
; それ以外は簡単。
;---------------------------------------------------------------------------
;しゃがみ弱パンチ
 
;---------------------------------------------------------------------------
; 効果の違う攻撃を連続でヒットさせる場合は、複数のHitDefが必要。
; ↓のしゃがみ強パンチのguardflagの効果がそれぞれ別々（MとMA）なように、
; パラメータが数値じゃなければ特に。こればかりはどうしようもない。
;---------------------------------------------------------------------------
;しゃがみ中
 
;---------------------------------------------------------------------------
; 誰もが攻撃手段としてお世話になる「足払い」はダウン属性の攻撃。
; 実際に足払いの効果にするにはground.typeを「Trip」に、
; fallを「1」にする必要がある。もちろん当たればジャグルポイントも消費。
;
; ここで一つ補足。ground.typeが「Trip」になっている場合、
; 攻撃力や防御力に関係無く転ばした後に続く攻撃（「コンボ」など）が
;『全て無条件でダメージに補正が掛かる』。
; 必ず通常の半分のダメージ量に下がるので注意。
;---------------------------------------------------------------------------
;屈み強
 
;===========================================================================
;---------------------------------------------------------------------------
; ジャンプ通常攻撃にChangeStateのコントローラが無いのは、
; Physicsを「A」にしているから。
; おまけフォルダの「小ネタ.txt」を参照。（Physicsの仕組み）
;
; しゃがみ通常技とは逆に、ジャンプ通常技は基本的に「中段属性」の攻撃。
; しゃがみガードが出来ないのが普通なので、guardflagを「HA」にしておくのが定石。
;「立ちガードの需要性」と「空対地のガードの揺さぶりによる駆け引き」を
; プレイヤーに楽しんでもらうための先人達の知恵だね。
;---------------------------------------------------------------------------
;ジャンプ弱
 
;---------------------------------------------------------------------------
;ジャンプ中
 
;---------------------------------------------------------------------------
;ジャンプ強
 
;===========================================================================
; 投げ技
;===========================================================================
;---------------------------------------------------------------------------
; エレクバイトが「作るのが退屈と感じる時もあるよ」って言ってるけど、
; 作り出したら意外とハマって楽しくなる投げ技。
; 投げる相手の正確な座標取りは面倒臭いけどね（コラ
; 投げ用のHitDefはテンプレートと見比べて確認すればわかるはず。
;---------------------------------------------------------------------------
;投げ（掴みモーション）
 
;---------------------------------------------------------------------------
;相手側 
;---------------------------------------------------------------------------
;投げぬけ 自分（y.y氏製作）
[Statedef 930]
type = A
movetype = I
physics = A
anim = 5210
velset = -3,-5

[State 0, target]
type = Sprpriority
trigger1 = var(49)=10000
value = 1

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 940

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
;---------------------------------------------------------------------------
;投げ抜け　相手
[Statedef 940]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1
;---------------------------------------------------------------------------
;リロード
 
;---------------------------------------------------------------------------
;薬莢
[Statedef 360]
type = S
movetype = I
physics = S
ctrl = 0
anim = 360
velset = 0,0
sprpriority = 3

[State 200, 落下]
type = posset
trigger1 = anim = 361
y = 0

[State 200, 落下]
type = velset
trigger1 = anim = 361
y = 0

[State 200, 落下]
type = veladd
trigger1 = anim = 360
y = 0.5

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 360
trigger1 = time = 0
value = 1, 13

[State 200, アニメ変更]
type = Changeanim
trigger1 = anim = 360
trigger1 = pos y >= -10 
value = 361

[State 195, ステート変更]
type = destroyself
trigger1 = anim = 361
trigger1 = animTime = 0
;---------------------------------------------------------------------------
弾丸装填
[Statedef 370]
type = S
movetype = I
physics = S
ctrl = 0
anim = 370
velset = 0,0
sprpriority = 3

[State 200, 落下]
type = veladd
trigger1 = anim = 370
y = 0.5

[State 195, ステート変更]
type = destroyself
trigger1 = animTime = 0
;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
;発砲（弱）

;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
;起動変更後
 
;---------------------------------------------------------------------------
; ピストルズ
 

;---------------------------------------------------------------------------
; ピストルズ消滅2
 
;---------------------------------------------------------------------------
;二連射
 
;---------------------------------------------------------------------------
;三連射
 
;---------------------------------------------------------------------------
;ホールド弾
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
;起動変更後(ホールド版)
 
;---------------------------------------------------------------------------
;ホールド弾落下
[Statedef 4444]
type = S
movetype = I
physics = S
ctrl = 0
anim = 4444
velset = 0,0
sprpriority = 3

[State 200, 落下]
type = posset
trigger1 = anim = 4445
y = 0

[State 200, 落下]
type = velset
trigger1 = anim = 4445
y = 0

[State 200, 落下]
type = veladd
trigger1 = anim = 4444
y = 0.5

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 4445
trigger1 = animelemtime(1) = 1
value = 1, 13

[State 200, アニメ変更]
type = Changeanim
trigger1 = anim = 4444
trigger1 = pos y >= -10 
value = 4445

[State 195, ステート変更]
type = destroyself
trigger1 = anim = 4445
trigger1 = animTime = 0
;---------------------------------------------------------------------------
; ピストルズ(ホールド)
 
;---------------------------------------------------------------------------
; ピストルズ(ホールド解除)
 
;---------------------------------------------------------------------------
;発砲（屈）
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; ピストルズ
 
;---------------------------------------------------------------------------
;二連射（屈）
 
;---------------------------------------------------------------------------
;三連射（屈）
 
;---------------------------------------------------------------------------
;発砲（屈ホールド）
 
;---------------------------------------------------------------------------
; 弾（屈ホールド）
 

;---------------------------------------------------------------------------
; 弾 待機（屈ホールド）
 
;---------------------------------------------------------------------------
; ピストルズ（屈ホールド）
 
;---------------------------------------------------------------------------
; ピストルズ(屈ホールド解除)

 
;---------------------------------------------------------------------------
;起動変更後(中段版)
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; ピストルズ

;---------------------------------------------------------------------------
;かわし中段2
 
;---------------------------------------------------------------------------
; 弾2
 
;---------------------------------------------------------------------------
;かわし中段3
 
;---------------------------------------------------------------------------
; 弾3
 
;===========================================================================
;かわし屈発砲 前進
 
;===========================================================================
;かわし屈発砲 後退
 
;---------------------------------------------------------------------------
;かわしてからの発砲（屈）
 
;---------------------------------------------------------------------------
;空中発砲
 
;---------------------------------------------------------------------------
;空中発砲 二連射
  
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; ピストルズ空中
[Statedef 1252]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1202
ctrl = 0
sprpriority = 4

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;テンプレ
[State 1000, 7]
type = parentvaradd
trigger1 = !time
var(53) = 1

[State 1000, 7]
type = parentvarset
trigger1 = root,var(53) = 6
var(53) = 0

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[State 1000, 7]
type = velset
trigger1 = time = 3
x = 6*parent,const(size.xscale)
y = 5*parent,const(size.xscale)

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1000, 音を鳴らす 声]
type = PlaySnd
trigger1 = time = 0
value = 3, 11

[State 1000, 音を鳴らす 反射音]
type = PlaySnd
trigger1 = time = 5
value = 4, 11

[State 1000, アニメ変更　下方向]
type = Changeanim
trigger1 = time = 5
value = 1006

[State 1000, 7　速度変更　停止　下方向]
type = velset
trigger1 = time = 5
x = 0
y = 0

[State 1000, 7]
type = changestate
trigger1 = pos x <= -240 || pos x >= 240
trigger2 =  Pos Y >= -20
trigger3 = anim = 1006
trigger3 = animtime = 0
trigger4 = NumHelper(1251) = 0 
value = 1004
;---------------------------------------------------------------------------
;空中発砲(ホールド)
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; 弾 待機
 
;---------------------------------------------------------------------------
; ピストルズ(空中ホールド)
 
;---------------------------------------------------------------------------
;空中発砲 着地
 
;---------------------------------------------------------------------------
;彫刻 近 
;---------------------------------------------------------------------------
;彫刻 弾
 
;trigger3 = movecontact
;---------------------------------------------------------------------------
;彫刻
 
;---------------------------------------------------------------------------
;彫刻 中
 
;---------------------------------------------------------------------------
;彫刻 弾
 
;---------------------------------------------------------------------------
;彫刻 遠
 
;---------------------------------------------------------------------------
;彫刻 弾
 
;===========================================================================
;---------------------------------------------------------------------------
; 今は亡き旧版ミスタの技。ゲージ回収量がヤッベ！
;---------------------------------------------------------------------------
;パスパスパース！弱
[Statedef 1100]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[state 3003]
type = helper
triggerall = numhelper(9898) = 0
trigger1 = time = 0
name = "hantei"
helpertype = normal
stateno = 9898
id = 9898
pos = ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[State 1100, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1100, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[state 3003]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1101
id = 1101
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1

[state 3003]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p A"
helpertype = normal
stateno = 1102
id = 1001
pos = ceil(83*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p B"
helpertype = normal
stateno = 1103
id = 1001
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ミスタ無事判定
[Statedef 9898]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
anim = 29999
ctrl = 0
sprpriority = 2

[State 1000, 7　消滅]
type = destroyself
trigger1 = parent,movetype = H 
trigger1 = (parent,stateno != [120,169]) 
;---------------------------------------------------------------------------
; 弾
[Statedef 1101]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 3

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1000, 7　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 15
x = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 15
trigger1 = time <= 20
x = 10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　折り返し]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 20
x = -15*parent,const(size.xscale)

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 18
value = 3, 11

[State 1000, 音を鳴らす　反射音]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 18
value = 4, 11

[State 1000, 7　停止]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 28
x = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 28
trigger1 = time <= 33
x = -15*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　折り返し]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 33
x = 20*parent,const(size.xscale)

[State 1000, 音を鳴らす　反射音]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 33
value = 4, 11

[State 610, 3　ヒットデフ]
type = HitDef
trigger1 = time %2 = 0
attr = A, SP
damage = 15,6
hitflag = MAF
guardflag = HA
priority = 5, Hit
pausetime = 1,4
sparkno = s855
guard.sparkno = s840
sparkxy = -10,0
hitsound   = s1,3
guardsound = s1,4
animtype = light
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
guard.hittime  = 9
ground.velocity = -3*parent,const(size.xscale)
air.velocity = -1.2*parent,const(size.xscale),-5
getpower = 30,0
guard.kill = 0

[State 1000, 7　消滅]
type = destroyself
trigger1 = pos x <= -240 || pos x >= 240
trigger2 = pos y > 10
;---------------------------------------------------------------------------
; ピストルズA
[Statedef 1102]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
trigger1 = time = 15
x = 0*parent,const(size.xscale)

[State 1027, Spark　火花]
type = Explod
trigger1 = time = 15
anim = 871
ID = 871
pos = -10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7　アニメ変更　蹴り]
type = changeanim
trigger1 = time = 15
value = 1102

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更]
type = ChangeState
trigger1 = Anim = 1102
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1003
;---------------------------------------------------------------------------
; ピストルズB
[Statedef 1103]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7　停止]
type = velset
trigger1 = time = 15
x = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　折り返し]
type = changeanim
trigger1 = time = 15
value = 1105

[State 1000, 7　速度変更　折り返し]
type = velset
trigger1 = time = 20
x = -15*parent,const(size.xscale)

[State 1000, 7　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止２]
type = velset
trigger1 = time = 30
x = 0*parent,const(size.xscale)

[State 1027, Spark　火花２]
type = Explod
trigger1 = time = 30
anim = 871
ID = 871
pos = 10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7　アニメ変更　蹴り]
type = changeanim
trigger1 = time = 30
value = 1103

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更]
type = ChangeState
trigger1 = Anim = 1103
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1004
;---------------------------------------------------------------------------
;パスパスパース！中
[Statedef 1110]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[state 3003]
type = helper
triggerall = numhelper(9898) = 0
trigger1 = time = 0
name = "hantei"
helpertype = normal
stateno = 9898
id = 9898
pos = ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[State 1100, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1100, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[state 3003]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1111
id = 1101
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1

[state 3003]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p A"
helpertype = normal
stateno = 1112
id = 1001
pos = ceil(83*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p B"
helpertype = normal
stateno = 1113
id = 1001
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 弾
[Statedef 1111]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 3

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1000, 7]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 30
x = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 30
trigger1 = time <= 35
x = 10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 35
x = -15*parent,const(size.xscale)

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 33
value = 3, 11

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 33
value = 4, 11

[State 1000, 7]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 43
x = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 43
trigger1 = time <= 48
x = -15*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 48
x = 20*parent,const(size.xscale)

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 48
value = 4, 11

[State 610, 3]
type = HitDef
trigger1 = time %2 = 0
attr = A, SP
damage = 15,6
hitflag = MAF
guardflag = HA
priority = 5, Hit
pausetime = 1,4
sparkno = s855
guard.sparkno = s840
sparkxy = -10,0
hitsound   = s1,3
guardsound = s1,6
animtype = light
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
guard.hittime  = 9
ground.velocity = -3*parent,const(size.xscale)
air.velocity = -1.2*parent,const(size.xscale),-5
getpower = 30,0
guard.kill = 0

[State 1000, 7]
type = destroyself
trigger1 = pos x <= -280 || pos x >= 280
trigger2 = pos y > 10
;---------------------------------------------------------------------------
; ピストルズA
[Statedef 1112]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7]
type = velset
trigger1 = time = 30
x = 0*parent,const(size.xscale)

[State 1000, 7]
type = changeanim
trigger1 = time = 30
value = 1102

[State 1027, Spark]
type = Explod
trigger1 = time = 30
anim = 871
ID = 871
pos = -10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更]
type = ChangeState
trigger1 = Anim = 1102
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1003
;---------------------------------------------------------------------------
; ピストルズB
[Statedef 1113]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7]
type = velset
trigger1 = time = 30
x = 0*parent,const(size.xscale)

[State 1000, 7]
type = changeanim
trigger1 = time = 30
value = 1105

[State 1000, 7]
type = velset
trigger1 = time = 35
x = -15*parent,const(size.xscale)

[State 1000, 7]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7]
type = velset
trigger1 = time = 45
x = 0*parent,const(size.xscale)

[State 1027, Spark]
type = Explod
trigger1 = time = 45
anim = 871
ID = 871
pos = 10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7]
type = changeanim
trigger1 = time = 45
value = 1103

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更]
type = ChangeState
trigger1 = Anim = 1103
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1004
;---------------------------------------------------------------------------
;パスパスパース！強
[Statedef 1120]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[state 3003]
type = helper
triggerall = numhelper(9898) = 0
trigger1 = time = 0
name = "hantei"
helpertype = normal
stateno = 9898
id = 9898
pos = ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 音を鳴らす　いけぇ]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[state 3003　弾丸]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1121
id = 1101
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1

[state 3003　ピストルズＡ]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p A"
helpertype = normal
stateno = 1122
id = 1122
pos = ceil(83*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズＢ]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p B"
helpertype = normal
stateno = 1123
id = 1123
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズＣ]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p C"
helpertype = normal
stateno = 1124
id = 1124
pos = ceil(83*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003　ピストルズＤ]
type = helper
trigger1 = animelemtime(5) = 1
name = "s p D"
helpertype = normal
stateno = 1125
id = 1125
pos = ceil(80*const(size.xscale)),ceil(-90*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 弾
[Statedef 1121]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 3

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1000, 7　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 15
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 15
trigger1 = time <= 20
x = 10*parent,const(size.xscale)

[State 1000, 7　速度変更　上方向]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 20
x = 0*parent,const(size.xscale)
y = -5*parent,const(size.xscale)

[State 810, Bind 1　位置変更]
type = posadd
triggerall = numhelper(9898) = 1
trigger1 = time = 20
y = 0

[State 1000, 7　アニメ変更　曲がる]
type = changeanim
triggerall = numhelper(9898) = 1
trigger1 = time = 20
value = 1107

[State 1000, 7　停止]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 25
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = time >= 25
trigger1 = time <= 30
trigger1 = vel x = 0
trigger1 = vel y = 0
x = 0*parent,const(size.xscale)
y = -5*parent,const(size.xscale)

[State 1000, 7　速度変更　折り返し]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 30
x = -10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　横方向]
type = changeanim
triggerall = numhelper(9898) = 1
trigger1 = time = 30
value = 1109

[State 1000, 7　停止]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 45
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 45
trigger1 = time <= 50
x = -10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　下方向]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 50
x = 0*parent,const(size.xscale)
y = 10*parent,const(size.xscale)

[State 1000, 7　アニメ変更　曲がる]
type = changeanim
triggerall = numhelper(9898) = 1
trigger1 = time = 50
value = 1108

[State 1000, 7　停止]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 55
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度矯正]
type = velset
triggerall = numhelper(9898) = 0
trigger1 = vel x = 0
trigger1 = vel y = 0
trigger1 = time >= 55
trigger1 = time <= 60
x = 0*parent,const(size.xscale)
y = 10*parent,const(size.xscale)

[State 1000, 7　アニメ変更　前方向]
type = velset
triggerall = numhelper(9898) = 1
trigger1 = time = 60
x = 10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 810, Bind 1　位置変更]
type = posadd
triggerall = numhelper(9898) = 1
trigger1 = time = 60
y = 20

[State 1000, 7　アニメ変更　横方向]
type = changeanim
triggerall = numhelper(9898) = 1
trigger1 = time = 60
value = 1110

[State 1000, 音を鳴らす　イェーイ]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 28
value = 3, 11

[State 1000, 音を鳴らす　反射音]
type = PlaySnd
triggerall = numhelper(9898) = 1
trigger1 = time = 15
trigger2 = time = 25
trigger3 = time = 45
trigger4 = time = 60
value = 4, 11

[State 610, 3　ヒットデフ]
type = HitDef
trigger1 = time %2 = 0
attr = A, SP
damage = ceil(ifelse((15*root,fvar(4))<3,3,(15*root,fvar(4)))),5
hitflag = MAF
guardflag = HA
priority = 5, Hit
pausetime = 1,4
sparkno = s855
guard.sparkno = s840
sparkxy = -10,0
hitsound   = s1,3
guardsound = s1,6
animtype = light
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
guard.hittime  = 9
ground.velocity = -3*parent,const(size.xscale)
air.velocity = -1.2*parent,const(size.xscale),-5
getpower = 30,0
guard.kill = 0

[State 1000, 7　終了]
type = destroyself
trigger1 = pos x <= -280 || pos x >= 280
trigger2 = time = 100
trigger3 = pos y > 10
;---------------------------------------------------------------------------
; ピストルズA
[Statedef 1122]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7 初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
trigger1 = time = 13
x = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　蹴り]
type = changeanim
trigger1 = time = 13
value = 1102

[State 810, Bind 1　]
type = posadd
trigger1 = time = 13
x = 20

[State 1027, Spark　火花]
type = Explod
trigger1 = time = 13
anim = 871
ID = 871
pos = -10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = Anim = 1102
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1003
;---------------------------------------------------------------------------
; ピストルズB
[Statedef 1123]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7　停止]
type = velset
trigger1 = time = 20
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度変更　上方向]
type = velset
trigger1 = time = 15
x = 0*parent,const(size.xscale)
y = -5*parent,const(size.xscale)

[State 1000, 7　アニメ変更　上方向]
type = changeanim
trigger1 = time = 15
value = 1111

[State 1000, 7　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1027, Spark　火花]
type = Explod
trigger1 = time = 25
anim = 871
ID = 871
pos = 10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7　アニメ変更　蹴り]
type = changeanim
trigger1 = time = 25
value = 1102

[State 810, Bind 1　位置調整]
type = posadd
trigger1 = time = 15
x = 8

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = Anim = 1102
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1003
;---------------------------------------------------------------------------
; ピストルズC
[Statedef 1124]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7　速度変更　上方向]
type = velset
trigger1 = time = 15
x = 0*parent,const(size.xscale)
y = -5*parent,const(size.xscale)

[State 1000, 7　アニメ変更　上方向]
type = changeanim
trigger1 = time = 15
value = 1111

[State 1000, 7　停止]
type = velset
trigger1 = time = 20
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度変更　折り返し]
type = velset
trigger1 = time = 25
x = -10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　折り返し]
type = changeanim
trigger1 = time = 25
value = 1105

[State 1000, 7　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
trigger1 = time = 45
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1027, Spark]
type = Explod
trigger1 = time = 45
anim = 871
ID = 871
pos = 10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7　アニメ変更　蹴り]
type = changeanim
trigger1 = time = 45
value = 1103

[State 810, Bind 1　位置調整]
type = posadd
trigger1 = time = 15
x = 8

[State 810, Bind 1　位置調整]
type = posadd
trigger1 = time = 25
x = 25

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = Anim = 1103
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1004
;---------------------------------------------------------------------------
; ピストルズD
[Statedef 1125]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1104
ctrl = 0
sprpriority = 4

[State 1000, 7　速度変更　上方向]
type = velset
trigger1 = time = 15
x = 0*parent,const(size.xscale)
y = -5*parent,const(size.xscale)

[State 1000, 7　アニメ変更　上方向]
type = changeanim
trigger1 = time = 15
value = 1111

[State 1000, 7　停止]
type = velset
trigger1 = time = 20
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　速度変更　折り返し]
type = velset
trigger1 = time = 25
x = -10*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　折り返し]
type = changeanim
trigger1 = time = 25
value = 1105

[State 1000, 7　速度変更　初速]
type = velset
trigger1 = time = 3
x = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
trigger1 = time = 45
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 1000, 7　アニメ変更　下方向]
type = changeanim
trigger1 = time = 45
value = 1112

[State 1000, 7　速度変更　下方向]
type = velset
trigger1 = time = 50
x = 0*parent,const(size.xscale)
y = 10*parent,const(size.xscale)

[State 1000, 7　停止]
type = velset
trigger1 = time = 55
x = 0*parent,const(size.xscale)
y = 0*parent,const(size.xscale)

[State 810, Bind 1　位置調整]
type = posadd
trigger1 = time = 55
y = 20

[State 1027, Spark　火花]
type = Explod
trigger1 = time = 55
anim = 871
ID = 871
pos = 10,0
postype = p1
sprpriority = 3
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 1000, 7　アニメ変更　蹴り]
type = changeanim
trigger1 = time = 55
value = 1103

[State 810, Bind 1　位置調整]
type = posadd
trigger1 = time = 15
x = 8

[State 810, Bind 1　位置調整]
type = posadd
trigger1 = time = 25
x = 25

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,movetype = H

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = Anim = 1103
trigger1 = AnimTime = 0
trigger2 = NumHelper(1101) = 0 
value = 1004
;---------------------------------------------------------------------------
;パスパスパース！超必
[Statedef 1130]
type    = S
movetype= A
physics = S
poweradd= -1000
velset = 0,0
anim = 1130
ctrl = 0
sprpriority = 2

[State 610, 3]
type = playsnd
trigger1 = time = 2
value = 3, 7
channel = 0

[State 610, 3]
type = playsnd
trigger1 = time = 2
value = s4,0

[state 3003]
type = helper
trigger1 = time = 3
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[state 3000]
type = nothitby
trigger1 = time = 0
value = SCA
time = 43

[state 3000]
type = pause
trigger1 = time = 2
time = 40
movetime = 40

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[state 3003　弾丸]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1131
id = 1101
pos = ceil(60*const(size.xscale)),ceil(-100*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; ピストルズL
 
;---------------------------------------------------------------------------
; ピストルズR
 
;---------------------------------------------------------------------------
; ピストルズXXX
[Statedef 1142]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1141
ctrl = 0
sprpriority = 4

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = time = 100
value = 1004
;---------------------------------------------------------------------------
;パスパスパース！超必 中
[Statedef 1150]
type    = S
movetype= A
physics = S
poweradd= -1000
velset = 0,0
anim = 1130
ctrl = 0
sprpriority = 2

[State 610, 3]
type = playsnd
trigger1 = time = 2
value = 3, 7
channel = 0

[State 610, 3]
type = playsnd
trigger1 = time = 2
value = s4,0

[state 3003]
type = helper
trigger1 = time = 3
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[state 3000]
type = nothitby
trigger1 = time = 0
value = SCA
time = 43

[state 3000]
type = pause
trigger1 = time = 2
time = 40
movetime = 40

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[state 3003　弾丸]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1151
id = 1101
pos = ceil(60*const(size.xscale)),ceil(-100*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
;パスパスパース！超必 小
[Statedef 1160]
type    = S
movetype= A
physics = S
poweradd= -1000
velset = 0,0
anim = 1130
ctrl = 0
sprpriority = 2

[State 610, 3]
type = playsnd
trigger1 = time = 2
value = 3, 7
channel = 0

[State 610, 3]
type = playsnd
trigger1 = time = 2
value = s4,0

[state 3003]
type = helper
trigger1 = time = 3
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[state 3000]
type = nothitby
trigger1 = time = 0
value = SCA
time = 43

[state 3000]
type = pause
trigger1 = time = 2
time = 40
movetime = 40

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[state 3003　弾丸]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1161
id = 1101
pos = ceil(60*const(size.xscale)),ceil(-100*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, ステート変更　終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
;パスパスパース！超必 ３ゲージ
 
;===========================================================================
; 超必殺技
;===========================================================================
;---------------------------------------------------------------------------
; 最初のM.U.G.E.Nから存在するカンフーマンの超必殺技。
; 超必なので攻撃を当ててもゲージを増やさないようにする事に気を付けるだけで、
; 後は結構簡単な処理にまとめられてる。
; 超必時の暗転用の処理（SuperPause）にも刮目せよ！m9っ｀Д´)
;---------------------------------------------------------------------------
;SPリロード(立)
 
;---------------------------------------------------------------------------
;SPリロード(屈)
 
;---------------------------------------------------------------------------
;発砲スパコン
 
;---------------------------------------------------------------------------
;弾 超必
 
;---------------------------------------------------------------------------
;弾 超必 ラスト
 
;---------------------------------------------------------------------------
; ピストルズ
 
;-----------------------------------------------
;発砲スパコン(屈)
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; ピストルズ
 
;---------------------------------------------------------------------------
;発砲スパコン（空中）
 
;---------------------------------------------------------------------------
; 弾
 
;---------------------------------------------------------------------------
; ピストルズ空中
[Statedef 3202]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 1202
ctrl = 0
sprpriority = 4

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;テンプレ
[State 1000, 7]
type = parentvaradd
trigger1 = !time
var(53) = 1

[State 1000, 7]
type = parentvarset
trigger1 = root,var(53) = 6
var(53) = 0

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[State 1000, 7]
type = velset
trigger1 = time = 3
x = 6*parent,const(size.xscale)
y = 5*parent,const(size.xscale)

[State 1000, 7]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1000, 7　無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1000, 音を鳴らす 声]
type = PlaySnd
trigger1 = time = 0
value = 3, 11

[State 1000, 音を鳴らす 反射音]
type = PlaySnd
trigger1 = time = 5
value = 4, 11

[State 1000, アニメ変更　下方向]
type = Changeanim
trigger1 = time = 5
value = 1006

[State 1000, 7　速度変更　停止　下方向]
type = velset
trigger1 = time = 5
x = 0
y = 0

[State 1000, 7]
type = changestate
trigger1 = pos x <= -240 || pos x >= 240
trigger2 =  Pos Y >= -20
trigger3 = anim = 1006
trigger3 = animtime = 0
value = 1004
;-----------------------------------------------
;SC背景

 
;---------------------------------------------------------------------------
; 形を…変えることができればよぉ…
 
;---------------------------------------------------------------------------
; 形を…変えることができればよぉ…helper（画面外へ移動するミスタ）
[Statedef 4001]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 4002
poweradd= 0
ctrl = 0
sprpriority = 2

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 180, 1]
type = velset
trigger1 = time > 1
x = -8
;---------------------------------------------------------------------------
; 形を…変えることができればよぉ…helper（ストーンズ）
 
;---------------------------------------------------------------------------
; 形を…変えることができればよぉ…helper（ストーンズ） 退場
 
;---------------------------------------------------------------------------
;落下する相手
[Statedef 4020]
anim  = 5000
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 180, 1 落下速度]
type = velset
trigger1= 1
y = 15

[State 230, 2]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1051, 2]
type = playerpush
trigger1 = time <= 120
value = 0

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 4020

[State 230, 2]
type = changestate
trigger1 = Pos Y >= 0
value = 4021
;---------------------------------------------------------------------------
;つぶされる相手
[Statedef 4021]
anim  = 5000
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 1027, 位置]
type = PosSet
trigger1 = time = 0
trigger1 = Pos Y <= 0 
y = 0

[State 230, 2]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1051, 2]
type = playerpush
trigger1 = 1
value = 0

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 4021

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 40
value = 5110
ctrl = 0
;--------------------------------------------------------------------------
[Statedef 4657];禁止
type = S
movetype = I
physics = N
ctrl = 0
anim = 29999
sprpriority = -5

[State 3000]
type = DestroySelf
trigger1 = time = 400
;===========================================================================
; ちょっとこ丸が追加したステート
;===========================================================================
;---------------------------------------------------------------------------
; ここから下の５つのステートは僕が修正前の和訳ＫＦＭに
; 追加パッチとして入れていたものです。修正と調整も済んでます。
; 本家のカンフーマンには存在しません。
; 見慣れないステートコントローラ・トリガーやテクニックがあるので
; キャラ作りのスキルを上げたい人は参考にしてください。
;
; ただし、作成者自身のスキルアップのためにわざと「不完全な状態」にしてます。
; 試行錯誤考えながら改善して、あなたが今作っているキャラに流用してください。
;===========================================================================
; ※８：ReversalDef
;
; 　攻撃判定ボックス（Clsn1）の設置はHitDefを有効にするためだけでなく、
; 　相手の攻撃を受け止める判定を設ける『ReversalDef』にも使う。
;
; 　実際に攻撃を受け止めるには、「attr」の代わりに
;　「reversal.attr」のパラメータを使い、受け止める相手の攻撃属性を指定する。
; 　それ以外はHitDefと設定の仕方が一緒。
;
; 　ReversalDefの設置について二つ注意する事がある。
;
; 　まず、ReversalDefは『Projectileを受け止める事は出来ない』。
; 　あくまでもこのコントローラは「HitDefを受け止めるもの」であるため。
; 
; 　そしてそのHitDefに関係するもう一つの注意点。
;
;　「HitDefを使っている攻撃用ヘルパー」を受け止める場合、
; 　ReversalDefにP2StateNoを設置していたならば
;　『そのヘルパーがそのステートに変わり、相手キャラに分身してしまう』。
; 　波動拳の気弾などにClsn1のあるヘルパーが使われてる場合は明らかにバグになる。
;　「受け止める目標がヘルパーになってしまった場合に、分身するバグを回避する方法」
; 　を自分・相手両方共に駆使する必要がある。コンプリートゲームなら楽だけどね。
;
; 　ちなみに、『MoveReversed』というトリガーは
;　「相手のReversalDef」に「自分のHitDef」が受け止められた時間を計測するトリガー。
; 　逆に「自分のReversalDef」で相手の攻撃を受け止めた事を判断する場合は、
; 　なぜか「MoveHit」が使える。なんでか教えてよエレクバイト先生！（コラ
; 　まぁReversalDefも「攻撃判定を定義する」系統だからなんだろうけどね。
;
;---------------------------------------------------------------------------
; ※９：HitOverRide
;
; 　この命令はその名の如く、攻撃を食らった時
;　『食らい状態を任意のステートで上書きする事が出来る』命令。
; 　これの応用で『ブロッキング』なども作る事が出来る。
;
; 　しかし相手のHitDefに「P2StateNo」がある場合、自分がHitOverRideで
; 　食らい動作を上書き出来る状態なら、
;　『その攻撃を食らわなくなる（相手のHitDefが空振る）』ので注意。
;
;---------------------------------------------------------------------------
; アドバンシング（立ち）
[Statedef 4100]
type    = U
movetype= H
physics = N
anim = 150
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-68
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 151
;===========================================================================
; アドバンシング（しゃがみ）
[Statedef 4105]
type    = C
movetype= H
physics = N
anim = 151
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-18
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 153
;---------------------------------------------------------------------------
; アドバンシングヘルパー
[Statedef 4010]
type    = A
movetype= I
physics = N
anim = 4
ctrl = 0
velset = 10,0

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 24
value = 1

[State 5071, 1]
type = parentvarset
trigger1 = time = 2
v = 24
value = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 3,0
channel = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 3,8

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 16
value = 0

[State 1051, 2]
type = playerpush
trigger1 = 1
value = 1

[State 1051, 2]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 191, Wood 1]
type = Explod
trigger1 = 0;time = 0
trigger1 = enemy,statetype != A
anim = 860
id = 870
postype = p2
pos = 15,0
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
facing = -1

[State 1051, 2]
type = destroyself
trigger1 = time = 16
trigger2 = parent,alive = 0
;===========================================================================
;回り込み
[Statedef 300]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
sprpriority = -1

[State 0, turn]
type = turn
triggerall = command = "holdback"
trigger1 = time = 0

[State 0, hitby]
type = hitby
trigger1 = time = 0
value = SCA,AT
time = 32

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 2,0
channel = 0

[State 0, vel]
type = velset
trigger1 = !time
x = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 0, helper]
type = null;helper
trigger1 = animelemtime(1) = 4
helpertype = normal
name = "Image"
stateno = 305
id = 305
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(3) = 0
x = .91

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(6) <= 0
x = 0.80

[State 0, vel]
type = velmul
trigger1 = animelemtime(7) > 0
x = .62

[State 0, vel]
type = velset
trigger1 = animelem = 8
x = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 305]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = velset
trigger1 = !time
x = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(7) <= 0
x = .91

[State 0, vel]
type = velmul
trigger1 = animelemtime(8) > 0
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 9
x = 0

[State 0, end]
type = DestroySelf
trigger1 = !animtime
trigger2 = root,movetype = H
;===========================================================================
;擬似プッツンキャンセル
 
;---------------------------------------------------------------------------
;プッツーン
[Statedef 720]
type    = S
physics = N
anim = 720
ctrl = 0
sprpriority = 3
velset = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0, scale]
type = angledraw
trigger1 = time < 10
scale = .2+time*.08,.2+time*.08

[State 0, scale]
type = angledraw
trigger1 = time >= 10
scale = .85+time*.01,.85+time*.01

[State 820, 消去]
type = destroyself
trigger1 = time >= 30
trigger2 = root,stateno != 700
;-------------------------------------------------------------------
;『WIN』ヘルパー
[Statedef 20050]
type = S
sprpriority = 10
anim = 20050
ctrl = 0

[State 104, 影はない]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 20024,ガシーン！]
type = PlaySnd
trigger1 = Time = 10
value = 7, 2

[State -1,1]
type = velset
trigger1 = time = 0
trigger2 = time >= 10 && time <= 72
x = 0

[State -1,1]
type = velset
trigger1 = time >= 0 && time <= 10
x = ifelse(Teamside=1,12,-12)

[State -1,1]
type = velset
trigger1 = time >= 72 && time <= 95
x = ifelse(Teamside=1,-17,17)

[State -1,1]
type = destroyself
trigger1 = roundstate = 2;バトル中
;---------------------------
;『to be continued』ヘルパー
[Statedef 20051]
type = S
sprpriority = 10
anim = ifelse(Teamside=1,20051,20052)
ctrl = 0

[State 20024, 0]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 20024, 0]
type = velset
trigger1 = time = 0
trigger2 = time >= 25
x = 0

[State 20024, 0]
type = velset
trigger1 = time >= 0 && time <= 17
x = ifelse(Teamside=1,-24,24)

[State 20024, 0]
type = velset
trigger1 = time >= 17 && time <= 25
x = ifelse(Teamside=1,13,-13)
;---------------------------------------------------------------------------
;敗北 ヘルパー
[Statedef 20060]
type = S
movetype = I
physics = S
ctrl = 0
anim = 20060
velset = 0,0
sprpriority = 3

[State 20024,ミスタァー]
type = PlaySnd
trigger1 = Time = 0
value = 7, 4


;===============================================================================
;1P側残弾数
;===============================================================================
[statedef 9000]
Type    = A
movetype= I
Physics = N
anim = 29999

[State -2]
type = Explod
trigger1= teamside =1
trigger1 = parent,var(55) = 6
anim = 30000
ID = 9000
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 = parent,var(55)!=6
ID = 9000

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 =parent,var(55)!=5
ID = 9001

[State -2]
type = Explod
trigger1= teamside = 1
trigger1 = parent,var(55) = 5
anim = 30001
ID = 9001
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[State -2]
type = Explod
trigger1= teamside = 1
trigger1 = parent,var(55) = 4
anim = 30002
ID = 9002
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 = parent,var(55)!=4
ID = 9002

[State -2]
type = Explod
trigger1= teamside = 1
trigger1 = parent,var(55) = 3
anim = 30003
ID = 9003
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 =parent,var(55)!=3
ID = 9003

[State -2]
type = Explod
trigger1= teamside = 1
trigger1 = parent,var(55) = 2
anim = 30004
ID = 9004
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 = parent,var(55)!=2
ID = 9004

[State -2]
type = Explod
trigger1= teamside = 1
trigger1 = parent,var(55) = 1
anim = 30005
ID = 9005
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 = parent,var(55)!=1
ID = 9005

[State -2]
type = Explod
trigger1= teamside = 1
trigger1 = parent,var(55) = 0
anim = 30006
ID = 9006
pos = 50, 50
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 1
trigger1 =  parent,var(55)!=0
ID = 9006

;===============================================================================
;2P側残弾数
;===============================================================================
[State -2]
type = Explod
trigger1= teamside =2
trigger1 = parent,var(55) = 6
anim = 30000
ID = 9010
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 = parent,var(55)!=6
ID = 9010

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 =parent,var(55)!=5
ID = 9011

[State -2]
type = Explod
trigger1= teamside = 2
trigger1 = parent,var(55) = 5
anim = 30001
ID = 9011
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[State -2]
type = Explod
trigger1= teamside = 2
trigger1 = parent,var(55) = 4
anim = 30002
ID = 9012
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 = parent,var(55)!=4
ID = 9012

[State -2]
type = Explod
trigger1= teamside = 2
trigger1 = parent,var(55) = 3
anim = 30003
ID = 9013
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 =parent,var(55)!=3
ID = 9013

[State -2]
type = Explod
trigger1= teamside = 2
trigger1 = parent,var(55) = 2
anim = 30004
ID = 9014
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 = parent,var(55)!=2
ID = 9014

[State -2]
type = Explod
trigger1= teamside = 2
trigger1 = parent,var(55) = 1
anim = 30005
ID = 9015
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 = parent,var(55)!=1
ID = 9015

[State -2]
type = Explod
trigger1= teamside = 2
trigger1 = parent,var(55) = 0
anim = 30006
ID = 9016
pos = -50, 50
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
supermovetime = 0
pausemovetime = 0
scale = .5, .5
sprpriority = 5
ontop = 1
shadow = 0, 0, 0
ownpal = 1
persistent=1
removeongethit = 1

[state -2]
type = RemoveExplod
trigger1= teamside = 2
trigger1 =  parent,var(55)!=0
ID = 9016

;---------------------------------------------------------------
;ピストルズ表示
[statedef 10000]
Type    = A
movetype= I
Physics = N
anim = 29999

[State -2]
type = Explod
trigger1 = !numexplod(2601)
anim = 2601
ID = 2601
pos = 75+(teamside=2)*120, 50
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
trigger1 = !numexplod(2602)
anim = 2602
ID = 2602
pos = 85+(teamside=2)*120, 60
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
trigger1 = !numexplod(2603)
anim = 2603
ID = 2603
pos = 95+(teamside=2)*120, 50
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
trigger1 = !numexplod(2605)
anim = 2605
ID = 2605
pos = 105+(teamside=2)*120, 60
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
trigger1 = !numexplod(2606)
anim = 2606
ID = 2606
pos = 115+(teamside=2)*120, 50
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
trigger1 = !numexplod(2607)
anim = 2607
ID = 2607
pos = 125+(teamside=2)*120, 60
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1

;かげ
[State -2]
type = Explod
triggerall = !numexplod(2611)
trigger1 = numhelper(1011)
trigger2 = numhelper(1020)
anim = 2610
ID = 2611
pos = 75+(teamside=2)*120, 50
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
triggerall = !numexplod(2612)
trigger1 = numhelper(1012)
trigger2 = numhelper(1020)
anim = 2610
ID = 2612
pos = 85+(teamside=2)*120, 60
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
triggerall = !numexplod(2613)
trigger1 = numhelper(1013)
trigger2 = numhelper(1020)
anim = 2610
ID = 2613
pos = 95+(teamside=2)*120, 50
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
triggerall = !numexplod(2614)
trigger1 = numhelper(1014)
trigger2 = numhelper(1020)
anim = 2610
ID = 2614
pos = 105+(teamside=2)*120, 60
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
triggerall = !numexplod(2615)
trigger1 = numhelper(1015)
trigger2 = numhelper(1020)
anim = 2610
ID = 2615
pos = 115+(teamside=2)*120, 50
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1
[State -2]
type = Explod
triggerall = !numexplod(2616)
trigger1 = numhelper(1016)
trigger2 = numhelper(1020)
anim = 2610
ID = 2616
pos = 125+(teamside=2)*120, 60
postype = left
bindtime = -1
removetime = -1
supermovetime = 99999999
pausemovetime = 99999999
scale = 1,1
ontop = 1

[state -2]
type = RemoveExplod
trigger1 = !numhelper(1011)
trigger1 = !numhelper(1020)
ID = 2611
[state -2]
type = RemoveExplod
trigger1 = !numhelper(1012)
trigger1 = !numhelper(1020)
ID = 2612
[state -2]
type = RemoveExplod
trigger1 = !numhelper(1013)
trigger1 = !numhelper(1020)
ID = 2613
[state -2]
type = RemoveExplod
trigger1 = !numhelper(1014)
trigger1 = !numhelper(1020)
ID = 2614
[state -2]
type = RemoveExplod
trigger1 = !numhelper(1015)
trigger1 = !numhelper(1020)
ID = 2615
[state -2]
type = RemoveExplod
trigger1 = !numhelper(1016)
trigger1 = !numhelper(1020)
ID = 2616

;===========================================================================
; 常時監視ステート（－２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000～5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------

[Statedef -2]

[state 250,11 - Hard Knockdown Effect]
type = helper
triggerall = numtarget(620)
trigger1 = target(620), stateno = 328
trigger1 = !numhelper(60120)
persistent = 0
stateno = 60120
ID = 60120
postype = p2
pos = 0,500

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(46) = 1

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(13) = 0

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
fvar(10) = 1

[State -2, Final Dampen]
type = null
trigger1 = (fvar(11) := cond(fvar(10)>0.1,fvar(10),0.1)) || 1
ignorehitpause = 1

[State -2, Dampener itself]
type = Attackmulset
trigger1 = 1
value = fvar(11)
ignorehitpause = 1

[State -1, DTCB]
type = displaytoclipboard
trigger1 = 1
text = "Damage Dampener: %f"
params = fvar(11)
ignorehitpause = 1

[State -2, P2 Recovery]
type= targetstate
trigger1= numtarget(555)


trigger1= (target(555), stateno=5020) && (target(555), alive) && (target(555), hitfall)
ID= 555
value= 5085
ignorehitpause= 1

[State -2, P2 Facing]
type= targetfacing
trigger1= movecontact=1 && numtarget=1
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause= 1

[State -3, Prevent Crossup]
type = width
trigger1 = movetype != H
edge = 8, 0
ignorehitpause = 1

[State -3, Prevent Undergound Juggles by POTS]
type= targetbind
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID)
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y)
ignorehitpause= 1

[State -3, Corner Push Reset]
type= varset 
trigger1= fvar(5)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
trigger2 = stateno = 700
fvar(5)= 0

[State -3, Corner Push Initial Vel]
type= varset
triggerall = stateno != 700
trigger1= movecontact=1 && numtarget
fvar(5) = (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push Apply]
type= posadd
triggerall = stateno != 700
triggerall = fvar(5)
triggerall = (statetype = S || statetype = C) && numtarget
triggerall = !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall = (target, statetype = S || target, statetype = C) && !(target, gethitvar(yvel)) && !(target, hitfall)
trigger1 = target, frontedgebodydist <= abs(target, vel x)
trigger1 = (target, gethitvar(xvel) * target, facing) > 0
trigger2 = target, backedgebodydist <= abs(target, vel x)
trigger2 = (target, gethitvar(xvel) * target, facing) < 0
x = ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(5)

[State -3, Corner Push Friction]
type= varset
triggerall = stateno != 700
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(5) = fvar(5)*0.85

;ピストルズ
[state -2, helper]
type = helper
trigger1 = roundstate = 2
trigger1 = !numhelper(10000)
helpertype = normal
name = "pi"
stateno = 10000
id = 10000
pos = 0,0
postype = p1
ownpal = 0
keyctrl = 0
pausemovetime = 0
supermovetime = 0
 
;---------------------------------------------------------------------------
;次のピストルズ
[State -2]
type = varset
trigger1 = var(54) = 6
var(54) = 0

[State -2]
type = varset
trigger1 = var(53) = 0
trigger1 = numhelper(1011)
var(53) = 1
[State -2]
type = varset
trigger1 = var(53) = 1
trigger1 = numhelper(1012)
var(53) = 2
[State -2]
type = varset
trigger1 = var(53) = 2
trigger1 = numhelper(1013)
var(53) = 3
[State -2]
type = varset
trigger1 = var(53) = 3
trigger1 = numhelper(1014)
var(53) = 4
[State -2]
type = varset
trigger1 = var(53) = 4
trigger1 = numhelper(1015)
var(53) = 5
[State -2]
type = varset
trigger1 = var(53) = 5
trigger1 = numhelper(1016)
var(53) = 6

[State -2]
type = varset
trigger1 = var(53) = 10
trigger1 = !(numhelper(1011) && numhelper(1012) && numhelper(1013) && numhelper(1014) && numhelper(1015) && numhelper(1016))
var(53) = 0

[State -2]
type = varset
trigger1 = (numhelper(1011) && numhelper(1012) && numhelper(1013) && numhelper(1014) && numhelper(1015) && numhelper(1016))
trigger2 = numhelper(1020)
var(53) = 10
;---------------------------------------------------------------------------
[State -2, Are you ready?]
type = varset
trigger1 = 1
var(51) = !numhelper(1011) + !numhelper(1012) + !numhelper(1013) + !numhelper(1014) + !numhelper(1015) + !numhelper(1016)
;---------------------------------------------------------------------------
 
;---------------------------------------------------------------------------
[State -2]
type = RemoveExplod
trigger1 = stateno != 901
id = 902
;---------------------------------------------------------------------------
[State -2, 弾倉呼び出し]
type = Helper
trigger1 = NumHelper(9000) = 0
stateno = 9000
ID = 9000
keyctrl = 0
postype = P1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 1
IgnoreHitPause = 1
;---------------------------------------------------------------------------
;to be continued
[State -2, 0]
type = helper
trigger1 = !NumHelper(20051)
trigger1 = stateno = 180            ;勝利ポーズ分岐
trigger1 = Teamside=1 || Teamside=2 ; || は、もしくは
trigger1 = matchover                ;ﾗｳﾝﾄﾞ取って、試合が終わったとき。
stateno = 20051
id = 20051
pos = ifelse(Teamside=1,290,-150),20
postype = left
ownpal = 1
ontop = 1
pausemovetime = 9999
;---------------------------------------------------------------------------
;WIN
[State -2, 0]
type = helper
triggerall = !Numhelper(20050)
triggerall = stateno = 180    ;勝利ポーズ分岐
trigger1 = Teamside=1 || Teamside=2  ; || は、もしくは
id = 20050
stateno = 20050
pos = ifelse(Teamside=1,-110,290),-130
postype = left
ownpal = 1
sprpriority = 10
pausemovetime = 9999
size.xscale = 0.9
size.yscale = 0.9
;---------------------------------------------------------------------------
[State -2]
type = AssertSpecial
trigger1 = winko   ;勝ったとき
flag = nobardisplay;ゲージ類を非表示にします。
ignorehitpause = 1
;---------------------------------------------------------------------------
[state -2];右ステージ端判定用
type=Helper
triggerall=!ishelper
trigger1=!numhelper(300000)
helpertype=normal
name="right_edge"
ID=300000
pos=0, 0
postype=right
facing=1
stateno=300000
ownpal=1
supermovetime=99999
pausemovetime=99999

[state -2];左ステージ端判定用
type=Helper
triggerall=!ishelper
trigger1=!numhelper(300010)
helpertype=normal
name="left_edge"
ID=300010
pos=0, 0
postype=left
facing=1
stateno=300010
ownpal=1
supermovetime=99999
pausemovetime=99999
;---------------------------------------------------------------------------
[State -2, 0]
type = helper
triggerall = NumHelper(20060) = 0 
trigger1 = stateno = 5150
trigger1 = loseko   ;負けたとき
id = 20060
stateno = 20060
pos = 50,-30
postype = p1
ownpal = 1
sprpriority = 3
pausemovetime = 9999
size.xscale = 1
size.yscale = 1
;-----------------------------------
;ここは「パワー溜め」のステートで発生させた「Explod」のエフェクト画像を
;特定の条件が有効になれば消す、という処理をしています。

[State -2, エフェクトを消す];パワー溜めステート用
type = RemoveExplod
triggerall = NumExplod(130) > 0
                          ;↑はＩＤナンバー「130」のExplodの画面中の数が0よりも多い、
                          ;つまり１枚以上表示されている時
trigger1 = StateNo != 700 ;ステートが７００（パワー溜め）以外の時
trigger2 = MoveType != I  ;MoveTypeが「I（何もしてない）」以外の時
ID = 130                  ;消すExplodの特定のＩＤナンバーを指定

;----------------------------------- 

;===========================================================================
; 準常時監視ステート（－３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; －１や－２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------

[Statedef -3]

;-----------------------------------
;ここは「ジャンプ」か「バックステップ」をした後に
;着地する音を鳴らす設定をしています。

[State -3, 音を鳴らす]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52  ;着地ステート
trigger2 = stateno = 106 ;バックステップ後の着地ステート
value = 40, 0

;-----------------------------------
; 飛び道具検知用ヘルパー
[State -3,]
type=helper
trigger1=!NumHelper(40005)
trigger1=roundstate=2
trigger1=alive
helpertype=normal
name="AI"
stateno=40005
ID=40005
pos=9999,9999
keyctrl=0
pausemovetime=0
supermovetime=0
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(40005)
trigger1= stateno!=40005
value=40005
;-----------------------------------
[State -3, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(50000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(59)=0
Trigger1=(PrevStateNo=[190,194])||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=50000
ID=50000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(50000)
trigger1= stateno!=50000
value=50000
;-------------------------------------------------------------------------
;-AIフラグ-
[State -3, AIフラグセット]
type = VarSet
triggerall = !var(58) 
triggerall = RoundState = [1,2]
trigger1 = Command = "AI_60"
trigger2 = Command = "AI_01"
trigger3 = Command = "AI_02"
trigger4 = Command = "AI_03"
trigger5 = Command = "AI_04"
trigger6 = Command = "AI_05"
trigger7 = Command = "AI_06"
trigger8 = Command = "AI_07"
trigger9 = Command = "AI_08"
trigger10 = Command = "AI_09"
trigger11 = Command = "AI_10"
trigger12 = Command = "AI_11"
trigger13 = Command = "AI_12"
trigger14 = Command = "AI_13"
trigger15 = Command = "AI_14"
trigger16 = Command = "AI_15"
trigger17 = Command = "AI_16"
trigger18 = Command = "AI_17"
trigger19 = Command = "AI_18"
trigger20 = Command = "AI_19"
trigger21 = Command = "AI_20"
trigger22 = Command = "AI_21"
trigger23 = Command = "AI_22"
trigger24 = Command = "AI_23"
trigger25 = Command = "AI_24"
trigger26 = Command = "AI_25"
trigger27 = Command = "AI_26"
trigger28 = Command = "AI_27"
trigger29 = Command = "AI_28"
trigger30 = Command = "AI_29"
trigger31 = Command = "AI_30"
trigger32 = Command = "AI_31"
trigger33 = Command = "AI_32"
trigger34 = Command = "AI_33"
trigger35 = Command = "AI_34"
trigger36 = Command = "AI_35"
trigger37 = Command = "AI_36"
trigger38 = Command = "AI_37"
trigger39 = Command = "AI_38"
trigger40 = Command = "AI_39"
trigger41 = Command = "AI_40"
trigger42 = Command = "AI_41"
trigger43 = Command = "AI_42"
trigger44 = Command = "AI_43"
trigger45 = Command = "AI_44"
trigger46 = Command = "AI_45"
trigger47 = Command = "AI_46"
trigger48 = Command = "AI_47"
trigger49 = Command = "AI_48"
trigger50 = Command = "AI_49"
trigger51 = Command = "AI_50"
trigger52 = Command = "AI_51"
trigger53 = Command = "AI_52"
trigger54 = Command = "AI_53"
trigger55 = Command = "AI_54"
trigger56 = Command = "AI_55"
trigger57 = Command = "AI_56"
trigger58 = Command = "AI_57"
trigger59 = Command = "AI_58"
trigger60 = Command = "AI_59"
trigger61 = numhelper(20000)
Trigger61 = Helper(20000),var(59)
;trigger62 = RoundState = 2  ;常時AI起動トリガー　
var(59) = 1

[state -3, AIレベル]
type = VarSet
trigger1 = var(59) = 1
trigger1 = roundstate = 2
v = 58	
Value =7 ;1～11の値で変更
;---------------------------------------------------------------------------
[Statedef 40005];飛び道具検出用ヘルパー
type = A
ctrl = 0
anim = 29999
movetype = I
physics = N
sprpriority = 1

;保険等---------------------
[State 40005]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 40005]
type = assertspecial
trigger1 = 1
flag = invisible
[State 40005]
type = NotHitBy
value = SCA
trigger1 = 1
;----------------------------

[State 40005];スイッチリセット
type = parentvarset
trigger1 = 1
var(47)=0

[State 40005, 検出P];相手projが存在するときスイッチON
type = parentvarset
triggerall = NumEnemy
trigger1 = Enemy(0),numproj > 0
trigger2 = Enemy(numenemy=2),numproj > 0
var(47)=1

[State 40005, 検出H];相手ヘルパーが攻撃判定を持つときスイッチON
type = parentvarset
triggerall = NumEnemy
trigger1 = playerIDexist(ID-1)=1 ;このヘルパーの１つ前のプレイヤーIDが存在するとき。
trigger1 = (playerID(ID-1),hitdefattr = SCA,AA,AT,AP || playerID(ID-1),movetype = A) && playerID(ID-1),teamside != root,teamside && playerID(ID-1),ishelper
trigger2 = playerIDexist(ID-2)=1 ;このヘルパーの２つ前のプレイヤーIDが存在するとき。以下同様
trigger2 = (playerID(ID-2),hitdefattr = SCA,AA,AT,AP || playerID(ID-2),movetype = A) && playerID(ID-2),teamside != root,teamside && playerID(ID-2),ishelper
trigger3 = playerIDexist(ID-3)=1
trigger3 = (playerID(ID-3),hitdefattr = SCA,AA,AT,AP || playerID(ID-3),movetype = A) && playerID(ID-3),teamside != root,teamside && playerID(ID-3),ishelper
trigger4 = playerIDexist(ID-4)=1
trigger4 = (playerID(ID-4),hitdefattr = SCA,AA,AT,AP || playerID(ID-4),movetype = A) && playerID(ID-4),teamside != root,teamside && playerID(ID-4),ishelper
trigger5 = playerIDexist(ID-5)=1
trigger5 = (playerID(ID-5),hitdefattr = SCA,AA,AT,AP || playerID(ID-5),movetype = A) && playerID(ID-5),teamside != root,teamside && playerID(ID-5),ishelper
trigger6 = playerIDexist(ID-6)=1
trigger6 = (playerID(ID-6),hitdefattr = SCA,AA,AT,AP || playerID(ID-6),movetype = A) && playerID(ID-6),teamside != root,teamside && playerID(ID-6),ishelper
trigger7 = playerIDexist(ID-7)=1
trigger7 = (playerID(ID-7),hitdefattr = SCA,AA,AT,AP || playerID(ID-7),movetype = A) && playerID(ID-7),teamside != root,teamside && playerID(ID-7),ishelper
trigger8 = playerIDexist(ID-8)=1
trigger8 = (playerID(ID-8),hitdefattr = SCA,AA,AT,AP || playerID(ID-8),movetype = A) && playerID(ID-8),teamside != root,teamside && playerID(ID-8),ishelper
trigger9 = playerIDexist(ID-9)=1
trigger9 = (playerID(ID-9),hitdefattr = SCA,AA,AT,AP || playerID(ID-9),movetype = A) && playerID(ID-9),teamside != root,teamside && playerID(ID-9),ishelper
trigger10= playerIDexist(ID-10)=1
trigger10= (playerID(ID-10),hitdefattr = SCA,AA,AT,AP || playerID(ID-10),movetype = A) && playerID(ID-10),teamside != root,teamside && playerID(ID-10),ishelper
trigger11= playerIDexist(ID-11)=1
trigger11= (playerID(ID-11),hitdefattr = SCA,AA,AT,AP || playerID(ID-11),movetype = A) && playerID(ID-11),teamside != root,teamside && playerID(ID-11),ishelper
trigger12= playerIDexist(ID-12)=1
trigger12= (playerID(ID-12),hitdefattr = SCA,AA,AT,AP || playerID(ID-12),movetype = A) && playerID(ID-12),teamside != root,teamside && playerID(ID-12),ishelper
trigger13= playerIDexist(ID-13)=1
trigger13= (playerID(ID-13),hitdefattr = SCA,AA,AT,AP || playerID(ID-13),movetype = A) && playerID(ID-13),teamside != root,teamside && playerID(ID-13),ishelper
trigger14= playerIDexist(ID-14)=1
trigger14= (playerID(ID-14),hitdefattr = SCA,AA,AT,AP || playerID(ID-14),movetype = A) && playerID(ID-14),teamside != root,teamside && playerID(ID-14),ishelper
trigger15= playerIDexist(ID-15)=1
trigger15= (playerID(ID-15),hitdefattr = SCA,AA,AT,AP || playerID(ID-15),movetype = A) && playerID(ID-15),teamside != root,teamside && playerID(ID-15),ishelper
trigger16= playerIDexist(ID-16)=1
trigger16= (playerID(ID-16),hitdefattr = SCA,AA,AT,AP || playerID(ID-16),movetype = A) && playerID(ID-16),teamside != root,teamside && playerID(ID-16),ishelper
trigger17= playerIDexist(ID-17)=1
trigger17= (playerID(ID-17),hitdefattr = SCA,AA,AT,AP || playerID(ID-17),movetype = A) && playerID(ID-17),teamside != root,teamside && playerID(ID-17),ishelper
trigger18= playerIDexist(ID-18)=1
trigger18= (playerID(ID-18),hitdefattr = SCA,AA,AT,AP || playerID(ID-18),movetype = A) && playerID(ID-18),teamside != root,teamside && playerID(ID-18),ishelper
trigger19= playerIDexist(ID-19)=1
trigger19= (playerID(ID-19),hitdefattr = SCA,AA,AT,AP || playerID(ID-19),movetype = A) && playerID(ID-19),teamside != root,teamside && playerID(ID-19),ishelper
trigger20= playerIDexist(ID-20)=1
trigger20= (playerID(ID-20),hitdefattr = SCA,AA,AT,AP || playerID(ID-20),movetype = A) && playerID(ID-20),teamside != root,teamside && playerID(ID-20),ishelper
var(47)=ceil(playerID(ID-1),p2bodydist x)

[State 40005];検出にかからなかったら消滅
type = destroyself
trigger1 = root,var(47)=0
;-------------------------------------------------------------------------
;AI起動用ヘルパー
[Statedef 50000]
anim=29999;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 40005]
type = assertspecial
trigger1 = 1
flag = invisible

[State 40005]
type = NotHitBy
value = SCA
trigger1 = 1
;----------------------------------------------------------------------------------
; AIフラグセット
;----------------------------------------------------------------------------------
[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 10000,ﾌﾗｸﾞON]
type=parentvarset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1
;----------------------------------------------------------------------------------
; 暗転計測
;----------------------------------------------------------------------------------
[State -1]
type = VarSet
trigger1 = root,var(59) > 0
trigger1 = enemynear,time = 1
v = 15
value = 0
ignorehitpause = 1

[State -1]
type = VarAdd
trigger1 = root,var(59)
v = 15
value = 1
ignorehitpause = 1
;----------------------------------------------------------------------------------
; ガードしている時間の計測(ガーキャン条件用)
;----------------------------------------------------------------------------------
[State -1]
type = Varadd
trigger1 = root,var(59)
trigger1 = (root,stateno = [150,153]) || root,stateno = 710
var(16) = 1
ignorehitpause = 1

[State -1]
type = Varset
trigger1 = root,stateno != [150,153]
trigger1 = root,stateno != 710
var(16) = 0
ignorehitpause = 1
;----------------------------------------------------------------------------------
; 画面端検知(右)
;---------------------------------------------------------------------------
[Statedef 300000]
type=A
movetype=I
physics=N
ctrl=0
anim=29999;何も表示しないAnimなら、下記完全無敵と影消し、不可視化は不要
sprpriority=0
velset=10, 0;速度。projectileのものと同じにする

[State 9741, Safety];一応
type=selfstate
trigger1=!ishelper
value=0

[State -2];常時完全無敵
type=Nothitby
trigger1=1
value=SCA


[State 30000];画面にとらわれない
type=ScreenBound
trigger1=1
value=0
movecamera=0,0

[State 30000];判定用飛び道具射出
type=Projectile
trigger1=time=0
projID=300001
projanim=29999
velocity=10, 0;へルパーの初期速度と同じに
projpriority=4
projsprpriority=2
projstagebound=0;0がオススメ
projedgebound=99999
offset=0, 0
postype=right
supermovetime=99999
pausemovetime=99999
projremovetime=-1

[State -2];不可視化＆影消し。
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State -2];飛び道具が消えたら停止。
type=velset
trigger1=!(root,numprojID(300001));ヘルパーが出したprojectileも本体管理になるので、「root,」を忘れないように
x=0
y=0
;----------------------------------------------------------------------------------
; 画面端検知(左)
;---------------------------------------------------------------------------
[Statedef 300010]
type=A
movetype=I
physics=N
ctrl=0
anim=29999;何も表示しないAnimなら、下記完全無敵と影消し、不可視化は不要
sprpriority=0
velset=-10, 0;速度。projectileのものと同じにする

[State 9741, Safety];一応
type=selfstate
trigger1=!ishelper
value=0

[State -2];常時完全無敵
type=Nothitby
trigger1=1
value=SCA

[State 30000];画面にとらわれない
type=ScreenBound
trigger1=1
value=0
movecamera=0,0

[State 30000];判定用飛び道具射出
type=Projectile
trigger1=time=0
projID=300011
projanim=29999
velocity=-10, 0;へルパーの初期速度と同じに
projpriority=4
projsprpriority=2
projstagebound=0;0がオススメ
projedgebound=99999
offset=0, 0
postype=left
supermovetime=99999
pausemovetime=99999
projremovetime=-1

[State -2];不可視化＆影消し。
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State -2];飛び道具が消えたら停止。
type=velset
trigger1=!(root,numprojID(300011));ヘルパーが出したprojectileも本体管理になるので、「root,」を忘れないように
x=0
y=0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ■最後に『コモンステート』について■
; コモンステートとは、全キャラ共通の基本動作のステートです。
; 通常は特に変更しない限り、M.U.G.E.N本体のdataフォルダにある
;「common1.cns（コモンステートファイル）」を使います。
;
; しかし、もしもあなたのキャラのステートファイルでcommon1.cnsと同じ番号の
; 基本動作のステートを作った場合は処理が上書きされ、
; common1.cns側の同じ番号のステートは無効になります。
;
; common1.cnsのプログラム優先度は最低に属しているので、
; ステートの作成には番号に注意しないといけません。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 打ち上げ後追い討ち
[Statedef 100000]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = var(59)=1
sysvar(1) = 1

[State 40, 3]
type = VarSet
triggerall = var(59)=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0 
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
triggerall = var(59)=0
trigger1 = command != "holdup" ;上を押しっぱなしじゃなかたら
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 100001
ctrl = 1
;---------------------------------------------------------------------------
; Jump Up
[Statedef 100001]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 40, 6]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = numtarget
trigger1 = time >= 5
value = 101002
;---------------------------------------------------------------------------
;ジャンプ中
[Statedef 101002]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 2, 0
channel = 0

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0, 1

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 32*fvar(4)
guardflag = HA
animtype = medium
priority = 3, Hit
pausetime = 10,10
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-58
hitsound = s1, 2
guardsound = s1, 6
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
guard.hittime  = 11
ground.velocity = -7*const(size.xscale)
air.velocity = -1.3*const(size.xscale),-3
ground.cornerpush.veloff = 0
getpower = 60,30
givepower = 30,15
fall = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
fall.recover = 0

[State 40, 6]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = numtarget
trigger1 = movecontact
value = 100002

[State 200, 7]
type = statetypeset
trigger1 = animelem = 5
movetype = I
;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 100002]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 620
sprpriority = 2

[State 1027, vel];キャンセル補正
type = Velset
trigger1 = !Time
trigger1 = prevstateno = 600 || prevstateno = 610 || prevstateno = 101002
y = -3

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,1
channel = 0

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 78*fvar(4)
guardflag = HA
animtype = hard
priority = 4, Hit
pausetime = 11,11
sparkno = s830
guard.sparkno = s840
sparkxy = -20,-55
hitsound = s1, 3
guardsound = s1, 6
animtype = hard
ground.type = High
ground.slidetime = 16
guard.slidetime = 14
ground.hittime  = 16
ground.velocity = -4*const(size.xscale)
air.velocity = -4*const(size.xscale),-2 
ground.cornerpush.veloff = 0
getpower = 80,40
givepower = 40,20
fall = 0
air.fall = 1
fall.recover = 0

[State 200, 7]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;---------------------------------------------------------------------------
; まだ浮かすよ
[Statedef 101003]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = var(59)=1
sysvar(1) = 1

[State 40, 3]
type = VarSet
triggerall = var(59)=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0 
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
triggerall = var(59)=0
trigger1 = command != "holdup" ;上を押しっぱなしじゃなかたら
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 101004
ctrl = 1
;---------------------------------------------------------------------------
; Jump Up
[Statedef 101004]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 40, 6]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = numtarget
trigger1 = time >= 0
value = 101005
;---------------------------------------------------------------------------
;ジャンプ弱
[Statedef 101005]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 0
channel = 0

[State 0, hit]
type = hitdef
trigger1 = animelem = 2
attr = A, NA
damage = 24*fvar(4)
priority = 3,Hit
hitflag = MAF
guardflag = H
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 9,9
sparkno = s810
sparkxy = -11,-34
guard.sparkno = s840
hitsound = s1,0
guardsound = s1,6
getpower = 40,20
givepower = 20,10
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5
air.type = High
air.velocity = -5,-3
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36

[State 40, 6]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = numtarget
trigger1 = movecontact
value = 101006

[State 600, コントロール]
type = CtrlSet
trigger1 = Time = 17
value = 1
;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 101006]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 620
sprpriority = 2

[State 1027, vel];キャンセル補正
type = Velset
trigger1 = !Time
trigger1 = prevstateno = 600 || prevstateno = 610 || prevstateno = 101002
y = -3

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,1
channel = 0

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 78*fvar(4)
guardflag = HA
animtype = hard
priority = 4, Hit
pausetime = 11,11
sparkno = s830
guard.sparkno = s840
sparkxy = -20,-55
hitsound = s1, 3
guardsound = s1, 6
animtype = hard
ground.type = High
ground.slidetime = 16
guard.slidetime = 14
ground.hittime  = 16
ground.velocity = -4*const(size.xscale)
air.velocity = -4*const(size.xscale),-2 
ground.cornerpush.veloff = 0
getpower = 80,40
givepower = 40,20
fall = 0
air.fall = 1
fall.recover = 0

[State 200, 7]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;---------------------------------------------------------------------------
;立ち弱
[Statedef 100003]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 200
velset = 0,0
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = 35*fvar(4)
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 10,10
sparkno = s810
sparkxy = -8,-78
guard.sparkno = s840
hitsound = s1,0
guardsound = s1,6
getpower = 40,20
givepower = 20,10
ground.type = High
ground.slidetime = 12
guard.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
guard.velocity = -3
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -8
air.type = High
air.velocity = -3.5,-2 
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
fall = 0
fall.recover = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
yaccel = .36
id = 200

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
trigger1 = AnimTime = 0
trigger2 = movecontact && time >= 6
value = 100004

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち中
[Statedef 100004]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 210
sprpriority = -1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 63*fvar(4)
guardflag = MA
priority = 3, Hit
pausetime = 10,10;7,12
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-50
hitsound = s1, 2
guardsound = s1, 6
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
guard.hittime  = 15
ground.velocity = -7*const(size.xscale)
air.velocity = -5*const(size.xscale),-3 
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
getpower = 50,25
givepower = 20,10
fall = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
fall.recover = 0

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = var(55) >= 3
triggerall = numtarget
triggerall = power >= 3000
trigger1 = life <= 500
trigger1 = Time = 10
value = 3300

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
triggerall = var(55) != 0
trigger1 = AnimTime = 0
trigger2 = movecontact
value = 100005

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;発砲（屈）
[Statedef 100005]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 3
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = animelem = 5
value = 3, 10
channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(4) = 1
anim = 2000
id = 2000
postype = p1
pos = 45,-48
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸　ヘルパー]
type = helper
trigger1 = animelemtime(4) = 1
name = "tama"
helpertype = normal
stateno = 1021
id = 1001
pos = ceil(70*const(size.xscale)),ceil(-43*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(4) = 1
var(54) = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(4) = 1
name = "s p"
helpertype = normal
stateno = 1022
id = 1011+var(53)
pos = ceil(70*const(size.xscale)),ceil(-43*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(4) = 1
v = 55
value = -1

[State 1000, 連射]
type = ChangeState
triggerall = time >= 25
triggerall = time <= 30
triggerall = var(55) != 0
trigger1 = var(59) = 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = var(59)=1&& RoundState = 2
trigger2 = var(59) = 1
trigger2 = numtarget
trigger2 = target,statetype != L
value = 100006

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;二連射（屈）
[Statedef 100006]
type    = S
movetype= A
physics = S
poweradd= 20
velset = 0,0
anim = 1025
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 2
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = animelem = 2
value = 3, 14
channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(2) = 1
anim = 2000
id = 2000
postype = p1
pos = 45,-48
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸　ヘルパー]
type = helper
trigger1 = animelemtime(2) = 1
name = "tama"
helpertype = normal
stateno = 1021
id = 1001
pos = ceil(70*const(size.xscale)),ceil(-43*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(2) = 1
var(54) = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(2) = 1
name = "s p"
helpertype = normal
stateno = 1022
id = 1011+var(53)
pos = ceil(70*const(size.xscale)),ceil(-43*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(2) = 1
v = 55
value = -1

[State 1000, 連射]
type = ChangeState
triggerall = time >= 25
triggerall = time <= 30
triggerall = var(55) != 0
trigger1 = var(59) = 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = var(59)=1&& RoundState = 2
trigger2 = var(59) = 1
trigger2 = numtarget
trigger2 = target,statetype != L
value = 100007

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;三連射（屈）
[Statedef 100007]
type    = S
movetype= A
physics = S
poweradd= 50
velset = 0,0
anim = 1025
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発砲音]
type = PlaySnd
trigger1 = animelem = 2
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = animelem = 2
value = 3, 15
channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(2) = 1
anim = 2000
id = 2000
postype = p1
pos = 45,-48
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸　ヘルパー]
type = helper
trigger1 = animelemtime(2) = 1
name = "tama"
helpertype = normal
stateno = 1021
id = 1001
pos = ceil(70*const(size.xscale)),ceil(-43*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(2) = 1
var(54) = 1

[state 3003　ピストルズ　ヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(2) = 1
name = "s p"
helpertype = normal
stateno = 1022
id = 1011+var(53)
pos = ceil(70*const(size.xscale)),ceil(-43*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(2) = 1
v = 55
value = -1

[State 1000, ステート変更]
type = ChangeState
triggerall = var(55) != 0
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
value = 1330

[State 1000, ステート変更]
type = ChangeState
triggerall = var(55) = 0
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
value = 350

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;発砲（弱）
[Statedef 100005]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発射音]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = animelem = 5
value = 3, 10
;channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(5) = 1
anim = 2000
id = 2000
postype = p1
pos = 65,-105
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸ヘルパー]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1001
id = 1001
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(5) = 1
var(54) = 1

[state 3003　ピストルズヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(5) = 1
name = "s p"
helpertype = normal
stateno = 1002
id = 1011+var(53)
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(5) = 1
v = 55
value = -1

[State 1000, 連射]
type = ChangeState
triggerall = time >= 15
triggerall = time <= 30
triggerall = var(55) != 0
trigger1 = var(59) = 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = var(59)=1&& RoundState = 2
trigger2 = var(59) = 1
trigger2 = numtarget
value = 100006

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;二連射
[Statedef 100006]
type    = S
movetype= A
physics = S
poweradd= 20
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発射音]
type = PlaySnd
trigger1 = animelem = 2
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = time = 0
value = 3, 14
;channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(2) = 1
anim = 2000
id = 2000
postype = p1
pos = 65,-105
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸ヘルパー]
type = helper
trigger1 = animelemtime(2) = 1
name = "tama"
helpertype = normal
stateno = 1001
id = 1001
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(2) = 1
var(54) = 1

[state 3003　ピストルズヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(2) = 1
name = "s p"
helpertype = normal
stateno = 1002
id = 1011+var(53)
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(2) = 1
v = 55
value = -1

[State 1000, 三連射]
type = ChangeState
triggerall = time >= 13
triggerall = time <= 28
triggerall = var(55) != 0
trigger1 = var(59) = 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = var(59)=1&& RoundState = 2
trigger2 = var(59) = 1
trigger2 = numtarget
value = 100007

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;三連射
[Statedef 100007]
type    = S
movetype= A
physics = S
poweradd= 50
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発射音]
type = PlaySnd
trigger1 = animelem = 2
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = time = 0
value = 3, 15
;channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(2) = 1
anim = 2000
id = 2000
postype = p1
pos = 65,-105
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸ヘルパー]
type = helper
trigger1 = animelemtime(2) = 1
name = "tama"
helpertype = normal
stateno = 1001
id = 1001
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(2) = 1
var(54) = 1

[state 3003　ピストルズヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(2) = 1
name = "s p"
helpertype = normal
stateno = 1002
id = 1011+var(53)
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(2) = 1
v = 55
value = -1

[State 1000, ステート変更]
type = ChangeState
triggerall = var(55) != 0
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
value = 1330

[State 1000, ステート変更]
type = ChangeState
triggerall = var(55) = 0
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
value = 350

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;画面端ループ
[Statedef 100010]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = var(59)=1
sysvar(1) = 1

[State 40, 3]
type = VarSet
triggerall = var(59)=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0 
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = var(59)=0
trigger1 = command != "holdup" ;上を押しっぱなしじゃなかたら
trigger2 = var(59)=1
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 101011
ctrl = 1
;---------------------------------------------------------------------------
; Jump Up
[Statedef 101011]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 40, 6]
type = ChangeState
trigger1 = numtarget
trigger1 = time >= 0
value = 101012
;---------------------------------------------------------------------------
;ジャンプ弱
[Statedef 101012]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 0
channel = 0

[State 0, hit]
type = hitdef
trigger1 = animelem = 2
attr = A, NA
damage = 24*fvar(4)
priority = 3,Hit
hitflag = MAF
guardflag = H
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 9,9
sparkno = s810
sparkxy = -11,-34
guard.sparkno = s840
hitsound = s1,0
guardsound = s1,6
getpower = 40,20
givepower = 20,10
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5
air.type = High
air.velocity = -5,-3
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36

[State 40, 6]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = numtarget
trigger1 = movecontact
value = 101013

[State 600, コントロール]
type = CtrlSet
trigger1 = Time = 17
value = 1
;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 101013]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 620
sprpriority = 2

[State 1027, vel];キャンセル補正
type = Velset
trigger1 = !Time
trigger1 = prevstateno = 600 || prevstateno = 610 || prevstateno = 101002
y = -3

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 2,1
channel = 0

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 78*fvar(4)
guardflag = HA
animtype = hard
priority = 4, Hit
pausetime = 11,11
sparkno = s830
guard.sparkno = s840
sparkxy = -20,-55
hitsound = s1, 3
guardsound = s1, 6
animtype = hard
ground.type = High
ground.slidetime = 16
guard.slidetime = 14
ground.hittime  = 16
ground.velocity = -4*const(size.xscale)
air.velocity = -4*const(size.xscale),-2 
ground.cornerpush.veloff = 0
getpower = 80,40
givepower = 40,20
fall = 0
air.fall = 1
fall.recover = 0

[State 200, 7]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;---------------------------------------------------------------------------
;立ち弱
[Statedef 100011]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 200
velset = 0,0
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = 35*fvar(4)
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 10,10
sparkno = s810
sparkxy = -8,-78
guard.sparkno = s840
hitsound = s1,0
guardsound = s1,6
getpower = 40,20
givepower = 20,10
ground.type = High
ground.slidetime = 12
guard.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
guard.velocity = -3
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -8
air.type = High
air.velocity = -3.5,-2 
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
fall = 0
fall.recover = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
yaccel = .36
id = 200

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
trigger1 = movecontact
value = 100012

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち中
[Statedef 100012]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 210
sprpriority = -1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 63*fvar(4)
guardflag = MA
priority = 3, Hit
pausetime = 10,10;7,12
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-50
hitsound = s1, 2
guardsound = s1, 6
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
guard.hittime  = 15
ground.velocity = -7*const(size.xscale)
air.velocity = -5*const(size.xscale),-3 
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
getpower = 50,25
givepower = 20,10
fall = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
fall.recover = 0

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = var(55) > 1
triggerall = numtarget
trigger1 = movecontact
value = 100013

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = var(55) = 1
triggerall = numtarget
trigger1 = movecontact
value = 100015

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = var(55) = 0
triggerall = numtarget
trigger1 = movecontact
value = 220

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;発砲（弱）
[Statedef 100013]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 7
channel = 0

[State 1000, 音を鳴らす　発射音]
type = PlaySnd
trigger1 = animelem = 5
value = 3, 5

[State 1000, 音を鳴らす　キャモーン]
type = PlaySnd
triggerall = var(53) != 10
trigger1 = animelem = 5
value = 3, 10
;channel = 1

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(5) = 1
anim = 2000
id = 2000
postype = p1
pos = 65,-105
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸ヘルパー]
type = helper
trigger1 = animelemtime(5) = 1
name = "tama"
helpertype = normal
stateno = 1001
id = 1001
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 7]
type = varadd
trigger1 = animelemtime(5) = 1
var(54) = 1

[state 3003　ピストルズヘルパー]
type = helper
triggerall = var(53) != 10
trigger1 = animelemtime(5) = 1
name = "s p"
helpertype = normal
stateno = 1002
id = 1011+var(53)
pos = ceil(100*const(size.xscale)),ceil(-95*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(5) = 1
v = 55
value = -1

[State 1000, 連射]
type = ChangeState
triggerall = time >= 15
triggerall = time <= 30
triggerall = var(55) != 0
trigger1 = var(59) = 0
trigger1 = command = "x" || command = "y" || command = "z"
value = 100010

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = AnimTime = 0
trigger1 = numtarget
value = 100014

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;待機
[Statedef 100014]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 0
sprpriority = 2

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1
trigger1 = Time >= 4
trigger1 = numtarget
value = 100010

[State 400, 4]
type = ChangeState
trigger1 = !numtarget
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;彫刻 近
[Statedef 100015]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす いけぇ]
type = PlaySnd
trigger1 = animelem = 3
value = 2, 0
channel = 0

[State 1000, 音を鳴らす　発射音]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 5

[State 191, 発砲時けむり]
type = Explod
trigger1 = animelemtime(4) = 1
anim = 2000
id = 2000
postype = p1
pos = 25,-70
sprpriority = 4
bindtime = -1
ownpal = 1

[state 3003　弾丸ヘルパー]
type = helper
trigger1 = animelemtime(4) = 1
name = "tama"
helpertype = normal
stateno = 1301
id = 1001
pos = ceil(25*const(size.xscale)),ceil(-70*const(size.yscale))
postype = p1
ownpal = 1

[State 1000, 弾消費]
type = varadd
triggerall = var(55) != 0
triggerall = RoundState = 2
trigger1 = animelemtime(4) = 1
v = 55
value = -1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1
triggerall = numtarget
trigger1 = animtime = 0
value = 100016

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;リロード
[Statedef 100016]
type = S
movetype = I
physics = S
ctrl = 0
anim = 350
velset = 0,0
sprpriority = 2

[state 3003　排莢]
type = helper
trigger1 = animelem = 3
name = "yakkyou"
helpertype = normal
stateno = 360
id = 360
pos = ceil(15*const(size.xscale)),ceil(-85*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, var]
type = varset
trigger1 = animelem = 5
var(55) = 6

[state 3003　装填]
type = helper
trigger1 = animelem = 5
name = "souten"
helpertype = normal
stateno = 370
id = 370
pos = ceil(3*const(size.xscale)),ceil(-80*const(size.yscale))
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 6, 8
channel = 0

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
trigger1 = animtime = 0
value = 100017

[State 195, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;接近
[Statedef 100017]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 20
sprpriority = 2

[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = P2BodyDist X <= 35
trigger1 = enemynear,HitShakeOver
value = 100019

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
trigger1 = P2BodyDist X <= 35
value = 100018

[State 400, 4]
type = ChangeState
trigger1 = !numtarget
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;待機
[Statedef 100018]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 0
sprpriority = 2

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
;trigger1 = time >= 0
trigger1 = numtarget
trigger1 = enemynear,HitShakeOver
value = 100019

[State 400, 4]
type = ChangeState
trigger1 = !numtarget
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち弱
[Statedef 100019]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 200
velset = 0,0
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = 35*fvar(4)
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 10,10
sparkno = s810
sparkxy = -8,-78
guard.sparkno = s840
hitsound = s1,0
guardsound = s1,6
getpower = 40,20
givepower = 20,10
ground.type = High
ground.slidetime = 12
guard.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
guard.velocity = -3
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -8
air.type = High
air.velocity = -3.5,-2 
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
fall = 0
fall.recover = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
yaccel = .36
id = 200

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
trigger1 = time >= 6
value = 100020

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち中
[Statedef 100020]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 210
sprpriority = -1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 63*fvar(4)
guardflag = MA
priority = 3, Hit
pausetime = 10,10;7,12
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-50
hitsound = s1, 2
guardsound = s1, 6
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
guard.hittime  = 15
ground.velocity = -7*const(size.xscale)
air.velocity = -5*const(size.xscale),-3 
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
getpower = 50,25
givepower = 20,10
fall = 0
air.fall = ifelse(EnemyNear,Movetype=H,1,0)
fall.recover = 0

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = var(55) >= 3
triggerall = numtarget
triggerall = power >= 3000
triggerall = target,life < 40
trigger1 = movecontact
value = 3300

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
triggerall = power >= 1000
trigger1 = random < 200
trigger1 = movecontact
value = 3100

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)=1&& RoundState = 2
triggerall = numtarget
trigger1 = movecontact
value = 220

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;当て投げ
[Statedef 100030]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 20
sprpriority = 2

[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 400, 4]
type = ChangeState
trigger1 = P2BodyDist X = [-20,20]
trigger1 = enemynear,movetype != H
value = 900

[State 400, 4]
type = ChangeState
trigger1 = enemynear,movetype != H
value = 0
ctrl = 1