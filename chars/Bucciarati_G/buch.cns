
;構成
;===========
;定数とか
;イントロ、勝利ポーズ、挑発
;Helper貼りつくブチャラティ
;コモンステート(ダメージはdamage.cns)
;通常、投げ、必殺、超必殺
;スタンド発現、解除
;
;-2、-3ステート
;
;以下ほぼHelperのステート
;AIスイッチ
;スタンドゲージ
;スタンドクラッシュ
;メッセージアイコンSTAND ON!とか
;『ﾌﾞﾁｬﾗﾃｨ WIN』、『to be continued』
;超必殺カットイン
;KO勝利時の集中線と音
;敗北カットイン
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅
;本体被ダメでｽﾀﾝﾄﾞ消滅
;アドバンシングガード
;回り込み(仮)

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 5000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 0     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 11     ;横に倒れている時間（フレーム）
airjuggle         = 99999     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 59     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 0.95       ;キャラの横の大きさ（絶対値・float）
yscale           = 1       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 15      ;地上にいる時の「後方の物理的な幅」
ground.front     = 16      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 12      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-90  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-60  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）
;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 3;3.4;2.8     ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.5;-3.3;-2.2   ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 8,0;7,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -5,-2.8;-4.5   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-11;-9;-8.4      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -2.85;.55       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.2;2.5         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.55,-8.1  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4.5,-11;6,-8.1;8      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 0       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .6;.44      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）
;---------------------------------------------------------------------------
; 勝利メッセージ
;---------------------------------------------------------------------------

[ja.Quotes]
victory1 = "『任務は遂行する』……『部下も守る』\n
おまえごときに両方やるというのは、\nそうムズかしい事じゃあないな。"
victory2 = "何よりも『困難で』…………\n
『幸運』なくしては、\n近づけない道のりだった………"
victory3 = "堕ちたな……\nただのゲス野郎の心に…………！！"
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;イントロ分岐
[Statedef 190]
type = S
poweradd = ifelse(power<1000,1000,0)

[State 190, 0];p2name 最初の敵,p4name 2番目の敵
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "DIO BRANDO" || p4name = "DIO BRANDO"
trigger2 = p2name = "dio" || p4name = "dio"
trigger3 = p2name = "final dio" || p4name = "final dio"
trigger4 = p2name = "Diavolo-IF" || p4name = "Diavolo-IF"
trigger5 = p2name = "Diavolo" || p4name = "Diavolo"
trigger6 = p2name = "s_diavolo" || p4name = "s_diavolo"
value = 193

[State 190, 0]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "yoshikage" || p4name = "yoshikage"
value = 196

[State 190, 0]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "Polnareff" || p4name = "Polnareff"
trigger1 = enemy,authorname = "Izumo"
value = 198

[State 190, 0];var(3)は-3でランダムしとるよ
type = ChangeState
triggerall = time = 0
trigger1 = var(3) = [0,5]
value = 191

[State 190, 0]
type = ChangeState
triggerall = time = 0
trigger1 = var(3) = [6,8]
value = 192

;---------------------------------------------------------------------------
[Statedef 193];dio用
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro ;このDefの間イントロ状態にします

[State 0];これで絵がSFになり、-2がHelper貼りつくﾌﾞﾁｬﾗﾃｨを出す
type = varset
trigger1 = time = 2
trigger1 = P2StateNo != 197
trigger2 = Time = 140
trigger2 = P2StateNo = 197
var(1) = 10000

[State 10820, けむり]
type = Explod
trigger1 = time = 2
trigger1 = P2StateNo != 197
trigger2 = Time = 140
trigger2 = P2StateNo = 197
postype = p1
pos = 20,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 10820, ばひゅーん]
type = PlaySnd
trigger1 = time = 2
trigger1 = P2StateNo != 197
trigger2 = Time = 140
trigger2 = P2StateNo = 197
value = 3,11

[State 191,];
type = ChangeAnim
trigger1 = time = 3
trigger1 = P2StateNo != 197
trigger2 = Time = 140
trigger2 = P2StateNo = 197
value = 193

[State 191,吐き気を催すほどの邪悪を感じる];
type = PlaySnd
trigger1 = Time = 30
trigger1 = P2StateNo != 197
trigger2 = Time = 140
trigger2 = P2StateNo = 197
value = 10,32
channel = 0  ;チャンネル0は、ボイス再生専用

[State 191,]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Time = 150
value = 0
;---------------------------------------------------------------------------
[Statedef 196];吉良用
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191,];
type = ChangeAnim
trigger1 = Time = 20
value = 198

[State 10820, けむり]
type = Explod
trigger1 = Time = 50
postype = p1
pos = -30,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 10820, ばひゅーん]
type = PlaySnd
trigger1 = Time = 50
value = 3,11

[State 191,];
type = ChangeAnim
trigger1 = Time = 50
value = 199

[State 420,SFを出す]
type = helper
trigger1 = Time = 50
helpertype = normal
pos = -40,0
postype = p1
stateno = 197
ownpal = 1

[State 10820, ！]
type = Explod
trigger1 = Time = 80
postype = p1
pos = 10,-30
anim = 1104
sprpriority = 6
ownpal = 1
;persistent = 0

[State 191,おまえっｽﾀﾝﾄﾞ使い！？]
type = PlaySnd
trigger1 = Time = 80
value = 10,35
channel = 0  ;チャンネル0は、ボイス再生専用

[State 191,]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------
[Statedef 197];吉良用helper
type = S
ctrl = 0
anim = 10100
velset = 0,0
sprpriority = 5

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 191,]
type = Velset
trigger1 = P2BodyDist X > 100
x = 10

[State 191,]
type = Velset
trigger1 = P2BodyDist X <= 100
x = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = P2BodyDist X <= 100
value = 10220
persistent = 0

[State 10820, ヒットスパーク]
type = Explod
trigger1 = Anim = 10220
trigger1 = animelem = 2
postype = p1
pos = 120,-90
anim = 20005
sprpriority = 4
ownpal = 1

[State 10820, ガード音]
type = PlaySnd
trigger1 = Anim = 10220
trigger1 = animelem = 2
value = 2,6

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = Anim = 10220
trigger1 = animelem = 4
value = 10180

[State 191,]
type = ChangeAnim
trigger1 = Anim = 10180
trigger1 = time = 80
value = 10001

[State 191,]
type = Destroyself
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;ジッパーから出るやつ
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, アニメ変更];バトル画面に切り替わった瞬間のフェードインの時、アニメを固定している
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,150]
flag = Intro ;イントロ状態にします

[State 191];ｼﾞｯﾊﾟｰｱﾆﾒ終わったら立ちｱﾆﾒに移行。その後立ちｱﾆﾒをくりかえす。
type = ChangeAnim
trigger1 = AnimTime = 0
value = 0

[State 191,(34)貴様、組織の者か];
type = PlaySnd
trigger1 = AnimElem = 40
trigger1 = var(3) = [0,3]
value = 10,34
channel = 0

[State 191,(21)始末させてもらうぞ];
type = PlaySnd
trigger1 = AnimElem = 40
trigger1 = var(3) = [4,8]
value = 10,21
channel = 0

[State 191,ジッパーの音];
type = PlaySnd
trigger1 = AnimElem = 9       ;7コマ目
value = 10,19

[State 191,ジッパーの音];
type = PlaySnd
trigger1 = AnimElem = 15       ;13コマ目
value = 10,17

[State 191,ドドド]
type = Explod
trigger1 = time = 4
facing = ifelse(Teamside=1,1,-1);1P側ならキャラと同じ向き、それ以外なら反対
postype = p1
pos = 0,0
anim = 8000
sprpriority = 4
;なぞだ！！！loopなのに勝手にｴｸｽﾌﾟﾛｯﾄﾞ消える。。
;ｲﾝﾄﾛは処理が特殊なのか・・とりあえずｱﾆﾒを長くして対処

[State 191]
type = RemoveExplod
trigger1 = Time = 130

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 0,-70
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 0,-70
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 0,-70
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 0,-70
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

;

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= -30,0
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= -30,0
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= -30,0
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= -30,0
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

;

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 30,-100
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 30,-100
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 30,-100
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State ];?G?t?F?N?g
type=Explod
trigger1 = Time = 130
anim=1140
sprpriority=20
postype=p1
pos= 30,-100
random=20,30
vel=-2+Random%4,Random%4-Random%4
scale=.25,.25
pausemovetime=999999
supermovetime =999999

[State 191];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = Time = 150
value = 0

;---------------------------
;覚悟はいいか俺はできてる
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロ状態にします

[State 191,覚悟はいいか俺はできてる];
type = PlaySnd
trigger1 = Time = 1       ;1コマ目
value = 10,29
channel = 0  ;チャンネル0は、ボイス再生専用

[State 191,]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------
;ポルナレフ用
[Statedef 198]
type = S
ctrl = 0
anim = 198
velset = 0,0

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロ状態にします

[State 191];
type = ChangeAnim
trigger1 = time = 1 && p2stateNo = 192
trigger1 = p2name = "Polnareff" && enemy,authorname = "Izumo"
value = 192

[State 191,俺の名はブローノブチャラティ];
type = PlaySnd
trigger1 = Time = 120
trigger1 = p2stateNo = 192
value = 10,23
channel = 0  ;チャンネル0は、ボイス再生専用

[State 191,お前はスタンド使いのようだな];
type = PlaySnd
trigger1 = Time = 10
trigger1 = p2stateNo != 192
trigger1 = p2stateNo != 193
trigger2 = Time = 50
trigger2 = p2stateNo = 193
value = 10,25
channel = 0  ;チャンネル0は、ボイス再生専用

[State 191,]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Anim = 192
trigger2 = Time = 170
value = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 180, ｽﾀﾝﾄﾞoff]
type = ChangeState
triggerall = var(1) = 0   ;ｽﾀﾝﾄﾞoff
triggerall = Time = 0
trigger1 = var(9) != 1    ;ｱﾘｱﾘ以外でKO
value = 181

[State 180, ｽﾀﾝﾄﾞon]
type = ChangeState
triggerall = var(1) = 10000 ;ｽﾀﾝﾄﾞon
triggerall = Time = 0
trigger1 = var(9) != 1    ;ｱﾘｱﾘ以外でKO
value = 182

[State 180, アリーベデルチ]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(9) = 1     ;アリアリでKOしたら、StateDef183にいく。
;trigger1 = matchover     ;2ﾗｳﾝﾄﾞ取って、試合が終わったとき。
value = 183

;---------------------------------------------------------------------------
;ｽﾀﾝﾄﾞoffノーマル
[Statedef 181]
type = S
ctrl = 0
anim = 181 ;直立
velset = 0,0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 俺は自分の信じられる道を歩いていたい];
type = PlaySnd
trigger1 = time = 0
trigger1 = matchover      ;2ﾗｳﾝﾄﾞ取って、試合が終わったとき。
value = 10,47

[State 181, 拷問はさらに続くんだぜ];
type = PlaySnd
trigger1 = time = 0
trigger1 = !matchover     ;1ﾗｳﾝﾄﾞ取っただけ
value = 10,37

[State 191, 2] 
type = AssertSpecial
trigger1 = matchover
trigger1 = Time = [0,200]
flag = roundnotover

[State 190, 0];アリーベデルチの勝利ポーズ用リセット
type = varset
trigger1 = time = 0
var(9) = 0

;------------------
;ｽﾀﾝﾄﾞonノーマル
[Statedef 182]
type = S
ctrl = 0
anim = 10182
velset = 0,0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181,ぶっ殺すって台詞は終わってから言うもんだぜ];
type = PlaySnd
trigger1 = AnimElem = 1
trigger1 = matchover      ;2ﾗｳﾝﾄﾞ取って、試合が終わったとき。
value = 10,39

[State 181,ぶるっちまう特技だろ];
type = PlaySnd
trigger1 = AnimElem = 1
trigger1 = !matchover     ;1ﾗｳﾝﾄﾞ取っただけ
value = 10,27

[State 191, 2] 
type = AssertSpecial
trigger1 = matchover
trigger1 = Time = [0,250]
flag = roundnotover

[State 190, 0];アリーベデルチの勝利ポーズ用リセット
type = varset
trigger1 = time = 0
var(9) = 0

;-----------------------
[Statedef 183];アリーヴェデルチ
type = S
ctrl = 0
anim = 180 + var(1)
velset = 0,0

[State 182, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 音を鳴らす];アリーヴェデルチ
type = PlaySnd
trigger1 = time = 3
value = 10,1

[State 190, 0];アリーベデルチの勝利ポーズ用リセット
type = varset
trigger1 = time = 0
var(9) = 0

;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;『無条件で常に実行させる命令』になる。
value = SCA
time = 1

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = 0

;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195+var(1)
velset = 0,0
sprpriority = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = Time = 50 ;このステートが20フレームになったら
value = 1            ;キーコントロールが可能になる。

[State 195,]
type = PlaySnd
trigger1 = Time = 1
value = 10,31
volume = 128
channel = 0  ;チャンネル0は、ボイス再生専用

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
 


;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;---------------------------------------------------------------------------
;コモンステートです。+var(1)　でｽﾀﾝﾄﾞonのとき10000を足しています。
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0,バグったとき用]
type = destroyself
trigger1 = IsHelper 

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0+var(1) && Anim != 5+var(1)
trigger2 = Anim = 5+var(1) && AnimTime = 0 ;Turn anim over
value = 0+var(1)

[State 0, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10+var(1)

[State 20000]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "zaxtu"
ID = 20000
pos = 0, 5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11+var(1)
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11+var(1)

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12+var(1)

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, ‰?????????]
type = PlaySnd
triggerall = anim = 20
trigger1 = animelem = 8
trigger2 = animelem = 16
value = s6, 9
channel = -1

[State 20000]
type = Helper
triggerall = anim = 20
trigger1 = animelem = 8
trigger2 = animelem = 16
helpertype = normal
name = "zaxtu"
ID = 20000
pos = 0, 5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1


[State 20, ‰?????????]
type = PlaySnd
triggerall = anim = 10020
triggerall = numhelper(1)
triggerall = helper(1), anim = 20
trigger1 = helper(1),animelem = 8
trigger2 = helper(1),animelem = 16
value = s6, 9
channel = -1

[State 20000]
type = Helper
triggerall = anim = 10020
triggerall = numhelper(1)
triggerall = helper(1), anim = 20
trigger1 = helper(1),animelem = 8
trigger2 = helper(1),animelem = 16
helpertype = normal
name = "zaxtu"
ID = 20000
pos = 0, 5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 20, ‰?????????]
type = PlaySnd
triggerall = anim = 21
trigger1 = animelem = 8
trigger2 = animelem = 16
value = s6, 9
channel = -1

[State 20000]
type = Helper
triggerall = anim = 21
trigger1 = animelem = 8
trigger2 = animelem = 16
helpertype = normal
name = "zaxtu"
ID = 20000
pos = -30, 5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 20, ‰?????????]
type = PlaySnd
triggerall = anim = 10021
triggerall = numhelper(1)
triggerall = helper(1), anim = 21
trigger1 = helper(1),animelem = 8
trigger2 = helper(1),animelem = 16
value = s6, 9
channel = -1

[State 20000]
type = Helper
triggerall = anim = 10021
triggerall = numhelper(1)
triggerall = helper(1), anim = 21
trigger1 = helper(1),animelem = 8
trigger2 = helper(1),animelem = 16
helpertype = normal
name = "zaxtu"
ID = 20000
pos = -30, 5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20+var(1) && Anim != 5+var(1)
trigger2 = Anim = 5+var(1) && AnimTime = 0
value = 20+var(1)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21+var(1) && Anim != 5+var(1)
trigger2 = Anim = 5+var(1) && AnimTime = 0
value = 21+var(1)

;---------------------------------------------------------------------------
;ジャンプ開始
[Statedef 40]
type    = S
physics = S
anim = 40+var(1)
ctrl = 0
sprpriority = 1


[State 40, ‰?????????]
type = PlaySnd
trigger1 = time = 0
value = s6, 7
channel = -1

[State 20000]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "moji"
ID = 20001
pos = 0, -5
postype = p1
facing = facing
stateno = 20001
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 40, 6]
type = Changestate
triggerall = var(59)=1
triggerall = time = 0
triggerall = prevstateno != 100
trigger1 = P2BodyDist X >= 100
trigger2 = enemynear,movetype = A
trigger3 = enemynear,statetype = A
trigger4 = enemynear,statetype = L
value = 0
ctrl = 1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
triggerall = var(59)=-1
trigger1 = command != "holdup" ;上を押しっぱなしじゃなかたら
var(5) = 1

[State 40, 0]
type = VarSet
triggerall = var(59)=1&& RoundState = 2
triggerall = EnemyNear,statetype != L
trigger1 = P2BodyDist X = [-20,120]
var(5) = 1

[State 40, 0]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0;垂直ジャンプ

[State 40, 0]
type = VarSet
triggerall = var(59)=-1
trigger1 = command = "holdfwd"
sysvar(1) = 1;前にジャンプ

[State 40, 2]
type = VarSet
triggerall = var(59)=1&& RoundState = 2
trigger1 = P2BodyDist X >= 30
sysvar(1) = 1

[State 40, 0]
type = VarSet
triggerall = var(59)=-1
trigger1 = command = "holdback"
sysvar(1) = -1;後ろにジャンプ

;通常
[State 40, 0]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
;垂直ならconst(velocity.jump.neu.x)(多分加速なし）、違うなら次
;前にジャンプなら前に加速、違うなら後ろに加速
y = const(velocity.jump.y)

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 0];ダッシュ中に前にジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 5];バックステプ中に後ろにジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 105 ;RUN_ばっく
trigger1 = sysvar(1) = -1
x = -const(velocity.runjump.fwd.x)

[State 40, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------------------------------------------------------------
;スタンドモード時、空中ジャンプ開始
[Statedef 41]
type    = A
physics = A
anim = 40+var(1)
ctrl = 0
sprpriority = 1
velset = 0,0

[State 41, 0]
type = VarAdd
trigger1 = time = 0
trigger1 = var(4) = 1    ;2段ジャンプ可能の場合
v = 4
value = -1

[State 41, 0];ふっ！とか言わせてみる
type = PlaySnd
trigger1 = time = 0
value = 0,0
 

[State 20000]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "moji"
ID = 20001
pos = 0, -5
postype = p1
facing = facing
stateno = 20001
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

;垂直
[State 41, 0]
type = VarSet
trigger1 = var(1) = 10000
sysvar(1) = 0

;前
[State 41, 0]
type = VarSet
trigger1 = var(1) = 10000
trigger1 = command = "holdfwd"
sysvar(1) = 1

;後ろ
[State 41, 0]
type = VarSet
trigger1 = var(1) = 10000
trigger1 = command = "holdback"
sysvar(1) = -1

[State 41, 0]
type = VelSet
trigger1 = animtime = 0
trigger1 = var(1) = 10000
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -9

[State 41, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------------------------------------------------------------
;ジャンプ中
[Statedef 50]
type    = A
physics = A

[State 10000]
type = Turn
trigger1 = prevstateno = [1510,1515]
trigger1 = time < 5
trigger1 = P2Dist X < 0

[State 10000]
type = velset
trigger1 = prevstateno = [1510,1515]
trigger1 = !time
trigger1 = command = "holdfwd"
x = 3

[State 10000]
type = velset
trigger1 = prevstateno = [1520,1525]
trigger1 = !time
x = 3

[State 50, 0]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 0]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(1)

[State 50, 0]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State -1, 閉じッパー後攻撃]
type = ChangeState
value = 620
triggerall = var(51)*var(51) <= 25;LV調整用
triggerall = Var(59) = 1 && RoundState = 2
triggerall = var(1) = 0
trigger1 = prevstateno = [1510,1525]
trigger1 = P2BodyDist X= [-60,110]
trigger1 = P2BodyDist Y = [-60,120]

trigger2 = prevstateno = 1601 || prevstateno = 1611
trigger2 = P2BodyDist X= [-60,110]
trigger2 = P2BodyDist Y = [-60,120]
;---------------------------------------------------------------------------------------------------------------------------------
;ジャンプ着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47+var(1)

[State -3, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0 
value = 40, 0
channel = -1

[State 20000]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "moji"
ID = 20002
pos = 0, -5
postype = p1
facing = facing
stateno = 20002
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 52, 0]
type = Turn
trigger1 = time = 0
trigger1 = p2dist X < -5

[State 52, 0]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 0]
type = null;CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 0]
type = ChangeState
trigger1 = prevstateno = 100303
trigger1 = AnimTime = 0
value = 100304

[State -1, ループ]
type = ChangeState
value = 100000
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = prevstateno = 100035
trigger1 = !time

[State 52, ガード不能]
type = assertspecial
trigger1 = !ctrl && ((prevstateno = [600,699]) || (prevstateno = [10600,10699]))
trigger1 = AnimTime < 0
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 52, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_FWDダッシュ
[Statedef 100]
type    = S
physics = N
anim = 100+var(1)
sprpriority = 1

[State 100, ‰?????????]
type = PlaySnd
triggerall = Var(59) != 1
trigger1 = time = 0
value = s6, 8
channel = -1

[State 100]
type = Explod
triggerall = Var(59) != 1
trigger1 = time = 0
anim = 106
ID = 106
pos = 40, -85
postype = p1
facing = 1
bindtime = 1
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1, 1
sprpriority = 4
 
[State 20000]
type = Helper
triggerall = Var(59) != 1
trigger1 = time = 0
helpertype = normal
name = "moji"
ID = 20003
pos = -10, -5
postype = p1
facing = facing
stateno = 20003
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 100, ‰?????????]
type = PlaySnd
triggerall = Var(59) != 1
triggerall = anim = 100
trigger1 = animelem = 4
trigger2 = animelem = 8
value = s6, 9
channel = -1
 
[State 20000]
type = Helper
triggerall = Var(59) != 1
triggerall = anim = 100
trigger1 = animelem = 4
trigger2 = animelem = 8
helpertype = normal
name = "moji"
ID = 20000
pos = -10, -5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 100, ‰?????????]
type = PlaySnd
triggerall = Var(59) != 1
triggerall = anim = 10100
triggerall = numhelper(1)
triggerall = helper(1), anim = 100
trigger1 = helper(1), animelem = 4
trigger2 = helper(1), animelem = 8
value = s6, 9
channel = -1
 
[State 20000]
type = Helper
triggerall = Var(59) != 1
triggerall = anim = 10100
triggerall = numhelper(1)
triggerall = helper(1), anim = 100
trigger1 = helper(1), animelem = 4
trigger2 = helper(1), animelem = 8
helpertype = normal
name = "moji"
ID = 20000
pos = -10, -5
postype = p1
facing = facing
stateno = 200000
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 100]
type = Ctrlset
triggerall = Var(59) = 1
trigger1 = numtarget || helper(3),numtarget
value = 0

[State 100]
type = Ctrlset
triggerall = Var(59) = 1
trigger1 = !numtarget && helper(3),numtarget = 0
value = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.fwd.x)

[State 100, 3] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk          ;Prevent run from canceling into walk
flag2 = NoAutoTurn     ;Prevent from turning

[State 100]
type = ChangeState
triggerall = Var(59) = -1
trigger1 = command = "holdup"
value = 40

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = command != "holdfwd"
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_BACKバックステップ
[Statedef 105]
type    = S
physics = S;A
anim = 105+var(1)
sprpriority = 1
ctrl = 1

[State 105, ‰?????????]
type = PlaySnd
trigger1 = time = 0
value = s6, 8
channel = -1

[State 20000]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "moji"
ID = 20003
pos = -10, -5
postype = p1
facing = facing
stateno = 20003
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 100]
type = Explod
trigger1 = time = 0
anim = 106
ID = 106
pos = -10, -85
postype = p1
facing = -1
bindtime = 1
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1, 1
sprpriority = 4

[State 100, 1]
type = VelSet
x = const(velocity.run.back.x)-5 ;= -10
triggerall = var(1) = 10000;スタンドモード時
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3

[State 100, 1]
type = VelSet
x = const(velocity.run.back.x)-3 ;= -8
triggerall = var(1) = 10000;スタンドモード時
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
;trigger3 = AnimElem = 6

[State 100, 1]
type = VelSet
x = const(velocity.run.back.x)-3 ;= -8
triggerall = var(1) = 0
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3

[State 100, 1]
type = VelSet
;trigger1 = time = 1
x = const(velocity.run.back.x)   ;= -5
triggerall = var(1) = 0
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6

[State 100, 3] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk          ;Prevent run from canceling into walk
flag2 = NoAutoTurn     ;Prevent from turning

[State 100]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,1
channel = 0  ;チャンネル0は、ボイス再生専用

[State -3, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = 40, 0
channel = -1

[State 20000]
type = Helper
trigger1 = AnimElem = 6
helpertype = normal
name = "moji"
ID = 20002
pos = -20, -5
postype = p1
facing = facing
stateno = 20002
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110+var(1)

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = statetype != A
value = 120 + (statetype = C) +var(1)

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = S && command = "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = S && P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = C && command != "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = Var(59)!=1
trigger1 = cond(p2dist x<0,(command != "holdfwd"),(command != "holdback"))
trigger2 = Var(59) = 1
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140
;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130+var(1)
value = 130+var(1)

[State 130, Hi to Lo]
type = ChangeState
trigger1 = Var(59)!=1
trigger1 = command = "holddown"
trigger2 = Var(59) = 1
trigger2 = P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = Var(59)!=1
trigger1 = cond(p2dist x<0,(command != "holdfwd"),(command != "holdback"))
trigger2 = Var(59) = 1
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140
;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131+var(1)
value = 131+var(1)

[State 131, Lo to Hi]
type = ChangeState
trigger1 = Var(59)!=1
trigger1 = command != "holddown"
trigger2 = Var(59) = 1
trigger2 = P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = P2statetype = A
trigger3 = P2bodydist x <= 100
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = Var(59)!=1
trigger1 = cond(p2dist x<0,(command != "holdfwd"),(command != "holdback"))
trigger2 = Var(59) = 1
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140
;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132+var(1)
value = 132+var(1)

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = Var(59)!=1
trigger1 = cond(p2dist x<0,(command = "holdfwd"),(command = "holdback"))
trigger2 = var(59)
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = Var(59)!=1
trigger1 = cond(p2dist x<0,(command != "holdfwd"),(command != "holdback"))
trigger2 = Var(59) = 1
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140
;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = statetype != A
value = 140 + (statetype = C) +var(1)

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = S && command = "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = S && P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = C && command != "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150+var(1)

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = S && command = "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = S && P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = C && command != "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150+var(1)

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = S && command = "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = S && P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = C && command != "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151+var(1)

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = S && command = "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = S && P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = C && command != "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151+var(1)

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = S && command = "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = S && P2statetype = C
trigger3 = Var(59) = 1
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59)!=1
trigger1 = statetype = C && command != "holddown"
trigger2 = Var(59) = 1
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = Var(59) = 1
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152+var(1)

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152+var(1)

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 7]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = Var(59)!=1
trigger1 = command = "holdback"
trigger2 = Var(59) = 1
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
;コモンステートここまで。
;---------------------------------------------------------------------------
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

;---------------------------------------------------------------------------
;立ち弱Son
 
;---------------------------------------------------------------------------
;立ち弱スタンド出現攻撃
[Statedef 10201]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = 30, 0
animtype = Light
priority = 3, Hit
guardflag = MA
pausetime = 10, 11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10, -86
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.4,-1.4

[State 0]
type = varset
trigger1 = time = 0
var(1) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち中
 
;---------------------------------------------------------------------------
;立ち中Son
 

;---------------------------------------------------------------------------
;立ち中スタンド出現攻撃
[Statedef 10211]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0
anim = 10210

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
guardflag = MA
damage    = 50
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 0]
type = varset
trigger1 = time = 0
var(1) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強


;---------------------------------------------------------------------------
;立ち強Son
 
;---------------------------------------------------------------------------
;立ち強スタンド出現攻撃
[Statedef 10221]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 70
ctrl = 0
velset = 0,0
anim = 10220

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 220, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
guardflag = MA
damage    = 70,5
pausetime = 14,13
sparkno = s20002
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,5
guardsound = s2,6
getpower = 30,0
givepower = 20,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -3.5,8  ;相手が空中なら叩きつける感じにしたい。。
air.fall = 1           ;空中ヒットしたときのみ落下状態

[State 0]
type = varset
trigger1 = time = 0
var(1) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 220, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱
 
;---------------------------------------------------------------------------
;しゃがみ弱Son
 

;---------------------------------------------------------------------------
;しゃがみ弱スタンド出現攻撃
[Statedef 10401]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 30
ctrl = 0
anim = 10400
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 400, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage    = 30
priority  = 3
animtype  = Light
guardflag = LA
pausetime = 10,11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10,-52
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 0]
type = varset
trigger1 = time = 0
var(1) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中


;---------------------------------------------------------------------------
;しゃがみ中Son
 
;---------------------------------------------------------------------------
;しゃがみ中スタンド出現攻撃
[Statedef 10411]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 10410

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 50
animtype  = Medium
guardflag = LA
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-55
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

[State 0]
type = varset
trigger1 = time = 0
var(1) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 410, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強

;---------------------------------------------------------------------------
;こいつを倒せばいいんだな！
 
;---------------------------------------------------------------------------
;しゃがみ強Son
 

;---------------------------------------------------------------------------
;しゃがみ強スタンド出現攻撃
[Statedef 10421]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 70
ctrl = 0
anim = 10420

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 430, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 70,5
animtype  = up
guardflag = MA
pausetime = 14,18
sparkno = s20002
guard.sparkno = s20005
sparkxy = -10,-68
hitsound = s2,5
guardsound = s2,6
getpower = 30,0
givepower = 20,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -1.5,-8
air.velocity = -2,-3
fall = 1

[State 0]
type = varset
trigger1 = time = 0
var(1) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 430, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; ジャンプ通常攻撃にChangeStateのコントローラが無いのは、
; Physicsを「A」にしているから。
; おまけフォルダの「小ネタ.txt」を参照。（Physicsの仕組み）
;---------------------------------------------------------------------------
;ジャンプ弱


;---------------------------------------------------------------------------
;ジャンプ弱son
 
;---------------------------------------------------------------------------
;ジャンプ中

;---------------------------------------------------------------------------
;ジャンプ中son
 

;---------------------------------------------------------------------------
;ジャンプ強

;---------------------------------------------------------------------------
;ジャンプ強son
 

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
; 投げ技
;===========================================================================
;つかむ動作
 

;--------------------------------------------
;自分側。なめる動作
 

;-----------------------------------------
 

;---------------------------------------------------------------------------
; デバッグ表示中に相手の情報の一部の文字が黄色になったら、それが
; P2StateNoやTargetStateで制御を奪われた状態の証。
;---------------------------------------------------------------------------

;相手側１（なめられるところ
 

;---------------------------------------------------------------------------
;相手側２（ぶっとばされるところ
 
;---------------------------------------------------------------------------
;投げぬけ 自分（y.y氏製作）
[Statedef 830]
type = A
movetype = I
physics = A
anim = Ifelse(var(1)=10000,15040,5210)
velset = -3,-5

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 0, target]
type = Sprpriority
trigger1 = var(49)=10000
value = 1

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 840

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
;---------------------------------------------------------------------------
;投げ抜け　相手
[Statedef 840]
type = A
movetype = I
physics = N
velset = 3,-6

[State 10000]
type = Turn
trigger1 = !time

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1
;===========================================================================
;ONつかむ動作
 
;--------------------------------------------
;自分側。なめる動作
 

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
; 必殺技
;===========================================================================
;ズームパンチ
 
 

;------------------------------
;ズームパンチｽﾀﾝﾄﾞon
 
;-----------------------------------------
 
;===========================================================================
;OFFガーキャン
 
;------------------------------
;ONガーキャン
 
;---------------------------------------------------------------------------
;ワープ
 
;------------------------------
[Statedef 1101];身代わり判定用ガラス
type    = S
movetype= I
physics = N  ;キャラの物理状態
velset = 0,0
anim = ifelse(Facing = 1,1101,1102)
ctrl = 0
sprpriority = -1

[State 301,けす]
type = destroyself
trigger1 = animTime = 0    ;普通に消えるときの条件。必須

;------------------------------
 

;------------------------------
 

;---------------------------------------------------------------------------
;あえてだ！
 
;----------------------------------
;サーチャーhelper
 
;----------------------------------
;サーチャーBhelper
[Statedef 1251]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 1250
sprpriority = 2

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 52, 1]
type = Turn
triggerall = !time
trigger1 = P2Dist X < 0

[State 1100, ステート変更]
type = Veladd
trigger1 = 1
x = 0.24

[State -2];影消す
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 301,けす]
type = destroyself
trigger1 = P2Dist X = [-30,30]
trigger2 = pos x <= -240 || pos x >= 240
;---------------------------------------------------------------------------
;あえてだ！中段
 
;--------------------
;あえてだ！ｽﾀﾝﾄﾞon
 

;--------------------
;あえてだ！中段ｽﾀﾝﾄﾞon
 
;-------------------------------------
 
;-------------------------------------
 
;---------------------------------------------------------------------------
 

;----------------------------------
;Soff 打ち上げてアリアリ。最初のｱｯﾊﾟｰ。ﾍﾙﾊﾟｰ
 
;---------------------------------------------------------------------------
;Sonうちあげｱﾘｱﾘ。最初のｱｯﾊﾟｰ。
 

;-------------------------------------------
 

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
 
;---------------------------------------------------------------------------
  
;Soff ジッパー。ﾍﾙﾊﾟｰ
 

;------------------------------------------------
[Statedef 1402];ﾋｯﾄなら地面ジッパーアニメ継続表示。ﾍﾙﾊﾟｰのﾍﾙﾊﾟｰ
type    = S
movetype= A
physics = S
anim = helper(3),Var(8)
poweradd = 60
sprpriority = 2
ctrl = 0

[State -2];影消す
type = AssertSpecial
trigger1 = 1          ;このｽﾃｰﾄ中ずっと
flag = noshadow       ;自分の影を非表示にします
ignorehitpause = 1

[State 301,けす]
type = destroyself
trigger1 = animTime = 0    ;普通に消えるときの条件。必須
trigger2 = root,MoveType = H  ;rootのほうがいい？
trigger2 = root,stateno != [0,155];立ち〜ガード以外。
ignorehitpause = 1 ;ﾋｯﾄ硬直無視

;------------------------------------------------
;地面ジッパーからp1stateでここにきて、explodでまた地面ジッパー出す
 
;------------------------------------------------
 
;---------------------------------------------------------------------------
;閉じろジッパー fwd
 
;----------------------------------
;閉じたジッパーhelper
 
;----------------------------------
;閉じたジッパー　壁
 
;----------------------------------
;閉じたジッパー　天井
 
 
;---------------------------------------------------------------------------
;閉じろジッパー 終了動作
[Statedef 1530]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1530
ctrl = 0
sprpriority = 2

[State 810, Velocity]
type = VelSet
trigger1 = prevstateno = 1500
trigger1 = !time
x = 3

[State 810, Velocity]
type = VelSet
trigger1 = prevstateno = 1510
trigger1 = !time
x = -3

[State 1100, ステート変更]
type = ChangeState
trigger1 = !animTime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;壁面ジッパーワープ
 
;------------------------------
 
;---------------------------------------------------------------------------
;天井ジッパーワープ
 
;------------------------------
 
;------------------------------------------------------------------------------
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
; 超必殺技
;---------------------------------------------------------------------------
;スタンドoff、超アリアリの、はああああああ
 

;---------------------------------
 
;---------------------------------------------------------------------------
;ラッシュ腕ヘルパーUp
[Statedef 3010]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3010
sprpriority = 0

[State 10000]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = parent,stateno != 13001 && parent,stateno != 3001
trigger2 = parent,stateno = 13001 && parent,animelem = 34
trigger3 = parent,stateno = 3001 && parent,animelem = 36
trigger4 = parent,movetype = H
;---------------------------------------------------------------------------
;ラッシュ腕ヘルパーDown
[Statedef 3011]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3011
sprpriority = 4

[State 10000]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = parent,stateno != 13001 && parent,stateno != 3001
trigger2 = parent,stateno = 13001 && parent,animelem = 34
trigger3 = parent,stateno = 3001 && parent,animelem = 36
trigger4 = parent,movetype = H
;---------------------------------------------------------------------------
;終了 (スタンド)
[Statedef 3002]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3101
sprpriority = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = (time = [8,20]) && !(time%2)
flag = invisible

[State 0, scale]
type = angledraw
trigger1 = time > 10
scale = (const(size.xscale)-(.08*(time-10))),(const(size.yscale)+(.06*(time-10)))

[State 191, 3]
type = PlaySnd
trigger1 = time = 10
value = 3,12

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;覚悟はいいか？
 
;---------------------------------------------------------------------------
;俺は出来てる…？
 
;---------------------------------
[Statedef 3210];SF
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3210
ctrl = 0
sprpriority = 0

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0

[State 3000, 始末させてもらうぞ！]
type = null;PlaySnd
trigger1 = AnimElem = 3
value = 10, 5
channel = 0   ;チャンネル0は、ボイス再生専用

[State 3000,ジッパー出すよ]
type = helper
trigger1 = AnimElem = 3
helpertype = normal
name = "zipper"
pos = 70,0
postype = p1
stateno = 3220
ownpal = 1
id = 3220

[State 301,]
type = PlayerPush;プレイヤーのぶつかり判定の有無を指定します
trigger1 = 1
value = 0

[State -2];影消す
type = AssertSpecial
trigger1 = 1          ;このｽﾃｰﾄ中ずっと
flag = noshadow       ;自分の影を非表示にします
ignorehitpause = 1

[State 301,けす]
type = null;changestate
trigger1 = animTime = 0    ;普通に消えるときの条件。必須
value = 3002

[State 0];本体が攻撃受けてスタンド消滅
type = null;ChangeState
trigger1 = root,movetype = H
trigger1 = root,stateno != [0,155];立ち〜ガード以外。
value = 16500

[State 0];ｽﾀﾝﾄﾞが攻撃受けてスタンド消滅
type = null;HitOverride     ;targetStateでｽﾃｰﾄ奪われてたら負ける。困る。笑
trigger1 = 1
attr = SCA,AA,AP,AT ;ALLｱﾀｯｸ、ﾌﾟﾛｼﾞｪｸ、投げ
;attr = SCA, NA, SA, HA, NP, SP, HP
;S立ち、C屈み、A空中。
;NSHAﾅﾁｭｽｰﾊﾟｰﾊｲﾊﾟｰALL、ATP攻撃投げ飛び道具
slot = 1
stateno = 16501
time = 1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype= H
;---------------------------------
[Statedef 3220];ジッパー
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3220
ctrl = 0
sprpriority = 0

[State 3000, 開閉音]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10, 17

[State 1000, 5]
type = explod
trigger1 = time = [11,51]
anim = 3221
id = 3221
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime = 1
scale = 1,1
pausemovetime = 0

[State 301,]
type = PlayerPush;プレイヤーのぶつかり判定の有無を指定します
trigger1 = 1
value = 0

[State -2];影消す
type = AssertSpecial
trigger1 = 1          ;このｽﾃｰﾄ中ずっと
flag = noshadow       ;自分の影を非表示にします
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
;---------------------------------
 
;------------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;-------------------------------------------------------------------------------------
 


;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;超必殺2つ目。
;超打ち上げの、はああああああ
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem =  1
anim = s20010    ;超必エフェクト。しゅぴーーん
                 ;sを付ければ自分のairファイルが使える。
pos = 30, -65    ;超必エフェクトの座標
sound = s3, 10   ;超必発動サウンド。ぴゅいーん
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
poweradd = -1000 ;パワーゲージを減らします
time = 50       ;ポーズする時間（フレーム）
;movetime = 0    ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
;darken = 1      ;ポーズ中画面を暗転するか否か（0=しない・1=する）
                 ;暗転する色は「ownpal」の有無により「Explod」や「ヘルパー」にも影響するので注意。

[State 3000, かみなり的な背景]
type = Explod
trigger1 = AnimElem =  1
;trigger1 = time = 0
id = 20030
pos = 0,0
postype = left
anim = 20016
ownpal = 1
sprpriority = -4
bindtime = -1
supermovetime = 99;superpause無視時間 (int)
scale = 1,1.1

[state 3000,カットイン]
type = helper
trigger1 = AnimElem = 1
helpertype = normal
stateno = 20017
id = 20017
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 99
pausemovetime = 99

;[State 3000, 相手の特定の攻撃属性無効]
;type = NotHitBy
;trigger1 = AnimElem = 2
;value = , NA, SA, AT
;time = 11

[State 3000, 始末させてもらうぞ！]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10, 21
channel = 0   ;チャンネル0は、ボイス再生専用

[State 300,SF出すよ]
type = helper
trigger1 = AnimElem = 2
helpertype = normal
name = "sf"
pos = 0,0
postype = p1
stateno = 3101
ownpal = 1
id = 2

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
[Statedef 3101];SFの超打ち上げの動き
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 3000, ヒット定義];ﾘﾊﾞｰｻﾙﾃﾞﾌされたら厄介なので飛び道具にした。
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
trigger4 = AnimElem = 9
trigger5 = AnimElem = 11

attr = S, HP ;立ち超必殺技とびどうぐ（Standing, Hyper Plojecなんたら）
animtype  = medium
damage    = 10,4
getpower  = 0 ;攻撃を当てた時にパワーゲージを増やさないようにしてる
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = s20004
guard.sparkno = s20005
sparkxy = -10,-105
hitsound = s2,2
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = 0,-2;-1.8  ;相手が攻撃を受けて移動する速度。yに負数を指定すると宙に浮きます
air.velocity = 0,-1.5;-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5        ;地上コーナープッシュ速度 

[State 3000, 上と同じ];ﾋｯﾄｽﾊﾟｰｸずらすためです。
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
trigger4 = AnimElem = 8
trigger5 = AnimElem = 10
trigger6 = AnimElem = 12
trigger7 = AnimElem = 14
trigger8 = AnimElem = 16
trigger9 = AnimElem = 18
attr = S, HP
animtype  = hard
damage    = 10,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = s20004
guard.sparkno = s20005
sparkxy = -15,-85
hitsound = s2,2
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = 0,-2;-1.8
air.velocity = 0,-1.5;-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5 

[State 3000, 上と同じ];ﾋｯﾄｽﾊﾟｰｸずらすためです。
type = HitDef
trigger1 = AnimElem = 13
trigger2 = AnimElem = 15
trigger3 = AnimElem = 17
trigger4 = AnimElem = 19
attr = S, HP
animtype  = hard
damage    = 10,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = s20004
guard.sparkno = s20005
sparkxy = -10,-125
hitsound = s2,2
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = 0,-2;-1.8
air.velocity = 0,-1.5;-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5 

[State 3000, ヒット定義];フィニッシュ
type = HitDef
trigger1 = AnimElem = 22
attr = S, HP
animtype  = diagup    ;斜め吹き飛びです
damage    = 15,4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 15,15
sparkno = s20004
guard.sparkno = s20005
sparkxy = -15,-105
hitsound = s2,5
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -5, -4
guard.velocity = -12
air.velocity = -5,-4
airguard.velocity = -3,-3
fall.animtype = Hard
fall = 1           ;ダウンする
fall.recover = 0   ;0にすると相手が落下状態でも受身（x+y）をとれなくなります

[State 301, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
value = 10, 3     ;ありあり
channel = 0   ;チャンネル0は、ボイス再生専用
volume = 500

[State 301,]
type = PlayerPush;プレイヤーのぶつかり判定の有無を指定します
trigger1 = 1
value = 1

[State -2];影消す
type = AssertSpecial
trigger1 = 1          ;このｽﾃｰﾄ中ずっと
flag = noshadow       ;自分の影を非表示にします
ignorehitpause = 1

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1
;persistent = 0 ;1回しかステコンが実行されません

[State 0];本体が攻撃受けてスタンド消滅
type = ChangeState
trigger1 = root,movetype = H
value = 16501

[State 301,けす]
type = destroyself
trigger1 = animTime = 0    ;普通に消えるときの条件。必須
;trigger2 = Parent,MoveType = H  ;rootのほうがいい？
;trigger3 = helper,movetype = H 
ignorehitpause = 1

[state 301, koしたとき];ﾍﾙﾊﾟｰのｽﾃｰﾄなので、これで親のvarを変える。
type = parentvarset    ;ｱﾘｰｳﾞｪﾃﾞﾙﾁと言わせる。
trigger1 = Winko
var(9) = 1

[State 301,喰らった時けす]
type = HitOverride     ;targetStateでｽﾃｰﾄ奪われてたら負ける。困る。笑
trigger1 = 1
attr = SCA,AA,AP,AT ;ALLｱﾀｯｸ、ﾌﾟﾛｼﾞｪｸ、投げ
;attr = SCA, NA, SA, HA, NP, SP, HP
;S立ち、C屈み、A空中。
;NSHAﾅﾁｭｽｰﾊﾟｰﾊｲﾊﾟｰALL、ATP攻撃投げ飛び道具
slot = 1
stateno = 16500
time = 1

[State 301,なげは喰らわない]
type = NotHitBy
trigger1 = 1   ;ｽﾃｰﾄ中ずっと連打で発動。↓だからtimeは１でもよいのか。。？
value = ,AT    ;ALL投げ
time = 1

;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
[Statedef 13100];ｽﾀﾝﾄﾞon、超打ち上げのはああああああ
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3002
ctrl = 0
sprpriority = 2

[State 1010,];ﾌﾞﾁｬのｱﾆﾒが暗転してしまってたので、とりあえず
type = Explod
trigger1 = time =  0
postype = p1
pos = -10,0
anim = 3000
sprpriority = 4

[State 1010,消す]
type = RemoveExplod
trigger1 = AnimTime = 0

[State 3000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem =  1
anim = s20010    ;超必エフェクト。しゅぴーーん
                 ;sを付ければ自分のairファイルが使える。
pos = 20, -65    ;超必エフェクトの座標
sound = s3, 10   ;超必発動サウンド。ぴゅいーん
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
poweradd = -1000 ;パワーゲージを減らします
time = 50;78       ;ポーズする時間（フレーム）
;movetime = 0    ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
;darken = 1      ;ポーズ中画面を暗転するか否か（0=しない・1=する）
                 ;暗転する色は「ownpal」の有無により「Explod」や「ヘルパー」にも影響するので注意。

[State 3000, かみなり的な背景]
type = Explod
trigger1 = AnimElem =  1
;trigger1 = time = 0
id = 20030
pos = 0,0
postype = left
anim = 20016
ownpal = 1
sprpriority = -4
bindtime = -1
supermovetime = 99;superpause無視時間 (int)
scale = 1,1.1

[state 3000,カットイン]
type = helper
trigger1 = AnimElem = 1
helpertype = normal
stateno = 20017
id = 20017
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 99
pausemovetime = 99

[State 3000, 覚悟はいいか]
type = PlaySnd
trigger1 = time =  0
value = 10, 0
channel = 0   ;チャンネル0は、ボイス再生専用

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 13101
ctrl = 1
;--------------------------
[Statedef 13101];ｽﾀﾝﾄﾞon、超打ち上げ
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 3

[State 10000,攻撃のときはSFを上に表示したい]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 3000, ヒット定義];ﾘﾊﾞｰｻﾙﾃﾞﾌされたら厄介なので飛び道具にした。
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
trigger4 = AnimElem = 9
trigger5 = AnimElem = 11

attr = S, HP ;立ち超必殺技とびどうぐ（Standing, Hyper Plojecなんたら）
animtype  = medium
damage    = 10,4
getpower  = 0 ;攻撃を当てた時にパワーゲージを増やさないようにしてる
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = s20004
guard.sparkno = s20005
sparkxy = -10,-105
hitsound = s2,2
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = 0,-2;-1.8  ;相手が攻撃を受けて移動する速度。yに負数を指定すると宙に浮きます
air.velocity = 0,-1.5;-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5        ;地上コーナープッシュ速度 

[State 3000, 上と同じ];ﾋｯﾄｽﾊﾟｰｸずらすためです。
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
trigger4 = AnimElem = 8
trigger5 = AnimElem = 10
trigger6 = AnimElem = 12
trigger7 = AnimElem = 14
trigger8 = AnimElem = 16
trigger9 = AnimElem = 18
attr = S, HP
animtype  = hard
damage    = 10,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = s20004
guard.sparkno = s20005
sparkxy = -15,-85
hitsound = s2,2
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = 0,-2;-1.8
air.velocity = 0,-1.5;-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5 

[State 3000, 上と同じ];ﾋｯﾄｽﾊﾟｰｸずらすためです。
type = HitDef
trigger1 = AnimElem = 13
trigger2 = AnimElem = 15
trigger3 = AnimElem = 17
trigger4 = AnimElem = 19
attr = S, HP
animtype  = hard
damage    = 10,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = s20004
guard.sparkno = s20005
sparkxy = -10,-125
hitsound = s2,2
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = 0,-2;-1.8
air.velocity = 0,-1.5;-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5 

[State 3000, ヒット定義];フィニッシュ
type = HitDef
trigger1 = AnimElem = 22
attr = S, HP
animtype  = diagup    ;斜め吹き飛びです
damage    = 15,4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 15,15
sparkno = s20004
guard.sparkno = s20005
sparkxy = -15,-105
hitsound = s2,5
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -5, -4
guard.velocity = -12
air.velocity = -5,-4
airguard.velocity = -3,-3
fall.animtype = Hard
fall = 1           ;ダウンする
fall.recover = 0   ;0にすると相手が落下状態でも受身（x+y）をとれなくなります

[State 301, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
value = 10, 3     ;ありあり
channel = 0   ;チャンネル0は、ボイス再生専用
volume = 500

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1
;persistent = 0 ;1回しかステコンが実行されません

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[state 301, koしたとき]
type = varset
trigger1 = Winko
var(9) = 1

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;スタンド発現（立ち）
[Statedef 16000]
type = S
physics = S
ctrl = 1
anim = 17000
velset = 0,0

[State 0];これで絵がSFになり、-2がHelper貼りつくﾌﾞﾁｬﾗﾃｨを出す
type = varset
trigger1 = time = 0
var(1) = 10000

[State 810,]
type = helper
trigger1 = time = 0
helpertype = normal
name = "stop"
pos = 0,0
postype = p1
stateno = 5656
id = 5656
ownpal = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = 0,0
anim = 9998
sprpriority = 2
ownpal = 1
scale = 0.95, 1
removetime = 1

[State 10820, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 10820, スティッキーフィンガーズ！]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,20
channel = 0       ;チャンネル0は、ボイス再生専用

[State 10820, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;スタンド発現（しゃがみ）
[Statedef 16001]
type = C
physics = S
ctrl = 1
anim = 10011
velset = 0,0

[State 0];これで絵がSFになり、-2がHelper貼りつくﾌﾞﾁｬﾗﾃｨを出す
type = varset
trigger1 = time = 0
var(1) = 10000

[State 810,]
type = helper
trigger1 = time = 0
helpertype = normal
name = "stop"
pos = 0,0
postype = p1
stateno = 5656
id = 5656
ownpal = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019;875
sprpriority = 4
ownpal = 1

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = 0,0
anim = 9997
sprpriority = 2
ownpal = 1
scale = 0.95, 1
removetime = 1

[State 10820, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 10820, スティッキーフィンガーズ！]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,20
channel = 0       ;チャンネル0は、ボイス再生専用

[State 10820, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------------------------
;スタンド発現（空中）
[Statedef 16002]
type     = A;A（空中）、S（立ち状態）、C（屈み状態）、L（倒れている
physics  = A;キャラの物理状態SNA
juggle   = 0
ctrl     = 0
anim     = 10043;10122
poweradd = 0
;velset = 0,0 ;これしたら速度が0,0になる。ぴたっと止まってしまう。

[State 0];これで絵がSFになり、-2がHelper貼りつくﾌﾞﾁｬﾗﾃｨを出す
type = varset
trigger1 = time = 0
var(1) = 10000

[State 810,]
type = helper
trigger1 = time = 0
helpertype = normal
name = "stop"
pos = 0,0
postype = p1
stateno = 5656
id = 5656
ownpal = 1

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = 0,0
anim = 9996
sprpriority = 2
ownpal = 1
scale = 0.95, 1
removetime = 1

[State 10822, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,11

[State 10822, スティッキーフィンガーズ！]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,20
channel = 0       ;チャンネル0は、ボイス再生専用

[State 10822, 0]
type = CtrlSet
trigger1 = time >= 5
value = 1
;---------------------------------------------------------------------------
;スタンド解除不可時間
[Statedef 5656]
type = S
physics = S
ctrl = 1
anim = 99999
velset = 0,0

[State 301,けす]
type = destroyself
trigger1 = Time = 41      
;---------------------------------------------------------------------------
;スタンド解除（立ち）
[Statedef 16003]
type = S
physics = S
ctrl = 1
anim = 0;ifelse(statetype = S,830,831)
velset = 0,0

[State 10822, ばひゅーん]
type = PlaySnd
trigger1 = time = 0
value = 3,12

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = 0

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------
;スタンド解除（しゃがみ）
[Statedef 16004]
type = C
physics = S
ctrl = 1
anim = 11;ifelse(statetype = S,830,831)
velset = 0,0

[State 10822, ばひゅーん]
type = PlaySnd
trigger1 = time = 0
value = 3,12

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = 0

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-----------------------------
;スタンド解除（空中）
[Statedef 16005]
type    = A
physics = A
ctrl    = 0
anim = 41;132;ifelse(statetype = S,830,831)
;velset = 0,0
juggle   = 0
poweradd = 0

[State 10822, ばひゅーん]
type = PlaySnd
trigger1 = time = 0
value = 3,12

[State 8500, 1]
type = varset
trigger1 = time = 0
var(1) = 0

[State 1002, 0]
type = CtrlSet
trigger1 = time >= 1
value = 1

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000〜5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
;---------------------------------------------------------------------------
[Statedef -2]
;-----------------------------------

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(53) = 1

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
fvar(10) = 1 

[State -2, Dampener itself]
type = Attackmulset
trigger1 = 1
value = fvar(10)
ignorehitpause = 1

[State -1, DTCB]
type = displaytoclipboard
trigger1 = 1
text = "Damage Dampener: %f"
params = fvar(10)
ignorehitpause = 1

[State -2, P2 Facing]
type= targetfacing
trigger1= movecontact=1 && numtarget=1
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause= 1

[State -3, Prevent Crossup]
type = width
trigger1 = movetype != H
edge = 8, 0
ignorehitpause = 1

[State -3, Prevent Undergound Juggles by POTS]
type= targetbind
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID)
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y)
ignorehitpause= 1

[State -3, Corner Push Reset]
type= varset
trigger1= fvar(5)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
trigger2 = numhelper(3)
trigger2 = helper(3), stateno = 1403
trigger3 = stateno = 13001
trigger4 = stateno = 700
trigger5 = numhelper(2) 
trigger5 = time = 0
trigger5 = helper(2), stateno = [3000,4100] 
fvar(5)= 0

[State -3, Corner Push Initial Vel]
type= varset
trigger1= movecontact=1 && numtarget
fvar(5) = (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push Apply]
type= posadd
triggerall = fvar(5)
triggerall = (statetype = S || statetype = C) && numtarget
triggerall = !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall = (target, statetype = S || target, statetype = C) && !(target, gethitvar(yvel)) && !(target, hitfall)
trigger1 = target, frontedgebodydist <= abs(target, vel x)
trigger1 = (target, gethitvar(xvel) * target, facing) > 0
trigger2 = target, backedgebodydist <= abs(target, vel x)
trigger2 = (target, gethitvar(xvel) * target, facing) < 0
x = ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(5)

[State -3, Corner Push Friction]
type= varset
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(5) = fvar(5)*0.85

;---------------------------------------------------------------------------
[State -2];ズームパンチ判定リセット
type = varset
triggerall = NumHelper(2) = 0 
;trigger1 = stateno = 0 || stateno = 11 || movetype = H
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,statetype = L
var(31) = 0

;=============================
;自分でｽﾀﾝﾄﾞ解除できなかった場合用

[State -2]
type = varset
var(1) = 0
trigger1 = var(1) = 10000
trigger1 = alive = 0
trigger1 = animTime = 0

trigger2 = var(1) = 10000 && movetype = H
trigger2 = stateno != 0
trigger2 = stateno != [10,12]
trigger2 = stateno != [20,21]
trigger2 = stateno != 40
trigger2 = stateno != 120
trigger2 = stateno != [130,132]
trigger2 = stateno != 140
trigger2 = stateno != [150,155]
trigger2 = stateno != [5000,5001]
trigger2 = stateno != [5010,5011]
trigger2 = stateno != 5020
trigger2 = stateno != 5030
trigger2 = stateno != 5035
trigger2 = stateno != 5040
trigger2 = stateno != 5050
trigger2 = stateno != [5070,5071]
trigger2 = stateno != [5080,5081]
trigger2 = stateno != [5100,5101]
trigger2 = stateno != 5110
trigger2 = stateno != 5120
trigger2 = stateno != 5150
trigger2 = stateno != [5200,5201]
trigger2 = stateno != 5210
trigger2 = stateno != [15000,15001]
trigger2 = stateno != [15010,15011]
trigger2 = stateno != 15020
trigger2 = stateno != 15030
trigger2 = stateno != 15035
trigger2 = stateno != 15040
trigger2 = stateno != 15050
trigger2 = stateno != [15070,15071]
trigger2 = stateno != [15080,15081]
trigger2 = stateno != [15100,15101]
trigger2 = stateno != 15110
trigger2 = stateno != 15120
trigger2 = stateno != 15150
trigger2 = stateno != [15200,15201]
trigger2 = stateno != 15210
trigger2 = stateno != [14000,14005]
trigger2 = movetype = H && anim != [15000,15210]
;=============================
;ｽﾀﾝﾄﾞonの時ﾌﾞﾁｬﾗﾃｨを表示させます
;ｽﾀﾝﾄﾞ発現ｽﾃｰﾄに1つずつ書いても多分問題ないがとりあえず
[State -2]
type = Helper
trigger1 = Var(1) = 10000  ;ｽﾀﾝﾄﾞonかつ
trigger1 = NumHelper(1) = 0 ;このﾍﾙﾊﾟｰが出てない時
helpertype = normal
stateno = 10000
id = 1
pos = 0,0
postype = p1
keyctrl = 0
;pausemovetime = 999999
supermovetime = 99999
;↑だと時止め中SFとブチャが離れないが、ブチャが呼吸してしまうｗ
;=============================
;スタンドが相手にめりこまないようにする
[State -2];CLSN1よりこっちのが幅が大きいと変な挙動をするので注意！！
type = Width
trigger1 = Var(1) = 10000
trigger1 = 1
value = 10,0
;=============================
[State -2,];ガード不可。
type = AssertSpecial
trigger1 = NumHelper(2) = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
;=============================
[State -2];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = var(2) = 1
trigger1 = time >= 40
var(2) = 0
;---------------------------------------------------------------------------
;ポーズ認識用
[state -2, var]
type = varset
trigger1 = 1
var(39) = 0
;=============================
;ガードのときｽﾀﾝﾄﾞの手を表示する
[State -2]
type = Explod
trigger1 = Anim = [130,132];ガード受付。
;ｽﾀﾝﾄﾞﾓｰﾄﾞの時は10130のｱﾆﾒなので。
trigger1 = numhelper(2) = 0;ｱﾘｱﾘとかでSFが出てないとき
anim = 133
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
;（しゃがみなら30、そうでなければ0）を足す。
sprpriority = 2
ownpal = 1

[State -2]
type = Explod
trigger1 = Anim = [150,155];ガード硬直
trigger1 = numhelper(2) = 0;ｱﾘｱﾘとかでSFが出てないとき
anim = 134
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
sprpriority = 2
ownpal = 1

;=============================
[State -2];影消す
type = AssertSpecial
trigger1 = var(1) = 10000;Sonのとき。はｽﾃｨｯｷｰﾌｨﾝｶﾞｰｽﾞだから
flag = noshadow           ;自分の影を非表示にします
ignorehitpause = 1

;=============================
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
[State -2]
type = ChangeState
trigger1 = var(11) != 0
trigger1 = stateno != [16502,16504]
value = ifelse(StateType=S,16502,(ifelse(StateType=C,16503,16504)))
ctrl = 0

;=============================
;KO時、ぶつかり判定を消す
[State -2]
type = PlayerPush
trigger1 = 1
trigger1 = RoundState = 3;Pre-over - 決着がついた瞬間
value = 0;で判定なし

;=============================
;敗北
[State -2]
type = Helper
trigger1 = TeamMode = single;シングル
trigger1 = RoundState = 3 && LoseKO = 1 && NumHelper(20054) = 0
;RoundState	3: Pre-over - 決着がついた瞬間
;LoseKO		そのラウンドで負けた場合、1を返します
ID = 20054
pos = 0,0
stateno = 20054

;KO勝利時集中線と音
[State -2]
type = Helper
trigger1 = TeamMode = single;シングル
trigger1 = RoundState = 3 && WinKO && NumHelper(20053) = 0
ID = 20053
pos = 0,0
stateno = 20053
ignorehitpause = 1;とるすと、ヒット停止時間を無視

[State -2]
type = AssertSpecial
trigger1 = winko   ;勝ったとき
flag = nobardisplay;ゲージ類を非表示にします。
ignorehitpause = 1

;ﾌﾞﾁｬﾗﾃｨ WIN
[State -2, 0]
type = helper
triggerall = !Numhelper(20050)
triggerall = stateno = 180    ;勝利ポーズ分岐
trigger1 = Teamside=1 || Teamside=2  ; || は、もしくは
id = 20050
stateno = 20050
pos = ifelse(Teamside=1,-110,290),-130
postype = left
ownpal = 1
sprpriority = 10
pausemovetime = 9999
size.xscale = 0.9
size.yscale = 0.9

;to be continued
[State -2, 0]
type = helper
trigger1 = !NumHelper(20051)
trigger1 = stateno = 180            ;勝利ポーズ分岐
trigger1 = Teamside=1 || Teamside=2 ; || は、もしくは
trigger1 = matchover                ;ﾗｳﾝﾄﾞ取って、試合が終わったとき。
stateno = 20051
id = 20051
pos = ifelse(Teamside=1,290,-150),20
postype = left
ownpal = 1
ontop = 1
pausemovetime = 9999

;=============================

[State -2,];ﾊﾞｸﾞったとき用。ってか-2でDestroySelf使えるのか？
type = DestroySelf
trigger1 = NumHelper(2) = 1;飛び道具的なｽﾃｨｯｷｰﾌｨﾝｶﾞｰｽﾞが出てるとき
trigger1 = helper(2),stateno = 0;なぜかそいつが立ちｽﾃｰﾄのとき

;=============================

;空中ジャンプ回数リセット
[State -2]
type = VarSet
trigger1 = statetype != A
;trigger1 = var(4) = 0
var(4) = 1

;=============================

;削り無効
[state -2, life]
type = LifeAdd
triggerall = var(1) ;ｽﾀﾝﾄﾞon
triggerall = var(10) - Life > 0
trigger1 = stateno = 120      ;ガード開始＆準備
trigger2 = stateno = [130,132];ガード受付
trigger3 = stateno = 140      ;ガード終了
trigger4 = stateno = [150,155];ガード硬直
value = var(10)-Life
;微妙に数ﾌﾚｰﾑの差があるのか、(ｶﾞｰﾄﾞ前の体力)-(ｶﾞｰﾄﾞ後)になる。
;これを回復させることで実質、削り無効となる。
ignorehitpause = 1

[State -2,]
type = VarSet
trigger1 = 1
var(10) = life ;プレイヤーの現体力を返します。
ignorehitpause = 1

;=============================

;アドバンシングガード
[State -2]
type = Helper
triggerall = numhelper(20011) = 0
triggerall = stateno = 150 || stateno = 151 || stateno = 152 || stateno = 153
trigger1 = command = "a"
trigger2 = Var(59) = 1;AI用
trigger2 = Random = [120,150]
stateno = 20011
id = 20011
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16   ;前ぶつかり判定
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500       ;縦ぶつかり判定
persistent = 0
ignorehitpause = 1

[State -2]
type = Explod
trigger1 = numhelper(20011) = 1
trigger1 = numexplod(20011) = 0
anim = 20011
id = 20011
postype = p1
pos = 30,-70
random = 0,20
sprpriority = 5
bindtime = -1
ownpal = 0
removeongethit = 1

;AI用アドバンシングガードリセット
[State -2]
type = VarSet
trigger1 = ctrl
trigger1 = var(50) != 0
var(50) = 0
;=============================
[State -2, Explod消去]
type = RemoveExplod
trigger1 = stateno != [1500,1525]
trigger2 = movetype = H
ignorehitpause = 1 ;ﾋｯﾄ硬直無視
ID = 1550

[State -2, Explod消去]
type = RemoveExplod
trigger1 = stateno != [1500,1525]
trigger2 = movetype = H
ignorehitpause = 1 ;ﾋｯﾄ硬直無視
ID = 1560

;---------------------------------------------------------------------------
;コンボ補正
[State -2, 補正リセット]
type=varset
trigger1=!numtarget
trigger1=!numhelper(2)
var(40)=0

[State -2, ヒット数加算]
type=varadd
triggerall=numtarget
triggerall=enemynear,movetype=h
triggerall=enemynear,gethitvar(hitcount)>var(40)
triggerall=stateno != 11301
triggerall=stateno != 13001
triggerall=stateno != 3201
trigger1=movehit
trigger2=projhittime(0)=0
;ヘルパー用
trigger3=numhelper(1001)
trigger3=helper(1001),movehit=1+(movetype!=a)
var(40)=1


;---------------------------------------------------------------------------
;Life補正相手判別 ※随時足していきます
[state -2, var]
type = varset
triggerall = !var(35)
trigger1 = enemy,authorname = "y.y"
trigger1 = enemy,name = "jotaro" || enemy,name = "Hol horse" || enemy,name = "Hol horse & Boingo"
trigger2 = enemy,authorname = "ahuron"
trigger2 = enemy,name = "THOUTHER"
trigger3 = enemy,authorname = "muteki"
trigger4 = enemy,authorname = "Drowin hokuto"
trigger5 = enemy,authorname = "Nachel"
trigger5 = enemy,name = "Reimu_Hakurei" || enemy,name = "Remilia_Scarlet"
trigger6 = enemy,authorname = "Shiroto"
trigger7 = enemy,authorname = "kayui uma"
var(35) = 1
  
 
;=============================
;悪咲氏dio惨殺処刑用
;ｽﾃｰﾄ奪っているのにｱﾆﾒが指定されていないのでSFの絵のままになるので対応
;どんなｱﾆﾒを指定されようと、やれれｽﾌﾟﾗｲﾄ5000番台はﾌﾞﾁｬﾗﾃｨ
;普通はｱﾆﾒを指定されるので、投げられた瞬間にSFがﾌﾞﾁｬになるので問題ない。
[State -2]
type = ChangeAnim
trigger1 = p2name = "dio" || p4name = "dio"
trigger1 = movetype = H && stateno = [3605,3609];惨殺処刑
trigger1 = anim = [10000,15210];ｽﾀﾝﾄﾞの絵をﾌﾞﾁｬの絵に！
value = 0

;=============================
;本体被ダメ時、相手にｽﾃｰﾄ返す用。たぶん機能してるはず
[State -2]
type = TargetState
TriggerAll = Numhelper(2)
trigger1 = movetype = H
trigger1 = helper(2),stateno = [1401,1403]
value = 1405

;=============================

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;===========================================================================
; 準常時監視ステート（‐３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; ‐１や‐２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------

[Statedef -3]

[State -3];喰らいボイス用。イントロ用も兼ねる
type = VarRandom
trigger1 = RoundState = [0,1]
trigger2 = stateno = [5000,5999]
v = 3
range = 0,8

[State -3];うっ
type = PlaySnd
triggerall = RoundState = 2
triggerall = time = 0
triggerall = alive = 1
triggerall = var(3) = [0,1]
trigger1 = stateno = [5000,5999]
value = 11, 1
channel = 0

[State -3];ううっ
type = PlaySnd
triggerall = RoundState = 2
triggerall = time = 0
triggerall = alive = 1
triggerall = var(3) = 3
trigger1 = stateno = [5000,5999]
value = 11, 2
channel = 0

[State -3];ぬあっ
type = PlaySnd
triggerall = RoundState = 2
triggerall = time = 0
triggerall = alive = 1
triggerall = var(3) = [6,8]
trigger1 = stateno = [5000,5999]
value = 11, 3
channel = 0

[State -3];だめだっ
type = PlaySnd
triggerall = RoundState = 2
triggerall = time = 0
triggerall = alive = 1
trigger1 = life <= 200 && life >= 180
trigger1 = stateno = [5000,5999]
value = 11, 6
channel = 0
persistent=0

;=============================================================================
;	スタンドゲージ
;ゲージの回復は-3でないとまずい。
;投げられた瞬間、-2でvar1=0に。helper10000も消える。ゲージはそのまま。
;ｽﾃｰﾄ返されてからゲージ回復。-2だと投げられ中に回復してしまう
;=============================================================================
;スタンドゲージ本体ヘルパー
[State -3]
type = Helper
trigger1 = !NumHelper(20032)
trigger1 = roundstate = 2
stateno = 20032
id = 20032
pos = 160,255
postype = Back
pausemovetime = 9999999999
sprpriority = -10

;ゲージ量初期化
[State -3]
type = Varset
;trigger1 = fvar(1) != 80 ;80の時も80にしたらいいやんと思った
trigger1 = roundstate = 0 || roundstate = 1
fv = 1
value = 80
;　0: Pre-intro　- 試合前、画面がフェードインしている状態です。
;　1: Intro　- 登場モーション中です。
;「||」は、どちらかの条件が満たされたとき

;スタンドパワー減少させる（食らい）
[State -3]
type = Varadd
trigger1 = stateno != 150 &&  stateno != 152 && stateno != 154
;↑ガーキャンかなぁ？
trigger1 = var(1) = 10000;スタンドモード時
trigger1 = roundstate = 2 ;バトル中
trigger1 = alive          ;生きてる
trigger1 = movetype = H   ;喰らい状態
trigger1 = fvar(1) != 0   ;ゲージが０じゃない
trigger1 = time = 0
trigger1 = hitshakeover = 0;ヒットシェイク中
fv = 1
value = -(gethitvar(damage)/3)
ignorehitpause = 1

;スタンドパワー減少させる←ガーキャンのとき？
[State -3]
type = Varadd
trigger1 = stateno = 150 ||  stateno = 152 || stateno = 154
trigger1 = var(1) = 10000;スタンドモード時
trigger1 = roundstate = 2
trigger1 = alive
trigger1 = fvar(1) != 0
trigger1 = time = 0
trigger1 = hitshakeover = 0
fv = 1
value = -gethitvar(damage)/3
ignorehitpause = 1

;スタンドクラッシュ（地上）
[State -3]
type = ChangeState
trigger1 = var(1) = 10000;スタンドモード時
trigger1 = fvar(1) <= 0   ;ｹﾞｰｼﾞが０以下になった時
trigger1 = statetype != A ;sca
value = 16010
ignorehitpause = 1

;スタンドクラッシュ（空中）
[State -3]
type = ChangeState
trigger1 = var(1) = 10000;スタンドモード時
trigger1 = fvar(1) <= 0
trigger1 = statetype = A
value = 16011
ignorehitpause = 1

;本体モード時、スタンドパワー回復
[State -3, 0]
type = VarAdd
trigger1 = var(1) = 0
trigger1 = fvar(1) < 80
trigger1 = stateno != 16010;ｽﾀﾝﾄﾞｸﾗｯｼｭの時は回復しない
fv = 1
value = 0.51

;最大値固定
[State -3, 0]
type = VarSet
trigger1 = fvar(1) > 80
fv = 1
value = 80

;最小値固定
[State -3, 0]
type = VarSet
trigger1 = fvar(1) < 0
fv = 1
value = 0

;ｽﾀﾝﾄﾞｸﾗｯｼｭ後、ゲージが回復すればスタンド発現可にする。リセット
[State -3, 0]
type = varset
trigger1 = fvar(1) >= 80
var(7) = 0





[State -3];AIをセットします
Type=VarSet
TriggerAll=var(59) < 1
Trigger1=Command="AI0"||Command="AI1"||Command="AI2"||Command="AI3"||Command="AI4"
Trigger2=Command="AI5"||Command="AI6"||Command="AI7"||Command="AI8"||Command="AI9"
Trigger3=Command="AI10"||Command="AI11"||Command="AI12"||Command="AI13"||Command="AI14"
Trigger4=Command="AI15"||Command="AI16"||Command="AI17"||Command="AI18"||Command="AI19"
Trigger5=Command="AI20"||Command="AI21"||Command="AI22"||Command="AI23"||Command="AI24"
Trigger6=Command="AI25"||Command="AI26"||Command="AI27"||Command="AI28"||Command="AI29"
Trigger7=Command="AI30"||Command="AI31"||Command="AI32"||Command="AI33"||Command="AI34"
Trigger8=Command="AI35"||Command="AI36"||Command="AI37"||Command="AI38"||Command="AI39"
Trigger9=Command="AI40"||Command="AI41"||Command="AI42"||Command="AI43"||Command="AI44"
Trigger10=Command="AI45"||Command="AI46"||Command="AI47"||Command="AI48"||Command="AI49"
Trigger11=Command="AI50"

Trigger12=RoundState<2||RoundState=2&&Ctrl
Trigger12=var(59)=0
Trigger12=NumHelper(20000)
Trigger12=Helper(20000),var(59) > 0

;trigger13 = command = "start"

var(59)=1

[State -3,AI_Helper];ヘルパー式AI
Type=Helper
TriggerAll=RoundState<2||(RoundState=2&&Ctrl)
Trigger1=!NumHelper(20000)
Trigger1=Alive
Trigger1=var(59)=0
HelperType=Normal
StateNo=20000
ID=20000
KeyCtrl=1
PauseMoveTime=9**8         ;9 ** 8 = 43 046 721
SuperMoveTime=9**8
IgnoreHitPause=1

[State -3]
Type = VarRandom
;TriggerAll = Var(59) = 1
Trigger1 = Time = 1
Trigger2 = Time%60 = 1
Trigger2 = MoveType != I
Trigger3 = Time%60 = 1  ;Time%1 = 0
Trigger3 = MoveType = I ;待機中
v = 58
Range = 0,ifelse(var(59) = 1,99,ifelse(var(59) = 2,200,300));99
IgnoreHitPause = 1

[State -3];コンボ番号をランダムで変える
Type = VarRandom
Trigger1 = Time%1 = 0
Trigger1 = MoveType != A ;attack
v = 51
Range = 1,var(57);5

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●↑↑[StateDef -3 はここまで]↑↑●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
[Statedef 20000];ヘルパー式AI
anim=9999
ctrl=0

[State 10000,プレイヤーと判定するパターン]
type=varset
Trigger1=command="a"&&root,command="a"
Trigger2=command="b"&&root,command="b"
Trigger3=command="c"&&root,command="c"
Trigger4=command="x"&&root,command="x"
Trigger5=command="y"&&root,command="y"
Trigger6=command="z"&&root,command="z"
Trigger7=command="start"&&root,command="start"
Trigger8=command="fwd"&&root,command="fwd"
Trigger9=command="back"&&root,command="back"
Trigger10=command="up"&&root,command="up"
Trigger11=command="down"&&root,command="down"
var(59)=-1

[State 10000,プレイヤーと判定するパターン]
type=parentvarset
Trigger1=command="a"&&root,command="a"
Trigger2=command="b"&&root,command="b"
Trigger3=command="c"&&root,command="c"
Trigger4=command="x"&&root,command="x"
Trigger5=command="y"&&root,command="y"
Trigger6=command="z"&&root,command="z"
Trigger7=command="start"&&root,command="start"
Trigger8=command="fwd"&&root,command="fwd"
Trigger9=command="back"&&root,command="back"
Trigger10=command="up"&&root,command="up"
Trigger11=command="down"&&root,command="down"
var(59)=-1

[State 10000,プレイヤーと判定すると消失]
Type = DestroySelf
TriggerAll=isHelper
Trigger1=root,var(59)!=0 || var(59)=-1
Trigger2=command="a"&&root,command="a"
Trigger3=command="b"&&root,command="b"
Trigger4=command="c"&&root,command="c"
Trigger5=command="x"&&root,command="x"
Trigger6=command="y"&&root,command="y"
Trigger7=command="z"&&root,command="z"
Trigger8=command="start"&&root,command="start"
Trigger9=command="fwd"&&root,command="fwd"
Trigger10=command="back"&&root,command="back"
Trigger11=command="up"&&root,command="up"
Trigger12=command="down"&&root,command="down"

[State 10000,AIﾌﾗｸﾞON]
Type=varset
TriggerAll=var(59)!=-1
Trigger1=root,command="a"
Trigger2=root,command="b"
Trigger3=root,command="c"
Trigger4=root,command="x"
Trigger5=root,command="y"
Trigger6=root,command="z"
Trigger7=root,command="start"
Trigger8=root,command="fwd"&&(roundstate=2&&root,ctrl)
Trigger9=root,command="back"&&(roundstate=2&&root,ctrl)
Trigger10=root,command="up"&&(roundstate=2&&root,ctrl)
Trigger11=root,command="down"&&(roundstate=2&&root,ctrl)
var(59)=1

;--------------------------------------------------------------------------
;スタンドゲージヘルパー
;ﾊﾞﾄﾙが始まってすぐこのﾍﾙﾊﾟｰ君を出すことで、
;いま左向きか右向きかに関係なく、常に１P側(2P側)に色々表示できる!
[Statedef 20032]
type = S
sprpriority = -10
anim = 9999

;スタンドゲージ - 枠（20032）
[State 20026, 0]
type = Explod
Triggerall = parent,var(16) = 1 ;ｹﾞｰｼﾞを表示する設定のとき
trigger1 = !NumExplod(20032);このｹﾞｰｼﾞ枠が出てないとき
trigger1 = 1
anim = ifelse(parent,var(17)=1,16005,16000)
id = 20032
pos = (parent,var(18)),(parent,var(19))
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -3
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

;スタンドゲージ - 青ゲージ（20033）
[State 20026, 0]
type = Explod
Triggerall = parent,var(16) = 1 ;ｹﾞｰｼﾞを表示する設定のとき
trigger1 = !NumExplod(20033)
trigger1 = 1
trigger1 = parent,stateno != [5000,5081]
anim = 16001
id = 20033
pos = (parent,var(18)),(parent,var(19))
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -2
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

;スタンドゲージ - 赤ゲージ（20035）
[State 20026, 0]
type = Explod
Triggerall = parent,var(16) = 1 ;ｹﾞｰｼﾞを表示する設定のとき
triggerall = !NumExplod(20035)
triggerall = 1
trigger1 = parent,stateno = [5000,5081] ;くらいｽﾃｰﾄ
trigger1 = parent,var(1) = 10000 ;スタンドモード時
trigger2 = parent,fvar(1) <= 10   ;ｹﾞｰｼﾞが10以下の時
anim = 16004
id = 20035
pos = (parent,var(18)),(parent,var(19))
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -1
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

[State -3];standの文字
type = explod
Triggerall = parent,var(16) = 1 ;ｹﾞｰｼﾞを表示する設定のとき
trigger1 = parent,var(1) = 10000
trigger1 = numexplod(16004) = 0 ;このstandの文字が出てないとき
bindtime = -1
anim = 16002
id = 16004
sprpriority = -1
pos = (parent,var(18))-20,(parent,var(19))+3
postype = back
ownpal = 1
supermovetime = -1
pausemovetime = -1
facing = ifelse(facing=1,1,-1)
scale = 0.5,0.5

;青ゲージ増減ロジック
[State 20026, 0]
type = ModifyExplod
trigger1 = parent,fvar(1) < 80
trigger1 = roundstate = 2
id = 20033
scale = parent,fvar(1)*0.0125*0.5,1*0.5

;赤ゲージ増減ロジック
[State 20026, 0]
type = ModifyExplod
trigger1 = parent,fvar(1) < 80
trigger1 = roundstate = 2
id = 20035
scale = parent,fvar(1)*0.0125*0.5,1*0.5

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 20032

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 20033

[State 20026, 0];赤ゲージ（20035
type = RemoveExplod
trigger1 = parent,stateno != [5000,5081] ;くらいｽﾃｰﾄじゃなくて
trigger1 = parent,fvar(1) >= 10   ;ｹﾞｰｼﾞが10以上の時
trigger2 = win
trigger3 = lose
id = 20035

[State -3];スタンドの文字を消す
type = removeexplod
trigger1 = parent,var(1) = 0
trigger2 = win
trigger3 = lose
id = 16004

[State 20026, 0]
type = DestroySelf
trigger1 = win
trigger2 = lose

;スタンドゲージに罰印つける
[State 20026, 0]
type = Explod
Triggerall = parent,var(16) = 1 ;ｹﾞｰｼﾞを表示する設定のとき
trigger1 = !NumExplod(20034)
trigger1 = parent,var(7) = 1;スタンド発現不可のとき
anim = 16003
id = 20034
pos = (parent,var(18))-20,(parent,var(19))
postype = back
bindtime = 999999999999999
pausemovetime = 999999999999999
ownpal = 1
sprpriority = 0
scale = 0.5,0.5

[State -3];罰印を消す
type = removeexplod
trigger1 = parent,var(7) = 0;スタンド発現可のとき
trigger2 = win
trigger3 = lose
id = 20034

;STAND CRUSH!のﾒｯｾｰｼﾞｱｲｺﾝ
[State 1000, 0]
type = helper
Triggerall = parent,var(15) = 1 ;ﾒｯｾｰｼﾞｱｲｺﾝを表示する設定のとき
trigger1 = !NumHelper(20028)     ;=0と同じような意味っぽいですね。
trigger1 = parent,stateno = 16010;スタンドクラッシュ立ち食らい
ID = 20028
stateno = 20028
pos = 0,0
pausemovetime = 99999

;DANGER!のﾒｯｾｰｼﾞｱｲｺﾝ
[State -3]
type = helper
Triggerall = parent,var(15) = 1 ;ﾒｯｾｰｼﾞｱｲｺﾝを表示する設定のとき
trigger1 = parent,var(1) = 10000 ;スタンドモード時
trigger1 = parent,fvar(1) <= 10   ;ｹﾞｰｼﾞが10以下になった時
trigger1 = parent,movetype = H    ;くらい状態
trigger1 = NumHelper(20030) = 0   ;これがでてないとき
ID = 20030
stateno = 20030
pos = 0,0
pausemovetime = 999

;STAND ON!のﾒｯｾｰｼﾞｱｲｺﾝ
[State 1000, 0]
type = helper
Triggerall = parent,var(15) = 1 ;ﾒｯｾｰｼﾞｱｲｺﾝを表示する設定のとき
trigger1 = parent,stateno = [16000,16002];スタンド発現ｽﾃｰﾄ
trigger1 = NumHelper(20026) = 0
ID = 20026
stateno = 20026
pos = 0,0
pausemovetime = 999

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

;スタンドクラッシュ地上
[Statedef 16010]
type    = S 
movetype= H ;hit状態
physics = S
velset = 0,0
anim = ifelse((prevstateno = [5000,5001]),16012,ifelse((prevstateno = [5070,5071]),16014,16013))
;立ち食らいなら立ち食らい、足払いなら足払い、違うならしゃがみ。
;ﾌﾞﾁｬのやられｱﾆﾒです。
;このｽﾃｰﾄからﾌﾞﾁｬ操作に切り替える！

[State 16010]
type = pause;画面上の全てのスプライト、キャラクター、背景を止める
trigger1 = time = 0
time = 2    ;停止時間

[State 16010, Effect]
type = AssertSpecial
trigger1 = NumExplod(20035)
flag = NoFG   ;背景の手前のレイヤーを非表示にします
flag2 = NoBG  ;背景を非表示にします。

[State 16010, 仮面];Explodのleftは左上が原点、helperは左下っぽい。
type = Explod      ;いや違うような。。
trigger1 = time = 0
id = 20035
postype = left
pos = 0,0   ;0,239
anim = 16011
sprpriority = -1
ownpal = 0
bindtime = -1
pausemovetime = 999999
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
removetime = 10
;scale = 0.785,0.75    ;0.833,1.07

[State 16010]
type = PlaySnd
trigger1 = time = 0
value = 3, 13     ;ﾊﾞﾘｰﾝ

[State 16010]  ;-2でｸﾗｯｼｭ時(1)=0にしてるから別にいらんとは思う。
type = varset  ;ってたのに、これ必須です！ここで即(1)=0にする！
trigger1 = time = 0       ;じゃないとこのｽﾃｰﾄがｴﾝﾄﾞﾚｽで発動ｗ
var(1) = 0

[State 16010];スタンド発現不可にする。
type = varset
trigger1 = time = 0
trigger1 = var(7) = 0
var(7) = 1

[State 16010];SFがしびれ→消滅のｱﾆﾒ
type = Explod
trigger1 = time = 0
anim = 16010
postype = p1
pos = 10,0
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
sprpriority = 0

[State 16010, 音を鳴らす]
type = PlaySnd
trigger1 = time = 28
value = 3, 12     ;ｽﾀﾝﾄﾞ消滅

[State 16010];しびれのあと、ﾋｯﾄﾊﾞｯｸとかの値をもっかいｾｯﾄする
type = Velset
trigger1 = AnimElem = 35
x = gethitvar(xvel)*facing
y = gethitvar(yvel)
persistent = 0

[State 16010];うちあげ系を食らってｸﾗｯｼｭしてた場合
type = ChangeState
trigger1 = GetHitVar(yvel) != 0      ;上に浮く攻撃くらった時で、
trigger1 = prevstateno != [5070,5071];足払いじゃないとき
trigger1 = AnimElem = 35             ;velSetと同じﾀｲﾐﾝｸﾞで
value = 5050                         ;吹っ飛びｽﾃｰﾄへ。

[State 16010];足払いを食らって
type = ChangeState
trigger1 = prevstateno = [5070,5071]
trigger1 = AnimElem = 35
value = 5071;足払いでこけるｽﾃｰﾄへ
ctrl = 1;これはいらないかも。

[State 16010];立ちアニメに変更
type = Changeanim      ;同じく
trigger1 = statetype = S
trigger1 = time = 0
value = 16012

[State 16010];たち
type = ChangeState      ;しびれｱﾆﾒが終わってから立ちに移行する
trigger1 = time >= 50
trigger1 = statetype = S
trigger1 = GetHitVar(yvel) = 0      ;上に浮く攻撃じゃない場合
value = 0
ctrl = 1

[State 16010];しゃがみ
type = ChangeState      ;同じく
trigger1 = statetype = C
trigger1 = time >= 50
value = 11
ctrl = 1
;--------------------------------------------------------------------------
;スタンドクラッシュ空中
[Statedef 16011]
type    = A ;air
movetype= H ;hit状態
physics = N ;重力も摩擦もかかりません
velset = 0,0;ぴたっと止まる。
anim = 16014
;ﾌﾞﾁｬのやられｱﾆﾒです。
;このｽﾃｰﾄからﾌﾞﾁｬ操作に切り替える！

[State 16011]
type = pause;画面上の全てのスプライト、キャラクター、背景を止める
trigger1 = time = 0
time = 2    ;停止時間

[State 16011, Effect]
type = AssertSpecial
trigger1 = NumExplod(20035)
flag = NoFG   ;背景の手前のレイヤーを非表示にします
flag2 = NoBG  ;背景を非表示にします。

[State 16011, 仮面];Explodのleftは左上が原点、helperは左下っぽい。
type = Explod      ;いや違うような。。
trigger1 = time = 0
id = 20035
postype = left
pos = 0,0   ;0,239
anim = 16011
sprpriority = -1
ownpal = 0
bindtime = -1
pausemovetime = 999999
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
removetime = 10
;scale = 0.785,0.75    ;0.833,1.07

[State 16011]
type = PlaySnd
trigger1 = time = 0
value = 3, 13     ;ﾊﾞﾘｰﾝ

[State 16011]  ;-2でｸﾗｯｼｭ時(1)=0にしてるから別にいらんとは思う。
type = varset  ;ってたのに、これ必須です！ここで即(1)=0にする！
trigger1 = time = 0       ;じゃないとこのｽﾃｰﾄがｴﾝﾄﾞﾚｽで発動ｗ
var(1) = 0

[State 16011];スタンド発現不可にする。
type = varset
trigger1 = time = 0
trigger1 = var(7) = 0
var(7) = 1

[State 16011];SFがしびれ→消滅のｱﾆﾒ
type = Explod
trigger1 = time = 0
anim = 16010
postype = p1
pos = 10,0
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
sprpriority = 0

[State 16011, 音を鳴らす]
type = PlaySnd
trigger1 = time = 28
value = 3, 12     ;ｽﾀﾝﾄﾞ消滅

[State 16011];しびれのあと、ﾋｯﾄﾊﾞｯｸとかの値をもっかいｾｯﾄする
type = Velset
trigger1 = AnimElem = 35
x = gethitvar(xvel)*facing
y = gethitvar(yvel)
persistent = 0

[State 16011];重力をかける
type = Gravity
trigger1 = Time >= 35;現在のステートに移行して48フレーム後
trigger1 = 1         ;ずっと

[State 16011];ふっとば
type = ChangeAnim
trigger1 = AnimElem = 35
value = 5030

[State 16011];されるよ。ｱﾆﾒを変える。
type = ChangeAnim
trigger1 = anim = 5030
trigger1 = animTime = 0
value = 5050

;physics = N ;重力も摩擦もかかりません
;のままなので(Airではないので)、着地ｽﾃｰﾄがいります。

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover   ;おなじく
trigger1 = var(59) = 0
trigger1 = Command = "recovery"
trigger2 = var(59)=1
trigger2 = random<=var(58)*20
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover   ;おなじく
trigger1 = var(59) = 0
trigger1 = Command = "recovery"
trigger2 = var(59)=1
trigger2 = random<=var(58)*20
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6];吹っ飛び後地面に激突
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5050+var(1),5059+var(1)]) || (anim = [5061+var(1),5069+var(1)]), 0, 25)
trigger1 = var(1) = 0
value = 5100 ;HIT_BOUNCE;吹っ飛び後地面に激突
;--------------------------------------------------------------------------
;STAND ON!の表示。ヘルパーでやります
[Statedef 20026]
type = S
sprpriority = 3
anim = 9999

[State 20026, 0];消えてる
type = Explod
trigger1 = time = 0
id = 20026
pos = -90,70
;30,70までもってく
postype = back
;自分が背を向けている方向の画面上端。画面中央方向が正数
anim = ifelse(facing=1,20026,20027)
ownpal = 1
ontop = 1
bindtime = -1
scale = 0.5,0.5
facing = facing ;これ神だｗｷｬﾗが右向きで1、左向きで-1を返すっぽい！
;ちなみに、１でｷｬﾗと同じ向きに表示、-1で逆に表示
;ｴｸｽﾌﾟﾛｯﾄﾞは左向きのとき反転表示されるので重要
;まぁifelse(facing=1,△,◎)でいいけど

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20026)
Id = 20026
postype = back
;自分が背を向けている方向の画面上端。画面中央方向が正数
pos = ceil(-90+(time*8)),70;ceil切り上げ整数化
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20026)
trigger1 = time = 60
trigger2 = NumHelper(20036);STAND CRUSH!
trigger3 = NumHelper(20030);DANGER!
ID = 20026

[State 20026, 0]
type = DestroySelf
trigger1 = time = 60

;-------------------------------------------------
;STAND CRUSH!ヘルパー
[Statedef 20028]
type = S
sprpriority = -2
anim = 9999

[State 20026, 0];きえてる
type = Explod
trigger1 = time = 0
id = 20036
pos = -90,70
postype = back
anim = ifelse(facing=1,20036,20037)
ownpal = 1
ontop = 1
sprpriority = -2
bindtime = -1
scale = 0.5,0.5
facing = facing

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20036)
Id = 20036
postype = back
pos = ceil(-90+(time*8)),70
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20036)
trigger1 = time = 62
ID = 20036

[State 20026, 0]
type = DestroySelf
trigger1 = time = 62

;-------------------------------------------------
;DANGER!ヘルパー
[Statedef 20030]
type = S
sprpriority = -2
anim = 9999

[State 20026, 0];きえてる
type = Explod
trigger1 = time = 0
id = 20030
pos = -90,70
postype = back
anim = ifelse(facing=1,20038,20039)
ownpal = 1
ontop = 1
sprpriority = -2
bindtime = -1
scale = 0.5,0.5
facing = facing

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20030)
Id = 20030
postype = back
pos = ceil(-90+(time*8)),70
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20030)
trigger1 = time = 60
trigger2 = NumHelper(20028);STAND CRUSH!
ID = 20030

[State 20026, 0]
type = DestroySelf
trigger1 = time = 60




;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

;『ﾌﾞﾁｬﾗﾃｨ WIN』ヘルパー
[Statedef 20050]
type = S
sprpriority = 10
anim = 20050
ctrl = 0

[State 104, 影はない]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 20024,ガシーン！]
type = PlaySnd
trigger1 = Time = 10
value = 3, 14

[State -1,1]
type = velset
trigger1 = time = 0
trigger2 = time >= 10 && time <= 72
x = 0

[State -1,1]
type = velset
trigger1 = time >= 0 && time <= 10
x = ifelse(Teamside=1,12,-12)

[State -1,1]
type = velset
trigger1 = time >= 72 && time <= 95
x = ifelse(Teamside=1,-17,17)

[State -1,1]
type = destroyself
trigger1 = roundstate = 2;バトル中

;---------------------------
;『to be continued』ヘルパー
[Statedef 20051]
type = S
sprpriority = 10
anim = ifelse(Teamside=1,20051,20052)
ctrl = 0

[State 20024, 0]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 20024, 0]
type = velset
trigger1 = time = 0
trigger2 = time >= 25
x = 0

[State 20024, 0]
type = velset
trigger1 = time >= 0 && time <= 17
x = ifelse(Teamside=1,-24,24)

[State 20024, 0]
type = velset
trigger1 = time >= 17 && time <= 25
x = ifelse(Teamside=1,13,-13)

;-------------------------------------------------------------------
 

;-------------------------------------------------------------------
;KO勝利時の集中線と音helper
[Statedef 20053]
type    = S
;movetype= I
;physics = N
anim = 9999 ;空アニメ
;velset = 0,0
ctrl = 0

[State 20053]
type = Explod
trigger1 = time = 0
anim = 20053
pos = 0,0
postype = left
sprpriority = 10
ownpal = 1
bindtime = -1	;発生させた親に常にくっ付ける
persistent = 0  ;1回しかステコンが実行されません
ignorehitpause = 1	;「ヒット硬直」を無視

[State 20053]
type = PlaySnd
trigger1 = Time = 0
value = 3, 15
persistent = 0  ;1回しかステコンが実行されません
ignorehitpause = 1;とるすと、ヒット停止時間を無視

[State 20053]
type = DestroySelf
trigger1 = time = 120 && RoundState != 3

;-------------------------------------------------------------------

;敗北カットイン
[Statedef 20054]
type = A
anim = 9999
sprpriority = 4

[State 20054];mugenのエラー?でExplodのPalfxはうまく作動しないらし
type = Palfx
trigger1 = time <= 70
add = 0+time*2, 0+time*2, 0+time*2
time = 1

[State 20054]
type = Bgpalfx
trigger1 = time <= 70
add = 0+time*2, 0+time*2, 0+time*2
time = 1

[State 20054]
type = PlaySnd
trigger1 = time = 0
value = 3,16;ドーン
persistent = 0  ;1回しかステコンが実行されません

[State 20054];敗北カットイン顔の部分
type = helper
trigger1 = time = 0
trigger1 = NumHelper(20058) = 0
stateno = 20058
id = 20058
sprpriority = 1
pos = 0,0
postype = p1
supermovetime = 9999999
pausemovetime = 9999999
ownpal = 0
keyctrl = 0

;青の背景
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20054
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20054
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 510,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20055
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20055
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 496,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20056
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20056
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 496,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20057
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20057
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 500,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1

[State 20054]
type = RemoveExplod
trigger1 = time = 70
trigger2 = RoundState = 4 
id = 20054

[State 20054]
type = AssertSpecial
trigger1 = time = [0,69]
flag = nobg
flag2 = nofg
flag3 = nobardisplay

[State 20054]
type = null;DestroySelf
trigger1 = RoundState != 3
;trigger1 = time = 70 || RoundState != 3
;trigger2 = RoundState = 4 
;----------------------------------------------------
;敗北カットイン顔の部分
[Statedef 20058]
type    = A
;movetype= I
;physics = N
;velset = 0,0
anim = 9999
sprpriority = 4

[State 20058]
type = Explod
trigger1 = time = 0
trigger1 = NumExplod(20058) = 0
anim = 20058
id = 20058
sprpriority = -4
;removetime = -1
bindtime = -1
pos = ifelse(ishometeam=1,ifelse(root,facing = 1,160,180),ifelse(root,facing = -1,180,160)),120
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
scale = 1.5*parent,const(size.xscale),1.5
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = 1,1,-1))
persistent = 0

[State 20058]
type = RemoveExplod
trigger1 = RoundState != 3
id = 20058

[State 20058]
type = DestroySelf
trigger1 = RoundState != 3

;-------------------------------------------------------------------
[Statedef 16500];本体被ダメでｽﾀﾝﾄﾞ消滅。helperのｽﾃｰﾄ
type = S
movetype = H
physics = S
ctrl = 0
velset = 0,0
anim = 16500
sprpriority = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 11,4
channel = 0

[State 16500]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ｽﾀﾝﾄﾞ消滅音]
type = PlaySnd
trigger1 = time = 28
value = 3, 12

[State 16500];ｽﾀﾝﾄﾞoff
type = ParentVarSet
trigger1 = animtime = 0
v = 1
value = 0

[State 16500]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------
[Statedef 16501];ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅。helperがoverrideで飛んでくるｽﾃｰﾄ
type = S
movetype = H ;GetHitVar使いたいのでヒットにしておく
physics = S  ;ニュートラルのほうがいいような気がしている
ctrl = 0
velset = 0,0
anim = 16500
sprpriority = 0

[State 16500]
type = ParentVarSet
trigger1 = time = 0
v = 11
value = GetHitVar(damage)

[State 16500]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ｽﾀﾝﾄﾞ消滅音]
type = PlaySnd
trigger1 = time = 28
value = 3, 12

[State 16500];ｽﾀﾝﾄﾞoff
type = ParentVarSet
trigger1 = animtime = 0
v = 1
value = 0

[State 16500]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
[Statedef 16502];立ち
type    = S
movetype= H
physics = S
velset = -2,0
anim = 5000

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1 ;指定した値が増減されます。省略時0で、相手の防御力が考慮される

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 11,4
channel = 0

[State -2]
type = ChangeState
trigger1 = time= 20
value = 0
ctrl = 1
;-------------------------------
[Statedef 16503];しゃがみ
type    = C
movetype= H
physics = S
velset = -2,0
anim = 5020

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 11,4
channel = 0

[State -2]
type = ChangeState
trigger1 = time= 20
value = 11
ctrl = 1
;-------------------------------
[Statedef 16504];空中
type    = A
movetype= H
physics = A
velset = -2,0
anim = 5050

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 11,4
channel = 0

[State -2]
type = ChangeState
trigger1 = Vel Y > 0    ;下方に移動している場合、正の値
trigger1 = Pos Y >= -10 ;地面を0、下方向を正、上方向を負
value = 5100;地面に激突

;-------------------------------------------------------------------
;-------------------------------------------------------------------
;アドバンシングガード
[Statedef 20011]
type = A
movetype= I
physics = N
anim = 20012;空白で押し判定だけあるｱﾆﾒ
ctrl = 0
velset = 10.5,0

[State 20011];きかんなぁ
type = PlaySnd
trigger1 = time = 0
value = 10,11
channel = 0

[State 20011];アドバンシングガード
type = PlaySnd
trigger1 = time = 0
value = 2,8

[State 20011]
type = PlayerPush
trigger1 = 1
value = 1

[State 20011]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 20011]
type = DestroySelf
trigger1 = time = 15
trigger2 = parent,alive = 0
 
 
;---------------------------------------------------------------------------
;プッツーン
[Statedef 720]
type    = S
physics = N
anim = 720
ctrl = 0
sprpriority = 3
velset = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0, scale]
type = angledraw
trigger1 = time < 10
scale = .2+time*.08,.2+time*.08

[State 0, scale]
type = angledraw
trigger1 = time >= 10
scale = .85+time*.01,.85+time*.01

[State 820, 消去]
type = destroyself
trigger1 = time >= 30
trigger2 = root,stateno != 700
;---------------------------------------------------------------------------
;屈弱から始動
[Statedef 100010]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 30
ctrl = 0
anim = 10400
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 400, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
priority  = 3
animtype  = Light
guardflag = MA
pausetime = 10,11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10,-52
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100011

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ中Son
[Statedef 100011]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 10410

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = ceil(ifelse((50*fvar(7))<4,4,(50*fvar(7)))),4
animtype  = Medium
guardflag = MA
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-55
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

[State 410, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100002

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;基本コンボスタートッ
[Statedef 100000]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
juggle  = 1
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
animtype = Light
priority = 3, Hit
guardflag = MA
pausetime = 10, 11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10, -86
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.4,-1.4

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100001

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち中Son
[Statedef 100001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 40
ctrl = 0
velset = 0,0
anim = 10210
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
guardflag = MA
damage = ceil(ifelse((50*fvar(7))<4,4,(50*fvar(7)))),4
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != A
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100002

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype = A
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100022

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ強Son
[Statedef 100022]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 70
ctrl = 0
anim = 10420

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 430, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = ceil(ifelse((70*fvar(7))<7,7,(70*fvar(7)))),8
animtype  = up
guardflag = MA
pausetime = 14,18
sparkno = s20002
guard.sparkno = s20005
sparkxy = -10,-68
hitsound = s2,5
guardsound = s2,6
getpower = 30,0
givepower = 20,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -1.5,-8
air.velocity = -2,-3
fall = 1

[State 430, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = target,pos y > -60
trigger1 = movecontact
value = 100003

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 11300

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;立ち強Son
[Statedef 100002]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0
anim = 10220
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 220, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
guardflag = MA
damage = ceil(ifelse((70*fvar(7))<8,8,(70*fvar(7)))),8
pausetime = 14,13
sparkno = s20002
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,5
guardsound = s2,6
getpower = 30,0
givepower = 20,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -3.5,8  ;相手が空中なら叩きつける感じにしたい。。
air.fall = 1           ;空中ヒットしたときのみ落下状態

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = NumHelper(2) = 0
triggerall = !numhelper(4657)
triggerall = !NumHelper(3)
triggerall = Enemynear,statetype != A
triggerall = Enemynear,statetype != L
triggerall = numtarget
triggerall = life > 500
triggerall = power >= 1000
trigger1 = Random = [600,999]
trigger1 = P2BodyDist X < 75
trigger1 = movecontact
value = 3900

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = NumHelper(2) = 0
triggerall = !numhelper(4657)
triggerall = !NumHelper(3)
triggerall = Enemynear,statetype != A
triggerall = Enemynear,statetype != L
triggerall = numtarget
triggerall = target,statetype != A
triggerall = power >= 1000
triggerall = life > 300
trigger1 = Random = [300,900]
trigger1 = movehit
value = 700

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100003

[State 220, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;------------------------------
;ズームパンチｽﾀﾝﾄﾞon
[Statedef 100003]
type    = S
movetype= A
physics = S
;juggle  = 250
poweradd= 50
velset = 0,0
anim = 1011
ctrl = 0
sprpriority = 0
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 41, 0]
type = VarAdd
trigger1 = time = 0
v = 31
value = 1

[State 1010, ジッパー]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = p2bodydist X >= 40 ;相手とのＸ軸の距離が４０ピクセル以上の時
value = 10, 17

[State 191,音ならしてみた];
type = PlaySnd
trigger1 = AnimElem = 2
value = 10,6    ;あまい！
channel = 0       ;チャンネル0は、ボイス再生専用

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit          ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 14 ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 1010, ヒット定義]
type = HitDef
triggerall = var(31) <= 1
trigger1 = 1
attr = S, SA         ;Stand,,Special,Attack
animtype  = Hard
damage = ceil(ifelse((45*fvar(7))<6,6,(45*fvar(7)))),4
priority  = 5    ;相打ち用
guardflag = MA       ;どの状態ならガード可か。H立ち、Lしゃがみ、M両方、A空中
pausetime = 15,15    ;ヒット時の、p1停止時間, p2ブルブル時間
;guard.pausetime =    ;省略ならヒット時と同じ
sparkno = s20003
guard.sparkno = s20005
sparkxy = -10,-80
hitsound = s2,5
guardsound = s2,6
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -3.5,8  ;相手が空中なら叩きつける感じにしたい。。
air.fall = 1           ;空中ヒットしたときのみ落下状態
hitonce = 1     ;複数の敵がいても1人にヒット
persistent=0    ;1度しか実行しない
guard.dist = 300;これを設定しないとAIがガードできない

[State 1010, ヒット定義]
type = HitDef
triggerall = var(31) > 1
trigger1 = 1
attr = S, SA         ;Stand,,Special,Attack
animtype  = Hard
damage = ceil(ifelse((60*fvar(7))<8,8,(60*fvar(7)))),8
priority  = 5    ;相打ち用
guardflag = MA       ;どの状態ならガード可か。H立ち、Lしゃがみ、M両方、A空中
pausetime = 15,20    ;ヒット時の、p1停止時間, p2ブルブル時間
;guard.pausetime =    ;省略ならヒット時と同じ
sparkno = s20004
guard.sparkno = s20005
sparkxy = -10,-80
hitsound = s2,5
guardsound = s2,6
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4
air.velocity = -3,-4  ;相手が空中なら叩きつける感じにしたい。。
air.fall = 1           ;空中ヒットしたときのみ落下状態
fall.recover = 0
hitonce = 1     ;複数の敵がいても1人にヒット
persistent=0    ;1度しか実行しない
guard.dist = 300;これを設定しないとAIがガードできない

[State -1]
Type = AttackDist;ガード可能距離
Trigger1 = 1
Value = 300

[State 0];近距離でﾋｯﾄorｶﾞｰﾄﾞされたら、ﾋｯﾄ硬直後、最後のﾌﾚｰﾑへ
type = ChangeAnim
triggerall = AnimElem = 2||AnimElem = 3||AnimElem = 4||AnimElem = 5
trigger1 = movehit
trigger2 = MoveGuarded
value = 1011
elem = 15
;ignorehitpause = 1 ;ﾋｯﾄ硬直してください
persistent=0    ;1度しか実行しない

[State 0];遠距離でﾋｯﾄorｶﾞｰﾄﾞされたら手を引き戻す感じに
type = ChangeAnim
triggerall = AnimElem = 6 || AnimElem = 7 || AnimElem = 8
trigger1 = movehit
trigger2 = MoveGuarded
value = 1011
elem = 11
persistent=0    ;1度しか実行しない

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = MoveHit = [1,2]
value = 100004

[State 1010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------------
[Statedef 100004];引き寄せる記述ｽﾀﾝﾄﾞon
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1014
ctrl = 0  ;キー入力不可
sprpriority = -1
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

;movehitpersist = 1     ;ヒット、ガード、空振り状態を引き継ぐか否か
;hitdefpersist = 1      ;直前のステートのHitDefを持続させる
;追加攻撃しやすいように色々考えましたが、単純に引き寄せでもう１ﾋｯﾄするようにした

[State 1011,ぶつかり判定];下のTargetBindで相手を引き寄せたときに、
type = PlayerPush        ;相手の食らい判定がこっちにめりこんでいると
trigger1 = 1             ;変な挙動をするのを防ぐ。
value = 0

[State 1011,引き寄せる]
type = TargetBind
trigger1 = AnimElem = 1
pos = 60,-20
time = 10      ;相手をその座標に縛り付けておく時間

[State 1010, ヒット定義]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA         ;Stand,Crouch,Air  Nutral,Special,Hyper  Attack,T投げP飛び道具
animtype  = light
damage = ceil(ifelse((5*fvar(7))<5,5,(5*fvar(7)))),0
priority  = 5    ;相打ち用
guardflag = L ;どの状態ならガード可か。H立ち、Lしゃがみ、M両方、A空中
pausetime = 0,15    ;ヒット時の、p1停止時間, p2ブルブル時間
;guard.pausetime =    ;ガード時の、p1停止時間, p2ブルブル時間。省略ならヒット時と同じ
sparkno = -1
sparkxy = -10,-80
hitsound = s2,7
ground.type = low
ground.slidetime = 12     ;相手の後ずさる時間。ground.velocityをかける時間！
ground.hittime  = 15           ;地上にてヒット状態を保持する時間
ground.velocity = 0,0;-4,-3.5
air.velocity = 0,0;-4,-3
fall = 0             ;ダウンなし、1はあり
hitonce = 1          ;1人にヒット

[State 1010,歩けなくする];後ろにキーを入れたとき歩いてしまうのを防ぐため
type = AssertSpecial
trigger1 =1
flag = nowalk

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = animtime = 0
value = 100005

[State 1011, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち弱Son
[Statedef 100005]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
juggle  = 1
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
animtype = Light
priority = 3, Hit
guardflag = MA
pausetime = 10, 11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10, -86
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.4,-1.4

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100006

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち弱Son
[Statedef 100006]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
juggle  = 1
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
animtype = Light
priority = 3, Hit
guardflag = MA
pausetime = 10, 11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10, -86
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.4,-1.4

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100007

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち中Son
[Statedef 100007]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 40
ctrl = 0
velset = 0,0
anim = 10210
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
guardflag = MA
damage = ceil(ifelse((50*fvar(7))<4,4,(50*fvar(7)))),4
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-2.5

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100008

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ強Son
[Statedef 100008]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 70
ctrl = 0
anim = 10420

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 430, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = ceil(ifelse((70*fvar(7))<7,7,(70*fvar(7)))),8
animtype  = up
guardflag = MA
pausetime = 14,18
sparkno = s20002
guard.sparkno = s20005
sparkxy = -10,-68
hitsound = s2,5
guardsound = s2,6
getpower = 30,0
givepower = 20,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -1.5,-8
air.velocity = -2,-3
fall = 1

[State 430, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = var(40) <= 15
triggerall = power >= 1000
triggerall = life <= 400
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 100030

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = power >= 1000
triggerall = Enemynear,statetype != L
triggerall = numtarget
triggerall = var(40) <= 25
trigger1 = movecontact
value = 13000

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = Enemynear,statetype != L
triggerall = numtarget
trigger1 = movecontact
value = 11300

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;本気コンボ開始 打ち上げ
[Statedef 100030]
type    = S ;stand
movetype= A ;attack
physics = S ;stand
juggle  = 0 ;?
velset = 0,0 ;速度
ctrl = 0
anim = 1300 ;ｱｯﾊﾟｰ
sprpriority = 2

[State 191,]
type = Veladd
trigger1 = time <= 5
x = -1

[State 191,]
type = Velset
trigger1 = time = 5
x = 20

[State 191,]
type = Velset
triggerall = time >= 1
triggerall = time <= 10
trigger1 = var(59) = -1
trigger1 = command != "holdx"
trigger2 = var(59) = 1
trigger2 = P2BodyDist X < 50
x = 1

[State 0, nhb]
type = nothitby
trigger1 = time = 0
value = SCA
time = 10

[State 301,]
type = Velset
trigger1 = AnimElem = 3 ;2コマ目
x = 0

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = AnimElem = 3 ;3コマ目
attr = S, SA ;立ち、ｽｰﾊﾟｰｱﾀｯｸ
hitflag = MAF  ;省略時はこれ。ダウン状態にのみヒットしない。くらい状態でもヒット！
priority = 1, Miss    ;ヒット優先度 (int), 相打ちの挙動 (string)
p1sprpriority = -1 ;スプライト表示優先度 (int),1手前、-1奥

p1stateno = 100031  ;ヒットしたら[StateDef11301]に
;p2stateno = 1303  ;ヒットしたらこっちの[StateDef1303]を相手にさせる 

damage = ceil(ifelse((40*fvar(7))<7,7,(40*fvar(7)))),0
animtype  = up
guardflag = M ;どの状態でもガード可能じゃない
guard.pausetime = 12,12;p1停止時間, p2ブルブル時間 (int)
sparkno = s20003
guard.sparkno = s20005
sparkxy = -10,-68
hitsound = s2,2
guardsound = s2,6
ground.type = high  ;地上でののけぞり方
ground.slidetime = 6       ;ﾋｯﾄバック
ground.hittime  = 20       ;相手が攻撃を受けて行動不能になる時間
ground.velocity = 0,-8    ;相手が地上で攻撃を受けて移動する速度
air.velocity = -1,-6
fall = 1;落下フラグ (int)
fall.recover = 0;受身不可能
fall.recovertime = 99;受身の受付開始。fall.recover = 0にした場合は無効。

[State 3000, くらえ]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10, 10
channel = 0   ;チャンネル0は、ボイス再生専用

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 19   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1
persistent = 0 ;1回しかステコンが実行されません

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 301,ｱｯﾊﾟｰの時ちょっと無敵にしてみよう]
type = NotHitBy         ;muteki
trigger1 = AnimElem = 3 ;3コマ目
value = ,NA,NT    ;通常攻撃、通常投げ

;-------------------------------------------
[Statedef 100031];ｱﾘｱﾘするとこ。
type    = S
movetype= A
physics = S
anim = 1301;上にありあり
poweradd = 60
juggle  = 5

[State 191,]
type = Velset
trigger1 = !time
x = 5

[State 810, 音を鳴らす];ｱﾘｱﾘｱﾘ
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 12
value = 10, 3
channel = 0     ;チャンネル0は、ボイス再生専用

[State 810,表示位置を上に]
type = SprPriority
trigger1 = 1 ;ずっと
value = 3

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = AnimElem = 15
attr = S, HA ;立ち超必殺技（Standing, Hyper Attack）
animtype  = back;吹き飛び
damage = ceil(ifelse((12*fvar(7))<2,2,(12*fvar(7)))),1
getpower  = 5 ;攻撃を当てた時にパワーゲージを増やさないようにしてる
priority  = 6
guardflag = M;たち、しゃがみならガード可
pausetime = 5,5
sparkno = s20003
guard.sparkno = s20005
sparkxy = -10,-130
hitsound = s2,5
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = -1.8  ;相手が攻撃を受けて移動する速度。yに負数を指定すると宙に浮きます
air.velocity = 0,ifelse(var(40)<30,-3+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5        ;地上コーナープッシュ速度 
sprpriority = 3;スプライト表示優先度 (int)

[State 3000, 上と同じ。ﾋｯﾄｽﾊﾟｰｸずらすため]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
trigger3 = AnimElem = 12
trigger4 = AnimElem = 14
attr = S, HA
animtype  = back
damage = ceil(ifelse((12*fvar(7))<2,2,(12*fvar(7)))),1
getpower  = 5
priority  = 6
guardflag = M
pausetime = 5,5
sparkno = s20003
guard.sparkno = s20005
sparkxy = -10,-150
hitsound = s2,5
guardsound = s2,6
ground.type = Low
ground.slidetime = 30
ground.hittime  = 3
ground.velocity = -1.8
air.velocity = -3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
ground.cornerpush.veloff = -3.5 
sprpriority = 3

[State 10820, 足元がぶわっ]
type = Explod
trigger1 = Time = 0
postype = p1
pos = 20,10
anim = 20009
sprpriority = 4
ownpal = 1

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1
;persistent = 0 ;1回しかステコンが実行されません

[State -1, 追撃]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = power >= 1000
trigger1 = numtarget
trigger1 = time = 35
value = 700

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本気コンボ ジャンプ開始
[Statedef 100032]
type    = S
physics = S
anim = 40+var(1)
ctrl = 0
sprpriority = 1

[State 40, 6]
type = Changestate
triggerall = var(59)=1
triggerall = !time
trigger1 = !numtarget
value = 0
ctrl = 1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = var(59)=-1
trigger1 = command != "holdup" ;上を押しっぱなしじゃなかたら
trigger2 = var(59)=1
var(5) = 1

[State 40, 0]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0;垂直ジャンプ

[State 40, 0]
type = VarSet
triggerall = var(59)=-1
trigger1 = command = "holdfwd"
sysvar(1) = 1;前にジャンプ

[State 40, 2]
type = VarSet
trigger1 = var(59)=1
sysvar(1) = 1

[State 40, 0]
type = VarSet
triggerall = var(59)=-1
trigger1 = command = "holdback"
sysvar(1) = -1;後ろにジャンプ

;通常
[State 40, 0]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
;垂直ならconst(velocity.jump.neu.x)(多分加速なし）、違うなら次
;前にジャンプなら前に加速、違うなら後ろに加速
y = const(velocity.jump.y)

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 0];ダッシュ中に前にジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 5];バックステプ中に後ろにジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 105 ;RUN_ばっく
trigger1 = sysvar(1) = -1
x = -const(velocity.runjump.fwd.x)

[State 40, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 100033
ctrl = 0
;---------------------------------------------------------------------------------------------------------------------------------
;本気コンボ ジャンプ
[Statedef 100033]
type    = A
physics = A

[State 10000]
type = Turn
trigger1 = prevstateno = [1510,1515]
trigger1 = time < 5
trigger1 = P2Dist X < 0

[State 10000]
type = velset
trigger1 = prevstateno = [1510,1515]
trigger1 = !time
trigger1 = command = "holdfwd"
x = 3

[State 10000]
type = velset
trigger1 = prevstateno = [1520,1525]
trigger1 = !time
x = 3

[State 50, 0]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 0]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(1)

[State 50, 0]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State -1, 追撃]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget
trigger1 = time = 8
value = 100034
;---------------------------------------------------------------------------
;ジャンプ中son
[Statedef 100034]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 50
ctrl = 0
anim = 10600

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 1
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 1
value = 2,10

[State 610, ヒット定義]
type = HitDef
trigger1 = AnimElem = 1
attr = A, NA
damage = ceil(ifelse((50*fvar(7))<4,4,(50*fvar(7)))),4
guardflag = HA
priority = 4
pausetime = 10,10
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-55
hitsound = s2,4
guardsound = s2,6
animtype = Medium
getpower = 25,0
givepower = 10,0

ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -5
air.velocity = -3,-4

[State -1, 追撃]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = movecontact
trigger1 = time >= 10
value = 100035
;---------------------------------------------------------------------------
;ジャンプ強son
[Statedef 100035]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 70
ctrl = 0
anim = 10610

[State 1027, vel];キャンセル補正
type = Velset
trigger1 = !Time
trigger1 = prevstateno = 10600 || prevstateno = 10610 
y = -3

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 630, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 630, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(ifelse((70*fvar(7))<7,7,(70*fvar(7)))),8
guardflag = HA
priority = 3
pausetime = 10,10
sparkno = s20002
guard.sparkno = s20005
sparkxy = -5,-35
hitsound = s2,5
guardsound = s2,6
animtype = hard
getpower = 30,0
givepower = 2,0

ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
air.velocity = -2,-1
fall = 0
air.fall = 1
fall.recovertime = 40
;---------------------------------------------------------------------------
[Statedef 100100];走れジッパー
type    = C
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 11400
ctrl = 0
sprpriority = 0

[State 300,相手投げ抜け用]
type = varset
trigger1 = time = 0
var(8) = 0

[State 300, 走れジッパー]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10, 14
channel = 0   ;チャンネル0は、ボイス再生専用

[State 300,SF]
type = null;Explod
trigger1 = AnimElem = 2
anim = 1402
pos = 0, 0
postype = p1
sprpriority = 1

[State 300,ジッパー]
type = helper
trigger1 = AnimElem = 2
helpertype = normal
pos = 0,0
postype = p1
stateno = 1401
ownpal = 1
ID = 3
name = "zip"

[State -1];相手AI用。SFを飛び越えたら攻撃してくるはず
Type = AttackDist;相手が防御体制をとる距離
Trigger1 = 1
Value = 0;防御体制とりません

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = numtarget || helper(3),numtarget
value = 100101

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;走れジッパーhit後追い討ちダッシュ
[Statedef 100101]
type    = S
physics = N
anim = 100+var(1)
sprpriority = 1
ctrl = 0

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.fwd.x)

[State 100, 3] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk          ;Prevent run from canceling into walk
flag2 = NoAutoTurn     ;Prevent from turning

[State 100]
type = ChangeState
triggerall = Var(59) = -1
trigger1 = command = "holdup"
value = 40

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = P2BodyDist X <= 50
trigger1 = time >= 1
trigger1 = numtarget || helper(3),numtarget
value = 100102

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ弱Son
[Statedef 100102]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 30
ctrl = 0
anim = 10400
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 400, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
priority  = 3
animtype  = Light
guardflag = LA
pausetime = 10,11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10,-52
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = animtime = 0
value = 100103

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1
;---------------------------------------------------------------------------
;立ち弱Son
[Statedef 100103]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
juggle  = 1
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
animtype = Light
priority = 3, Hit
guardflag = MA
pausetime = 10, 11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10, -86
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.4,-1.4

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = movecontact
value = 100104

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち弱Son
[Statedef 100104]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
juggle  = 1
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
animtype = Light
priority = 3, Hit
guardflag = MA
pausetime = 10, 11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10, -86
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.4,-1.4

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = movecontact
value = 100105

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち中Son
[Statedef 100105]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 40
ctrl = 0
velset = 0,0
anim = 10210
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
guardflag = MA
damage = ceil(ifelse((50*fvar(7))<4,4,(50*fvar(7)))),4
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = movecontact
value = 100106

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち強Son
[Statedef 100106]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0
anim = 10220
hitcountpersist = 1;画面に表示されるヒット数とは全くの別物

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 220, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
guardflag = MA
damage = ceil(ifelse((70*fvar(7))<8,8,(70*fvar(7)))),8
pausetime = 14,13
sparkno = s20002
guard.sparkno = s20005
sparkxy = -10,-70
hitsound = s2,5
guardsound = s2,6
getpower = 30,0
givepower = 20,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -3.5,8  ;相手が空中なら叩きつける感じにしたい。。
air.fall = 1           ;空中ヒットしたときのみ落下状態

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,11

[State 903, 画面を揺らします]
type = EnvShake
trigger1 = movehit            ;攻撃が相手にヒットしたとき
trigger1 = hitpausetime = 4   ;hitpauseが終了するまでの時間。0ならhitpauseが終わった時
time = 5
ampl = 3
ignorehitpause = 1

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = animtime= 0
value = 100107

[State 220, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ弱Son
[Statedef 100107]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 30
ctrl = 0
anim = 10400
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 400, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
priority  = 3
animtype  = Light
guardflag = LA
pausetime = 10,11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10,-52
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = movecontact
value = 100108

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ弱Son
[Statedef 100108]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 30
ctrl = 0
anim = 10400
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 400, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage = ceil(ifelse((25*fvar(7))<3,3,(25*fvar(7)))),2
priority  = 3
animtype  = Light
guardflag = LA
pausetime = 10,11
sparkno = s20000
guard.sparkno = s20005
sparkxy = -10,-52
hitsound = s2,3
guardsound = s2,6
getpower = 20,0
givepower = 5,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,9

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = movecontact
value = 100109

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ中Son
[Statedef 100109]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 10410

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = ceil(ifelse((50*fvar(7))<4,4,(50*fvar(7)))),4
animtype  = Medium
guardflag = LA
pausetime = 12,13
sparkno = s20001
guard.sparkno = s20005
sparkxy = -10,-55
hitsound = s2,4
guardsound = s2,6
getpower = 25,0
givepower = 10,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

[State 410, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0       ;チャンネル0は、ボイス再生専用

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 2
value = 2,10

[State 101, 3]
type = ChangeState
triggerall = Var(59) = 1 && RoundState = 2
trigger1 = numtarget || helper(3),numtarget
trigger1 = movecontact
value = 100022

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;SPアリ後待機
[Statedef 103001]
type    = S
movetype= I
physics = S
juggle  = 6
poweradd= 0
ctrl = 0
anim = 0+var(1)
sprpriority = 2

[State 410, ステート変更]
type = ChangeState
triggerall = var(1) = 0
trigger1 = Random = [0,500]
trigger1 = !numtarget
value = 1210

[State 410, ステート変更]
type = ChangeState
triggerall = var(1) = 10000
trigger1 = Random = [0,500]
trigger1 = !numtarget
value = 11210

[State 410, ステート変更]
type = ChangeState
triggerall = var(1) = 0
trigger1 = !numtarget
value = 1220

[State 410, ステート変更]
type = ChangeState
triggerall = var(1) = 10000
trigger1 = !numtarget
value = 11220

[State 410, ステート変更]
type = ChangeState
trigger1 = roundstate != 2
trigger2 = inguarddist
trigger3 = P2BodyDist X <= 150
trigger4 = !time
trigger4 = Random = [0,500]
value = 0
ctrl = 1