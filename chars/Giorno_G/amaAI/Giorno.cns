
[Data]

life = 900

power = 5000

attack = 100

defence = 100

fall.defence_up = 0

liedown.time = 11

airjuggle = 15

sparkno = 2

guard.sparkno = 40

KO.echo = 0
volume = 0
IntPersistIndex = 51
FloatPersistIndex = 40


[Size]
xscale = 0.90;1          ;水平方向の縮尺（通常１）
yscale = 1        ;垂直方向の縮尺（通常１）
ground.back = 15     ;キャラの幅(後方,地上)
ground.front = 16    ;キャラの幅(前方,地上)
air.back = 12        ;キャラの幅(後方,空中)
air.front = 12       ;キャラの幅(前方,空中)
height = 60          ;キャラの高さ
attack.dist = 160    ;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0     ;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = -5, -90   ;頭の大体の座標
mid.pos = -5, -60    ;体の中心の大体の座標
shadowoffset = 0     ;影の垂直方向のオフセット
draw.offset = 0,0    ;使用しない

[Velocity]
walk.fwd  = 2.4      ;前進の速度
walk.back = -2.2     ;後退の速度
run.fwd  = 8, 0    ;前ダッシュの速度（ホップする時はyを-にする）
run.back = -8,-3.8 ;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-9.5    ;垂直ジャンプの速度
jump.back = -2.55    ;後ジャンプの速度
jump.fwd = 2.5       ;前ジャンプの速度
runjump.back = -2.55,-8.1 ;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4,-8.1      ;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-8.1      ;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.55      ;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.5         ;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 0      ;空中でジャンプする回数
airjump.height = 0  ;空中でジャンプする最低限の高さ
yaccel = .55         ;重力
stand.friction = .85  ;立ち状態の摩擦係数
crouch.friction = .82 ;屈み状態の摩擦係数
;---------------------------------------------------------------------------
; 勝利メッセージ
;---------------------------------------------------------------------------
[ja.Quotes]
victory1 = "去ってしまった者たちから\n受け継いだものは さらに\n『先』に進めなくてはならない！！"
victory2 = "この｢矢｣は破壊しない！"
victory3 = "生き残るのは……\nこの世の｢真実｣だけだ……"
;---------------------------------------------------------------------------
; ステイトの解説
; [Statedef STATENO]
; type = ?      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空
/Ｌ：ダウン
; movetype = ?  I/A/H    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = ?   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
; juggle = ?             その攻撃に使うジャグル数
;
;---------------------------------------------------------------------------
; AI用待機ステート
[Statedef 50000]
type = S
physics = S
sprpriority = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0           

[State 0, 1]
type = Offset 
trigger1 = 1
y = 10

[State 0,バグったとき用]
type = destroyself
trigger1 = time = 0

[State 21, 1]
type = Turn
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = P2dist X < 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0+var(49) && Anim != 5+var(49)
trigger2 = Anim = 5+var(49) && AnimTime = 0 ;Turn anim over
value = 0+var(49)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State 0, 4] ;前進
type = ChangeState
triggerall = numhelper(10000) = 0
trigger1 = P2BodyDist X = [130,300]
value = 50020

[State 0, 4] ;後退
type = ChangeState
trigger1 = P2BodyDist X = [30,60]
value = 50021

[State 0, 4];後退ダッシュ
type = ChangeState
value = 50105
trigger1 = Random <= var(58)*20
trigger1 = P2BodyDist X = [-30,70]
Trigger1= Enemy,StateType = L

[State 100, 1];しゃがみガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2  
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype != A
value = 152

[State 100, 1];立ちガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype = A
value = 150

[State 0, 4];回り込み
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) != 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = enemynear,animtime <= -20
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A
trigger2 = enemynear,animtime <= -20
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80
trigger3 = enemynear,animtime <= -20
trigger3 = random<=var(58)*12
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 30

[State 0, 4];回り込み on
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) = 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = enemynear,animtime <= -20
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A
trigger2 = enemynear,animtime <= -20
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80
trigger3 = enemynear,animtime <= -20
trigger3 = random<=var(58)*13
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 10030

[State 0, 4];投げ ai
type = ChangeState
value = 900
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = statetype != A
triggerall = stateno != 100
triggerall = numhelper(10000) = 0
triggerall = P2bodydist X = [-const(size.ground.front),22]
triggerall = var(49) != 10000
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = random<=var(58)*20 
Trigger2 = (EnemyNear,StateNo=[120,159])
trigger2 = random<=var(58)*10 

[State 0, 4];投げ on ai
type = ChangeState
value = 800
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = statetype != A
triggerall = stateno != 100
triggerall = numhelper(10000) = 0
triggerall = P2bodydist X = [-const(size.ground.front),22]
triggerall = var(49) = 10000
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = random<=var(58)*20 
Trigger2 = (EnemyNear,StateNo=[120,159])
trigger2 = random<=var(58)*10 

[State 0, 4];onコンボルート　C 直近 ai
type = ChangeState
value = 51200
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
Triggerall= EnemyNear,StateType != A
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-20,50]
trigger1 = statetype != A
trigger1 = Random <= var(58)*30

[State 0, 4];コンボルート E 直近 ai
type = ChangeState
value = 51400
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [-20,50]
triggerall = Random <= var(58)*30
trigger1 = statetype != A

[State 0, 4];コンボルート Ｂ ai
type = ChangeState
value = 51100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,90]
triggerall = Random <= var(58)*5
trigger1 = statetype != A

[State 0, 4] ;ダッシュ
type = ChangeState
triggerall= frontedgebodydist > 10
TriggerAll= EnemyNear,StateType != L
triggerall = numhelper(10000) = 0
trigger1 = random<=var(58)*10
trigger1 = P2BodyDist X = [80,150]
trigger2 = enemy,stateno = 16668
trigger3 = enemynear,stateno = [5000,5500] 
trigger3 = enemy,movetype = H
value = 50100 

[State 0, 4];onコンボルート D ai
type = ChangeState
value = 51300
triggerall = var(59) = 1 && RoundState = 2
Triggerall= EnemyNear,StateType != A
TriggerAll= EnemyNear,StateType != L
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [40,180]
triggerall = Random <= var(58)*15
trigger1 = statetype != A

[State 0, 4];終わりが無いのが終わり
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = PalNo != 12
triggerall = power >= 3000
triggerall = life <= 10000
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*2
value = 99999

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) != 10000
triggerall = numhelper(10000) = 0
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 6666

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = PalNo != 12
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 16666

[State 0, 4];ON無駄無駄（遠）ai
type = ChangeState
value = 11040
TriggerAll= EnemyNear,StateType != L
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [40,100]
triggerall = P2BodyDist Y = [-80,0]
trigger1 = statetype != A 

[State 0, 4];無駄無駄（遠）ai
type = ChangeState
value = 1005
TriggerAll= EnemyNear,StateType != A
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [50,130]
trigger1 = statetype != A 

[State 0, 4];木の根 近　s
type = ChangeState
value = 11100
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [30,60]
triggerall = Random <= var(58)*5
trigger1 = statetype = S

[State 0, 4];木の根 中　s
type = ChangeState
value = 11110
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = Random <= var(58)*12
trigger1 = statetype = S

[State 0, 4];木の根 遠　s
type = ChangeState
value = 11140
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [90,140]
triggerall = Random <= var(58)*16
trigger1 = statetype = S

[State 0, 4];木の根 近　ai
type = ChangeState
value = 1100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,80]
triggerall = Random <= var(58)*2
trigger1 = statetype = S 

[State 0, 4];木の根 中　ai
type = ChangeState
value = 1103
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [85,90]
triggerall = Random <= var(58)*5
trigger1 = statetype = S 

[State 0, 4];サソリOFF
type = ChangeState
value = 1600
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = NumHelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*4

[State 0, 4];サソリON
type = ChangeState
value = 11200
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y >= -80
trigger1 = statetype != A
trigger1 = Random <= var(58)*4

[State 0, 4];植物
type = ChangeState
value = 10440
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*4

[State 0, 4] 
type = ChangeState
trigger1 = roundstate != 2 
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; AI 前進
[Statedef 50020]
type    = S
physics = S
sprpriority = 0
anim = 20+var(49) 
ctrl = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0           

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 21, 1]
type = Turn
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = P2dist X < 0

[State 21, 1]
type = VelSet
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 100, 1];しゃがみガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2  
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype != A
value = 152

[State 100, 1];立ちガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype = A
value = 150

[State 0, 4] ;ジャンプ
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = var(49) = 10000
triggerall= frontedgebodydist > 10
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,StateType != A
trigger1 = random<=var(58)*10
value = 50040

[State 0, 4] ;ダッシュ
type = ChangeState
triggerall= frontedgebodydist > 10
triggerall = var(59) = 1 && RoundState = 2 
TriggerAll= EnemyNear,StateType != L
trigger1 = random<=var(58)*15
trigger1 = numhelper(10000) = 0
trigger1 = P2BodyDist X = [80,150]
trigger2 = enemy,stateno = 16668
trigger3 = enemy,movetype = H
value = 50100

[State 0, 4];onコンボルート　C 直近 ai
type = ChangeState
value = 51200
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
Triggerall= EnemyNear,StateType != A
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-20,50]
trigger1 = statetype != A
trigger1 = Random <= var(58)*30

[State 0, 4];コンボルート E 直近 ai
type = ChangeState
value = 51400
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [-20,50]
triggerall = Random <= var(58)*30
trigger1 = statetype != A

[State 0, 4];コンボルート Ｂ ai
type = ChangeState
value = 51100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,90]
triggerall = Random <= var(58)*5
trigger1 = statetype != A

[State 0, 4];回り込み
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) != 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = enemynear,animtime <= -20
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A
trigger2 = enemynear,animtime <= -20
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80
trigger3 = enemynear,animtime <= -20
trigger3 = random<=var(58)*12
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 30

[State 0, 4];回り込み on
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) = 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = enemynear,animtime <= -20
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A
trigger2 = enemynear,animtime <= -20
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80
trigger3 = enemynear,animtime <= -20
trigger3 = random<=var(58)*13
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 10030

[State 0, 4];木の根 近　s
type = ChangeState
value = 11100
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [30,60]
triggerall = Random <= var(58)*15
trigger1 = statetype = S

[State 0, 4];木の根 中　s
type = ChangeState
value = 11110
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = Random <= var(58)*15
trigger1 = statetype = S

[State 0, 4];木の根 遠　s
type = ChangeState
value = 11140
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [90,140]
triggerall = Random <= var(58)*15
trigger1 = statetype = S

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(49) != 10000
triggerall = numhelper(10000) = 0
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 6666

[State 0, 4];終わりが無いのが終わり
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = PalNo != 12
triggerall = power >= 3000
triggerall = life <= 10000
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*2
value = 99999

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = PalNo != 12
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 16666

[State 0, 4];ON無駄無駄（遠）ai
type = ChangeState
value = 11040
TriggerAll= EnemyNear,StateType != L
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [40,100]
triggerall = P2BodyDist Y = [-80,0]
trigger1 = statetype != A 

[State 0, 4];無駄無駄（遠）ai
type = ChangeState
value = 1005
TriggerAll= EnemyNear,StateType != A
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [50,130]
trigger1 = statetype != A 

[State 0, 4];木の根 近　s
type = ChangeState
value = 11100
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [30,60]
triggerall = Random <= var(58)*5
trigger1 = statetype = S

[State 0, 4];木の根 中　s
type = ChangeState
value = 11110
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = Random <= var(58)*12
trigger1 = statetype = S

[State 0, 4];木の根 遠　s
type = ChangeState
value = 11140
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [90,140]
triggerall = Random <= var(58)*16
trigger1 = statetype = S

[State 0, 4];木の根 近　ai
type = ChangeState
value = 1100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,80]
triggerall = Random <= var(58)*2
trigger1 = statetype = S 

[State 0, 4];木の根 中　ai
type = ChangeState
value = 1103
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [85,90]
triggerall = Random <= var(58)*5
trigger1 = statetype = S 

[State 0, 4];サソリOFF
type = ChangeState
value = 1600
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = NumHelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];サソリON
type = ChangeState
value = 11200
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y >= -80
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];植物
type = ChangeState
value = 10440
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*4

[State 0, 4] ;待機ステートへ
type = ChangeState
trigger1 = P2BodyDist X = [0,80]
value = 50000
ctrl = 0

[State 0, 4] ;勝利
type = ChangeState
trigger1 = RoundState != 2
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; AI 後退
[Statedef 50021]
type    = S
physics = S
sprpriority = 0
anim = 21+var(49) 
ctrl = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0           

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 21, 1]
type = Turn
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = P2dist X < 0

[State 21, 1]
type = VelSet
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = 1
x = const(velocity.walk.back.x)

[State 100, 1];しゃがみガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2  
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype != A
value = 152

[State 100, 1];立ちガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype = A
value = 150

[State 0, 4];回り込み
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) != 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = enemynear,animtime <= -20
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A
trigger2 = enemynear,animtime <= -20
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80
trigger3 = enemynear,animtime <= -20
trigger3 = random<=var(58)*12
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 30

[State 0, 4];回り込み on
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) = 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = enemynear,animtime <= -20
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A
trigger2 = enemynear,animtime <= -20
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80
trigger3 = enemynear,animtime <= -20
trigger3 = random<=var(58)*13
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 10030

[State 0, 4];投げ ai
type = ChangeState
value = 900
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = statetype != A
triggerall = stateno != 100
triggerall = numhelper(10000) = 0
triggerall = p2bodydist X < 10
triggerall = var(49) != 10000
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = random<=var(58)*20 
Trigger2 = (EnemyNear,StateNo=[120,159])
trigger2 = random<=var(58)*10 

[State 0, 4];投げ on ai
type = ChangeState
value = 800
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = statetype != A
triggerall = stateno != 100
triggerall = numhelper(10000) = 0
triggerall = p2bodydist X < 10
triggerall = var(49) = 10000
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = random<=var(58)*20 
Trigger2 = (EnemyNear,StateNo=[120,159])
trigger2 = random<=var(58)*10 

[State 0, 4];onコンボルート　C 直近 ai
type = ChangeState
value = 51200
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
Triggerall= EnemyNear,StateType != A
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-20,50]
trigger1 = statetype != A
trigger1 = Random <= var(58)*30

[State 0, 4];コンボルート E 直近 ai
type = ChangeState
value = 51400
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [-20,50]
triggerall = Random <= var(58)*30
trigger1 = statetype != A

[State 0, 4];コンボルート Ｂ ai
type = ChangeState
value = 51100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,90]
triggerall = Random <= var(58)*5
trigger1 = statetype != A 

[State 0, 4];onコンボルート D ai
type = ChangeState
value = 51300
triggerall = numhelper(11101) = 0
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,180]
triggerall = Random <= var(58)*13
trigger1 = statetype != A

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(49) != 10000
triggerall = numhelper(10000) = 0
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 6666

[State 0, 4];終わりが無いのが終わり
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = PalNo != 12
triggerall = power >= 3000
triggerall = life <= 10000
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*2
value = 99999

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(49) = 10000
triggerall = PalNo != 12
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 16666

[State 0, 4];ON無駄無駄（遠）ai
type = ChangeState
value = 11040
TriggerAll= EnemyNear,StateType != L
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [40,100]
triggerall = P2BodyDist Y = [-80,0]
trigger1 = statetype != A 

[State 0, 4];無駄無駄（遠）ai
type = ChangeState
value = 1005
TriggerAll= EnemyNear,StateType != A
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [50,130]
trigger1 = statetype != A 

[State 0, 4];木の根 近　s
type = ChangeState
value = 11100
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [30,60]
triggerall = Random <= var(58)*5
trigger1 = statetype = S

[State 0, 4];木の根 中　s
type = ChangeState
value = 11110
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = Random <= var(58)*12
trigger1 = statetype = S

[State 0, 4];木の根 遠　s
type = ChangeState
value = 11140
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [90,140]
triggerall = Random <= var(58)*16
trigger1 = statetype = S

[State 0, 4];木の根 近　ai
type = ChangeState
value = 1100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,80]
triggerall = Random <= var(58)*2
trigger1 = statetype = S 

[State 0, 4];木の根 中　ai
type = ChangeState
value = 1103
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [85,90]
triggerall = Random <= var(58)*5
trigger1 = statetype = S 

[State 0, 4];サソリOFF
type = ChangeState
value = 1600
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = NumHelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];サソリON
type = ChangeState
value = 11200
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y >= -80
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];植物
type = ChangeState
value = 10440
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*4

[State 0, 4] ;待機ステートへ
type = ChangeState
trigger1 = P2BodyDist X = [150,300]
value = 50000
ctrl = 0

[State 0, 4] ;勝利
type = ChangeState
trigger1 = RoundState != 2
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; AI ジャンプ　開始
[Statedef 50040]
type    = S
physics = S
anim = 40+var(49)
ctrl = 0
sprpriority = 1

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 41, HitBy]
triggerall = var(59) = 1 && RoundState = 2 
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = var(59)=1
sysvar(1) = 1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = var(59)=1
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50050
ctrl = 1
;---------------------------------------------------------------------------
; AI ジャンプ　上昇
[Statedef 50050]
type    = A
physics = A

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

[State 0, 4];空中強
type = ChangeState
value = 640
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [-10,80]
trigger1 = statetype = A
trigger1 = Random <= var(58)*20

[State 0, 4];空ダ
type = ChangeState
value = 51300
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 100
trigger1 = time >= 8
trigger1 = statetype = A
trigger1 = Random <= var(58)*20

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3
;---------------------------------------------------------------------------
;AI ダッシュ
[Statedef 50100]
type    = S
physics = S
anim = 100+var(49)
sprpriority = 1
ctrl = 0

[State 100, 5]
type = ChangeState
trigger1 = roundstate !=2
value = 0
ctrl = 1

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0       

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, 4];コンボルートE
type = ChangeState
value = 51400
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(49) != 10000
triggerall = NumHelper(10000) = 1
triggerall = P2BodyDist X = [-10,30]
trigger1 = statetype != A
trigger1 = Random <= var(58)*20

[State 0, 4];コンボルートF
type = ChangeState
value = 51500
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(49) != 10000
triggerall = NumHelper(10000) = 0
triggerall = P2BodyDist X = [-10,60]
trigger1 = statetype != A
trigger1 = Random <= var(58)*20

[State 0, 4];回り込み
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) != 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A 
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80 
trigger3 = random<=var(58)*12
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 30

[State 0, 4];回り込み on
type = ChangeState
triggerall = var(59)=1
triggerall = (RoundState = 2) && (Alive)
triggerall = statetype != A 
triggerall = var(49) = 10000
triggerall = NumHelper(29) = 0
triggerall = FrontEdgeBodyDist > 130
trigger1 = random<=var(58)*8
trigger1 = p2statetype != L && P2BodyDist X = [0,80] 
trigger1 = p2movetype = A 
trigger2 = random<=var(58)*10
trigger2 = P2BodyDist X = [-30,80] 
trigger2 = BackEdgeBodyDist < 80 
trigger3 = random<=var(58)*13
trigger3 = P2BodyDist X = [-20,50] 
trigger3 = numhelper(10000) = 1
trigger4 = P2BodyDist X >= 150
trigger4 = statetype != A
trigger4 = Random <= var(58)*4
value = 10030

[State 0, 4];コンボルートＡ
type = ChangeState
value = 51000
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
Triggerall= EnemyNear,StateType != A
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [-30,50]
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];ジャンプ
type = ChangeState
value = 50040
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType = A
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [50,80]
trigger1 = Random <= var(58)*5

[State 0, 4];立ち中
type = ChangeState
value = 210
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(49) != 10000
triggerall = NumHelper(10000) = 0
triggerall = P2BodyDist X = [-10,60]
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];onコンボルート　C
type = ChangeState
value = 51200
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != A
Triggerall= EnemyNear,StateType != A
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-20,40]
trigger1 = statetype != A
trigger1 = Random <= var(58)*15

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(49) != 10000
triggerall = numhelper(10000) = 0
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 6666

[State 0, 4];終わりが無いのが終わり
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = PalNo != 12
triggerall = power >= 3000
triggerall = life <= 500
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*2
value = 99999

[State 0, 4] ;カウンター
type = ChangeState
triggerall = var(49) = 10000
triggerall = PalNo != 12
trigger1 = p2bodydist x <= 100
trigger1 = enemy,movetype != H
trigger1 = random<=var(58)*3
value = 16666

[State 0, 4];ON無駄無駄（遠）ai
type = ChangeState
value = 11040
TriggerAll= EnemyNear,StateType != L
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [40,100]
triggerall = P2BodyDist Y = [-80,0]
trigger1 = statetype != A 

[State 0, 4];無駄無駄（遠）ai
type = ChangeState
value = 1005
TriggerAll= EnemyNear,StateType != A
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = Random <= var(58)*5
triggerall = P2BodyDist X = [50,130]
trigger1 = statetype != A 

[State 0, 4];木の根 近　s
type = ChangeState
value = 11100
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [30,60]
triggerall = Random <= var(58)*5
trigger1 = statetype = S

[State 0, 4];木の根 中　s
type = ChangeState
value = 11110
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = Random <= var(58)*12
trigger1 = statetype = S

[State 0, 4];木の根 遠　s
type = ChangeState
value = 11140
TriggerAll= EnemyNear,StateType != L
triggerall = var(59)=1&& RoundState = 2 
triggerall = numhelper(11101) = 0
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [90,140]
triggerall = Random <= var(58)*16
trigger1 = statetype = S

[State 0, 4];木の根 近　ai
type = ChangeState
value = 1100
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [30,80]
triggerall = Random <= var(58)*2
trigger1 = statetype = S 

[State 0, 4];木の根 中　ai
type = ChangeState
value = 1103
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
Triggerall= EnemyNear,StateType != A 
triggerall = numhelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [85,90]
triggerall = Random <= var(58)*5
trigger1 = statetype = S 

[State 0, 4];サソリOFF
type = ChangeState
value = 1600
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = NumHelper(10000) = 0
triggerall = var(49) != 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];サソリON
type = ChangeState
value = 11200
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y >= -80
trigger1 = statetype != A
trigger1 = Random <= var(58)*5

[State 0, 4];植物
type = ChangeState
value = 10440
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [60,100]
triggerall = P2BodyDist Y = [-50,0]
trigger1 = statetype != A
trigger1 = Random <= var(58)*4

[State 100, 5]
type = ChangeState
trigger1 = P2dist X < 0
trigger2= EnemyNear,StateType = L
trigger3= frontedgebodydist < 0
value = 50101
ctrl = 0

[State 100, 5]
type = ChangeState
TriggerAll= EnemyNear,MoveType != H
trigger1 = P2BodyDist X = [-20,30]
value = 50105
ctrl = 0
;---------------------------------------------------------------------------
; RUN_FWD 2
[Statedef 50101]
type    = S
physics = N
anim = 101+var(49)
sprpriority = 1
ctrl = 0

[State 102, 1]
type = VelAdd
trigger1 = vel x > 0
x = .3

[State 102, 2]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 100, 5]
type = ChangeState
trigger1 = animtime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; RUN_back
[Statedef 50105]
type    = S
physics = S
anim = 105+var(49)
sprpriority = 1
ctrl = 0

[State 100, 5]
type = ChangeState
trigger1 = roundstate !=2
value = 0
ctrl = 1

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0    

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.back.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 1];しゃがみガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = random<=var(58)*90
trigger1 = p2movetype = A  
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype != A
value = 152

[State 100, 1];立ちガード
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = random<=var(58)*90
trigger1 = p2movetype = A 
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype = A
value = 150

[State 100, 5]
type = ChangeState
trigger1 = P2BodyDist X = [200,400] 
trigger2 = AnimTime = 0
trigger3 = frontedgebodydist < 20
trigger4 = enemy,movetype = H
value = 50106
;---------------------------------------------------------------------------
; RUN_BACK 2
[Statedef 50106]
type    = S
physics = N
anim = 106+var(49)
sprpriority = 1

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0    

[State 102, 1]
type = VelAdd
trigger1 = vel x > 0
x = .3

[State 102, 2]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 102, 3]
type = ChangeState
trigger1 = animtime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートＡ 屈み弱
[Statedef 51000]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Time > 5
value = 51001
;---------------------------------------------------------------------------
; コンボルートＡ　屈み弱 2
[Statedef 51001]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 200, 7]
type = ChangeState
triggerall = numhelper(10000) = 0
trigger1 = AnimTime = 0
trigger2 = Time > 5
value = 51002

[State 200, 7]
type = ChangeState
triggerall = numhelper(10000) != 0
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
;コンボルートA 立ち強
[Statedef 51002]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 1

[State -2]
type = Helper
trigger1 = Time = 0
trigger1 = numhelper(10000) = 0
helpertype = normal
name = "ge"
stateno = 241
id = 10000
pos = 35, 10
postype = p1
ownpal = 1
facing = 1

[State 10822, 0]
type = CtrlSet
trigger1 = time >= 25
value = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートB 木の根
[Statedef 51100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 90
ctrl = 0
velset = 0,0
anim = 1100
hitcountpersist = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 100,14
channel = 0  

[State -2]
type = Helper
trigger1 = BackEdgeBodyDist < 160
trigger1 = animelem = 2
trigger1 = numhelper(11101) = 0
helpertype = normal
name = "nekko"
stateno = 1104
id = 11101
pos = 110, 0
postype = p1
ownpal = 1
facing = 1

[State -2]
type = Helper
trigger1 = BackEdgeBodyDist = 160
trigger1 = animelem = 2
trigger1 = numhelper(11101) = 0
helpertype = normal
name = "nekko"
stateno = 1104
id = 11101
pos = 120, 0
postype = p1
ownpal = 1
facing = 1

[State -2]
type = Helper
trigger1 = BackEdgeBodyDist > 160
trigger1 = animelem = 2
trigger1 = numhelper(11101) = 0
helpertype = normal
name = "nekko"
stateno = 1104
id = 11101
pos = -80, 0
postype = front
ownpal = 1
facing = 1

[State 400, 4]
type = ChangeState
trigger1 = time = 12 && RoundState = 2 
value = 51101

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
; コンボルートB Jump Start 
[Statedef 51101]
type    = S
physics = S
anim = 40+var(49)
ctrl = 0
sprpriority = 1

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 41, HitBy]
triggerall = var(59) = 1 && RoundState = 2 
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger1 = var(59) = 0 && RoundState = 2
trigger2 = var(59) = 1 && RoundState = 2
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
trigger1 = var(59) = 0 && RoundState = 2
sysvar(1) = -1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = command != "holdup" 
trigger1 = var(59) = 0 && RoundState = 2
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0 
value = 51102
;---------------------------------------------------------------------------
; コンボルートB Jump Up 
[Statedef 51102]
type    = A
physics = A

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

;空中強
[State 40, 6]
type = ChangeState
value = 51103
triggerall = var(59)=1&& RoundState = 2 
triggerall = var(49) != 10000
triggerall = statetype = A
trigger1 = time >= 8 && RoundState = 2 
trigger1 = P2BodyDist X = [-20,30]  

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3
;---------------------------------------------------------------------------
;コンボルートB 空中強
[Statedef 51103]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,12
channel = 0  

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 2

[State 640, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 77
animtype = heavy
guardflag = HA
priority = 4, Hit
pausetime = 12,12
sparkno = s830
guard.sparkno = s840
sparkxy = -10,-70
hitsound   = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 13
ground.hittime  = 13
guard.hittime  = 13
ground.velocity = -7*const(size.xscale)
air.velocity = -1.5*const(size.xscale),-1+var(19)*1.3

[State 600, 3]
type = changestate
trigger1 = pos y >= -1 
value = 51104
;---------------------------------------------------------------------------
;コンボルートB Jump Land
[Statedef 51104]
type    = S
physics = S
ctrl = 0
anim = 48+var(49)

[State 52, 3 s]
type = posset
trigger1 = 1
trigger1 = var(59) = 1 
y = 0

[State 52, 3 s]
type = velset
trigger1 = 1
trigger1 = var(59) = 1 
y = 0

[State 52, 3 s]
type = ChangeState
value = 51105
triggerall = var(49) != 10000
TriggerAll=EnemyNear,StateType != L
TriggerAll=EnemyNear,MoveType = H
triggerall = statetype != A 
trigger1 = var(59) = 1 && RoundState = 2 

[State 52, 1]
type = Turn
triggerall = var(49) = 10000
trigger1 = P2Dist X < 0

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 1
value = 6, 2

[State 52, 3 s]
type = ChangeState
TriggerAll=EnemyNear,StateType != A
TriggerAll=EnemyNear,StateType != L
trigger1 = time > 1
value = 51105

[State 52, 3 s]
type = ChangeState
trigger1 = animtime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートB 屈み・弱・パンチ 
[Statedef 51105]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 18
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 400, 4]
type = ChangeState
trigger1 = movecontact && time > 8
trigger1 = EnemyNear,MoveType = H  && RoundState = 2 
value = 51106

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートB 屈み・弱・パンチ 2
[Statedef 51106]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 18
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 400, 4]
type = ChangeState
trigger1 = movecontact && time > 5
trigger1 = EnemyNear,MoveType = H && RoundState = 2 
value = 51107

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートB ダッシュ
[Statedef 51107]
type    = S
physics = S
anim = 100+var(49)
sprpriority = 1
ctrl = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0       

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, 4];立ち中
type = ChangeState
value = 51108
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(49) != 10000
triggerall = NumHelper(10000) = 0
triggerall = P2BodyDist X = [-10,35]
trigger1 = statetype != A

[State 100, 5]
type = ChangeState
trigger1 = P2dist X < 0
value = 50101
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートB 立ち中
[Statedef 51108]
type    = S
movetype= A
physics = S
poweradd = 40*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),216,215)
sprpriority = -1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 8

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,11

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 3, Hit
guardflag = M
pausetime = 11,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-72
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

; 下のステートで表示順位を２にして相手より手前にしています。
[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
triggerall = power >= 1000
triggerall = life < 300
trigger1 = numtarget
trigger1 = movecontact && time > 6
value = 71000

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
triggerall = NumHelper(10000) = 0
triggerall = PalNo != 11 || fvar(1) = 80
trigger1 = numtarget
trigger1 = movecontact && time > 6
value = 51109

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;スタンド出現攻撃(エリアルルート)
[Statedef 71000]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0,0
anim = 10240
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 215]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 215]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = heavy
damage = ceil(ifelse((100*fvar(2))<7,7,(100*fvar(2)))),10
guardflag = MA
priority = 4, Hit
pausetime = 12,13
sparkno = s830
guard.sparkno = s840
sparkxy = -10,-85
hitsound = s1, 3
guardsound = s1,5
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
guard.hittime  = 22
ground.velocity = -7,0
air.velocity = -7,0
air.fall = 1
fall = 0
fall.recover = 1
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,13
channel = 0  

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 2

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
trigger1 = Time = 20
trigger1 = numtarget
value = 71001

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;木の根　超必
[Statedef 71001]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0,0
anim = 13151
hitcountpersist = 1

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[state 3000]
type = nothitby
trigger1 = time = 0
value = SCA
time = 55

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,28
channel = 0  

[State 0, ]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "nekko"
stateno = 3152
id = 11101
pos = ceil((P2dist X)-30),0
postype = p1
ownpal = 1
facing = 1

[State 0, ]
type = Helper
trigger1 = AnimElem = 7, = 20
helpertype = normal
name = "nekko"
stateno = 3152
id = 11101
pos = ceil((P2dist X)+50),0
postype = p1
ownpal = 1
facing = -1

[State 0, ]
type = Helper
trigger1 = AnimElem = 7, = 40
helpertype = normal
name = "nekko"
stateno = 3152
id = 11101
pos = ceil((P2dist X)-30),0
postype = p1
ownpal = 1
facing = 1

[State 0, ]
type = Helper
trigger1 = BackEdgeBodyDist > 130
trigger1 = AnimElem = 7, = 40
helpertype = normal
name = "nekko"
stateno = 3153
id = 11101
pos = ceil((P2dist X)-100),0
postype = front
ownpal = 1
facing = -1

[State 0, ]
type = Helper
trigger1 = BackEdgeBodyDist < 131
trigger1 = AnimElem = 7, = 40
helpertype = normal
name = "nekko"
stateno = 3153
id = 11101
pos = ceil((P2dist X)-200),0
postype = front
ownpal = 1
facing = -1

[State 1027, Sound]
type = PlaySnd
trigger1 = AnimElem = 7, = 40
value = 100,29
channel = 0

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
trigger1 = AnimTime = 0
trigger1 = numtarget
value = 71002

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 待機(木の根打ち上げ後)
[Statedef 69998]
type = S
physics = S
sprpriority = 0
ctrl = 0

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 0,バグったとき用]
type = destroyself
trigger1 = time = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0+var(49) && Anim != 5+var(49)
trigger2 = Anim = 5+var(49) && AnimTime = 0 ;Turn anim over
value = 0+var(49)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 440, 4]
type = ChangeState
trigger1 = power >= 2000
trigger1 = p2bodydist x < 95
trigger1 = enemynear,pos y >= -80
trigger1 = enemynear,pos y <= -60
value = 17000

[State 440, 4]
type = ChangeState
trigger1 = p2bodydist x <= 95
trigger1 = enemynear,pos y >= -80
trigger1 = enemynear,pos y <= -60
value = 10240

[State 440, 4]
type = ChangeState
trigger1 = p2bodydist x > 90
trigger1 = enemynear,pos y >= -155
trigger1 = enemynear,pos y <= -125
value = 11200

[State 440, 4]
type = ChangeState
trigger1 = enemynear,movetype != H
trigger2 = inguarddist
trigger3 = roundstate != 2
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 待機(SP木の根後)
[Statedef 69999]
type = S
physics = S
sprpriority = 0
ctrl = 0

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 0,バグったとき用]
type = destroyself
trigger1 = time = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0+var(49) && Anim != 5+var(49)
trigger2 = Anim = 5+var(49) && AnimTime = 0 ;Turn anim over
value = 0+var(49)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 440, 4]
type = ChangeState
trigger1 = time >= 10
value = 71002

[State 440, 4]
type = ChangeState
trigger1 = enemynear,movetype != H
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; ジャンプ開始
[Statedef 71002]
type    = S
physics = S
anim = 40+var(49)
ctrl = 0
sprpriority = 1

[State 40]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59)
sysvar(1) = -1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command != "holdup" ;上を押しっぱなしじゃなかたら
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 71003
ctrl = 0

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;ジャンプ中
[Statedef 71003]
type    = A
physics = A

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
trigger1 = time >= 10
trigger1 = P2BodyDist X <= 50
trigger1 =enemynear,movetype = H
value = 71004
;---------------------------------------------------------------------------
;空中強S
[Statedef 71004]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 10640
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 2

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 100, 12
channel = 0

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 630, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = ceil(ifelse((90*fvar(2))<7,7,(90*fvar(2)))),3
guardflag = HA
priority = 3
pausetime = 10,18
sparkno = s830
guard.sparkno = s840
sparkxy = -5,-35
hitsound = s1,3
guardsound = s1,5
animtype = hard
getpower = 30,0
givepower = 2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -8,8
air.velocity = -8,8
guard.kill = 0
fall.recover = 0
fall = 1
air.fall = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
trigger1 = movecontact
trigger1 = numtarget
value = 71005

[State 600, 3]
type = CtrlSet
trigger1 = Time = 34
value = 1
;---------------------------------------------------------------------------
;無駄無駄S 空中
[Statedef 71005]
type    = A
movetype= A
physics = S
poweradd= 20
ctrl = 0
velset = 0,0
anim = 11500
hitcountpersist = 1

[State 0];ループ回避
type = varset
trigger1 = 1
var(32) = 1

[State 1026, Gravity]
type = Velset
triggerall = prevstateno = 116
trigger1 = time >= 5
x = 5

[State 1026, Gravity]
type = Velset
triggerall = prevstateno = 117
trigger1 = time >= 5
x = -1

[State 1026, Gravity]
type = Velset
triggerall = !var(59)
triggerall = command = "holdfwd"
trigger1 = time >= 5
x = 3

[State 1026, Gravity]
type = Velset
triggerall = !var(59)
triggerall = command = "holdback"
trigger1 = time >= 5
x = -3

[State 1026, Gravity]
type = Velset
triggerall = !var(59)
triggerall = command = "holdup"
trigger1 = time >= 10
y = -3

[State 1026, Gravity]
type = Velset
trigger1 = time = 30
y = 0

[State 1026, Gravity]
type = VelAdd
trigger1 = time >= 20
y = .08

[State 210, Width]
type = Width
trigger1 = 1
value = 30,0

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, 手1]
type = Explod
trigger1 = AnimElem = 3
facing = 1                 
postype = p1
pos = 30,-90
anim = 11050
sprpriority = 2
ownpal = 1
scale = .90, 1
removetime = 9
bindtime = 9999
id = 11050

[State 10820, 手2]
type = Explod
trigger1 = AnimElem = 5
facing = 1                 
postype = p1
pos = 35,-70
anim = 11053
sprpriority = 2
ownpal = 1
scale = .90, 1
removetime = 9
bindtime = 9999
id = 11050

[State 10820, 手3]
type = Explod
trigger1 = AnimElem = 8
facing = 1                 
postype = p1
pos = 31,-77
anim = 11052
sprpriority = 2
ownpal = 1
scale = .90, 1
removetime = 9
bindtime = 9999
id = 11050

[State 10820, 手4]
type = Explod
trigger1 = AnimElem = 11
facing = 1                 
postype = p1
pos = 37,-90
anim = 11051
sprpriority = 2
ownpal = 1
scale = .90, 1
removetime = 9
bindtime = 9999
id = 11050

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
attr = A, SA
damage = ceil(ifelse((12*fvar(2))<3,3,(12*fvar(2)))),2
animtype = hard
guardflag = MA
hitflag = MAF
priority = 2
pausetime = 4, 4
sparkno = s850
guard.sparkno = s840
sparkxy = -10, ceil(-82+var(4)*const(size.yscale))
hitsound = s1, 3
guardsound = s1, 5
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -11*parent,const(size.xscale) * (parent,var(14) = 0)
air.velocity = -0.5,-1
kill = 1 - parent,var(14)
p2facing = 1
air.fall = 1
fall.recovertime = 30
getpower = 10 * (parent,var(14) = 0),0
givepower = 10,0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
trigger3 = AnimElem = 15
trigger4 = AnimElem = 23
attr = A, SA
damage = ceil(ifelse((12*fvar(2))<3,3,(12*fvar(2)))),2
animtype = hard
guardflag = MA
hitflag = MAF
priority = 2
pausetime = 4, 4
sparkno = s850
guard.sparkno = s840
sparkxy = 10, -65
hitsound = s1, 3
guardsound = s1, 5
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -11*parent,const(size.xscale) * (parent,var(14) = 0)
air.velocity = -0.5,-1
kill = 1 - parent,var(14)
p2facing = 1
air.fall = 1
fall.recovertime = 30
getpower = 10 * (parent,var(14) = 0),0
givepower = 10,0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
attr = A, SA
damage = ceil(ifelse((12*fvar(2))<3,3,(12*fvar(2)))),2
animtype = hard
guardflag = MA
hitflag = MAF
priority = 2
pausetime = 4, 4
sparkno = s850
guard.sparkno = s840
sparkxy = -30, -55
hitsound = s1, 3
guardsound = s1, 5
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -11*parent,const(size.xscale) * (parent,var(14) = 0)
air.velocity = -0.5,-1
kill = 1 - parent,var(14)
p2facing = 1
air.fall = 1
fall.recovertime = 30
getpower = 10 * (parent,var(14) = 0),0
givepower = 10,0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100, 16
channel = 0   

[State 1100, VarSet]
type = VarAdd
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(14) < 0
trigger1 = var(6) > 0
var(6) = -1
persistent = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
trigger1 = animelem = 3
var(6) = 16

[State 1100, VarSet]
type = VarSet
triggerall = var(6) > 0
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(6) = 16
persistent = 1
ignorehitpause = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
trigger1 = time = 29
value = 71006

[State 210, ステート変更]
type = ChangeState
trigger1 = time > 29
trigger1 = var(6) = 0
trigger2 = time = 72
value = 50
ctrl = 1

[State 230, 2]
type = changestate
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
;---------------------------------------------------------------------------
;空中強S
[Statedef 71006]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 10640
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 2

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 100, 12
channel = 0

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 630, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = ceil(ifelse((90*fvar(2))<7,7,(90*fvar(2)))),3
guardflag = HA
priority = 3
pausetime = 10,18
sparkno = s830
guard.sparkno = s840
sparkxy = -5,-35
hitsound = s1,3
guardsound = s1,5
animtype = hard
getpower = 30,0
givepower = 2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -8,8
air.velocity = -8,8
guard.kill = 0
fall.recover = 0
fall = 1
air.fall = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2
trigger1 = movecontact
trigger1 = numtarget
value = 11900

[State 600, 3]
type = CtrlSet
trigger1 = Time = 34
value = 1
;---------------------------------------------------------------------------
;コンボルートB　発現立ち中S
[Statedef 51109]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10210
poweradd = 30

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((42*fvar(2))<7,7,(42*fvar(2)))),2
priority = 3, Hit
guardflag = M
pausetime = 2,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-77
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 11
channel = 0  

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 8
value = 51110

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートB　前立ち中S
[Statedef 51110]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
anim = 10215

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 1027, Sound]
type = PlaySnd
trigger1 = AnimElem = 4
value = 100,11

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((42*fvar(2))<7,7,(42*fvar(2)))),2
priority = 3, Hit
guardflag = M
pausetime = 11,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-97
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 400, 4]
type = ChangeState
triggerall = power >= 2000
trigger1 = enemy,movetype = H
trigger1=movecontact && RoundState = 2 
trigger1 = life <= 300 
value = 17000

[State 400, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = life <= 700
trigger1 = enemy,movetype = H
Trigger1=movecontact && RoundState = 2 
value = 13000

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 8
value = 51111

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
;コンボルートB　無駄無駄S 強 
[Statedef 51111]
type    = S
movetype= A
physics = S
poweradd= 20
ctrl = 0
velset = 0,0
anim = 11000
hitcountpersist = 1

[State 210, Width]
type = Width
trigger1 = 1
value = 30,0

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
attr = S, SA
damage = ceil(ifelse((12*fvar(2))<7,7,(12*fvar(2)))),2
animtype = hard
guardflag = M
hitflag = MAF
priority = 2
pausetime = 4, 4
sparkno = s850
guard.sparkno = s840
sparkxy = -10, ceil(-82+var(4)*const(size.yscale))
hitsound = s1, 3
guardsound = s1, 5
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -11*parent,const(size.xscale) * (parent,var(14) = 0)
air.velocity = -0.5,-1
kill = 1 - parent,var(14)
p2facing = 1
air.fall = 1
getpower = 10 * (parent,var(14) = 0),0
givepower = 10,0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
trigger3 = AnimElem = 15
trigger4 = AnimElem = 23
attr = S, SA
damage = ceil(ifelse((12*fvar(2))<7,7,(12*fvar(2)))),2
animtype = hard
guardflag = M
hitflag = MAF
priority = 2
pausetime = 4, 4
sparkno = s850
guard.sparkno = s840
sparkxy = 10, -65
hitsound = s1, 3
guardsound = s1, 5
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -11*parent,const(size.xscale) * (parent,var(14) = 0)
air.velocity = -0.5,-1
kill = 1 - parent,var(14)
p2facing = 1
air.fall = 1
getpower = 10 * (parent,var(14) = 0),0
givepower = 10,0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
attr = S, SA
damage = ceil(ifelse((12*fvar(2))<7,7,(12*fvar(2)))),2
animtype = hard
guardflag = M
hitflag = MAF
priority = 2
pausetime = 4, 4
sparkno = s850
guard.sparkno = s840
sparkxy = -30, -55
hitsound = s1, 3
guardsound = s1, 5
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -11*parent,const(size.xscale) * (parent,var(14) = 0)
air.velocity = -0.5,-1
kill = 1 - parent,var(14)
p2facing = 1
air.fall = 1
getpower = 10 * (parent,var(14) = 0),0
givepower = 10,0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100, 16
channel = 0   

[State 1100, VarSet]
type = VarAdd
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(14) < 0
trigger1 = var(6) > 0
var(6) = -1
persistent = 1
ignorehitpause = 0

[State 1100, VarSet]
type = VarSet
trigger1 = animelem = 3
var(6) = 16

[State 200, 7]
type = velset
trigger1 = time >= 5
x = 12*const(size.xscale)

[State 200, 7]
type = velset
trigger1 = time >= 7
x = 1.4*const(size.xscale)

[State 200, 7]
type = velset
trigger1 = time >= 57
x = 0

[State 1100, VarSet]
type = VarSet
triggerall = var(6) > 0
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "b"
var(6) = 16
persistent = 1
ignorehitpause = 1

[State 210, ステート変更]
type = ChangeState
trigger1 = var(59)<=0
trigger1 = time > 29
trigger1 = var(6) = 0
trigger2 = time = 72
trigger3 = enemy,movetype != H
trigger3 = time > 29
value = 51112
;---------------------------------------------------------------------------
;コンボルートB　無駄無駄S終了
[Statedef 51112]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 11003
hitcountpersist = 1

[State 240, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, NA
animtype  = heavy
damage    = 20, 9
guardflag = M
priority = 4, Hit
pausetime = 15,15
sparkno = s850
guard.sparkno = s840
sparkxy = -10,-60
hitsound   = s1, 3
guardsound = s1,5
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
guard.hittime  = 22
ground.velocity = -8,-2
air.velocity = -10*const(size.xscale),-1+var(19)*1.3
fall = 1
guard.kill = 0
p2stateno = 6664

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 17
channel = 0 

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
;コンボルートC　屈み・弱S
[Statedef 51200]
type    = C
movetype= A
physics = C
poweradd= 15
ctrl = 0
anim = 10400
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 5201, 1] 
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((32*fvar(2))<7,7,(32*fvar(2)))),2
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,12
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-15
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -5*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 7
value = 51201

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートC　屈み・弱S 2
[Statedef 51201]
type    = C
movetype= A
physics = C
poweradd= 15
ctrl = 0
anim = 10400
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((32*fvar(2))<7,7,(32*fvar(2)))),2
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,12
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-15
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -5*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
triggerall = numhelper(4657) = 0
triggerall = PalNo != 12
trigger1 = var(58)>9
trigger1 = EnemyNear,const(size.head.pos.y)>= -58
trigger1 = power > 1000
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 5
value = 3900

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = enemy,movetype = H
trigger1 = enemy,statetype = C
trigger1 = movecontact && time > 5
value = 51111

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = enemy,movetype = H
trigger1 = enemy,statetype != C
trigger1 = movecontact && time > 7
value = 51202

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートC ダッシュ
[Statedef 51202]
type    = S
physics = S
anim = 100+var(49)
sprpriority = 1
ctrl = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0       

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, 4];前立ち弱
type = ChangeState
value = 51203
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = NumHelper(10000) = 0
triggerall = P2BodyDist X = [-20,30]
trigger1 = statetype != A

[State 100, 5]
type = ChangeState
trigger1 = P2dist X < 0
value = 50101
ctrl = 0
;---------------------------------------------------------------------------
;コンボルートC 前立ち弱S
[Statedef 51203]
type    = S
movetype= A
physics = S
poweradd= 20
ctrl = 0
anim = 10205
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = ceil(ifelse((14*fvar(2))<7,7,(14*fvar(2)))),1
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 8, 8
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -96
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -5*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 14
channel = 0  

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 4
value = 0, 0

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 8
value = 51204

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボルートC 立ち中S
[Statedef 51204]
type    = S
movetype= A
physics = S
poweradd= 50
ctrl = 0
velset = 0,0
anim = 10210
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((42*fvar(2))<7,7,(42*fvar(2)))),2
priority = 3, Hit
guardflag = M
pausetime = 6,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-77
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 11
channel = 0  

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 8
value = 51205

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
;コンボルートC　前立ち中S
[Statedef 51205]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
anim = 10215

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 1027, Sound]
type = PlaySnd
trigger1 = AnimElem = 4
value = 100,11

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((42*fvar(2))<7,7,(42*fvar(2)))),2
priority = 3, Hit
guardflag = M
pausetime = 11,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-97
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
triggerall = numhelper(4657) = 0
triggerall = PalNo != 12
trigger1 = power > 1000
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 5
value = 3900

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = NumHelper(10000) = 0
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 8
value = 10240

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートＤ ジャンプ　開始
[Statedef 51300]
type    = S
physics = S
anim = 40+var(49)
ctrl = 0
sprpriority = 1

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 41, HitBy]
triggerall = var(59) = 1 && RoundState = 2 
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = var(59)=1
sysvar(1) = 1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = var(59)=1
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 51301
ctrl = 1
;---------------------------------------------------------------------------
;コンボルートＤ  AI ジャンプ　上昇
[Statedef 51301]
type    = A
physics = A

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

[State 0, 4];サソリON下
type = ChangeState
value = 11250
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y >= -50
trigger1 = time = 8
trigger1 = Random < 300

[State 0, 4];サソリON上
type = ChangeState
value = 11270
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(49) = 10000
triggerall = P2BodyDist X >= 150
triggerall = P2BodyDist Y < -50
trigger1 = time = 8
trigger1 = Random < 300

[State 0, 4];空中ダッシュ
type = ChangeState
value = 51302
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L 
triggerall = var(49) = 10000
trigger1 = statetype = A && time > 8

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3
;------------------------------------------------------------------------------------------
;コンボルートD Air Run
[Statedef 51302]
type = A
movetype = I
physics = N
ctrl = 0
anim = 10116
velset = 0,0
sprpriority = 0

[State 0, noguard]
type = AssertSpecial
trigger1 = 1
flag = noairguard

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoAutoTurn

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,14
channel = 0

[State 0, vel]
type = velset
trigger1 = time = 4
x = const(velocity.run.fwd.x)*1.05

[State 0, ];空中強
type = ChangeState
TriggerAll= EnemyNear,StateType != L
TriggerAll= EnemyNear,MoveType != H
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-20,70]
trigger1 = statetype = A 
value = 10640

[State 0, end]
type = changestate
trigger1 = time = 18
value = 51303
;------------------------------------------------------------------------------------------
;コンボルートD 落下
[Statedef 51303]
type = A
movetype = I
physics = N
ctrl = 0
anim = 10044
sprpriority = 0

[State 0, ];空中バックダッシュ
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-30,50]
trigger1 = statetype = A && time > 0
value = 117

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoAutoTurn

[State 0, vel]
type = velmul
trigger1 = anim = 10044
x = .85

[State 0, vel]
type = veladd
trigger1 = anim = 10044
y = .32

[State 0, end]
type = changestate
trigger1 = pos y >= 0 && vel y > 0
value = 52
;---------------------------------------------------------------------------
; コンボルートE 屈み弱
[Statedef 51400]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 5201, 1] 
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = movecontact && time > 5
triggerall = NumHelper(10000) = 0
triggerall = PalNo != 11 || fvar(1) = 80

trigger1 = enemy,movetype != A
trigger1 = enemy,statetype = C
trigger2 = enemy,movetype != A
trigger2 = EnemyNear,const(size.head.pos.y)>= -57
value = 51600

[State 200, 7]
type = ChangeState
trigger1 = p2statetype != L && P2BodyDist X = [-10,50] 
trigger1 = enemy,movetype != A
trigger1 = enemy,statetype != C
trigger1 = Time > 9
value = 51401

[State 200, 7]
type = ChangeState
trigger1 = p2statetype != L && P2BodyDist X = [50,120] 
trigger1 = enemy,movetype != A
trigger1 = Time > 5
value = 51403

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートE　屈み弱 2
[Statedef 51401]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = movecontact && time > 5
triggerall = NumHelper(10000) = 0
triggerall = PalNo != 11 || fvar(1) = 80
trigger1 = enemy,movetype != A
trigger1 = enemy,statetype = C
trigger2 = enemy,movetype != A
trigger2 = EnemyNear,const(size.head.pos.y)>= -57
value = 51600

[State 200, 7]
type = ChangeState
trigger1 = p2statetype != L && P2BodyDist X = [-10,50] 
trigger1 = enemy,movetype != A
trigger1 = enemy,statetype != C
trigger1 = Time > 9
value = 51402

[State 200, 7]
type = ChangeState
trigger1 = p2statetype != L && P2BodyDist X = [50,120] 
trigger1 = enemy,movetype != A
trigger1 = Time > 5
value = 51403

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートE　屈み弱 3
[Statedef 51402]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = movecontact && time > 5
triggerall = NumHelper(10000) = 0
triggerall = PalNo != 11 || fvar(1) = 80
trigger1 = enemy,movetype != A
trigger1 = enemy,statetype = C
trigger2 = enemy,movetype != A
trigger2 = EnemyNear,const(size.head.pos.y)>= -57
value = 51600

[State 200, 7]
type = ChangeState
trigger1 = enemy,statetype != C
trigger1 = enemy,movetype != A
trigger1 = Time > 5
value = 51403

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
;コンボルートC ダッシュ
[Statedef 51403]
type    = S
physics = S
anim = 100+var(49)
sprpriority = 1
ctrl = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = 1
value = 0       

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, 4];立ち中
type = ChangeState
value = 51108
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = P2BodyDist X = [-20,40]
trigger1 = statetype != A && time > 0

[State 100, 5]
type = ChangeState
trigger1 = P2dist X < 0
value = 50101
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートF 屈み弱
[Statedef 51500]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
sprpriority = 2

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = prevstateno != [100,105]
x = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((18*fvar(2))<7,7,(18*fvar(2)))),0
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-42
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 200, 7]
type = ChangeState
trigger1 = enemy,movetype = H
trigger1 = Time > 9
value = 51403

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
;---------------------------------------------------------------------------
;コンボパーツ 屈み弱スタンド出現攻撃
[Statedef 51600]
type    = C
movetype= A
physics = C
poweradd= 15
ctrl = 0
anim = 10400
sprpriority = 2

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((32*fvar(2))<7,7,(32*fvar(2)))),2
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-15
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 400, 3]
type = CtrlSet
trigger1 = Time = 7
value = 1

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = numhelper(4657) = 0
triggerall = PalNo != 12
trigger1 = life <= 500 
trigger1 = enemy,movetype = H
trigger1 = movehit && time > 5
value = 3900

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = enemy,movetype = H
trigger1 = movecontact && time > 5
value = 51111

[State 210, 5]
type = ChangeState
trigger1 = animtime = 0
trigger1 = enemy,movetype != H
value = 50000
ctrl = 0
;---------------------------------------------------------------------------
; コンボルートG ジャンプ　開始
[Statedef 51700]
type    = S
physics = S
anim = 40+var(49)
ctrl = 0
sprpriority = 1

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 41, HitBy]
triggerall = var(59) = 1 && RoundState = 2 
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = var(59)=1
sysvar(1) = 1

[State 40, 0]
type = VarSet
trigger1 = time = 0
var(5) = 0

;ショートジャンプフラグ設定
[State 40, 0]
type = VarSet
trigger1 = var(59)=1
var(5) = 1

[State 40, 0];ショートジャンプ
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -6.9

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(5) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 51701
ctrl = 1
;---------------------------------------------------------------------------
;コンボルートG  AI ジャンプ　上昇
[Statedef 51701]
type    = A
physics = A

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))+var(49)

[State 0, 4];空中ダッシュ
type = ChangeState
value = 51702
triggerall = var(59)=1&& RoundState = 2 
TriggerAll= EnemyNear,StateType != L 
triggerall = var(49) = 10000
trigger1 = statetype = A && time > 7

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3
;------------------------------------------------------------------------------------------
;コンボルートG Air Run
[Statedef 51702]
type = A
movetype = I
physics = N
ctrl = 0
anim = 10116
velset = 0,0
sprpriority = 0

[State 0, noguard]
type = AssertSpecial
trigger1 = 1
flag = noairguard

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoAutoTurn

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,14
channel = 0

[State 0, vel]
type = velset
trigger1 = time = 4
x = const(velocity.run.fwd.x)*1.05

[State 0, ];空中弱
type = ChangeState
TriggerAll= EnemyNear,StateType != L
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-20,30]
trigger1 = statetype = A && time > 3
value = 51704

[State 0, end]
type = changestate
trigger1 = time = 18
value = 51703
;------------------------------------------------------------------------------------------
;コンボルートG 落下
[Statedef 51703]
type = A
movetype = I
physics = N
ctrl = 0
anim = 10044
sprpriority = 0

[State 0, ];空中バックダッシュ
type = ChangeState
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) = 10000
triggerall = P2BodyDist X = [-30,50]
trigger1 = statetype = A && time > 0
value = 117

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoAutoTurn

[State 0, vel]
type = velmul
trigger1 = anim = 10044
x = .85

[State 0, vel]
type = veladd
trigger1 = anim = 10044
y = .32

[State 0, end]
type = changestate
trigger1 = pos y >= 0 && vel y > 0
value = 52
;---------------------------------------------------------------------------
;空中弱S
[Statedef 51704]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim = 10600
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 100, 14

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = light
damage = ceil(ifelse((40*fvar(2))<7,7,(40*fvar(2)))),0
guardflag = HA
priority = 2, Hit
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-58
hitsound   = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -7*const(size.xscale)
air.velocity = -1.5*const(size.xscale),-1+var(19)*1.3

[State 600, 3]
type = changestate
trigger1 = movecontact && time > 4
value = 51705

[State 600, 3]
type = CtrlSet
trigger1 = Time = 18
value = 1
;---------------------------------------------------------------------------
;空中強S
[Statedef 51705]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 10640
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 2

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 100, 12
channel = 0

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 630, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = ceil(ifelse((90*fvar(2))<7,7,(90*fvar(2)))),3
guardflag = HA
priority = 3
pausetime = 10,18
sparkno = s830
guard.sparkno = s840
sparkxy = -5,-35
hitsound = s1,3
guardsound = s1,5
animtype = hard
getpower = 30,0
givepower = 2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -8,8
air.velocity = -8,8
guard.kill = 0
fall.recover = 0
fall = 1
air.fall = 1

[State 600, 3]
type = CtrlSet
trigger1 = Time = 34
value = 1
;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 0, 1]
type = Offset
triggerall = var(49) = 10000
trigger1 = 1
y = 10

[State 200, 1]
type = Changeanim
triggerall = var(49) = 10000  
trigger1 = time = 0
value = 10000

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; 勝った動作１
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181
;---------------------------------------------------------------------------
; 勝った動作２
[Statedef 181]
type = S
ctrl = 0
anim = 181+var(49)
velset = 0,0

[State 10820, おまけ]
type = Explod
triggerall = !var(49)
trigger1 = animelem = 3
facing = 1                 
postype = p1
pos = 0,0
anim = 183
sprpriority = 0
ownpal = 1
scale = 0.95, 1
removetime = -1

[State 10820, おまけ]
type = Explod
triggerall = !var(49)
trigger1 = animelem = 3
facing = 1                 
postype = p1
pos = 0,0
anim = 184
sprpriority = 0
ownpal = 1
scale = 0.95, 1
removetime = -1

[State 10820, おまけ]
type = Explod
triggerall = !var(49)
trigger1 = animelem = 3
facing = 1                 
postype = p1
pos = 0,0
anim = 185
sprpriority = 0
ownpal = 1
scale = 0.95, 1
removetime = -1

[State 0, 1]
type = Offset
triggerall = var(49) = 10000
trigger1 = 1
y = 10

[State 191, 99] 
type = AssertSpecial
trigger1 = life <= 100
trigger1 = Time = [0,230]
flag = roundnotover

[State 200, 1]
type = PlaySnd
triggerall = var(49) = 10000  
trigger1 = animelem = 1
value = 100, 31
channel = 0

[State 191, 2] 
type = AssertSpecial
triggerall = var(49) = 10000 
trigger1 = Time = [0,230]
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[Statedef 191 - Intro]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 200, 1]
type = PlaySnd
triggerall = animelem = 3
trigger1 = p2name = "dio"
trigger2 = p2name = "final dio" 
trigger3 = p2name = "diavolo" 
value = 100, 31
channel = 0

[State 200, 1]
type = PlaySnd
triggerall = p2name != "dio" 
triggerall = p2name != "final dio" 
triggerall = p2name != "diavolo" 
trigger1 = animelem = 3
value = 100, 21
channel = 0

[State 191, 1] 
type = ChangeAnim
trigger1 = p2name = "dio" 
trigger2 = p2name = "final dio" 
trigger3 = p2name = "diavolo" 
triggerall = RoundState = 0
value = 1910

[State 191, 1] 
type = ChangeAnim
triggerall = p2name != "dio" 
triggerall = p2name != "final dio" 
triggerall = p2name != "diavolo" 
trigger1 = RoundState = 0
value = 190

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 4] 
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
; GER 

 
 
;---------------------------------------------------------------------------
;立ち弱S
 
;---------------------------------------------------------------------------
; ガーキャン soff
 
;---------------------------------------------------------------------------
;ガーキャンGE
 
;---------------------------------------------------------------------------
; ガーキャン son
 
;---------------------------------------------------------------------------
;前立ち弱S
 
;---------------------------------------------------------------------------
;立ち弱スタンド出現攻撃
[Statedef 10220]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10200
poweradd = 30

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifelse((21*fvar(2))<7,7,(21*fvar(2)))),2
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 8, 8
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -96
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -5*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 14
channel = 0  

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 3
value = 0,0

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;前立ち弱スタンド出現攻撃
[Statedef 10225]
type    = S
movetype= A
physics = S
poweradd= 20
ctrl = 0
anim = 10205
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 14
channel = 0  

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 4
value = 0, 0

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = ceil(ifelse((14*fvar(2))<7,7,(14*fvar(2)))),2
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 8, 8
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -96
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -5*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 立ち中の動作
; 強パンチの設定は上とほぼ同じです。
; 違うのはsprpriority（表示順位）が-1になっている事です。
; これでは攻撃を出しても絵は相手の後ろに隠れてしまいます
; これはカンフーマンの強パンチを見れば分かるように奥から手前に手を振っている事を
; 表現するためです、最初は手が相手より奥、振り切った時は相手より手前になる
; 投げの場合もこういうことが必要です（掴んでいるようにみせたりするため）
 
;---------------------------------------------------------------------------
;立ち中S
 
;---------------------------------------------------------------------------
;前立ち中S
 
;---------------------------------------------------------------------------
;立ち中スタンド出現攻撃
[Statedef 10250]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
velset = 0,0 ;ぴたっと止まる
ctrl = 0
anim = 10210
poweradd = 30

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((42*fvar(2))<7,7,(42*fvar(2)))),2
priority = 3, Hit
guardflag = M
pausetime = 2,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-77
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 11
channel = 0  

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;前立ち中スタンド出現攻撃
[Statedef 10255]
type    = S  ;Stand
movetype= A  ;Attack
physics = S  ;Stand
ctrl = 0
anim = 10215
poweradd = 30

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((42*fvar(2))<7,7,(42*fvar(2)))),2
priority = 3, Hit
guardflag = M
pausetime = 11,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-97
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 100, 11
channel = 0  

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち強
 
;---------------------------------------------------------------------------
;立ち強 helper
 
;---------------------------------------------------------------------------
;立ち強S
 
;---------------------------------------------------------------------------
;立ち強スタンド出現攻撃
[Statedef 10270]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0,0
anim = 10240
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 215]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 215]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = heavy
damage = ceil(ifelse((100*fvar(2))<7,7,(100*fvar(2)))),10
guardflag = M
priority = 4, Hit
pausetime = 12,13
sparkno = s830
guard.sparkno = s840
sparkxy = -10,-85
hitsound = s1, 3
guardsound = s1,5
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
guard.hittime  = 22
ground.velocity = -10,-4
air.velocity = -10,-5
air.fall = 1
fall = 1
fall.recover = 0
guard.kill = 0
envshake.time = 5
envshake.frep = 300
envshake.ampl = 7

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,13
channel = 0  

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 2

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち強スタンド出現攻撃
 
;---------------------------------------------------------------------------
;屈み・弱・パンチ
;     これも通常の攻撃とはあまり変わらないが、変わった点といえばpriority（優先順位）
;     が３になっている事です。
;     これによって他の大抵の攻撃よりも優先権が下がる事になり相手と攻撃がかち合った
;     時は負けてしまいます。
 
;---------------------------------------------------------------------------
;屈み・弱S
 
;---------------------------------------------------------------------------
;屈み弱スタンド出現攻撃
[Statedef 10420]
type    = C
movetype= A
physics = C
poweradd= 15
ctrl = 0
anim = 10400
sprpriority = 2

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((32*fvar(2))<7,7,(32*fvar(2)))),2
priority = 2, Hit
animtype  = Light
hitflag = MAF
guardflag = LA
pausetime = 10,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-15
hitsound   = s1, 0
guardsound = s1,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale)
air.velocity = -2.5*const(size.xscale),-1+var(19)*1.3

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 400, 4]
type = ChangeState
triggerall = command = "FF"
trigger1 = time >= 7
value = 100

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;屈み中
; CNS difficulty: easy
 
;---------------------------------------------------------------------------
;屈み・中S
 
;---------------------------------------------------------------------------
;屈み中スタンド出現攻撃
[Statedef 10450]
type    = C
movetype= A
physics = C
poweradd= 15
ctrl = 0
anim = 10410
sprpriority = 2

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((28*fvar(2))<7,7,(28*fvar(2)))),0
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkxy = -10,-15
sparkno = s820
guard.sparkno = s840
hitsound = s1, 1
guardsound = s1,5
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 0, けむり]
type = Explod
trigger1 = AnimElem = 1
postype = p1
pos = 0,0
anim = 20019
sprpriority = 4
ownpal = 1

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;屈み・弱・キック
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd = 20*!(var(20))
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = ceil(ifelse((28*fvar(2))<7,7,(28*fvar(2)))),0
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 0
sparkxy = -10,-8
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み強
;
;これは足払いの効果を出すためにground.typeがTripになっています。
;それ以外は特にありません。
 
;---------------------------------------------------------------------------
;屈み強 helper
 
;---------------------------------------------------------------------------
;屈み強S
 
;---------------------------------------------------------------------------
;屈み強 helper ツタ
 
;---------------------------------------------------------------------------
;空中弱
 
;---------------------------------------------------------------------------
;空中弱S
 
;---------------------------------------------------------------------------
;空中弱スタンド出現攻撃
[Statedef 10620]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim = 10600
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9996
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = AnimElem = 3
value = 100,14

[State 400, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = light
damage = ceil(ifelse((40*fvar(2))<7,7,(40*fvar(2)))),0
guardflag = HA
priority = 2, Hit
pausetime = 10,10
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-58
hitsound   = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
guard.hittime  = 16
ground.velocity = -7*const(size.xscale)
air.velocity = -1.5*const(size.xscale),-1+var(19)*1.3

[State 600, 3]
type = CtrlSet
trigger1 = Time = 18
value = 1
;---------------------------------------------------------------------------
;空中中
 
;---------------------------------------------------------------------------
;空中中S
 
;---------------------------------------------------------------------------
;空中中スタンド出現攻撃
[Statedef 10650]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim = 10610
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9996
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 100, 11

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = ceil(ifelse((52*fvar(2))<7,7,(52*fvar(2)))),0
guardflag = HA
animtype = medium
priority = 3, Hit
pausetime = 11,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-55
hitsound   = s1, 1
guardsound = s1,5
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
guard.hittime  = 19
ground.velocity = -5*const(size.xscale)
air.velocity = -3*const(size.xscale),-2+var(19)*1.3

[State 600, 3]
type = CtrlSet
trigger1 = Time = 22
value = 1
;---------------------------------------------------------------------------
;空中強
 
;---------------------------------------------------------------------------
;空中強S
 
;---------------------------------------------------------------------------
;空中強スタンド出現攻撃
[Statedef 10670]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 10640
sprpriority = 2

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1                 
postype = p1
pos = -10,0
anim = 9996
sprpriority = 2
ownpal = 1
scale = 0.90, 1
removetime = 1

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 2

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 100, 12
channel = 0

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 0];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = time = 0
var(2) = 1

[State 0, ばひゅーん]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,16

[State 630, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = ceil(ifelse((90*fvar(2))<7,7,(90*fvar(2)))),3
guardflag = HA
priority = 3
pausetime = 10,18
sparkno = s830
guard.sparkno = s840
sparkxy = -5,-35
hitsound = s1,3
guardsound = s1,5
animtype = hard
getpower = 30,0
givepower = 2,0
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -8,8
air.velocity = -8,8
guard.kill = 0
fall.recover = 0
fall = 1
air.fall = 1

[State 600, 3]
type = CtrlSet
trigger1 = Time = 34
value = 1
;---------------------------------------------------------------------------
;掴み son
  
;---------------------------------------------------------------------------
;成功（放り投げる）son
 
;---------------------------------------------------------------------------
;投げ（掴みモーション）
 
;---------------------------------------------------------------------------
;投げ（本体）
 
;---------------------------------------------------------------------------
;投げぬけ 自分（y.y氏製作）
[Statedef 930]
type = A
movetype = I
physics = A
anim = Ifelse(var(49)=10000,15040,5210)
velset = -3,-5

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 0, target]
type = Sprpriority
trigger1 = var(49)=10000
value = 1

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 940

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
;---------------------------------------------------------------------------
;投げ抜け　相手
[Statedef 940]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1
---------------------------------------------------
;スタンドon 投げ　あいて
[Statedef 919]
type    = A
movetype= H
physics = N
velset = 0,0
poweradd = 40

[State 820, 1]
type = ChangeAnim2;敵（今回は自キャラ）からアニメーションを参照します。
Trigger1 = Time = 0
value = 905

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
Trigger1 = AnimTime = 0
value = 5035
ctrl=0

;---------------------------------------------------------------------------
;投げ（スタンド）
[Statedef 10901]
type = S
movetype = A
physics = N
anim = 10902
velset = 0,0
sprpriority = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 820, sprpriority]
type = sprpriority
trigger1 = animelem = 7
value = 2

[State 0, 4]
type = ChangeState
trigger1 = root,stateno = 950 && root,time = 1
trigger2 = AnimTime = 0
value = 10000
;---------------------------------------------------------------------------
;投げ helper
 
;---------------------------------------------------------------------------
;投げ（相手）
 

;---------------------------------------------------------------------------
;投げ（相手）3
[Statedef 909]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5000

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
;---------------------------------------------------------------------------
; 投げ(スタンド)
[Statedef 801]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 10000
sprpriority = 1

[State 230, 3]
type = destroyself
trigger1 = AnimTime = 0
trigger2 = parent,stateno != 800
;---------------------------------------------------------------------------
; 無駄無駄弱
; 
;   これは必殺技のステートです、主な違いはattrがS, SAになっているところで
;   意味はＳ：立ち Ｓ：必殺技 Ａ：攻撃となっています。
;   これは相手のとる反応を左右するので正確にする必要があります
;   後、攻撃が近くで当たるのと遠くで当たるのを区別しています
;   1000,5はtrigger1 = p2bodydist X < 40と記述があります
;   意味は「相手の水平位置が40より近い」ということです。
;   1000,6はtrigger1 = p2bodydist X >= 40となっています、すると
;   意味は「相手の水平位置が40以上」となっているので近くなら強く
;   遠くなら弱くダメージがあると言う事です。

 
;---------------------------------------------------------------------------
; 無駄無駄（弱）(スタンド)
 

;---------------------------------------------------------------------------
; 無駄無駄終了（弱）(スタンド)
 
;---------------------------------------------------------------------------
;イントロ終了（弱）(スタンド)
[Statedef 101002]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 10193
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 10193
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 2
ID = 1002
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = animtime = 0
value = 100,1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; 無駄無駄中

 
;---------------------------------------------------------------------------
; 無駄無駄（中）(スタンド)
 
;---------------------------------------------------------------------------
; 無駄無駄強
 
;---------------------------------------------------------------------------
; 無駄無駄（強）(スタンド)
 
;---------------------------------------------------------------------------
; 食らい(スタンド)
[Statedef 5997]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0
anim = 5998
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 230, 2]
type = removeexplod
trigger1 = time = 0
id = 3014
ignorehitpause = 1

[State 230, 2]
type = removeexplod
trigger1 = time = 0
id = 3015
ignorehitpause = 1

[State 230, 2]
type = removeexplod
trigger1 = time = 0
id = 3016
ignorehitpause = 1

[State 230, 2]
type = removeexplod
trigger1 = time = 0
id = 3017
ignorehitpause = 1

[State 230, 2]
type = removeexplod
trigger1 = time = 0
id = 3018
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,hitshakeover
trigger2 = root,hitshakeover
trigger2 = root,prevstateno = [5000,5099]
value = 5998
;---------------------------------------------------------------------------
; 食らい(スタンド)
[Statedef 5998]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0
anim = 5998
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 5999
id = 5999
pos = 0,ceil(-70*const(size.yscale))
postype = p1
sprpriority = 0
removetime = 10
bindtime = -1
scale = const(size.xscale),const(size.yscale)
persistent = 0

[State 1000, 2]
type = Varset
trigger1 = !hitshakeover
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = hitshakeover
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 0
ID = 5999
scale = const(size.xscale)+var(13)/11.5 , const(size.yscale)-var(13)/11.5

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 1

[State 230, 2]
type = destroyself
trigger1 = root,hitover
trigger2 = root,movetype != H && time > 0
;---------------------------------------------------------------------------
;被ダメ時スタンド消去(スタンド被ダメ)
[Statedef 1020]
type = U
movetype = H
physics = N
ctrl = 0
anim = 1020
velset = 0,0
sprpriority = -1

[State 0, assert]
type = offset
trigger1 = 1
y = -10
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = HitShakeOver
value = 1520
;---------------------------------------------------------------------------
;被ダメ時スタンド消去2
[Statedef 1520]
type = U
movetype = H
physics = N
ctrl = 0
anim = 1020
velset = 0,0
sprpriority = -1

[State 0, assert]
type = offset
trigger1 = 1
y = -10
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 4

[State 0, hitvel]
type = hitvelset
trigger1 = prevstateno = 9500
trigger1 = !time
x = 1
y = 1

[State 0, hitvel]
type = velset
trigger1 = prevstateno = 9505
trigger1 = !time
x = -2
y = -4

[State 0, pos]
type = posfreeze
trigger1 = time >= 4

[State 0, scale]
type = angledraw
trigger1 = time < 12
scale = (const(size.xscale)-(.08*time)),(const(size.yscale)+(.03*time))

;[State 0, scale]
;type = angledraw
;trigger1 = time < 12
;scale = (const(size.xscale)+(.04*time)),(const(size.yscale)-(.075*time))

[State 0, anim]
type = changeanim
trigger1 = time = 12
value = 9994

[State 0, end]
type = destroyself
trigger1 = HitOver && time >= 12
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける

;---------------------------------------------------------------------------
;無駄無駄中S
 
;---------------------------------------------------------------------------
;無駄無駄S 強 
 
;---------------------------------------------------------------------------
;無駄無駄S 空中
 
;---------------------------------------------------------------------------
; 無駄無駄ラッシュ S(超必殺)　
 
;---------------------------------------------------------------------------
;無駄無駄SP 空中
 
;---------------------------------------------------------------------------
;木の根　超必
 
;---------------------------------------------------------------------------
;無駄無駄無駄無駄
 
;-----------------------------------------------
; 無駄無駄無駄無駄・相手くらい空中
 
;------------------
;壁に当たる状態

[Statedef 17004]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 17004

[State 210, 3]
type = ScreenBound
trigger1 = 1
value = 1

[State 1060, 5]
type = envshake
trigger1 = Time = 0
time = 10
frep = 130
ampl = 7

[State 1027, Turn]
type = Turn
trigger1 = Time = 10

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 10
x = 15

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 10
x = -3
y = -2.5

[State 1026, Gravity]
type = VelAdd
trigger1 = time >= 10
y = .45

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3
ownpal = 1

;[State 1027, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 5050, 4]
type = selfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = time >= 17
trigger1 = Command = "recovery"
value = 5200

[State 5050, 5]
type = selfState
triggerall = Vel Y > -1
triggerall = alive
triggerall = time >= 17
trigger1 = Command = "recovery"
value = 5210

[State 1028, Hit ground]
type = SelfState
trigger1 = Time > 10
trigger1 = (Vel y > 0) && (Pos y > 10)
value = 5110
;---------------------------------------------------------------------------
;植物の根 弱
 
;---------------------------------------------------------------------------
;helper 木の根
 
;---------------------------------------------------------------------------
;植物の根 中
[Statedef 1103]
type    = S
movetype= A
physics = S
poweradd= 90
ctrl = 0
velset = 0,0
anim = 1100
hitcountpersist = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 100,14
channel = 0  

[State -2]
type = Helper
trigger1 = BackEdgeBodyDist < 160
trigger1 = animelem = 2
trigger1 = numhelper(11101) = 0
helpertype = normal
name = "nekko"
stateno = 1104
id = 11101
pos = 110, 0
postype = p1
ownpal = 1
facing = 1

[State -2]
type = Helper
trigger1 = BackEdgeBodyDist = 160
trigger1 = animelem = 2
trigger1 = numhelper(11101) = 0
helpertype = normal
name = "nekko"
stateno = 1104
id = 11101
pos = 120, 0
postype = p1
ownpal = 1
facing = 1

[State -2]
type = Helper
trigger1 = BackEdgeBodyDist > 160
trigger1 = animelem = 2
trigger1 = numhelper(11101) = 0
helpertype = normal
name = "nekko"
stateno = 1104
id = 11101
pos = -80, 0
postype = front
ownpal = 1
facing = 1

[State 0, 4];ダッシュ
type = ChangeState
triggerall = var(59)=1&& RoundState = 2 
Triggerall= EnemyNear,StateType != A
TriggerAll= EnemyNear,StateType != L
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [50,140]
trigger1 = Random <= var(58)*20
trigger1 = AnimTime = 0
value = 50100

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;helper 木の根 中
[Statedef 1104]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1101
sprpriority = 3

[State 181, 押し判定]
type = PlayerPush
trigger1 = 1
value = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 301,ステート移動]
type = changestate
trigger1 = Time = 20    ;普通に消えるときの条件。必須
value = 1102
;---------------------------------------------------------------------------
;植物の根 強
 
;---------------------------------------------------------------------------
;helper 木の根 強
 
;---------------------------------------------------------------------------
;植物生成
 
;---------------------------------------------------------------------------
;花
 
;---------------------------------------------------------------------------
;花 カウンター
 
;---------------------------------------------------------------------------
;カウンター 
[Statedef 1404]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
sprpriority = 6
anim = 1404
ctrl = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1, 3

[State 1010, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = hard
damage    = 45
priority  = 7, Hit
guardflag = A
pausetime = 0,14
sparkno = s830
guard.sparkno = s840
sparkxy = 0,-30
hitsound = s1, 3
guardsound = s1, 5
guard.dist = 0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
guard.hittime  = 20
ground.velocity = -1*const(size.xscale),0
air.velocity = -1*const(size.xscale),0
guard.kill = 0

[state 6031,終了]
type=destroyself
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
;植物生成
[Statedef 1405]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 130
ctrl = 0
velset = 0,0
anim = 1100
hitcountpersist = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 100,14
channel = 0  

[State -2]
type = Helper
trigger1 = animelem = 2
trigger1 = numhelper(1401) = 0
helpertype = normal
name = "flower"
stateno = 1401
id = 1401
pos = 60, 0
postype = p1
ownpal = 1
facing = 1

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;植物生成
[Statedef 1406]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 130
ctrl = 0
velset = 0,0
anim = 1100
hitcountpersist = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 100,14
channel = 0  

[State -2]
type = Helper
trigger1 = animelem = 2
trigger1 = numhelper(1401) = 0
helpertype = normal
name = "flower"
stateno = 1401
id = 1401
pos = 60, 0
postype = p2
ownpal = 1
facing = -1

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;カブト生成 s
[Statedef 11400]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 130
ctrl = 0
velset = 0,0
anim = 11400
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 100,14
channel = 0  

[State -2]
type = Helper
trigger1 = animelem = 2
trigger1 = numhelper(1401) = 0
helpertype = normal
name = "fly"
stateno = 11401
id = 11401
pos = 55, -110
postype = p1
ownpal = 1
facing = 1

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;カブト
[Statedef 11401]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 11401
sprpriority = 3

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 1
x = 15

[State 181, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0

[State 1009, 受け止め定義]
type = ReversalDef
trigger1 = 1
reversal.attr = SAC, AA             ;受け止める相手の攻撃属性を指定
;reversal.attr = SA, NA,SA,HA,NP,SP,HP ;（↑と意味は同じ）
pausetime     = 0,0
numhits       = 0
sparkno       = s29999
sparkxy       = 0,0
P1StateNo     = 11403

[State 181, ]
type = AttackDist
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191, 2] 
type = destroyself
trigger1 = time = 200
;---------------------------------------------------------------------------
;カブト カウンター
[Statedef 11403]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 29999
sprpriority = 0

[State 1010, BGcolor]
type = BGPalFX
trigger1 = time = 1
time = 2
add = 256,256,256
mul = 256,256,256
sinadd = 256,256,256,10
invertall = 0
color = 0

[State -2]
type = Helper
trigger1 = Time = 1
helpertype = normal
name = "act1"
stateno = 1404
id = 1404
pos = 0, -50
postype = p2
ownpal = 1
facing = 1

[State 191, 2] 
type = destroyself
trigger1 = time = 3
;---------------------------------------------------------------------------
;植物の根S 弱
 
;---------------------------------------------------------------------------
;helper 木の根　dem
[Statedef 41101]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 1102
sprpriority = 3

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = heavy
damage = ceil(ifelse((35*root,fvar(2))<7,7,(35*root,fvar(2)))),0
hitflag = MAF
guardflag = M
priority = 4, Hit
pausetime = 12,12
sparkno = s830
guard.sparkno = s840
sparkxy = -10,-85
hitsound = s1, 3
guardsound = s1,5
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
guard.hittime  = 22
ground.velocity = -10*const(size.xscale)
air.velocity = -10*const(size.xscale),-1+var(19)*1.3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0


[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 24

[State 181, 押し判定]
type = PlayerPush
trigger1 = 1
value = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 301,けす]
type = destroyself
trigger1 = animTime = 0    ;普通に消えるときの条件。必須
;---------------------------------------------------------------------------
;helper 木の根

;---------------------------------------------------------------------------
;相手　リフトアップ
 
;---------------------------------------------------------------------------
;植物の根S 中
 
;---------------------------------------------------------------------------
;植物の根S 強
 
;---------------------------------------------------------------------------
;サソリ　弱　S
 
;---------------------------------------------------------------------------
;サソリーッ
 
;---------------------------------------------------------------------------
;サソリ　弱　S
[Statedef 11203]
type    = S
movetype= A
physics = S
poweradd= 40
ctrl = 0
velset = 0,0
anim = 11200
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State -2]
type = Helper
trigger1 = animelem = 8
triggerall = var(10) = 0
trigger1 = numhelper(11201) = 0
helpertype = normal
name = "fish"
stateno = 11204
id = 11201
pos = 15, -85
postype = p1
ownpal = 1
facing = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 100,18
channel = 0  

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サソリーッ
[Statedef 11204]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 11201
sprpriority = 3

[State 1010, 移動速度]
type = VelSet
trigger1 = 1
x = 15

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NP
animtype  = Medium
damage = ceil(ifelse((22*root,fvar(2))<7,7,(22*root,fvar(2)))),4
priority = 3, Hit
guardflag = MA
pausetime = 0,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-10
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 3010, 2]
type = changestate
trigger1 = MoveContact
value = 11202

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 27

[State 3010, 2]
type = destroyself
trigger1 = pos x <= -240 || pos x >= 240
;---------------------------------------------------------------------------
;サソリ　弱　S air
 
;---------------------------------------------------------------------------
;空中　サソリ
 
;---------------------------------------------------------------------------
;サソリ　中　S air
 
;---------------------------------------------------------------------------
;空中　サソリ
 

;---------------------------------------------------------------------------
;サソリ　弱　S air
 
;---------------------------------------------------------------------------
;空中　サソリ　強
 
;---------------------------------------------------------------------------
;感覚の暴走S
[Statedef 11300]
type    = S
movetype= A
physics = S
poweradd= 50
ctrl = 0
velset = 0,0
anim = 11300
hitcountpersist = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = P2StateType != A
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((15*fvar(2))<7,7,(15*fvar(0)))),2
priority = 3, Hit
guardflag = H
pausetime = 2,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-77
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0
p2facing = 1
p2stateno = 11301

[State 210, 2]
type = HitDef
trigger1 = P2StateType = A
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage = ceil(ifelse((72*fvar(2))<7,7,(72*fvar(0)))),2
priority = 3, Hit
guardflag = A
pausetime = 2,11
sparkno = s820
guard.sparkno = s840
sparkxy = -10,-77
hitsound = s1, 1
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 13
channel = 0  

[State 0];空振り音
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;敵　食らい
[Statedef 11301]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 5300

[State 1010, BGcolor]
type = BGPalFX
trigger1 = time = 0
time = 5
add = 0,0,0
mul = 256,256,256
sinadd = 256,256,256,10
invertall = 0
color = 0

[State 1010, BGcolor]
type = PalFX
trigger1 = time = 0
time = 5
add = 256,256,256
mul = 256,256,256
sinadd = 256,256,256,10
invertall = 0
color = 0

[State 191, 2] 
type = AttackDist
trigger1 = 1
value = 0

[State 3002　押し判定]
type = PlayerPush
trigger1 = 1
value = 1

[State 821, 相手にｽﾃｰﾄを返す]
type = SelfState
trigger1 = time = 220
trigger2 = RoundState = 3; && LoseKO = 1
trigger3 = life = 0
trigger2 = root,MoveType = H  ;rootのほうがいい？
trigger2 = root,stateno != [0,155];立ち～ガード以外。
value = 5200;地上に近い時の空中受け身
;---------------------------------------------------------------------------
;サソリ　off
 
;---------------------------------------------------------------------------
;helper ge
 
;---------------------------------------------------------------------------
;キック
 
;---------------------------------------------------------------------------
;キック弱
 
;---------------------------------------------------------------------------
;キック中
 
;---------------------------------------------------------------------------
;キック中stand
 
;---------------------------------------------------------------------------
;キック強
 
;---------------------------------------------------------------------------
;キック強stand
 
;---------------------------------------------------------------------------
;キック 落下
 ;---------------------------------------------------------------------------
;キック S
 
;---------------------------------------------------------------------------
;キック 落下 S
 
;----------------------------------------------------------------------------
;エフェクト用ヘルパー
[Statedef 11910]
type = A
ctrl = 0
anim = 880
velset = 0,0
movetype = I
physics = N
sprpriority = 4

[State 100, 4]
type = bindtoroot
trigger1 = 1
time = 1
facing = 1
pos = -10,5

[State 100, 1]
type = PalFX
trigger1 = 1
time = 1
mul = 255,255,0

[State 100, 1]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 150, 100

[State 230, 2]
type = changestate
trigger1 = root,stateno != 11900
value = 11911

[State 230, 2]
type = destroyself
trigger1 = root,stateno != 11900
;----------------------------------------------------------------------------
;エフェクト用ヘルパー 消滅
[Statedef 11911]
type = A
ctrl = 0
anim = 881
velset = 0,0
movetype = I
physics = N
sprpriority = 4

[State 100, 1]
type = PalFX
trigger1 = 1
time = 1
mul = 255,255,0

[State 9500, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow

[State 215　移動]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;ヘビ準備
 
;---------------------------------------------------------------------------
;ヘビ(攻撃)
 
;---------------------------------------------------------------------------
;ヘビ準備中
 
;---------------------------------------------------------------------------
;ヘビ準備遠
 
;---------------------------------------------------------------------------
; レクイエムの片鱗
 
;------------------
; レクイエム・攻撃をくらった相手の状態

 
;---------------------------------------------------------------------------
; レクイエムの片鱗 成功
 
;---------------------------------------------------------------------------
;helper ger
 
;---------------------------------------------------------------------------
; レクイエムの片鱗 S
 
;---------------------------------------------------------------------------
; レクイエムの片鱗 S 円
 
;---------------------------------------------------------------------------
;飛び道具死すべし
 
;---------------------------------------------------------------------------
; レクイエムの片鱗 円(永続)
[Statedef 999999]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 16661
ctrl = 0
sprpriority = 3

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
pos = 0, -70

[State 200, 1]
type = HitDef
trigger1 = 1
triggerall = root,PalNo = 11
trigger1 = enemynear,movetype = A
attr = S, SA
damage = 0,0
animtype = Light
guard.dist = 0
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 0
sparkno = s-1
guard.sparkno = s-1
sparkxy = -10, -96
hitsound = s100, 35
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 12
guard.dist = 0
p2stateno = 16668

[State 200, 1]
type = HitDef
trigger1 = 1
triggerall = root,PalNo = 12
trigger1 = enemynear,movetype = A
attr = S, SA
damage = 0,0
animtype = Light
guard.dist = 0
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 0
sparkno = s-1
guard.sparkno = s-1
sparkxy = -10, -96
hitsound = s100, 35
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 12
guard.dist = 0
p2stateno = 99995

[State 1009, 受け止め定義]
type = ReversalDef
triggerall = root,PalNo = 11
trigger1 = 1
trigger2 = !time
attr = S, HA
reversal.attr = SCA, NA, SA, HA
hitsound = s100, 35
pausetime     = 0,0
numhits       = 0
sparkno       = s29999
sparkxy       = 0,0
P2StateNo     = 16668

[State 1009, 受け止め定義]
type = ReversalDef
triggerall = root,PalNo = 12
trigger1 = 1
trigger2 = !time
attr = S, HA
reversal.attr = SCA, NA, SA, HA
hitsound = s100, 35
pausetime     = 0,0
numhits       = 0
sparkno       = s29999
sparkxy       = 0,0
P2StateNo     = 99995

[State 1100, dist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, pal]
type = allpalfx
trigger1 = movehit = 1
time = 1
add = 256,256,256

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = root,movetype = H
;trigger3 = movehit
;trigger4 = time = 1
trigger2 = root,var(49) != 10000
;---------------------------------------------------------------------------
; レクイエムの片鱗 円 見た目(永続)
[Statedef 999995]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 16663
ctrl = 0
sprpriority = 0

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
pos = 0, -70

[State 1100, dist]
type = AttackDist
trigger1 = 1
value = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = root,movetype = H
trigger2 = root,var(49) != 10000
;---------------------------------------------------------------------------
;飛び道具死すべし(永続)
[Statedef 999998]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 16662
ctrl = 0
sprpriority = 3

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
pos = 0, -70

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 99999
value = 16664

[State 1000]
type = turn
trigger1 = facing != root,facing
value = root,facing

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000]
type = nothitby
trigger1 = 1
value = , NA, SA, HA, NT, ST, HT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 999997
attr = SCA,NP,SP,HP
time = -1

[State 1100, dist]
type = AttackDist
trigger1 = 1
value = 0

[State 230, 2]
type = destroyself
trigger1 = root,movetype = H
trigger2 = root,var(49) != 10000
;---------------------------------------------------------------------------
;慈悲はない(永続)
[Statedef 999997]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 16662
ctrl = 0
sprpriority = 3

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
pos = 0, -70

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000]
type = turn
trigger1 = facing != root,facing
value = root,facing

[State 1000]
type = nothitby
trigger1 = 1
value = , NA, SA, HA, NT, ST, HT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 999997
attr = SCA,NP,SP,HP
time = -1

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 35
channel = 10

[State 1000, ステート変更]
type = changestate
trigger1 = !time
value = 999998

[State 230, 2]
type = destroyself
trigger1 = root,movetype = H
trigger2 = root,var(49) != 10000
;---------------------------------------------------------------------------
; 敵　待機
 
;---------------------------------------------------------------------------
; レクイエムの片鱗 S 空中
 
;---------------------------------------------------------------------------
; 終わりが無いのが終わり
[Statedef 99999]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 99999
ctrl = 0
sprpriority = 2
poweradd = -3000

[State 191, 3]
type = nothitby
trigger1 = time = 5
value = SCA
time = 15

[State 200, 1]
type = HitDef
trigger1 = 1
trigger1 = enemynear,movetype = A
attr = S, SA
damage = 0,0
animtype = Light
guard.dist = 0
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 0
sparkno = s-1
guard.sparkno = s-1
sparkxy = -10, -96
hitsound = s100, 35
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 12
p1stateno = 99997
p2stateno = 99995

[State 1000, 1]
type = Helper
trigger1 = time = 5
trigger1 = numhelper(16667) = 0
helpertype = normal
name = "circle"
stateno = 99998
id = 99998
pos = 0, -70
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.9
size.yscale = 0.9

[state 3003　飛び道具消去ヘルパー]
type = helper
trigger1 = time = 5
trigger1 = numhelper(166667) = 0
name = "plodelete"
helpertype = normal
stateno = 166667
id = 166667
pos = 0, -70
postype = p1
ownpal = 1
size.xscale = 0.9
size.yscale = 0.9
supermovetime = 9999999999999
pausemovetime = 9999999999999
facing = 1

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 14
channel = 0  

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 終わりが無いのが終わり 円
[Statedef 99998]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 16669
ctrl = 0
sprpriority = 3

[State 0, pal]
type = allpalfx
trigger1 = movehit
time = 1
add = 256,256,256

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = parent,stateno != 99999
trigger2 = time = 15
;---------------------------------------------------------------------------
; 終わりが無いのが終わり 成功
[Statedef 99997]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 99997
ctrl = 0
sprpriority = 2

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = 0 
time = 250
add = 128,128,0
invertall = 1
color = 150
ignorehitpause = 1

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[state 3000]
type = pause
trigger1 = time = 6
time = 40
movetime = 40

[State 0, ]
type = PlaySnd
trigger1 = time = 6
value = 4, 0

[state 3003]
type = helper
trigger1 = time = 6
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = time = 6
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 860, 4]
type = PowerSet
trigger1 = time = 0
value = 0

[State 0, pal]
type = allpalfx
trigger1 = time = 0
time = 5
add = 256,256,256

[State 0, ハアアアア]
type = PlaySnd
trigger1 = time = 5
value = 100, 9
channel = 0   ;チャンネル0は、ボイス再生専用

[State 0, 1]
type = Offset
Trigger1 = Facing = 1
trigger1 = 1
x = 20
y = 10

[State 0, 1]
type = Offset
Trigger1 = Facing = -1
trigger1 = 1
x = -20
y = 10

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = time = 60
value = 100, 34
channel = 0  

[State 215]
type = HitAdd
trigger2 = time = 127
trigger3 = time = 129
trigger4 = time = 131
trigger5 = time = 133
trigger6 = time = 135
trigger7 = time = 137
trigger8 = time = 139
trigger25 = time = 65
trigger26 = time = 67
trigger27 = time = 69
trigger28 = time = 71
trigger29 = time = 73
trigger30 = time = 75
trigger31 = time = 77
trigger32 = time = 79
trigger33 = time = 81
trigger34 = time = 83
trigger35 = time = 85
trigger36 = time = 87
trigger37 = time = 89
trigger38 = time = 91
trigger39 = time = 93
trigger40 = time = 95
trigger41 = time = 97
trigger42 = time = 99
trigger43 = time = 101
trigger44 = time = 103
trigger45 = time = 105
trigger46 = time = 107
trigger47 = time = 109
trigger48 = time = 111
trigger49 = time = 113
trigger50 = time = 115
trigger51 = time = 117
trigger52 = time = 119
trigger53 = time = 121
trigger54 = time = 123
trigger55 = time = 125
trigger56 = time = 141
trigger57 = time = 143
trigger58 = time = 145
trigger59 = time = 147
trigger60 = time = 149
trigger61 = time = 151
trigger62 = time = 153
trigger63 = time = 155
trigger64 = time = 157
trigger65 = time = 159
trigger66 = time = 161
trigger67 = time = 163
trigger68 = time = 165
trigger69 = time = 167
trigger70 = time = 169
trigger71 = time = 171
trigger72 = time = 173
trigger73 = time = 175
trigger74 = time = 177
trigger75 = time = 179
trigger76 = time = 181
trigger77 = time = 183
trigger78 = time = 185
trigger79 = time = 187
trigger80 = time = 189
trigger81 = time = 191
trigger82 = time = 193
trigger83 = time = 195
trigger84 = time = 197
trigger85 = time = 199
trigger86 = time = 201
trigger87 = time = 203
trigger88 = time = 205
trigger89 = time = 207
trigger90 = time = 209
trigger91 = time = 211
trigger92 = time = 213
trigger93 = time = 215
trigger16 = time = 217
trigger17 = time = 219
trigger18 = time = 221
trigger19 = time = 223
trigger20 = time = 225
trigger21 = time = 227
trigger22 = time = 229
trigger23 = time = 231
trigger24 = time = 233
trigger10 = time = 235
trigger11 = time = 237
trigger12 = time = 239
trigger13 = time = 241
trigger14 = time = 243
trigger15 = time = 245
trigger9 = time = 247
trigger1 = time = 249
value = 2

[State 702, ライフ増減]
type = targetLifeAdd
trigger2 = time = 127
trigger3 = time = 129
trigger4 = time = 131
trigger5 = time = 133
trigger6 = time = 135
trigger7 = time = 137
trigger8 = time = 139
trigger25 = time = 65
trigger26 = time = 67
trigger27 = time = 69
trigger28 = time = 71
trigger29 = time = 73
trigger30 = time = 75
trigger31 = time = 77
trigger32 = time = 79
trigger33 = time = 81
trigger34 = time = 83
trigger35 = time = 85
trigger36 = time = 87
trigger37 = time = 89
trigger38 = time = 91
trigger39 = time = 93
trigger40 = time = 95
trigger41 = time = 97
trigger42 = time = 99
trigger43 = time = 101
trigger44 = time = 103
trigger45 = time = 105
trigger46 = time = 107
trigger47 = time = 109
trigger48 = time = 111
trigger49 = time = 113
trigger50 = time = 115
trigger51 = time = 117
trigger52 = time = 119
trigger53 = time = 121
trigger54 = time = 123
trigger55 = time = 125
trigger56 = time = 141
trigger57 = time = 143
trigger58 = time = 145
trigger59 = time = 147
trigger60 = time = 149
trigger61 = time = 151
trigger62 = time = 153
trigger63 = time = 155
trigger64 = time = 157
trigger65 = time = 159
trigger66 = time = 161
trigger67 = time = 163
trigger68 = time = 165
trigger69 = time = 167
trigger70 = time = 169
trigger71 = time = 171
trigger72 = time = 173
trigger73 = time = 175
trigger74 = time = 177
trigger75 = time = 179
trigger76 = time = 181
trigger77 = time = 183
trigger78 = time = 185
trigger79 = time = 187
trigger80 = time = 189
trigger81 = time = 191
trigger82 = time = 193
trigger83 = time = 195
trigger84 = time = 197
trigger85 = time = 199
trigger86 = time = 201
trigger87 = time = 203
trigger88 = time = 205
trigger89 = time = 207
trigger90 = time = 209
trigger91 = time = 211
trigger92 = time = 213
trigger93 = time = 215
trigger16 = time = 217
trigger17 = time = 219
trigger18 = time = 221
trigger19 = time = 223
trigger20 = time = 225
trigger21 = time = 227
trigger22 = time = 229
trigger23 = time = 231
trigger24 = time = 233
trigger10 = time = 235
trigger11 = time = 237
trigger12 = time = 239
trigger13 = time = 241
trigger14 = time = 243
trigger15 = time = 245
trigger9 = time = 247
trigger1 = time = 249
value = -8*fvar(2) 
kill = 0

[state 3000, explod]
type = Explod
trigger1 = animelem = 7
trigger2 = animelem = 11
trigger3 = animelem = 15
trigger4 = animelem = 23
anim = 850
ID = 17000
pos = 0, -85
postype = p2
removetime = 12
bindtime = -1
facing = ifelse(facing=1,1,-1)
pausemovetime = 999999
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 3000, explod]
type = Explod
trigger1 = animelem = 13
trigger2 = animelem = 19
trigger3 = animelem = 27
trigger4 = animelem = 31
trigger5 = animelem = 37
anim = 850
ID = 17000
pos = -4, -60
postype = p2
removetime = 12
bindtime = -1
facing = ifelse(facing=1,1,-1)
pausemovetime = 999999
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 3000, explod]
type = Explod
trigger1 = animelem = 21
trigger2 = animelem = 29
trigger3 = animelem = 33
anim = 850
ID = 17000
pos = 3, -85
postype = p2
removetime = 12
bindtime = -1
facing = ifelse(facing=1,1,-1)
pausemovetime = 999999
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 3000, explod]
type = Explod
trigger1 = animelem = 9
trigger2 = animelem = 17
trigger3 = animelem = 25
trigger4 = animelem = 35
anim = 850
ID = 17000
pos = 10, -35
postype = p2
removetime = 12
bindtime = -1
facing = ifelse(facing=1,1,-1)
pausemovetime = 999999
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 901, Turn]
type = Turn
trigger1 = time = 1
trigger1 = P2bodydist X < 0

[State 10000, Assert]
type = AssertSpecial
trigger1 = time = [0,250]
flag = nomusic
ignorehitpause = 1

[State 420, 3]
type = ChangeState
trigger1 = time = 250
value = 99996
;---------------------------------------------------------------------------
; 締め
[Statedef 99996]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 99996
ctrl = 0
sprpriority = 0

[State 16010, 仮面]
type = Explod      
trigger1 = time = 0
id = 20035
postype = left
pos = 0,0   ;0,239
anim = 16011
sprpriority = -1
ownpal = 0
bindtime = -1
pausemovetime = 999999
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
removetime = 10
;scale = 0.785,0.75    ;0.833,1.07

[State 1060, 5]
type = envshake
trigger1 = time = 0
time = 10
frep = 600
ampl = -30

[state 3000, explod]
type = Explod
trigger1 = time = 0
anim = 850
ID = 17000
pos = 3, -85
postype = p2
removetime = 12
bindtime = -1
facing = ifelse(facing=1,1,-1)
pausemovetime = 999999
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 3000]
type = playsnd
trigger1 = time = 0
value = 100,17
channel = 0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 7, 1

[state 3000]
type = ChangeState
trigger1 = time = 30
value = 0
ctrl = 1
;-----------------------------------------------
; 終わりが無いのが終わり・相手くらい
[Statedef 99995]
type    = A
movetype= H
physics = N
velset = 0,0

[State 702, すり抜け]
type = PlayerPush
trigger1 = 1
value = 0

[State 1027, 位置]
type = PosSet
trigger1 = facing = 1
trigger1 = time = 0
x = enemynear,pos x - 70

[State 1027, 位置]
type = PosSet
trigger1 = facing = -1
trigger1 = time = 0
x = enemynear,pos x + 70

[State 1027, 位置]
type = PosSet
trigger1 = time = 0
trigger1 = Pos Y <= 0 
y = 0

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 17005

[State 1060, 2]
type = changeanim2
trigger1 = time = 21
trigger2 = time = 58
trigger3 = time = 95
trigger4 = time = 122
trigger5 = time = 149
trigger6 = time = 176
trigger7 = time = 210
value = 3004

[State 1060, 2]
type = changeanim2
trigger1 = time = 30
trigger2 = time = 67
trigger3 = time = 104
trigger4 = time = 131
trigger5 = time = 158
trigger6 = time = 190
trigger7 = time = 220
value = 3005

[State 1060, 2]
type = changeanim2
trigger1 = time = 39
trigger2 = time = 76
trigger3 = time = 113
trigger4 = time = 140
trigger5 = time = 167
trigger6 = time = 200
trigger7 = time = 230
value = 3006

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 183
x = 0
y = 0

[State 702, ライフ増減]
type = LifeAdd
trigger1 = time = 219
value = -9999999
kill = 1

[State 5050, 6]
type = changeState
trigger1 = Time = 223
value = 99993
;-----------------------------------------------
;飛んでく相手
[Statedef 99993]
type    = A
movetype= H
physics = N
velset = 0,0

[State 702, すり抜け]
type = PlayerPush
trigger1 = 1
value = 0

[State 1061, 2]
type = changestate
trigger1 = matchover
trigger1 = life = 0
trigger1 = Time > 0
trigger1 = BackEdgeBodyDist <= 20
value = 99994

[State 1026, Hit wall]
type = ChangeState
trigger1 = Time > 0
trigger1 = BackEdgeBodyDist <= 20
value = 6665

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 0
x = -10
y = -2

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 10
x = -10
y = 0

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 20
x = -10
y = 2

[State 1061, 2]
type = selfState
trigger1 = Time = 40
value = 5110
ctrl = 1
;-----------------------------------------------
; 決着ゥー！
[Statedef 99994]
type    = S
movetype= H
physics = S
velset = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 5050, 6]
type = changeState
trigger1 = time = 1
value = 5150
;---------------------------------------------------------------------------
; 無駄無駄ラッシュ(超必殺)
 
;---------------------------------------------------------------------------
; 無駄無駄(スタンド)
 
;-------------------------------------------------------------------
;『WIN』ヘルパー
[Statedef 20050]
type = S
sprpriority = 10
anim = 20050
ctrl = 0

[State 104, 影はない]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 20024,ガシーン！]
type = PlaySnd
trigger1 = Time = 10
value = 0, 28

[State -1,1]
type = velset
trigger1 = time = 0
trigger2 = time >= 10 && time <= 72
x = 0

[State -1,1]
type = velset
trigger1 = time >= 0 && time <= 10
x = ifelse(Teamside=1,12,-12)

[State -1,1]
type = velset
trigger1 = time >= 72 && time <= 95
x = ifelse(Teamside=1,-17,17)

[State -1,1]
type = destroyself
trigger1 = roundstate = 2;バトル中

;---------------------------
;『to be continued』ヘルパー
[Statedef 20051]
type = S
sprpriority = 10
anim = ifelse(Teamside=1,20051,20052)
ctrl = 0

[State 20024, 0]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 20024, 0]
type = velset
trigger1 = time = 0
trigger2 = time >= 25
x = 0

[State 20024, 0]
type = velset
trigger1 = time >= 0 && time <= 17
x = ifelse(Teamside=1,-24,24)

[State 20024, 0]
type = velset
trigger1 = time >= 17 && time <= 25
x = ifelse(Teamside=1,13,-13)

;-------------------------------------------------------------------
;KO勝利時の集中線と音helper
[Statedef 20053]
type    = S
;movetype= I
;physics = N
anim = 29999 ;空アニメ
;velset = 0,0
ctrl = 0

[State 20053]
type = Explod
trigger1 = time = 0
anim = 20053
pos = 0,0
postype = left
sprpriority = 10
ownpal = 1
bindtime = -1	;発生させた親に常にくっ付ける
persistent = 0  ;1回しかステコンが実行されません
ignorehitpause = 1	;「ヒット硬直」を無視

[State 20053]
type = PlaySnd
trigger1 = Time = 0
value = 6, 8
persistent = 0  ;1回しかステコンが実行されません
ignorehitpause = 1;とるすと、ヒット停止時間を無視

[State 20053]
type = DestroySelf
trigger1 = time = 120 && RoundState != 3
;-------------------------------------------------------------------
;敗北カットイン
[Statedef 20054]
type = A
anim = 29999
sprpriority = 4

[State 20054]
type = Palfx
trigger1 = time <= 70
add = 0+time*2, 0+time*2, 0+time*2
time = 1

[State 20054]
type = Bgpalfx
trigger1 = time <= 70
add = 0+time*2, 0+time*2, 0+time*2
time = 1

[State 20054]
type = PlaySnd
trigger1 = time = 0
value = 6,0;ドーン
persistent = 0  ;1回しかステコンが実行されません

[State 20054];敗北カットイン顔の部分
type = helper
trigger1 = time = 0
trigger1 = NumHelper(20058) = 0
stateno = 20058
id = 20058
sprpriority = 1
pos = 0,0
postype = p1
supermovetime = 9999999
pausemovetime = 9999999
ownpal = 0
keyctrl = 0

;青の背景
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20054
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1

[State 20054]
type = Explod
trigger1 = time = 0
anim = 20054
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 510,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1

[State 20054]
type = Explod
trigger1 = time = 0
anim = 20055
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20055
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 496,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1

[State 20054]
type = Explod
trigger1 = time = 0
anim = 20056
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20056
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 496,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20057
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 0,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
[State 20054]
type = Explod
trigger1 = time = 0
anim = 20057
id = 20054
sprpriority = -5
removetime = -1
bindtime = -1
pos = 500,240
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = -1,-1,1))
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1

[State 20054]
type = RemoveExplod
trigger1 = time = 70
trigger2 = RoundState = 4 
id = 20054

[State 20054]
type = AssertSpecial
trigger1 = time = [0,69]
flag = nobg
flag2 = nofg
flag3 = nobardisplay

[State 20054]
type = null;DestroySelf
trigger1 = RoundState != 3
;trigger1 = time = 70 || RoundState != 3
;trigger2 = RoundState = 4 
;----------------------------------------------------
;敗北カットイン顔の部分
[Statedef 20058]
type    = A
;movetype= I
;physics = N
;velset = 0,0
anim = 29999
sprpriority = 4

[State 20058]
type = Explod
trigger1 = time = 0
trigger1 = NumExplod(20058) = 0
anim = 20058
id = 20058
sprpriority = -4
;removetime = -1
bindtime = -1
pos = ifelse(ishometeam=1,ifelse(root,facing = 1,160,180),ifelse(root,facing = -1,180,160)),120
postype = back
ownpal = 0
supermovetime = -1
pausemovetime = -1
scale = 1.5*parent,const(size.xscale),1.5
facing = ifelse(ishometeam=1,ifelse(root,facing = 1,-1,1),ifelse(root,facing = 1,1,-1))
persistent = 0

[State 20058]
type = RemoveExplod
trigger1 = RoundState != 3
id = 20058

[State 20058]
type = DestroySelf
trigger1 = RoundState != 3
;-----------------------------------------------
;カットイン

[Statedef 23100]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3200
sprpriority = -3

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time < 30
trigger1 = parent,facing = 1
anim = 3200
id = 23107
pos = 0+var(14)*1,239+var(14)*3
postype = left
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
random = 30,30
ownpal = 1
scale = 1,1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time >= 30
trigger1 = parent,facing = 1
anim = 3200
id = 23107
pos = 30,330
postype = left
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
random = 60,60
scale = 2.6*parent,const(size.xscale),2.6
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time < 30
trigger1 = parent,facing = -1
anim = 3200
id = 23107
pos = 0-var(14)*1,239+var(14)*3
postype = right
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
facing = -1
random = 30,30
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time >= 30
trigger1 = parent,facing = -1
anim = 3200
id = 23107
pos = -30,330
postype = right
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
facing = -1
random = 30,30
scale = 2.6*parent,const(size.xscale),2.6
ownpal = 1
getpower = 0

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 30
ID = 23107
scale = (0.4+Var(14)/15.0)*parent,const(size.xscale) , 0.4+Var(14)/15.0
pausemovetime = 999999

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 14
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 14
value = 1

[state 3000]
type = removeexplod
trigger1 = time >= 40
id = 23100

[state 3000]
type = destroyself
trigger1 = time >= 40


;-----------------------------------------------
;SC背景

[Statedef 23101]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3101
sprpriority = -5

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 2]
type = Varset
trigger1 = Time = 0
trigger2 = Time = 21
v = 14
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
trigger1 = Time <= 20
trigger2 = Time >= 21
trigger2 = Time <= 40
v = 14
value = 15

[State 1000, 3]
type = PalFx
trigger1 = Time = 0
time = 1
add = 255,255,255
mul = 255,255,255

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 3101
pos = 0,239
postype = left
sprpriority = -5
bindtime = -1
supermovetime = 9999999
pausemovetime = 9999999
removeongethit = 1
removetime = 41
ownpal = 0

[State 1000, 3]
type = PalFx
trigger1 = Time >= 0
trigger1 = Time <= 20
trigger2 = Time >= 21
trigger2 = Time <= 40
time = 1
add = 255-Var(14),255-Var(14),255-Var(14)

[state 3000]
type = destroyself
trigger1 = time >= 41
;---------------------------------------------------------------------------
; 木の根(超必殺)
 
;---------------------------------------------------------------------------
; 木の根　
 
;---------------------------------------------------------------------------
;helper 木の根　S
 
;---------------------------------------------------------------------------
;helper 木の根　S
 
;---------------------------------------------------------------------------
; ツタ
[Statedef 8014]
type    = A
movetype= A
physics = N
juggle  = 0;0
poweradd= 0
velset = 0,0
anim = 7016
ctrl = 0
sprpriority = 3

[State 1027, Sound]
type = PlaySnd
trigger1 = animelem = 1
value = 100,30

[State 10820, 1]
type = PlaySnd
trigger1 = time = 0
value = 100,37

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SP
damage = 0
hitflag = MAF
guardflag = MA
animtype = light
priority = 5, Hit
pausetime = 0,100
sparkno = s83099
guard.sparkno = s84099
sparkxy = -10,0
hitsound = s1, 3999
guardsound = s1, 5999
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
guard.hittime  = 9
ground.velocity = -5.5*parent,const(size.xscale)
air.velocity = -2*parent,const(size.xscale),-6
air.fall = 1
getpower = 72,0
guard.kill = 0

[State 200, 7]
type = TargetBind
trigger1 = numtarget
pos = 0,0
time = -1
ignorehitpause = 1
persistent = 0

[State 0, target]
type = targetstate
trigger1 = time = [0,165)
trigger1 = target,alive
value = 1815

[State 1000, 7]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;敵拘束
[Statedef 1815]
type = S
movetype = H
physics = N
ctrl = 0
anim = 5000
velset = 0,0
sprpriority = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = 1
;---------------------------------------------------------------------------
; ここから下に新しいステートを書くと分かりやすくていいと思います
;---------------------------------------------------------------------------
;まずon、offの記述はこんな感じ。
;ｽｲｯﾁ式？ではなく、直接10000を入れてます。var(49)は10000か0

;スタンド発現（立ち）
 
;----------------------------------------
;スタンド発現（しゃがみ）
 
;-----------------------------------
;スタンド発現（空中）
 
;---------------------------------------------------------------------------
;あれれー
[Statedef 5656]
type = S
physics = S
ctrl = 1
anim = 29999
velset = 0,0

[state 301, ]
type=parentvarset
trigger1 = time = 0
var(47) = 1

[state 301, ]
type=parentvarset
trigger1 = time = 40
var(47) = 0

[State 301,けす]
type = destroyself
trigger1 = Time = 61      
;---------------------------------------------------------------------------
;あれれれー
[Statedef 5657]
type = S
physics = S
ctrl = 1
anim = 29999
velset = 0,0

[state 301, ]
type=parentvarset
trigger1 = time = 200
var(46) = 0

[State 301,けす]
type = destroyself
trigger1 = Time = 201    
;----------------------------------------------------------------
;スタンド解除（立ち）
[Statedef 830]
type = S
physics = S
ctrl = 1
anim = 0;ifelse(statetype = S,830,831)
velset = 0,0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = -10

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------
;スタンド解除（しゃがみ）
[Statedef 16004]
type = C
physics = S
ctrl = 1
anim = 11;ifelse(statetype = S,830,831)
velset = 0,0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State ]
type = PosAdd
trigger1 = time = 0
x = -10

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-----------------------------
;スタンド解除（空中）
[Statedef 16005]
type    = A
physics = A
ctrl    = 0
anim = 41;132;ifelse(statetype = S,830,831)
;velset = 0,0
juggle   = 0
poweradd = 0

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State ]
type = PosAdd
trigger1 = time = 0
x = -10

[State 1002, 0]
type = CtrlSet
trigger1 = time >= 1
value = 1

;---------------------------------------------------------------------------
 
;===========================================================================
; 特殊技
;===========================================================================
[Statedef 29];禁止
type = S
movetype = I
physics = N
ctrl = 0
anim = 29999
sprpriority = -5

[State 3000]
type = DestroySelf
trigger1 = time = 10

;回り込み
[Statedef 30]
type = S
physics = N
movetype = I
anim = 30
ctrl = 0
velset = 0,0

[State 3900 e];禁止
type = Helper
trigger1 = AnimTime = 0
helpertype = normal
stateno = 29
id = 29
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 9999999999999
pausemovetime = 9999999999999

[State 30]
type = Width  ;画面端から指定値までの範囲は進入不可能
trigger1 = 1
edge = 5,0    ;省略時0,0

[State 30]
type = HitBy  ;特定の攻撃以外食らわない
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 30

[State 30]
type = PlayerPush  ;ぶつかり判定の有無
trigger1 = 1
value = 0          ;1で判定あり、0で判定なし

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = 5

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 810, AfterImage]
type = Afterimage
trigger1 = AnimElem = 1
time = 25
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1
[State 30]
type = PlaySnd
trigger1 = time = 1
value = 100,10

[State 0, 4];コンボルート E 直近 ai
type = ChangeState
value = 51400
TriggerAll= EnemyNear,StateType != L
Triggerall= EnemyNear,StateType != A
triggerall = var(59) = 1 && RoundState = 2 
triggerall = var(49) != 10000
triggerall = P2BodyDist X = [-20,50]
trigger1 = animtime = 0

[State 30]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;回り込み(on時)
 
;===========================================================================
;擬似プッツンキャンセル
 
;---------------------------------------------------------------------------
;プッツーン
[Statedef 720]
type    = S
physics = N
anim = 720
ctrl = 0
sprpriority = 3
velset = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0, scale]
type = angledraw
trigger1 = time < 10
scale = .2+time*.08,.2+time*.08

[State 0, scale]
type = angledraw
trigger1 = time >= 10
scale = .85+time*.01,.85+time*.01

[State 820, 消去]
type = destroyself
trigger1 = time >= 30
trigger2 = root,stateno != 700
;---------------------------------------------------------------------------
; アドバンシング（立ち）
[Statedef 4100]
type    = U
movetype= H
physics = N
anim = 150
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-68
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 151
;===========================================================================
; アドバンシング（しゃがみ）
[Statedef 4105]
type    = C
movetype= H
physics = N
anim = 151
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-18
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 153
;---------------------------------------------------------------------------
; アドバンシング（立ち）S
[Statedef 14000]
type    = U
movetype= H
physics = N
anim = 10160
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-68
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 151
;===========================================================================
; アドバンシング（しゃがみ）S
[Statedef 14005]
type    = C
movetype= H
physics = N
anim = 10161
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-18
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 153

;---------------------------------------------------------------------------
; アドバンシングヘルパー
[Statedef 4010]
type    = A
movetype= I
physics = N
anim = 4
ctrl = 0
velset = 10,0

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 24
value = 1

[State 5071, 1]
type = parentvarset
trigger1 = time = 2
v = 24
value = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 100,15

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 3,18

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 16
value = 0

[State 1051, 2]
type = playerpush
trigger1 = 1
value = 1

[State 1051, 2]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 191, Wood 1]
type = Explod
trigger1 = 0;time = 0
trigger1 = enemy,statetype != A
anim = 860
id = 870
postype = p2
pos = 15,0
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
facing = -1

[State 1051, 2]
type = destroyself
trigger1 = time = 16
trigger2 = parent,alive = 0
;--------------------------------------------------------------------------
;STAND ON!の表示。ヘルパーでやります
[Statedef 20026]
type = S
sprpriority = 3
anim = 29999

[State 20026, 0];消えてる
type = Explod
trigger1 = time = 0
id = 20026
pos = -90,70
;30,70までもってく
postype = back
;自分が背を向けている方向の画面上端。画面中央方向が正数
anim = ifelse(facing=1,20026,20027)
ownpal = 1
ontop = 1
bindtime = -1
scale = 0.5,0.5
facing = facing 

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20026)
Id = 20026
postype = back
;自分が背を向けている方向の画面上端。画面中央方向が正数
pos = ceil(-90+(time*8)),70;ceil切り上げ整数化
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20026)
trigger1 = time = 60
trigger2 = NumHelper(20036);STAND CRUSH!
trigger3 = NumHelper(20030);DANGER!
ID = 20026

[State 20026, 0]
type = DestroySelf
trigger1 = time = 60

;-------------------------------------------------
;STAND CRUSH!ヘルパー
[Statedef 20028]
type = S
sprpriority = -2
anim = 29999

[State 20026, 0];きえてる
type = Explod
trigger1 = time = 0
id = 20036
pos = -90,70
postype = back
anim = ifelse(facing=1,20036,20037)
ownpal = 1
ontop = 1
sprpriority = -2
bindtime = -1
scale = 0.5,0.5
facing = facing

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20036)
Id = 20036
postype = back
pos = ceil(-90+(time*8)),70
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20036)
trigger1 = time = 62
ID = 20036

[State 20026, 0]
type = DestroySelf
trigger1 = time = 62

;-------------------------------------------------
;DANGER!ヘルパー
[Statedef 20030]
type = S
sprpriority = -2
anim = 29999

[State 20026, 0];きえてる
type = Explod
trigger1 = time = 0
id = 20030
pos = -90,70
postype = back
anim = ifelse(facing=1,20038,20039)
ownpal = 1
ontop = 1
sprpriority = -2
bindtime = -1
scale = 0.5,0.5
facing = facing

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20030)
Id = 20030
postype = back
pos = ceil(-90+(time*8)),70
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20030)
trigger1 = time = 60
trigger2 = NumHelper(20028);STAND CRUSH!
ID = 20030

[State 20026, 0]
type = DestroySelf
trigger1 = time = 60

;---------------------------------------------------------------------------
;スタンドゲージヘルパー
[Statedef 20032]
type = S
sprpriority = -10
anim = 29999

;スタンドゲージ - 枠（20032）
[State 20026, 0]
type = Explod
trigger1 = !NumExplod(20032);このｹﾞｰｼﾞ枠が出てないとき
trigger1 = 1
anim = 16000
id = 20032
pos = 120,45;140,40
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -3
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

;スタンドゲージ - 青ゲージ（20033）
[State 20026, 0]
type = null;Explod
trigger1 = !NumExplod(20033)
trigger1 = 1
anim = ifelse((parent,stateno=[5000,5081]),16004,16001)
;ifelseにparent,～的なのは使えないのか・・
id = 20033
pos = 120,45
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -2
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

;スタンドゲージ - 青ゲージ（20033）
[State 20026, 0]
type = Explod
trigger1 = !NumExplod(20033)
trigger1 = 1
trigger1 = parent,stateno != [5000,5081]
anim = 16001
id = 20033
pos = 120,45
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -2
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

;スタンドゲージ - 赤ゲージ（20035）
[State 20026, 0]
type = Explod
triggerall = !NumExplod(20035)
triggerall = 1
trigger1 = parent,stateno = [5000,5081] ;くらいｽﾃｰﾄ
trigger1 = parent,var(49) = 10000 ;スタンドモード時
trigger2 = parent,fvar(1) <= 10   ;ｹﾞｰｼﾞが10以下の時
anim = 16004
id = 20035
pos = 120,45
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -1
postype = Back
ownpal = 1
scale = 0.5,0.5;1,1

[State -3];standの文字
type = explod
trigger1 = parent,var(49) = 10000
trigger1 = numexplod(16004) = 0 ;このstandの文字が出てないとき
bindtime = -1
anim = 16002
id = 16004
sprpriority = -1
pos = 120,45;125,50
postype = back
ownpal = 1
supermovetime = -1
pausemovetime = -1
facing = ifelse(facing=1,1,-1)
scale = 0.5,0.5

;青ゲージ増減ロジック
[State 20026, 0]
type = ModifyExplod
trigger1 = parent,fvar(1) < 80
trigger1 = roundstate = 2
id = 20033
scale = parent,fvar(1)*0.0125*0.5,1*0.5

;赤ゲージ増減ロジック
[State 20026, 0]
type = ModifyExplod
trigger1 = parent,fvar(1) < 80
trigger1 = roundstate = 2
id = 20035
scale = parent,fvar(1)*0.0125*0.5,1*0.5

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 20032

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 20033

[State 20026, 0];赤ゲージ（20035
type = RemoveExplod
trigger1 = parent,stateno != [5000,5081] ;くらいｽﾃｰﾄじゃなくて
trigger1 = parent,fvar(1) >= 10   ;ｹﾞｰｼﾞが10以上の時
trigger2 = win
trigger3 = lose
id = 20035

[State -3];スタンドの文字を消す
type = removeexplod
trigger1 = parent,var(49) = 0
trigger2 = win
trigger3 = lose
id = 16004

[State 20026, 0]
type = DestroySelf
trigger1 = win
trigger2 = lose

;スタンドゲージに罰印つける
[State 20026, 0]
type = Explod
trigger1 = !NumExplod(20034)
trigger1 = parent,var(7) = 1;スタンド発現不可のとき
anim = 16003
id = 20034
pos = 120,45
postype = back
bindtime = 999999999999999
pausemovetime = 999999999999999
ownpal = 1
sprpriority = 0

[State -3];罰印を消す
type = removeexplod
trigger1 = parent,var(7) = 0;スタンド発現可のとき
id = 20034

;STAND CRUSH!のﾒｯｾｰｼﾞｱｲｺﾝ
[State 1000, 0]
type = helper
trigger1 = !NumHelper(20028)     ;=0と同じような意味っぽいですね。
trigger1 = parent,stateno = 16010;スタンドクラッシュ立ち食らい
ID = 20028
stateno = 20028
pos = 0,0
pausemovetime = 99999

;DANGER!のﾒｯｾｰｼﾞｱｲｺﾝ
[State -3]
type = helper
trigger1 = parent,var(49) = 10000 ;スタンドモード時
trigger1 = parent,fvar(1) <= 10   ;ｹﾞｰｼﾞが10以下になった時
trigger1 = parent,movetype = H    ;くらい状態
trigger1 = NumHelper(20030) = 0   ;これがでてないとき
ID = 20030
stateno = 20030
pos = 0,0
pausemovetime = 999

;STAND ON!のﾒｯｾｰｼﾞｱｲｺﾝ
[State 1000, 0]
type = helper
triggerall = NumHelper(20026) = 0
trigger1 = parent,stateno = 10820;スタンド発現ｽﾃｰﾄ
trigger2 = parent,stateno = 16001;スタンド発現ｽﾃｰﾄ
trigger3 = parent,stateno = 16002;スタンド発現ｽﾃｰﾄ
ID = 20026
stateno = 20026
pos = 0,0
pausemovetime = 999
;---------------------------------------------------------------------------
;スタンドクラッシュ地上
[Statedef 16010]
type    = U 
movetype= H ;hit状態
physics = S
velset = 0,0
anim = ifelse((prevstateno = [5000,5001]),16012,ifelse((prevstateno = [5070,5071]),16014,16013))
ctrl = 0

[State 16010]
type = pause;画面上の全てのスプライト、キャラクター、背景を止める
trigger1 = time = 0
time = 2    ;停止時間

[State 16010, Effect]
type = AssertSpecial
trigger1 = NumExplod(20035)
flag = NoFG   ;背景の手前のレイヤーを非表示にします
flag2 = NoBG  ;背景を非表示にします。

[State 16010, 仮面]
type = Explod      
trigger1 = time = 0
id = 20035
postype = left
pos = 0,0   ;0,239
anim = 16011
sprpriority = -1
ownpal = 0
bindtime = -1
pausemovetime = 999999
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
removetime = 10
;scale = 0.785,0.75    ;0.833,1.07

[State 16010]
type = PlaySnd
trigger1 = time = 0
value = 6, 4     ;ﾊﾞﾘｰﾝ

[State 16010]  
type = varset  
trigger1 = time = 0       
var(49) = 0

[State 16010];スタンド発現不可にする。
type = varset
trigger1 = time = 0
trigger1 = var(7) = 0
var(7) = 1

[State 16010];しびれ→消滅のｱﾆﾒ
type = Explod
trigger1 = time = 0
anim = 16010
postype = p1
pos = 10,0
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
sprpriority = 0

[State 16010, 音を鳴らす]
type = PlaySnd
trigger1 = time = 28
value = 100, 1     ;ｽﾀﾝﾄﾞ消滅

[State 16010];しびれのあと、ﾋｯﾄﾊﾞｯｸとかの値をもっかいｾｯﾄする
type = Velset
trigger1 = AnimElem = 35
x = gethitvar(xvel)*facing
y = gethitvar(yvel)
persistent = 0

[State 16010];うちあげ系を食らってｸﾗｯｼｭしてた場合
type = ChangeState
trigger1 = GetHitVar(yvel) != 0      ;上に浮く攻撃くらった時で、
trigger1 = prevstateno != [5070,5071];足払いじゃないとき
trigger1 = AnimElem = 35             ;velSetと同じﾀｲﾐﾝｸﾞで
value = 5050                         ;吹っ飛びｽﾃｰﾄへ。

[State 16010];足払いを食らって
type = ChangeState
trigger1 = prevstateno = [5070,5071]
trigger1 = AnimElem = 35
value = 5071;足払いでこけるｽﾃｰﾄへ
ctrl = 1;これはいらないかも。

[State 16010];立ちアニメに変更
type = Changeanim      ;同じく
trigger1 = statetype = S
trigger1 = time = 0
value = 16012

[State 16010];たち
type = ChangeState      ;しびれｱﾆﾒが終わってから立ちに移行する
trigger1 = AnimTime = 0 ;5000や5001はvel0,0設定なのでとまってしまうから。
trigger1 = statetype = S
trigger1 = GetHitVar(yvel) = 0      ;上に浮く攻撃じゃない場合
value = 0
ctrl = 1

[State 16010];しゃがみ
type = ChangeState      ;同じく
trigger1 = statetype = C
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------------------------------------
;スタンドクラッシュ空中
[Statedef 16011]
type    = A ;air
movetype= H ;hit状態
physics = N ;重力も摩擦もかかりません
velset = 0,0;ぴたっと止まる。
anim = 16014
ctrl = 0

[State 16011]
type = pause;画面上の全てのスプライト、キャラクター、背景を止める
trigger1 = time = 0
time = 2    ;停止時間

[State 16011, Effect]
type = AssertSpecial
trigger1 = NumExplod(20035)
flag = NoFG   ;背景の手前のレイヤーを非表示にします
flag2 = NoBG  ;背景を非表示にします。

[State 16011, 仮面];Explodのleftは左上が原点、helperは左下っぽい。
type = Explod      ;いや違うような。。
trigger1 = time = 0
id = 20035
postype = left
pos = 0,0   ;0,239
anim = 16011
sprpriority = -1
ownpal = 0
bindtime = -1
pausemovetime = 999999
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
removetime = 10
;scale = 0.785,0.75    ;0.833,1.07

[State 16010]
type = PlaySnd
trigger1 = time = 0
value = 6, 4     ;ﾊﾞﾘｰﾝ

[State 16011]  ;-2でｸﾗｯｼｭ時(1)=0にしてるから別にいらんとは思う。
type = varset  ;ってたのに、これ必須です！ここで即(1)=0にする！
trigger1 = time = 0       ;じゃないとこのｽﾃｰﾄがｴﾝﾄﾞﾚｽで発動ｗ
var(1) = 0

[State 16011];スタンド発現不可にする。
type = varset
trigger1 = time = 0
trigger1 = var(7) = 0
var(7) = 1

[State 16011];しびれ→消滅のｱﾆﾒ
type = Explod
trigger1 = time = 0
anim = 16010
postype = p1
pos = 10,0
removeongethit = 1;1にすると、プレイヤーが攻撃を受けた場合、消滅します
sprpriority = 0

[State 16011, 音を鳴らす]
type = PlaySnd
trigger1 = time = 28
value = 3, 12     ;ｽﾀﾝﾄﾞ消滅

[State 16011];しびれのあと、ﾋｯﾄﾊﾞｯｸとかの値をもっかいｾｯﾄする
type = Velset
trigger1 = AnimElem = 35
x = gethitvar(xvel)*facing
y = gethitvar(yvel)
persistent = 0

[State 16011];重力をかける
type = Gravity
trigger1 = Time >= 35;現在のステートに移行して48フレーム後
trigger1 = 1         ;ずっと

[State 16011];ふっとば
type = ChangeAnim
trigger1 = AnimElem = 35
value = 5030

[State 16011];されるよ。ｱﾆﾒを変える。
type = ChangeAnim
trigger1 = anim = 5030
trigger1 = animTime = 0
value = 5050

;physics = N ;重力も摩擦もかかりません
;のままなので(Airではないので)、着地ｽﾃｰﾄがいります。

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = CanRecover   ;ﾘｶﾊﾞｰ可でﾘｶﾊﾞｰ入力したらﾘｶﾊﾞｰ
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
trigger1 = CanRecover   ;おなじく
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6];吹っ飛び後地面に激突
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5050+var(1),5059+var(1)]) || (anim = [5061+var(1),5069+var(1)]), 0, 25)
trigger1 = var(1) = 0
value = 5100 ;HIT_BOUNCE;吹っ飛び後地面に激突

;--------------------------------------------------------------------------

;ヘルパーのヘルパーで上3つのﾒｯｾｰｼﾞｱｲｺﾝを。

;STAND ON!の表示。ヘルパーでやります
[Statedef 20026]
type = S
sprpriority = 3
anim = 29999

[State 20026, 0];消えてる
type = Explod
trigger1 = time = 0
id = 20026
pos = -90,70
;30,70までもってく
postype = back
;自分が背を向けている方向の画面上端。画面中央方向が正数
anim = ifelse(facing=1,20026,20027)
ownpal = 1
ontop = 1
bindtime = -1
scale = 0.5,0.5
facing = facing 

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20026)
Id = 20026
postype = back
;自分が背を向けている方向の画面上端。画面中央方向が正数
pos = ceil(-90+(time*8)),70;ceil切り上げ整数化
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20026)
trigger1 = time = 60
trigger2 = NumHelper(20036);STAND CRUSH!
trigger3 = NumHelper(20030);DANGER!
ID = 20026

[State 20026, 0]
type = DestroySelf
trigger1 = time = 60
;-------------------------------------------------
;STAND CRUSH!ヘルパー
[Statedef 20028]
type = S
sprpriority = -2
anim = 29999

[State 20026, 0];きえてる
type = Explod
trigger1 = time = 0
id = 20036
pos = -90,70
postype = back
anim = ifelse(facing=1,20036,20037)
ownpal = 1
ontop = 1
sprpriority = -2
bindtime = -1
scale = 0.5,0.5
facing = facing

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20036)
Id = 20036
postype = back
pos = ceil(-90+(time*8)),70
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20036)
trigger1 = time = 62
ID = 20036

[State 20026, 0]
type = DestroySelf
trigger1 = time = 62

;-------------------------------------------------
;DANGER!ヘルパー
[Statedef 20030]
type = S
sprpriority = -2
anim = 29999

[State 20026, 0];きえてる
type = Explod
trigger1 = time = 0
id = 20030
pos = -90,70
postype = back
anim = ifelse(facing=1,20038,20039)
ownpal = 1
ontop = 1
sprpriority = -2
bindtime = -1
scale = 0.5,0.5
facing = facing

[State 20026, 0];でてくる
type = ModifyExplod
trigger1 = time >= 0 && time <= 15
trigger1 = Numexplod(20030)
Id = 20030
postype = back
pos = ceil(-90+(time*8)),70
facing = facing

[State 20026, 0]
type = RemoveExplod
triggerall = Numexplod(20030)
trigger1 = time = 60
trigger2 = NumHelper(20028);STAND CRUSH!
ID = 20030

[State 20026, 0]
type = DestroySelf
trigger1 = time = 60
;---------------------------------------------------------------------------
;ガード受付 
;===========================================================================
; 常時監視ステート（－２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000～5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------
[Statedef -2]
   
[state 0]
type = stopsnd
trigger1 = stateno != 13500
trigger1 = stateno != 11500
channel = 8

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(50) = 1

[State ]
type = Helper
trigger1 = numtarget(11001)
trigger1 = target(11001),stateno = 6665 && target(11001),time = 1
Postype = P2
id = 2605
stateno = 2605
pausemovetime = 9999999999999999
supermovetime = 9999999999999999
ignorehitpause = 1

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(30) = 0

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
fvar(10) = 1

[State -2, Final Dampen]
type = null
trigger1 = (fvar(11) := cond(fvar(10)>0.1,fvar(10),0.1)) || 1
ignorehitpause = 1

[State -2, Dampener itself]
type = Attackmulset
trigger1 = 1
value = fvar(11)
ignorehitpause = 1

[State -1, DTCB]
type = displaytoclipboard
trigger1 = 1
text = "Damage Dampener: %f"
params = fvar(11)
ignorehitpause = 1

[State -2, P2 Recovery]
type= targetstate
trigger1= numtarget(555)


trigger1= (target(555), stateno=5020) && (target(555), alive) && (target(555), hitfall)
ID= 555
value= 5085
ignorehitpause= 1

[State -2, P2 Facing]
type= targetfacing
trigger1= movecontact=1 && numtarget=1
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause= 1

[State -3, Prevent Crossup]
type = width
trigger1 = movetype != H
edge = 8, 0
ignorehitpause = 1

[State -3, Prevent Undergound Juggles by POTS]
type= targetbind
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID)
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y)
ignorehitpause= 1

[State -3, Corner Push Reset]
type= varset
trigger1= fvar(6)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
trigger2 = numhelper(10000) = 1
trigger2 = helper(10000), stateno = [4000,4667]
fvar(6)= 0

[State -3, Corner Push Initial Vel]
type= varset
trigger1= movecontact=1 && numtarget
fvar(6) = (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push Apply]
type= posadd
triggerall = stateno != 700
triggerall = fvar(6)
triggerall = (statetype = S || statetype = C) && numtarget
triggerall = !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall = (target, statetype = S || target, statetype = C) && !(target, gethitvar(yvel)) && !(target, hitfall)
trigger1 = target, frontedgebodydist <= abs(target, vel x)
trigger1 = (target, gethitvar(xvel) * target, facing) > 0
trigger2 = target, backedgebodydist <= abs(target, vel x)
trigger2 = (target, gethitvar(xvel) * target, facing) < 0
x = ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(6)

[State -3, Corner Push Friction]
type= varset
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(6) = fvar(6)*0.85

[State -2]
type = helper
trigger1 = Anim = [130,132];ガード受付。
trigger1 = numhelper(7777) = 0
;ｽﾀﾝﾄﾞﾓｰﾄﾞの時は10130のｱﾆﾒなので。
helpertype = normal
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
;（しゃがみなら30、そうでなければ0）を足す。
sprpriority = 2
ownpal = 1
stateno = 7777
id = 7777
size.xscale = 1
size.yscale = 1

[State -2]
type = helper
trigger1 = numhelper(7778) = 0
trigger1 = Anim = [150,155];ガード硬直
helpertype = normal
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
sprpriority = 2
ownpal = 1
stateno = 7778
id = 7778
size.xscale = 1
size.yscale = 1
    
;--------------------------------------------------------------------------
[State 0];空中無駄無駄制限解除
type = varset
trigger1 = statetype != A
trigger2 = movetype = H
var(32) = 0

[State -3];キックリセット
type = varset
trigger1 = stateno != 11900
trigger1 = stateno != 11901
var(37) = 0
;---------------------------------------------------------------------------
[State -2];GEの絵をｼﾞｮﾙﾉに戻す
type = varset
var(49) = 0
trigger1 = var(49);ｽﾀﾝﾄﾞonかつ
trigger1 = alive = 0       ;死んだ時かつ
trigger1 = animTime = 0    ;やられた瞬間のｱﾆﾒが終わってから!
;つまり、ふっとび開始→ふっとび　になる時に消し、ｼﾞｮﾙﾉに戻す。
;その後、var(49) = 0を認識してｼﾞｮﾙﾉの絵が消える。

trigger2 = var(49) && movetype = H;ｽﾀﾝﾄﾞonかつ
trigger2 = stateno != 0
trigger2 = stateno != [10,12]
trigger2 = stateno != [20,21]
trigger2 = stateno != 40
trigger2 = stateno != 120
trigger2 = stateno != [130,132]
trigger2 = stateno != 140
trigger2 = stateno != [150,155]
trigger2 = stateno != [5000,5001]
trigger2 = stateno != [5010,5011]
trigger2 = stateno != 5020
trigger2 = stateno != 5030
trigger2 = stateno != 5035
trigger2 = stateno != 5040
trigger2 = stateno != 5050
trigger2 = stateno != [5070,5071]
trigger2 = stateno != [5080,5081]
trigger2 = stateno != [5100,5101]
trigger2 = stateno != 5110
trigger2 = stateno != 5120
trigger2 = stateno != 5150
trigger2 = stateno != [5200,5201]
trigger2 = stateno != 5210
trigger2 = stateno != [15000,15001]
trigger2 = stateno != [15010,15011]
trigger2 = stateno != 15020
trigger2 = stateno != 15030
trigger2 = stateno != 15035
trigger2 = stateno != 15040
trigger2 = stateno != 15050
trigger2 = stateno != [15070,15071]
trigger2 = stateno != [15080,15081]
trigger2 = stateno != [15100,15101]
trigger2 = stateno != 15110
trigger2 = stateno != 15120
trigger2 = stateno != 15150
trigger2 = stateno != [15200,15201]
trigger2 = stateno != 15210
trigger2 = stateno != [14000,14005]
;ヒット状態、かつ、やられｺﾓﾝｽﾃｰﾄ以外のとき。つまり、相手にｽﾃｰﾄ奪われた時
;投げ終わりにSelfStateでｺﾓﾝやられｽﾃｰﾄに返されるが、相手先で参照するDefは[5000,5210]ではない！落ち着いて考えろ
;ちなみにｽﾀﾝﾄﾞｸﾗｯｼｭのｽﾃｰﾄは16010あたり。
;つまり、ヒット状態、かつ、やられｺﾓﾝｽﾃｰﾄ以外のときに含まれる。

trigger2 = movetype = H && anim != [15000,15210]
;さらに、ｺﾞｰﾙﾄﾞｴｸｽﾍﾟﾘｴﾝｽのｱﾆﾒ以外に変更された時に。
;こうすることでDIOの時止めな感じの投げに対応できた。
;---------------------------------------------------------------------------
[State -2,];ガード不可。
type = AssertSpecial
trigger1 = NumHelper(10000) = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
;---------------------------------------------------------------------------
[State -2,];ﾊﾞｸﾞったとき用。
type = DestroySelf
trigger1 = NumHelper(2) = 1
trigger1 = helper(2),stateno = 0
;---------------------------------------------------------------------------
;敗北
[State -2]
type = Helper
trigger1 = enemynear,stateno = [2000,4999]
trigger1 = TeamMode = single;シングル
trigger1 = RoundState = 3 && LoseKO = 1 && NumHelper(20054) = 0
;RoundState	3: Pre-over - 決着がついた瞬間
;LoseKO		そのラウンドで負けた場合、1を返します
ID = 20054
pos = 0,0
stateno = 20054
ownpal = 1

;KO勝利時集中線と音
[State -2]
type = Helper
trigger1 = TeamMode = single;シングル
trigger1 = RoundState = 3 && WinKO && NumHelper(20053) = 0
ID = 20053
pos = 0,0
stateno = 20053
ignorehitpause = 1;とるすと、ヒット停止時間を無視
ownpal = 1

[State -2]
type = AssertSpecial
trigger1 = winko   ;勝ったとき
flag = nobardisplay;ゲージ類を非表示にします。
ignorehitpause = 1

;WIN
[State -2, 0]
type = helper
triggerall = !Numhelper(20050)
triggerall = stateno = 180    ;勝利ポーズ分岐
trigger1 = Teamside=1 || Teamside=2  ; || は、もしくは
id = 20050
stateno = 20050
pos = ifelse(Teamside=1,-110,290),-130
postype = left
ownpal = 1
sprpriority = 10
pausemovetime = 9999
size.xscale = 0.9
size.yscale = 0.9

;to be continued
[State -2, 0]
type = helper
trigger1 = !NumHelper(20051)
trigger1 = stateno = 180            ;勝利ポーズ分岐
trigger1 = Teamside=1 || Teamside=2 ; || は、もしくは
trigger1 = matchover                ;ﾗｳﾝﾄﾞ取って、試合が終わったとき。
stateno = 20051
id = 20051
pos = ifelse(Teamside=1,290,-150),20
postype = left
ownpal = 1
ontop = 1
pausemovetime = 9999
;---------------------------------------------------------------------------
;削り無効
[state -2, life]
type = LifeAdd
triggerall = var(49) ;ｽﾀﾝﾄﾞon
triggerall = var(31) - Life > 0
trigger1 = stateno = 120      ;ガード開始＆準備
trigger2 = stateno = [130,132];ガード受付
trigger3 = stateno = 140      ;ガード終了
trigger4 = stateno = [150,155];ガード硬直
value = var(31)-Life
;微妙に数ﾌﾚｰﾑの差があるのか、(ｶﾞｰﾄﾞ前の体力)-(ｶﾞｰﾄﾞ後)になる。
;これを回復させることで実質、削り無効となる。
ignorehitpause = 1

[State -2,]
type = VarSet
trigger1 = 1
var(31) = life ;プレイヤーの現体力を返します。
ignorehitpause = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;スタンド被ダメ時
[state -3, end]
type = changestate
triggerall = stateno != [15000,15999]
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 1020
trigger1 = !helper(10000),time
trigger1 = statetype = S
value = 15000
ctrl = 0
[state -3, end]
type = changestate
triggerall = stateno != [15000,15999]
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 1020
trigger1 = !helper(10000),time
trigger1 = statetype = C
value = 15010
ctrl = 0
[state -3, end]
type = changestate
triggerall = stateno != [15000,15999]
triggerall = numhelper(10000)
trigger1 = helper(10000),stateno = 1020
trigger1 = !helper(10000),time
trigger1 = statetype = A
value = 15020
ctrl = 0
;---------------------------------------------------------------------------
;空中ジャンプ回数リセット
[State -2]
type = VarSet
trigger1 = statetype != A
;trigger1 = var(4) = 0
var(4) = 1
;---------------------------------------------------------------------------
[State -2];ヘルパーやろう
type = helper
trigger1 = var(46) = 1
trigger1 = time = 0  
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 5657
ownpal = 1
;---------------------------------------------------------------------------
;ポーズ認識用
[state -2, var]
type = varset
trigger1 = 1
var(39) = 0
;---------------------------------------------------------------------------
[State -2];ちょっとまｽﾀﾝﾄﾞoffれないようにする
type = varset
trigger1 = var(2) = 1
trigger1 = time >= 40
var(2) = 0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;補正
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
 
;---------------------------------------------------------------------------

[State -2];ｽﾀﾝﾄﾞonの時ｼﾞｮﾙﾉを表示させます
;-2でﾍﾙﾊﾟｰ出してるから投げられた時もｼﾞｮﾙﾉを消せる。たぶん
type = Helper
trigger1 = Var(49) = 10000  ;ｽﾀﾝﾄﾞonかつ
trigger1 = NumHelper(1) = 0 ;このﾍﾙﾊﾟｰが出てない時
helpertype = normal
stateno = 10000
id = 1
pos = 0,0
postype = p1
ownpal = 0
keyctrl = 0
pausemovetime = 999999;Pause無視時間 (int)
supermovetime = 0

[State -2];ｽﾀﾝﾄﾞonの時ｼﾞｮﾙﾉを表示させます
;-2でﾍﾙﾊﾟｰ出してるから投げられた時もｼﾞｮﾙﾉを消せる。たぶん
type = Helper
trigger1 = Var(49) = 40000  ;ｽﾀﾝﾄﾞonかつ
trigger1 = NumHelper(1) = 0 ;このﾍﾙﾊﾟｰが出てない時
helpertype = normal
stateno = 100000
id = 1
pos = 0,0
postype = p1
ownpal = 0
keyctrl = 0
pausemovetime = 999999;Pause無視時間 (int)
supermovetime = 0

;---------------------------------------------------------------------------
[State -2];影消す
type = AssertSpecial
trigger1 = var(49) = 10000;Sonのとき。は自分はｺﾞｰﾙﾄﾞｴｸｽﾍﾟﾘｴﾝｽだから、
trigger2 = var(49) = 40000;Sonのとき。は自分はｺﾞｰﾙﾄﾞｴｸｽﾍﾟﾘｴﾝｽだから、
flag = noshadow           ;自分の影を非表示にします
ignorehitpause = 1
 
;---------------------------------------------------------------------------
; ここから下は-3のステートを書いてください、ここに書いたものはゲーム中
; に条件が成立すればいつでも開始するステートです。
;---------------------------------------------------------------------------
[Statedef -3]

;---------------------------------------------------------------------------
;-AIフラグ-
[State -3, AIフラグセット]
type = VarSet
triggerall = !var(58) 
triggerall = RoundState = [1,2]
trigger2 = Command = "AI_01"
trigger3 = Command = "AI_02"
trigger4 = Command = "AI_03"
trigger5 = Command = "AI_04"
trigger6 = Command = "AI_05"
trigger7 = Command = "AI_06"
trigger8 = Command = "AI_07"
trigger9 = Command = "AI_08"
trigger10 = Command = "AI_09"
trigger11 = Command = "AI_10"
trigger12 = Command = "AI_11"
trigger13 = Command = "AI_12"
trigger14 = Command = "AI_13"
trigger15 = Command = "AI_14"
trigger16 = Command = "AI_15"
trigger17 = Command = "AI_16"
trigger18 = Command = "AI_17"
trigger19 = Command = "AI_18"
trigger20 = Command = "AI_19"
trigger21 = Command = "AI_20"
trigger22 = Command = "AI_21"
trigger23 = Command = "AI_22"
trigger24 = Command = "AI_23"
trigger25 = Command = "AI_24"
trigger26 = Command = "AI_25"
trigger27 = Command = "AI_26"
trigger28 = Command = "AI_27"
trigger29 = Command = "AI_28"
trigger30 = Command = "AI_29"
trigger31 = Command = "AI_30"
trigger32 = Command = "AI_31"
trigger33 = Command = "AI_32"
trigger34 = Command = "AI_33"
trigger35 = Command = "AI_34"
trigger36 = Command = "AI_35"
trigger37 = Command = "AI_36"
trigger38 = Command = "AI_37"
trigger39 = Command = "AI_38"
trigger40 = Command = "AI_39"
trigger41 = Command = "AI_40"
trigger42 = Command = "AI_41"
trigger43 = Command = "AI_42"
trigger44 = Command = "AI_43"
trigger45 = Command = "AI_44"
trigger46 = Command = "AI_45"
trigger47 = Command = "AI_46"
trigger48 = Command = "AI_47"
trigger49 = Command = "AI_48"
trigger50 = Command = "AI_49"
trigger51 = Command = "AI_50"
trigger52 = Command = "AI_51"
trigger53 = Command = "AI_52"
trigger54 = Command = "AI_53"
trigger55 = Command = "AI_54"
trigger56 = Command = "AI_55"
trigger57 = Command = "AI_56"
trigger58 = Command = "AI_57"
trigger59 = Command = "AI_58"
trigger1 = Command = "AI_59"
Trigger61 = Helper(20000),var(59)
;trigger62 = RoundState = 2  ;常時AI起動トリガー　
var(59) = 1

[state -3, AIレベル]
type = VarSet
trigger1 = var(59) = 1
trigger1 = roundstate = 2
v = 58	
Value =11 ;1～11の値で変更

[state -3, しゃがみガード]
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2  
trigger1 = (stateno = [50000,50020])
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype != A
value = 152

[state -3, 立ちガード]
type = ChangeState 
triggerall = numhelper(10000) = 0
triggerall = var(59) = 1 && RoundState = 2 
trigger1 = (stateno = [50000,50020])
trigger1 = enemynear,movetype = A
trigger1 = InGuardDist
trigger1 = enemynear,statetype = A
value = 150

;スタンドゲージ本体ヘルパー
[State -3]
type = Helper
trigger1 = !NumHelper(20032)
trigger1 = roundstate = 2
stateno = 20032
id = 20032
pos = 160,255
postype = Back
pausemovetime = 9999999999
sprpriority = -10

;ゲージ量初期化
[State -3]
type = Varset
;trigger1 = fvar(1) != 80
trigger1 = roundstate = 0 || roundstate = 1
fv = 1
value = 80
;　0: Pre-intro　- 試合前、画面がフェードインしている状態です。
;　1: Intro　- 登場モーション中です。
;「||」は、どちらかの条件が満たされたとき

;スタンドパワー減少させる（食らい）
[State -3]
type = Varadd
trigger1 = stateno != 150 &&  stateno != 152 && stateno != 154
;↑ガーキャン以外ってことかなぁ？
trigger1 = var(49) = 10000
trigger1 = roundstate = 2 ;バトル中
trigger1 = alive          ;生きてる
trigger1 = movetype = H   ;喰らい状態
trigger1 = fvar(1) != 0   ;ゲージが０じゃない
trigger1 = time = 0
trigger1 = hitshakeover = 0;ヒットシェイク中
fv = 1
value = -(gethitvar(damage)/4)
ignorehitpause = 1

[State -3]
type = Varadd
trigger1 = stateno != 150 &&  stateno != 152 && stateno != 154
;↑ガーキャン以外ってことかなぁ？
trigger1 = var(49) = 40000
trigger1 = roundstate = 2 ;バトル中
trigger1 = alive          ;生きてる
trigger1 = movetype = H   ;喰らい状態
trigger1 = fvar(1) != 0   ;ゲージが０じゃない
trigger1 = time = 0
trigger1 = hitshakeover = 0;ヒットシェイク中
fv = 1
value = -(gethitvar(damage)/8)
ignorehitpause = 1

;スタンドパワー減少させる←ガーキャンのとき？
[State -3]
type = Varadd
trigger1 = stateno = 150 ||  stateno = 152 || stateno = 154
trigger1 = var(49)  
trigger1 = roundstate = 2
trigger1 = alive
trigger1 = fvar(1) != 0
trigger1 = time = 0
trigger1 = hitshakeover = 0
fv = 1
value = -gethitvar(damage)/4
ignorehitpause = 1
 
;スタンドクラッシュ（地上）
[State -3]
type = ChangeState 
trigger1 = var(49) 
trigger1 = fvar(1) <= 0   ;ｹﾞｰｼﾞが０以下になった時
value = 16010
ignorehitpause = 1

;スタンドクラッシュ（空中）
[State -3]
type = ChangeState 
trigger1 = var(49)  
trigger1 = fvar(1) <= 0
trigger1 = statetype = A
value = 16011
ignorehitpause = 1

;本体モード時、スタンドパワー回復
[State -3]
type = VarAdd
trigger1 = var(49) = 0
trigger1 = fvar(1) < 80
trigger1 = stateno != 16010;地上ｽﾀﾝﾄﾞｸﾗｯｼｭの時は回復しない
;空中もいれないと
fv = 1
value = 0.51

;最大値固定
[State -3]
type = VarSet
trigger1 = fvar(1) > 80
fv = 1
value = 80

;最小値固定
[State -3]
 type = VarSet
trigger1 = fvar(1) < 0
fv = 1
value = 0

;スタンド発現可にする。リセット
[State -3, 0]
type = varset
trigger1 = fvar(1) >= 80
var(7) = 0
;-----------------------------------
[State -3, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(500000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(59)=0
Trigger1=(PrevStateNo=[190,194])||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=500000
ID=500000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(500000)
trigger1= stateno!=500000
value=500000
;-------------------------------------------------------------------------
;AI起動用ヘルパー
[Statedef 500000]
anim=29999;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 40005]
type = assertspecial
trigger1 = 1
flag = invisible

[State 40005]
type = NotHitBy
value = SCA
trigger1 = 1
;----------------------------------------------------------------------------------
; AIフラグセット
;----------------------------------------------------------------------------------
[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 10000,ﾌﾗｸﾞON]
type=parentvarset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1